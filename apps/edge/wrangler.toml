name = "babybook-edge"
main = "src/index.ts"
compatibility_date = "2024-07-11"
logpush = true

# =============================================================================
# Routes
# =============================================================================

# Production routes (uncomment when deploying)
# routes = [
#   { pattern = "cdn.babybook.com.br/*", zone_name = "babybook.com.br" }
# ]

# =============================================================================
# Environment Variables (Non-Secret)
# =============================================================================

[vars]
API_BASE_URL = "https://api.babybook.dev"

# =============================================================================
# Secrets (Configure via wrangler CLI)
# =============================================================================
# 
# Run these commands to set secrets:
#
# npx wrangler secret put B2_ACCESS_KEY_ID
# npx wrangler secret put B2_SECRET_ACCESS_KEY
# npx wrangler secret put B2_BUCKET_NAME
# npx wrangler secret put B2_ENDPOINT
# npx wrangler secret put JWT_SECRET
#
# Example values:
# B2_ACCESS_KEY_ID: Your Backblaze keyID
# B2_SECRET_ACCESS_KEY: Your Backblaze applicationKey
# B2_BUCKET_NAME: bb-production-v1
# B2_ENDPOINT: s3.us-east-005.backblazeb2.com
# JWT_SECRET: Same secret used in FastAPI backend

# =============================================================================
# Development Environment
# =============================================================================

[env.dev]
name = "babybook-edge-dev"

[env.dev.vars]
API_BASE_URL = "http://localhost:8000"

# Dev secrets (for local development with wrangler dev --local)
# Create a .dev.vars file with:
# B2_ACCESS_KEY_ID=your-dev-key
# B2_SECRET_ACCESS_KEY=your-dev-secret
# B2_BUCKET_NAME=bb-dev-v1
# B2_ENDPOINT=s3.us-east-005.backblazeb2.com
# JWT_SECRET=dev-secret-key

# =============================================================================
# Staging Environment
# =============================================================================

[env.staging]
name = "babybook-edge-staging"

[env.staging.vars]
API_BASE_URL = "https://api.staging.babybook.dev"

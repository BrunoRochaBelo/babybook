name = "babybook-edge"
main = "src/index.ts"
compatibility_date = "2024-07-11"
logpush = true

# =============================================================================
# Routes
# =============================================================================

# Production routes (uncomment when deploying)
# routes = [
#   { pattern = "cdn.babybook.com.br/*", zone_name = "babybook.com.br" }
# ]

# =============================================================================
# Environment Variables (Non-Secret)
# =============================================================================

[vars]
API_BASE_URL = "https://api.babybook.dev"

# =============================================================================
# Secrets (Configure via wrangler CLI)
# =============================================================================
# 
# Run these commands to set secrets:
#
# npx wrangler secret put R2_ACCESS_KEY_ID
# npx wrangler secret put R2_SECRET_ACCESS_KEY
# npx wrangler secret put R2_BUCKET_NAME
# npx wrangler secret put R2_ACCOUNT_ID
# npx wrangler secret put JWT_SECRET
#
# Example values:
# R2_ACCESS_KEY_ID: Your R2 access key id
# R2_SECRET_ACCESS_KEY: Your R2 secret access key
# R2_BUCKET_NAME: bb-production-v1
# R2_ACCOUNT_ID: Your Cloudflare account id
# JWT_SECRET: Same secret used in FastAPI backend

# =============================================================================
# Development Environment
# =============================================================================

[env.dev]
name = "babybook-edge-dev"

[env.dev.vars]
API_BASE_URL = "http://localhost:8000"

# Dev secrets (for local development with wrangler dev --local)
# Create a .dev.vars file with:
# R2_ACCESS_KEY_ID=your-dev-key
# R2_SECRET_ACCESS_KEY=your-dev-secret
# R2_BUCKET_NAME=bb-dev-v1
# R2_ACCOUNT_ID=your-account-id
# JWT_SECRET=dev-secret-key

# =============================================================================
# Staging Environment
# =============================================================================

[env.staging]
name = "babybook-edge-staging"

[env.staging.vars]
API_BASE_URL = "https://api.staging.babybook.dev"

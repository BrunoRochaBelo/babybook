var WI=Object.defineProperty;var GI=(e,t,i)=>t in e?WI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var q0=(e,t,i)=>GI(e,typeof t!="symbol"?t+"":t,i);(function(){"use strict";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */lodash.exports,function(e,t){(function(){var i,o="4.17.21",c=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",f="Invalid `variable` option passed into `_.template`",p="__lodash_hash_undefined__",r=500,u="__lodash_placeholder__",l=1,h=2,y=4,I=1,S=2,A=1,V=2,N=4,B=8,te=16,ve=32,St=64,Ye=128,et=256,pe=512,rt=30,Vo="...",_t=800,$t=16,We=1,Ze=2,Ue=3,Dt=1/0,Ut=9007199254740991,cr=17976931348623157e292,er=NaN,gt=4294967295,fr=gt-1,mt=gt>>>1,Kr=[["ary",Ye],["bind",A],["bindKey",V],["curry",B],["curryRight",te],["flip",pe],["partial",ve],["partialRight",St],["rearg",et]],Sr="[object Arguments]",sn="[object Array]",nr="[object AsyncFunction]",Ar="[object Boolean]",Gt="[object Date]",Ct="[object DOMException]",Ft="[object Error]",Cr="[object Function]",qn="[object GeneratorFunction]",qt="[object Map]",vn="[object Number]",Wo="[object Null]",In="[object Object]",La="[object Promise]",mu="[object Proxy]",Qr="[object RegExp]",jr="[object Set]",Yn="[object String]",si="[object Symbol]",yu="[object Undefined]",En="[object WeakMap]",qs="[object WeakSet]",ga="[object ArrayBuffer]",Sn="[object DataView]",Ks="[object Float32Array]",he="[object Float64Array]",xa="[object Int8Array]",ya="[object Int16Array]",Ma="[object Int32Array]",Ta="[object Uint8Array]",Ua="[object Uint8ClampedArray]",Ee="[object Uint16Array]",ba="[object Uint32Array]",Oa=/\b__p \+= '';/g,Ia=/\b(__p \+=) '' \+/g,T=/(__e\(.*?\)|\b__t\)) \+\n'';/g,k=/&(?:amp|lt|gt|quot|#39);/g,L=/[&<>"']/g,Y=RegExp(k.source),de=RegExp(L.source),Se=/<%-([\s\S]+?)%>/g,He=/<%([\s\S]+?)%>/g,Kt=/<%=([\s\S]+?)%>/g,Xr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vr=/^\w*$/,_r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ea=/[\\^$.*+?()[\]{}|]/g,Xs=RegExp(Ea.source),H=/^\s+/,yt=/\s/,At=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ui=/\{\n\/\* \[wrapped with (.+)\] \*/,Ys=/,? & /,Ug=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Bg=/[()=,{}\[\]\/\s]/,jg=/\\(\\)?/g,Ud=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qs=/\w*$/,Bd=/^[-+]0x[0-9a-f]+$/i,Ba=/^0b[01]+$/i,Zg=/^\[object .+?Constructor\]$/,zg=/^0o[0-7]+$/i,Vg=/^(?:0|[1-9]\d*)$/,Wg=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tu=/($^)/,zd=/['\n\r\u2028\u2029\\]/g,za="\\ud800-\\udfff",Gg="\\u0300-\\u036f",Vd="\\ufe20-\\ufe2f",Hg="\\u20d0-\\u20ff",Wd=Gg+Vd+Hg,Gd="\\u2700-\\u27bf",Hd="a-z\\xdf-\\xf6\\xf8-\\xff",qg="\\xac\\xb1\\xd7\\xf7",zy="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Kg="\\u2000-\\u206f",Xg=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qd="A-Z\\xc0-\\xd6\\xd8-\\xde",Yg="\\ufe0e\\ufe0f",Jg=qg+zy+Kg+Xg,bu="['’]",Vy="["+za+"]",Qg="["+Jg+"]",Ie="["+Wd+"]",Ep="\\d+",wu="["+Gd+"]",Pp="["+Hd+"]",kp="[^"+za+Jg+Ep+Gd+Hd+qd+"]",_u="\\ud83c[\\udffb-\\udfff]",Bp="(?:"+Ie+"|"+_u+")",xu="[^"+za+"]",Tu="(?:\\ud83c[\\udde6-\\uddff]){2}",Iu="[\\ud800-\\udbff][\\udc00-\\udfff]",Sa="["+qd+"]",Eu="\\u200d",nu="(?:"+Pp+"|"+kp+")",uh="(?:"+Sa+"|"+kp+")",om="(?:"+bu+"(?:d|ll|m|re|s|t|ve))?",iu="(?:"+bu+"(?:D|LL|M|RE|S|T|VE))?",ph=Bp+"?",b="["+Yg+"]?",x="(?:"+Eu+"(?:"+[xu,Tu,Iu].join("|")+")"+b+ph+")*",D="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",j="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ie=b+ph+x,se="(?:"+[wu,Tu,Iu].join("|")+")"+ie,we="(?:"+[xu+Ie+"?",Ie,Tu,Iu,Vy].join("|")+")",Lt=RegExp(bu,"g"),ci=RegExp(Ie,"g"),Yt=RegExp(_u+"(?="+_u+")|"+we+ie,"g"),en=RegExp([Sa+"?"+Pp+"+"+om+"(?="+[Qg,Sa,"$"].join("|")+")",uh+"+"+iu+"(?="+[Qg,Sa+nu,"$"].join("|")+")",Sa+"?"+nu+"+"+om,Sa+"+"+iu,j,D,Ep,se].join("|"),"g"),ey=RegExp("["+Eu+za+Wd+Yg+"]"),ty=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,X=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],It=-1,Ne={};Ne[Ks]=Ne[he]=Ne[xa]=Ne[ya]=Ne[Ma]=Ne[Ta]=Ne[Ua]=Ne[Ee]=Ne[ba]=!0,Ne[Sr]=Ne[sn]=Ne[ga]=Ne[Ar]=Ne[Sn]=Ne[Gt]=Ne[Ft]=Ne[Cr]=Ne[qt]=Ne[vn]=Ne[In]=Ne[Qr]=Ne[jr]=Ne[Yn]=Ne[En]=!1;var lt={};lt[Sr]=lt[sn]=lt[ga]=lt[Sn]=lt[Ar]=lt[Gt]=lt[Ks]=lt[he]=lt[xa]=lt[ya]=lt[Ma]=lt[qt]=lt[vn]=lt[In]=lt[Qr]=lt[jr]=lt[Yn]=lt[si]=lt[Ta]=lt[Ua]=lt[Ee]=lt[ba]=!0,lt[Ft]=lt[Cr]=lt[En]=!1;var ry={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},u_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l_={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},c_={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},d_=parseFloat,f_=parseInt,J0=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,p_=typeof self=="object"&&self&&self.Object===Object&&self,Yr=J0||p_||Function("return this")(),Wy=t&&!t.nodeType&&t,au=Wy&&!0&&e&&!e.nodeType&&e,Q0=au&&au.exports===Wy,Gy=Q0&&J0.process,di=function(){try{var F=au&&au.require&&au.require("util").types;return F||Gy&&Gy.binding&&Gy.binding("util")}catch{}}(),ev=di&&di.isArrayBuffer,tv=di&&di.isDate,rv=di&&di.isMap,nv=di&&di.isRegExp,iv=di&&di.isSet,ov=di&&di.isTypedArray;function ti(F,K,G){switch(G.length){case 0:return F.call(K);case 1:return F.call(K,G[0]);case 2:return F.call(K,G[0],G[1]);case 3:return F.call(K,G[0],G[1],G[2])}return F.apply(K,G)}function h_(F,K,G,ge){for(var ke=-1,bt=F==null?0:F.length;++ke<bt;){var Or=F[ke];K(ge,Or,G(Or),F)}return ge}function fi(F,K){for(var G=-1,ge=F==null?0:F.length;++G<ge&&K(F[G],G,F)!==!1;);return F}function g_(F,K){for(var G=F==null?0:F.length;G--&&K(F[G],G,F)!==!1;);return F}function av(F,K){for(var G=-1,ge=F==null?0:F.length;++G<ge;)if(!K(F[G],G,F))return!1;return!0}function Va(F,K){for(var G=-1,ge=F==null?0:F.length,ke=0,bt=[];++G<ge;){var Or=F[G];K(Or,G,F)&&(bt[ke++]=Or)}return bt}function ny(F,K){var G=F==null?0:F.length;return!!G&&Au(F,K,0)>-1}function Hy(F,K,G){for(var ge=-1,ke=F==null?0:F.length;++ge<ke;)if(G(K,F[ge]))return!0;return!1}function Mt(F,K){for(var G=-1,ge=F==null?0:F.length,ke=Array(ge);++G<ge;)ke[G]=K(F[G],G,F);return ke}function Wa(F,K){for(var G=-1,ge=K.length,ke=F.length;++G<ge;)F[ke+G]=K[G];return F}function qy(F,K,G,ge){var ke=-1,bt=F==null?0:F.length;for(ge&&bt&&(G=F[++ke]);++ke<bt;)G=K(G,F[ke],ke,F);return G}function m_(F,K,G,ge){var ke=F==null?0:F.length;for(ge&&ke&&(G=F[--ke]);ke--;)G=K(G,F[ke],ke,F);return G}function Ky(F,K){for(var G=-1,ge=F==null?0:F.length;++G<ge;)if(K(F[G],G,F))return!0;return!1}var y_=Xy("length");function b_(F){return F.split("")}function v_(F){return F.match(Ug)||[]}function sv(F,K,G){var ge;return G(F,function(ke,bt,Or){if(K(ke,bt,Or))return ge=bt,!1}),ge}function iy(F,K,G,ge){for(var ke=F.length,bt=G+(ge?1:-1);ge?bt--:++bt<ke;)if(K(F[bt],bt,F))return bt;return-1}function Au(F,K,G){return K===K?D_(F,K,G):iy(F,uv,G)}function w_(F,K,G,ge){for(var ke=G-1,bt=F.length;++ke<bt;)if(ge(F[ke],K))return ke;return-1}function uv(F){return F!==F}function lv(F,K){var G=F==null?0:F.length;return G?Jy(F,K)/G:er}function Xy(F){return function(K){return K==null?i:K[F]}}function Yy(F){return function(K){return F==null?i:F[K]}}function cv(F,K,G,ge,ke){return ke(F,function(bt,Or,Pt){G=ge?(ge=!1,bt):K(G,bt,Or,Pt)}),G}function __(F,K){var G=F.length;for(F.sort(K);G--;)F[G]=F[G].value;return F}function Jy(F,K){for(var G,ge=-1,ke=F.length;++ge<ke;){var bt=K(F[ge]);bt!==i&&(G=G===i?bt:G+bt)}return G}function Qy(F,K){for(var G=-1,ge=Array(F);++G<F;)ge[G]=K(G);return ge}function x_(F,K){return Mt(K,function(G){return[G,F[G]]})}function dv(F){return F&&F.slice(0,gv(F)+1).replace(H,"")}function ri(F){return function(K){return F(K)}}function jb(F,K){return Mt(K,function(G){return F[G]})}function Ah(F,K){return F.has(K)}function fv(F,K){for(var G=-1,ge=F.length;++G<ge&&Au(K,F[G],0)>-1;);return G}function pv(F,K){for(var G=F.length;G--&&Au(K,F[G],0)>-1;);return G}function T_(F,K){for(var G=F.length,ge=0;G--;)F[G]===K&&++ge;return ge}var O_=Yy(ry),I_=Yy(u_);function E_(F){return"\\"+c_[F]}function S_(F,K){return F==null?i:F[K]}function $u(F){return ey.test(F)}function A_(F){return ty.test(F)}function P_(F){for(var K,G=[];!(K=F.next()).done;)G.push(K.value);return G}function qb(F){var K=-1,G=Array(F.size);return F.forEach(function(ge,ke){G[++K]=[ke,ge]}),G}function hv(F,K){return function(G){return F(K(G))}}function Ga(F,K){for(var G=-1,ge=F.length,ke=0,bt=[];++G<ge;){var Or=F[G];(Or===K||Or===u)&&(F[G]=u,bt[ke++]=G)}return bt}function oy(F){var K=-1,G=Array(F.size);return F.forEach(function(ge){G[++K]=ge}),G}function $_(F){var K=-1,G=Array(F.size);return F.forEach(function(ge){G[++K]=[ge,ge]}),G}function D_(F,K,G){for(var ge=G-1,ke=F.length;++ge<ke;)if(F[ge]===K)return ge;return-1}function C_(F,K,G){for(var ge=G+1;ge--;)if(F[ge]===K)return ge;return ge}function Du(F){return $u(F)?R_(F):y_(F)}function Go(F){return $u(F)?k_(F):b_(F)}function gv(F){for(var K=F.length;K--&&yt.test(F.charAt(K)););return K}var N_=Yy(l_);function R_(F){for(var K=Yt.lastIndex=0;Yt.test(F);)++K;return K}function k_(F){return F.match(Yt)||[]}function F_(F){return F.match(en)||[]}var L_=function F(K){K=K==null?Yr:Fu.defaults(Yr.Object(),K,Fu.pick(Yr,X));var G=K.Array,ge=K.Date,ke=K.Error,bt=K.Function,Or=K.Math,Pt=K.Object,e0=K.RegExp,M_=K.String,No=K.TypeError,ay=G.prototype,U_=bt.prototype,tl=Pt.prototype,sy=K["__core-js_shared__"],uy=U_.toString,Et=tl.hasOwnProperty,B_=0,mv=function(){var s=/[^.]+$/.exec(sy&&sy.keys&&sy.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),ly=tl.toString,j_=uy.call(Pt),Z_=Yr._,z_=e0("^"+uy.call(Et).replace(Ea,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cy=Q0?K.Buffer:i,Ns=K.Symbol,dy=K.Uint8Array,yv=cy?cy.allocUnsafe:i,fy=hv(Pt.getPrototypeOf,Pt),bv=Pt.create,vv=tl.propertyIsEnumerable,py=ay.splice,wv=Ns?Ns.isConcatSpreadable:i,rg=Ns?Ns.iterator:i,su=Ns?Ns.toStringTag:i,hy=function(){try{var s=pu(Pt,"defineProperty");return s({},"",{}),s}catch{}}(),V_=K.clearTimeout!==Yr.clearTimeout&&K.clearTimeout,W_=ge&&ge.now!==Yr.Date.now&&ge.now,G_=K.setTimeout!==Yr.setTimeout&&K.setTimeout,gy=Or.ceil,my=Or.floor,t0=Pt.getOwnPropertySymbols,H_=cy?cy.isBuffer:i,_v=K.isFinite,q_=ay.join,K_=hv(Pt.keys,Pt),Ir=Or.max,on=Or.min,X_=ge.now,Y_=K.parseInt,xv=Or.random,J_=ay.reverse,r0=pu(K,"DataView"),ug=pu(K,"Map"),n0=pu(K,"Promise"),yd=pu(K,"Set"),xg=pu(K,"WeakMap"),Tg=pu(Pt,"create"),yy=xg&&new xg,vd={},Q_=hu(r0),e1=hu(ug),t1=hu(n0),r1=hu(yd),n1=hu(xg),by=Ns?Ns.prototype:i,Ig=by?by.valueOf:i,Tv=by?by.toString:i;function w(s){if(Qt(s)&&!Fe(s)&&!(s instanceof Qe)){if(s instanceof Ro)return s;if(Et.call(s,"__wrapped__"))return Ow(s)}return new Ro(s)}var wd=function(){function s(){}return function(d){if(!zt(d))return{};if(bv)return bv(d);s.prototype=d;var g=new s;return s.prototype=i,g}}();function vy(){}function Ro(s,d){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=i}w.templateSettings={escape:Se,evaluate:He,interpolate:Kt,variable:"",imports:{_:w}},w.prototype=vy.prototype,w.prototype.constructor=w,Ro.prototype=wd(vy.prototype),Ro.prototype.constructor=Ro;function Qe(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=gt,this.__views__=[]}function i1(){var s=new Qe(this.__wrapped__);return s.__actions__=An(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=An(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=An(this.__views__),s}function o1(){if(this.__filtered__){var s=new Qe(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function a1(){var s=this.__wrapped__.value(),d=this.__dir__,g=Fe(s),m=d<0,v=g?s.length:0,_=bx(0,v,this.__views__),P=_.start,C=_.end,M=C-P,J=m?C:P-1,Q=this.__iteratees__,ne=Q.length,ue=0,Te=on(M,this.__takeCount__);if(!g||!m&&v==M&&Te==M)return Hv(s,this.__actions__);var Pe=[];e:for(;M--&&ue<Te;){J+=d;for(var Be=-1,$e=s[J];++Be<ne;){var qe=Q[Be],ot=qe.iteratee,oi=qe.type,On=ot($e);if(oi==Ze)$e=On;else if(!On){if(oi==We)continue e;break e}}Pe[ue++]=$e}return Pe}Qe.prototype=wd(vy.prototype),Qe.prototype.constructor=Qe;function uu(s){var d=-1,g=s==null?0:s.length;for(this.clear();++d<g;){var m=s[d];this.set(m[0],m[1])}}function s1(){this.__data__=Tg?Tg(null):{},this.size=0}function u1(s){var d=this.has(s)&&delete this.__data__[s];return this.size-=d?1:0,d}function l1(s){var d=this.__data__;if(Tg){var g=d[s];return g===p?i:g}return Et.call(d,s)?d[s]:i}function c1(s){var d=this.__data__;return Tg?d[s]!==i:Et.call(d,s)}function d1(s,d){var g=this.__data__;return this.size+=this.has(s)?0:1,g[s]=Tg&&d===i?p:d,this}uu.prototype.clear=s1,uu.prototype.delete=u1,uu.prototype.get=l1,uu.prototype.has=c1,uu.prototype.set=d1;function Aa(s){var d=-1,g=s==null?0:s.length;for(this.clear();++d<g;){var m=s[d];this.set(m[0],m[1])}}function f1(){this.__data__=[],this.size=0}function p1(s){var d=this.__data__,g=wy(d,s);if(g<0)return!1;var m=d.length-1;return g==m?d.pop():py.call(d,g,1),--this.size,!0}function h1(s){var d=this.__data__,g=wy(d,s);return g<0?i:d[g][1]}function g1(s){return wy(this.__data__,s)>-1}function m1(s,d){var g=this.__data__,m=wy(g,s);return m<0?(++this.size,g.push([s,d])):g[m][1]=d,this}Aa.prototype.clear=f1,Aa.prototype.delete=p1,Aa.prototype.get=h1,Aa.prototype.has=g1,Aa.prototype.set=m1;function Pa(s){var d=-1,g=s==null?0:s.length;for(this.clear();++d<g;){var m=s[d];this.set(m[0],m[1])}}function y1(){this.size=0,this.__data__={hash:new uu,map:new(ug||Aa),string:new uu}}function b1(s){var d=Cy(this,s).delete(s);return this.size-=d?1:0,d}function v1(s){return Cy(this,s).get(s)}function w1(s){return Cy(this,s).has(s)}function _1(s,d){var g=Cy(this,s),m=g.size;return g.set(s,d),this.size+=g.size==m?0:1,this}Pa.prototype.clear=y1,Pa.prototype.delete=b1,Pa.prototype.get=v1,Pa.prototype.has=w1,Pa.prototype.set=_1;function lu(s){var d=-1,g=s==null?0:s.length;for(this.__data__=new Pa;++d<g;)this.add(s[d])}function x1(s){return this.__data__.set(s,p),this}function T1(s){return this.__data__.has(s)}lu.prototype.add=lu.prototype.push=x1,lu.prototype.has=T1;function Jo(s){var d=this.__data__=new Aa(s);this.size=d.size}function O1(){this.__data__=new Aa,this.size=0}function I1(s){var d=this.__data__,g=d.delete(s);return this.size=d.size,g}function E1(s){return this.__data__.get(s)}function S1(s){return this.__data__.has(s)}function A1(s,d){var g=this.__data__;if(g instanceof Aa){var m=g.__data__;if(!ug||m.length<c-1)return m.push([s,d]),this.size=++g.size,this;g=this.__data__=new Pa(m)}return g.set(s,d),this.size=g.size,this}Jo.prototype.clear=O1,Jo.prototype.delete=I1,Jo.prototype.get=E1,Jo.prototype.has=S1,Jo.prototype.set=A1;function Ov(s,d){var g=Fe(s),m=!g&&gu(s),v=!g&&!m&&Gs(s),_=!g&&!m&&!v&&Rd(s),P=g||m||v||_,C=P?Qy(s.length,M_):[],M=C.length;for(var J in s)(d||Et.call(s,J))&&!(P&&(J=="length"||v&&(J=="offset"||J=="parent")||_&&(J=="buffer"||J=="byteLength"||J=="byteOffset")||Na(J,M)))&&C.push(J);return C}function Iv(s){var d=s.length;return d?s[h0(0,d-1)]:i}function P1(s,d){return Ny(An(s),cu(d,0,s.length))}function $1(s){return Ny(An(s))}function i0(s,d,g){(g!==i&&!ia(s[d],g)||g===i&&!(d in s))&&$a(s,d,g)}function Eg(s,d,g){var m=s[d];(!(Et.call(s,d)&&ia(m,g))||g===i&&!(d in s))&&$a(s,d,g)}function wy(s,d){for(var g=s.length;g--;)if(ia(s[g][0],d))return g;return-1}function D1(s,d,g,m){return Ms(s,function(v,_,P){d(m,v,g(v),P)}),m}function Ev(s,d){return s&&wa(d,Zr(d),s)}function C1(s,d){return s&&wa(d,jn(d),s)}function $a(s,d,g){d=="__proto__"&&hy?hy(s,d,{configurable:!0,enumerable:!0,value:g,writable:!0}):s[d]=g}function o0(s,d){for(var g=-1,m=d.length,v=G(m),_=s==null;++g<m;)v[g]=_?i:U0(s,d[g]);return v}function cu(s,d,g){return s===s&&(g!==i&&(s=s<=g?s:g),d!==i&&(s=s>=d?s:d)),s}function Mo(s,d,g,m,v,_){var P,C=d&l,M=d&h,J=d&y;if(g&&(P=v?g(s,m,v,_):g(s)),P!==i)return P;if(!zt(s))return s;var Q=Fe(s);if(Q){if(P=wx(s),!C)return An(s,P)}else{var ne=an(s),ue=ne==Cr||ne==qn;if(Gs(s))return Xv(s,C);if(ne==In||ne==Sr||ue&&!v){if(P=M||ue?{}:gw(s),!C)return M?lx(s,C1(P,s)):ux(s,Ev(P,s))}else{if(!lt[ne])return v?s:{};P=_x(s,ne,C)}}_||(_=new Jo);var Te=_.get(s);if(Te)return Te;_.set(s,P),Vw(s)?s.forEach(function($e){P.add(Mo($e,d,g,$e,s,_))}):Zw(s)&&s.forEach(function($e,qe){P.set(qe,Mo($e,d,g,qe,s,_))});var Pe=J?M?I0:O0:M?jn:Zr,Be=Q?i:Pe(s);return fi(Be||s,function($e,qe){Be&&(qe=$e,$e=s[qe]),Eg(P,qe,Mo($e,d,g,qe,s,_))}),P}function N1(s){var d=Zr(s);return function(g){return Sv(g,s,d)}}function Sv(s,d,g){var m=g.length;if(s==null)return!m;for(s=Pt(s);m--;){var v=g[m],_=d[v],P=s[v];if(P===i&&!(v in s)||!_(P))return!1}return!0}function Av(s,d,g){if(typeof s!="function")throw new No(a);return Ng(function(){s.apply(i,g)},d)}function Sg(s,d,g,m){var v=-1,_=ny,P=!0,C=s.length,M=[],J=d.length;if(!C)return M;g&&(d=Mt(d,ri(g))),m?(_=Hy,P=!1):d.length>=c&&(_=Ah,P=!1,d=new lu(d));e:for(;++v<C;){var Q=s[v],ne=g==null?Q:g(Q);if(Q=m||Q!==0?Q:0,P&&ne===ne){for(var ue=J;ue--;)if(d[ue]===ne)continue e;M.push(Q)}else _(d,ne,m)||M.push(Q)}return M}var Ms=tw(va),Pv=tw(s0,!0);function R1(s,d){var g=!0;return Ms(s,function(m,v,_){return g=!!d(m,v,_),g}),g}function _y(s,d,g){for(var m=-1,v=s.length;++m<v;){var _=s[m],P=d(_);if(P!=null&&(C===i?P===P&&!ii(P):g(P,C)))var C=P,M=_}return M}function k1(s,d,g,m){var v=s.length;for(g=Me(g),g<0&&(g=-g>v?0:v+g),m=m===i||m>v?v:Me(m),m<0&&(m+=v),m=g>m?0:Gw(m);g<m;)s[g++]=d;return s}function $v(s,d){var g=[];return Ms(s,function(m,v,_){d(m,v,_)&&g.push(m)}),g}function Jr(s,d,g,m,v){var _=-1,P=s.length;for(g||(g=Tx),v||(v=[]);++_<P;){var C=s[_];d>0&&g(C)?d>1?Jr(C,d-1,g,m,v):Wa(v,C):m||(v[v.length]=C)}return v}var a0=rw(),Dv=rw(!0);function va(s,d){return s&&a0(s,d,Zr)}function s0(s,d){return s&&Dv(s,d,Zr)}function xy(s,d){return Va(d,function(g){return Ra(s[g])})}function fu(s,d){d=js(d,s);for(var g=0,m=d.length;s!=null&&g<m;)s=s[_a(d[g++])];return g&&g==m?s:i}function Cv(s,d,g){var m=d(s);return Fe(s)?m:Wa(m,g(s))}function wn(s){return s==null?s===i?yu:Wo:su&&su in Pt(s)?yx(s):$x(s)}function u0(s,d){return s>d}function F1(s,d){return s!=null&&Et.call(s,d)}function L1(s,d){return s!=null&&d in Pt(s)}function M1(s,d,g){return s>=on(d,g)&&s<Ir(d,g)}function l0(s,d,g){for(var m=g?Hy:ny,v=s[0].length,_=s.length,P=_,C=G(_),M=1/0,J=[];P--;){var Q=s[P];P&&d&&(Q=Mt(Q,ri(d))),M=on(Q.length,M),C[P]=!g&&(d||v>=120&&Q.length>=120)?new lu(P&&Q):i}Q=s[0];var ne=-1,ue=C[0];e:for(;++ne<v&&J.length<M;){var Te=Q[ne],Pe=d?d(Te):Te;if(Te=g||Te!==0?Te:0,!(ue?Ah(ue,Pe):m(J,Pe,g))){for(P=_;--P;){var Be=C[P];if(!(Be?Ah(Be,Pe):m(s[P],Pe,g)))continue e}ue&&ue.push(Pe),J.push(Te)}}return J}function U1(s,d,g,m){return va(s,function(v,_,P){d(m,g(v),_,P)}),m}function Ag(s,d,g){d=js(d,s),s=vw(s,d);var m=s==null?s:s[_a(Bo(d))];return m==null?i:ti(m,s,g)}function Nv(s){return Qt(s)&&wn(s)==Sr}function B1(s){return Qt(s)&&wn(s)==ga}function j1(s){return Qt(s)&&wn(s)==Gt}function Pg(s,d,g,m,v){return s===d?!0:s==null||d==null||!Qt(s)&&!Qt(d)?s!==s&&d!==d:Z1(s,d,g,m,Pg,v)}function Z1(s,d,g,m,v,_){var P=Fe(s),C=Fe(d),M=P?sn:an(s),J=C?sn:an(d);M=M==Sr?In:M,J=J==Sr?In:J;var Q=M==In,ne=J==In,ue=M==J;if(ue&&Gs(s)){if(!Gs(d))return!1;P=!0,Q=!1}if(ue&&!Q)return _||(_=new Jo),P||Rd(s)?fw(s,d,g,m,v,_):gx(s,d,M,g,m,v,_);if(!(g&I)){var Te=Q&&Et.call(s,"__wrapped__"),Pe=ne&&Et.call(d,"__wrapped__");if(Te||Pe){var Be=Te?s.value():s,$e=Pe?d.value():d;return _||(_=new Jo),v(Be,$e,g,m,_)}}return ue?(_||(_=new Jo),mx(s,d,g,m,v,_)):!1}function z1(s){return Qt(s)&&an(s)==qt}function c0(s,d,g,m){var v=g.length,_=v,P=!m;if(s==null)return!_;for(s=Pt(s);v--;){var C=g[v];if(P&&C[2]?C[1]!==s[C[0]]:!(C[0]in s))return!1}for(;++v<_;){C=g[v];var M=C[0],J=s[M],Q=C[1];if(P&&C[2]){if(J===i&&!(M in s))return!1}else{var ne=new Jo;if(m)var ue=m(J,Q,M,s,d,ne);if(!(ue===i?Pg(Q,J,I|S,m,ne):ue))return!1}}return!0}function Rv(s){if(!zt(s)||Ix(s))return!1;var d=Ra(s)?z_:Zg;return d.test(hu(s))}function V1(s){return Qt(s)&&wn(s)==Qr}function W1(s){return Qt(s)&&an(s)==jr}function G1(s){return Qt(s)&&Uy(s.length)&&!!Ne[wn(s)]}function kv(s){return typeof s=="function"?s:s==null?Hn:typeof s=="object"?Fe(s)?Mv(s[0],s[1]):Lv(s):n_(s)}function d0(s){if(!Cg(s))return K_(s);var d=[];for(var g in Pt(s))Et.call(s,g)&&g!="constructor"&&d.push(g);return d}function H1(s){if(!zt(s))return Px(s);var d=Cg(s),g=[];for(var m in s)m=="constructor"&&(d||!Et.call(s,m))||g.push(m);return g}function f0(s,d){return s<d}function Fv(s,d){var g=-1,m=Pn(s)?G(s.length):[];return Ms(s,function(v,_,P){m[++g]=d(v,_,P)}),m}function Lv(s){var d=S0(s);return d.length==1&&d[0][2]?yw(d[0][0],d[0][1]):function(g){return g===s||c0(g,s,d)}}function Mv(s,d){return P0(s)&&mw(d)?yw(_a(s),d):function(g){var m=U0(g,s);return m===i&&m===d?B0(g,s):Pg(d,m,I|S)}}function Ty(s,d,g,m,v){s!==d&&a0(d,function(_,P){if(v||(v=new Jo),zt(_))q1(s,d,P,g,Ty,m,v);else{var C=m?m(D0(s,P),_,P+"",s,d,v):i;C===i&&(C=_),i0(s,P,C)}},jn)}function q1(s,d,g,m,v,_,P){var C=D0(s,g),M=D0(d,g),J=P.get(M);if(J){i0(s,g,J);return}var Q=_?_(C,M,g+"",s,d,P):i,ne=Q===i;if(ne){var ue=Fe(M),Te=!ue&&Gs(M),Pe=!ue&&!Te&&Rd(M);Q=M,ue||Te||Pe?Fe(C)?Q=C:tr(C)?Q=An(C):Te?(ne=!1,Q=Xv(M,!0)):Pe?(ne=!1,Q=Yv(M,!0)):Q=[]:Rg(M)||gu(M)?(Q=C,gu(C)?Q=Hw(C):(!zt(C)||Ra(C))&&(Q=gw(M))):ne=!1}ne&&(P.set(M,Q),v(Q,M,m,_,P),P.delete(M)),i0(s,g,Q)}function Uv(s,d){var g=s.length;if(g)return d+=d<0?g:0,Na(d,g)?s[d]:i}function Bv(s,d,g){d.length?d=Mt(d,function(_){return Fe(_)?function(P){return fu(P,_.length===1?_[0]:_)}:_}):d=[Hn];var m=-1;d=Mt(d,ri(Ae()));var v=Fv(s,function(_,P,C){var M=Mt(d,function(J){return J(_)});return{criteria:M,index:++m,value:_}});return __(v,function(_,P){return sx(_,P,g)})}function K1(s,d){return jv(s,d,function(g,m){return B0(s,m)})}function jv(s,d,g){for(var m=-1,v=d.length,_={};++m<v;){var P=d[m],C=fu(s,P);g(C,P)&&$g(_,js(P,s),C)}return _}function X1(s){return function(d){return fu(d,s)}}function p0(s,d,g,m){var v=m?w_:Au,_=-1,P=d.length,C=s;for(s===d&&(d=An(d)),g&&(C=Mt(s,ri(g)));++_<P;)for(var M=0,J=d[_],Q=g?g(J):J;(M=v(C,Q,M,m))>-1;)C!==s&&py.call(C,M,1),py.call(s,M,1);return s}function Zv(s,d){for(var g=s?d.length:0,m=g-1;g--;){var v=d[g];if(g==m||v!==_){var _=v;Na(v)?py.call(s,v,1):y0(s,v)}}return s}function h0(s,d){return s+my(xv()*(d-s+1))}function Y1(s,d,g,m){for(var v=-1,_=Ir(gy((d-s)/(g||1)),0),P=G(_);_--;)P[m?_:++v]=s,s+=g;return P}function g0(s,d){var g="";if(!s||d<1||d>Ut)return g;do d%2&&(g+=s),d=my(d/2),d&&(s+=s);while(d);return g}function ze(s,d){return C0(bw(s,d,Hn),s+"")}function J1(s){return Iv(Md(s))}function Q1(s,d){var g=Md(s);return Ny(g,cu(d,0,g.length))}function $g(s,d,g,m){if(!zt(s))return s;d=js(d,s);for(var v=-1,_=d.length,P=_-1,C=s;C!=null&&++v<_;){var M=_a(d[v]),J=g;if(M==="__proto__"||M==="constructor"||M==="prototype")return s;if(v!=P){var Q=C[M];J=m?m(Q,M,C):i,J===i&&(J=zt(Q)?Q:Na(d[v+1])?[]:{})}Eg(C,M,J),C=C[M]}return s}var zv=yy?function(s,d){return yy.set(s,d),s}:Hn,ex=hy?function(s,d){return hy(s,"toString",{configurable:!0,enumerable:!1,value:Z0(d),writable:!0})}:Hn;function tx(s){return Ny(Md(s))}function Uo(s,d,g){var m=-1,v=s.length;d<0&&(d=-d>v?0:v+d),g=g>v?v:g,g<0&&(g+=v),v=d>g?0:g-d>>>0,d>>>=0;for(var _=G(v);++m<v;)_[m]=s[m+d];return _}function rx(s,d){var g;return Ms(s,function(m,v,_){return g=d(m,v,_),!g}),!!g}function Oy(s,d,g){var m=0,v=s==null?m:s.length;if(typeof d=="number"&&d===d&&v<=mt){for(;m<v;){var _=m+v>>>1,P=s[_];P!==null&&!ii(P)&&(g?P<=d:P<d)?m=_+1:v=_}return v}return m0(s,d,Hn,g)}function m0(s,d,g,m){var v=0,_=s==null?0:s.length;if(_===0)return 0;d=g(d);for(var P=d!==d,C=d===null,M=ii(d),J=d===i;v<_;){var Q=my((v+_)/2),ne=g(s[Q]),ue=ne!==i,Te=ne===null,Pe=ne===ne,Be=ii(ne);if(P)var $e=m||Pe;else J?$e=Pe&&(m||ue):C?$e=Pe&&ue&&(m||!Te):M?$e=Pe&&ue&&!Te&&(m||!Be):Te||Be?$e=!1:$e=m?ne<=d:ne<d;$e?v=Q+1:_=Q}return on(_,fr)}function Vv(s,d){for(var g=-1,m=s.length,v=0,_=[];++g<m;){var P=s[g],C=d?d(P):P;if(!g||!ia(C,M)){var M=C;_[v++]=P===0?0:P}}return _}function Wv(s){return typeof s=="number"?s:ii(s)?er:+s}function ni(s){if(typeof s=="string")return s;if(Fe(s))return Mt(s,ni)+"";if(ii(s))return Tv?Tv.call(s):"";var d=s+"";return d=="0"&&1/s==-Dt?"-0":d}function Us(s,d,g){var m=-1,v=ny,_=s.length,P=!0,C=[],M=C;if(g)P=!1,v=Hy;else if(_>=c){var J=d?null:px(s);if(J)return oy(J);P=!1,v=Ah,M=new lu}else M=d?[]:C;e:for(;++m<_;){var Q=s[m],ne=d?d(Q):Q;if(Q=g||Q!==0?Q:0,P&&ne===ne){for(var ue=M.length;ue--;)if(M[ue]===ne)continue e;d&&M.push(ne),C.push(Q)}else v(M,ne,g)||(M!==C&&M.push(ne),C.push(Q))}return C}function y0(s,d){return d=js(d,s),s=vw(s,d),s==null||delete s[_a(Bo(d))]}function Gv(s,d,g,m){return $g(s,d,g(fu(s,d)),m)}function Iy(s,d,g,m){for(var v=s.length,_=m?v:-1;(m?_--:++_<v)&&d(s[_],_,s););return g?Uo(s,m?0:_,m?_+1:v):Uo(s,m?_+1:0,m?v:_)}function Hv(s,d){var g=s;return g instanceof Qe&&(g=g.value()),qy(d,function(m,v){return v.func.apply(v.thisArg,Wa([m],v.args))},g)}function b0(s,d,g){var m=s.length;if(m<2)return m?Us(s[0]):[];for(var v=-1,_=G(m);++v<m;)for(var P=s[v],C=-1;++C<m;)C!=v&&(_[v]=Sg(_[v]||P,s[C],d,g));return Us(Jr(_,1),d,g)}function qv(s,d,g){for(var m=-1,v=s.length,_=d.length,P={};++m<v;){var C=m<_?d[m]:i;g(P,s[m],C)}return P}function v0(s){return tr(s)?s:[]}function w0(s){return typeof s=="function"?s:Hn}function js(s,d){return Fe(s)?s:P0(s,d)?[s]:Tw(vt(s))}var nx=ze;function Vs(s,d,g){var m=s.length;return g=g===i?m:g,!d&&g>=m?s:Uo(s,d,g)}var Kv=V_||function(s){return Yr.clearTimeout(s)};function Xv(s,d){if(d)return s.slice();var g=s.length,m=yv?yv(g):new s.constructor(g);return s.copy(m),m}function _0(s){var d=new s.constructor(s.byteLength);return new dy(d).set(new dy(s)),d}function ix(s,d){var g=d?_0(s.buffer):s.buffer;return new s.constructor(g,s.byteOffset,s.byteLength)}function ox(s){var d=new s.constructor(s.source,Qs.exec(s));return d.lastIndex=s.lastIndex,d}function ax(s){return Ig?Pt(Ig.call(s)):{}}function Yv(s,d){var g=d?_0(s.buffer):s.buffer;return new s.constructor(g,s.byteOffset,s.length)}function Jv(s,d){if(s!==d){var g=s!==i,m=s===null,v=s===s,_=ii(s),P=d!==i,C=d===null,M=d===d,J=ii(d);if(!C&&!J&&!_&&s>d||_&&P&&M&&!C&&!J||m&&P&&M||!g&&M||!v)return 1;if(!m&&!_&&!J&&s<d||J&&g&&v&&!m&&!_||C&&g&&v||!P&&v||!M)return-1}return 0}function sx(s,d,g){for(var m=-1,v=s.criteria,_=d.criteria,P=v.length,C=g.length;++m<P;){var M=Jv(v[m],_[m]);if(M){if(m>=C)return M;var J=g[m];return M*(J=="desc"?-1:1)}}return s.index-d.index}function Qv(s,d,g,m){for(var v=-1,_=s.length,P=g.length,C=-1,M=d.length,J=Ir(_-P,0),Q=G(M+J),ne=!m;++C<M;)Q[C]=d[C];for(;++v<P;)(ne||v<_)&&(Q[g[v]]=s[v]);for(;J--;)Q[C++]=s[v++];return Q}function ew(s,d,g,m){for(var v=-1,_=s.length,P=-1,C=g.length,M=-1,J=d.length,Q=Ir(_-C,0),ne=G(Q+J),ue=!m;++v<Q;)ne[v]=s[v];for(var Te=v;++M<J;)ne[Te+M]=d[M];for(;++P<C;)(ue||v<_)&&(ne[Te+g[P]]=s[v++]);return ne}function An(s,d){var g=-1,m=s.length;for(d||(d=G(m));++g<m;)d[g]=s[g];return d}function wa(s,d,g,m){var v=!g;g||(g={});for(var _=-1,P=d.length;++_<P;){var C=d[_],M=m?m(g[C],s[C],C,g,s):i;M===i&&(M=s[C]),v?$a(g,C,M):Eg(g,C,M)}return g}function ux(s,d){return wa(s,A0(s),d)}function lx(s,d){return wa(s,pw(s),d)}function Ey(s,d){return function(g,m){var v=Fe(g)?h_:D1,_=d?d():{};return v(g,s,Ae(m,2),_)}}function _d(s){return ze(function(d,g){var m=-1,v=g.length,_=v>1?g[v-1]:i,P=v>2?g[2]:i;for(_=s.length>3&&typeof _=="function"?(v--,_):i,P&&_n(g[0],g[1],P)&&(_=v<3?i:_,v=1),d=Pt(d);++m<v;){var C=g[m];C&&s(d,C,m,_)}return d})}function tw(s,d){return function(g,m){if(g==null)return g;if(!Pn(g))return s(g,m);for(var v=g.length,_=d?v:-1,P=Pt(g);(d?_--:++_<v)&&m(P[_],_,P)!==!1;);return g}}function rw(s){return function(d,g,m){for(var v=-1,_=Pt(d),P=m(d),C=P.length;C--;){var M=P[s?C:++v];if(g(_[M],M,_)===!1)break}return d}}function cx(s,d,g){var m=d&A,v=Dg(s);function _(){var P=this&&this!==Yr&&this instanceof _?v:s;return P.apply(m?g:this,arguments)}return _}function nw(s){return function(d){d=vt(d);var g=$u(d)?Go(d):i,m=g?g[0]:d.charAt(0),v=g?Vs(g,1).join(""):d.slice(1);return m[s]()+v}}function xd(s){return function(d){return qy(t_(e_(d).replace(Lt,"")),s,"")}}function Dg(s){return function(){var d=arguments;switch(d.length){case 0:return new s;case 1:return new s(d[0]);case 2:return new s(d[0],d[1]);case 3:return new s(d[0],d[1],d[2]);case 4:return new s(d[0],d[1],d[2],d[3]);case 5:return new s(d[0],d[1],d[2],d[3],d[4]);case 6:return new s(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new s(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var g=wd(s.prototype),m=s.apply(g,d);return zt(m)?m:g}}function dx(s,d,g){var m=Dg(s);function v(){for(var _=arguments.length,P=G(_),C=_,M=Td(v);C--;)P[C]=arguments[C];var J=_<3&&P[0]!==M&&P[_-1]!==M?[]:Ga(P,M);if(_-=J.length,_<g)return uw(s,d,Sy,v.placeholder,i,P,J,i,i,g-_);var Q=this&&this!==Yr&&this instanceof v?m:s;return ti(Q,this,P)}return v}function iw(s){return function(d,g,m){var v=Pt(d);if(!Pn(d)){var _=Ae(g,3);d=Zr(d),g=function(C){return _(v[C],C,v)}}var P=s(d,g,m);return P>-1?v[_?d[P]:P]:i}}function ow(s){return Ca(function(d){var g=d.length,m=g,v=Ro.prototype.thru;for(s&&d.reverse();m--;){var _=d[m];if(typeof _!="function")throw new No(a);if(v&&!P&&Dy(_)=="wrapper")var P=new Ro([],!0)}for(m=P?m:g;++m<g;){_=d[m];var C=Dy(_),M=C=="wrapper"?E0(_):i;M&&$0(M[0])&&M[1]==(Ye|B|ve|et)&&!M[4].length&&M[9]==1?P=P[Dy(M[0])].apply(P,M[3]):P=_.length==1&&$0(_)?P[C]():P.thru(_)}return function(){var J=arguments,Q=J[0];if(P&&J.length==1&&Fe(Q))return P.plant(Q).value();for(var ne=0,ue=g?d[ne].apply(this,J):Q;++ne<g;)ue=d[ne].call(this,ue);return ue}})}function Sy(s,d,g,m,v,_,P,C,M,J){var Q=d&Ye,ne=d&A,ue=d&V,Te=d&(B|te),Pe=d&pe,Be=ue?i:Dg(s);function $e(){for(var qe=arguments.length,ot=G(qe),oi=qe;oi--;)ot[oi]=arguments[oi];if(Te)var On=Td($e),ai=T_(ot,On);if(m&&(ot=Qv(ot,m,v,Te)),_&&(ot=ew(ot,_,P,Te)),qe-=ai,Te&&qe<J){var rr=Ga(ot,On);return uw(s,d,Sy,$e.placeholder,g,ot,rr,C,M,J-qe)}var oa=ne?g:this,Fa=ue?oa[s]:s;return qe=ot.length,C?ot=Dx(ot,C):Pe&&qe>1&&ot.reverse(),Q&&M<qe&&(ot.length=M),this&&this!==Yr&&this instanceof $e&&(Fa=Be||Dg(Fa)),Fa.apply(oa,ot)}return $e}function aw(s,d){return function(g,m){return U1(g,s,d(m),{})}}function Ay(s,d){return function(g,m){var v;if(g===i&&m===i)return d;if(g!==i&&(v=g),m!==i){if(v===i)return m;typeof g=="string"||typeof m=="string"?(g=ni(g),m=ni(m)):(g=Wv(g),m=Wv(m)),v=s(g,m)}return v}}function x0(s){return Ca(function(d){return d=Mt(d,ri(Ae())),ze(function(g){var m=this;return s(d,function(v){return ti(v,m,g)})})})}function Py(s,d){d=d===i?" ":ni(d);var g=d.length;if(g<2)return g?g0(d,s):d;var m=g0(d,gy(s/Du(d)));return $u(d)?Vs(Go(m),0,s).join(""):m.slice(0,s)}function fx(s,d,g,m){var v=d&A,_=Dg(s);function P(){for(var C=-1,M=arguments.length,J=-1,Q=m.length,ne=G(Q+M),ue=this&&this!==Yr&&this instanceof P?_:s;++J<Q;)ne[J]=m[J];for(;M--;)ne[J++]=arguments[++C];return ti(ue,v?g:this,ne)}return P}function sw(s){return function(d,g,m){return m&&typeof m!="number"&&_n(d,g,m)&&(g=m=i),d=ka(d),g===i?(g=d,d=0):g=ka(g),m=m===i?d<g?1:-1:ka(m),Y1(d,g,m,s)}}function $y(s){return function(d,g){return typeof d=="string"&&typeof g=="string"||(d=zo(d),g=zo(g)),s(d,g)}}function uw(s,d,g,m,v,_,P,C,M,J){var Q=d&B,ne=Q?P:i,ue=Q?i:P,Te=Q?_:i,Pe=Q?i:_;d|=Q?ve:St,d&=~(Q?St:ve),d&N||(d&=-4);var Be=[s,d,v,Te,ne,Pe,ue,C,M,J],$e=g.apply(i,Be);return $0(s)&&ww($e,Be),$e.placeholder=m,_w($e,s,d)}function T0(s){var d=Or[s];return function(g,m){if(g=zo(g),m=m==null?0:on(Me(m),292),m&&_v(g)){var v=(vt(g)+"e").split("e"),_=d(v[0]+"e"+(+v[1]+m));return v=(vt(_)+"e").split("e"),+(v[0]+"e"+(+v[1]-m))}return d(g)}}var px=yd&&1/oy(new yd([,-0]))[1]==Dt?function(s){return new yd(s)}:W0;function lw(s){return function(d){var g=an(d);return g==qt?qb(d):g==jr?$_(d):x_(d,s(d))}}function Da(s,d,g,m,v,_,P,C){var M=d&V;if(!M&&typeof s!="function")throw new No(a);var J=m?m.length:0;if(J||(d&=-97,m=v=i),P=P===i?P:Ir(Me(P),0),C=C===i?C:Me(C),J-=v?v.length:0,d&St){var Q=m,ne=v;m=v=i}var ue=M?i:E0(s),Te=[s,d,g,m,v,Q,ne,_,P,C];if(ue&&Ax(Te,ue),s=Te[0],d=Te[1],g=Te[2],m=Te[3],v=Te[4],C=Te[9]=Te[9]===i?M?0:s.length:Ir(Te[9]-J,0),!C&&d&(B|te)&&(d&=-25),!d||d==A)var Pe=cx(s,d,g);else d==B||d==te?Pe=dx(s,d,C):(d==ve||d==(A|ve))&&!v.length?Pe=fx(s,d,g,m):Pe=Sy.apply(i,Te);var Be=ue?zv:ww;return _w(Be(Pe,Te),s,d)}function cw(s,d,g,m){return s===i||ia(s,tl[g])&&!Et.call(m,g)?d:s}function dw(s,d,g,m,v,_){return zt(s)&&zt(d)&&(_.set(d,s),Ty(s,d,i,dw,_),_.delete(d)),s}function hx(s){return Rg(s)?i:s}function fw(s,d,g,m,v,_){var P=g&I,C=s.length,M=d.length;if(C!=M&&!(P&&M>C))return!1;var J=_.get(s),Q=_.get(d);if(J&&Q)return J==d&&Q==s;var ne=-1,ue=!0,Te=g&S?new lu:i;for(_.set(s,d),_.set(d,s);++ne<C;){var Pe=s[ne],Be=d[ne];if(m)var $e=P?m(Be,Pe,ne,d,s,_):m(Pe,Be,ne,s,d,_);if($e!==i){if($e)continue;ue=!1;break}if(Te){if(!Ky(d,function(qe,ot){if(!Ah(Te,ot)&&(Pe===qe||v(Pe,qe,g,m,_)))return Te.push(ot)})){ue=!1;break}}else if(!(Pe===Be||v(Pe,Be,g,m,_))){ue=!1;break}}return _.delete(s),_.delete(d),ue}function gx(s,d,g,m,v,_,P){switch(g){case Sn:if(s.byteLength!=d.byteLength||s.byteOffset!=d.byteOffset)return!1;s=s.buffer,d=d.buffer;case ga:return!(s.byteLength!=d.byteLength||!_(new dy(s),new dy(d)));case Ar:case Gt:case vn:return ia(+s,+d);case Ft:return s.name==d.name&&s.message==d.message;case Qr:case Yn:return s==d+"";case qt:var C=qb;case jr:var M=m&I;if(C||(C=oy),s.size!=d.size&&!M)return!1;var J=P.get(s);if(J)return J==d;m|=S,P.set(s,d);var Q=fw(C(s),C(d),m,v,_,P);return P.delete(s),Q;case si:if(Ig)return Ig.call(s)==Ig.call(d)}return!1}function mx(s,d,g,m,v,_){var P=g&I,C=O0(s),M=C.length,J=O0(d),Q=J.length;if(M!=Q&&!P)return!1;for(var ne=M;ne--;){var ue=C[ne];if(!(P?ue in d:Et.call(d,ue)))return!1}var Te=_.get(s),Pe=_.get(d);if(Te&&Pe)return Te==d&&Pe==s;var Be=!0;_.set(s,d),_.set(d,s);for(var $e=P;++ne<M;){ue=C[ne];var qe=s[ue],ot=d[ue];if(m)var oi=P?m(ot,qe,ue,d,s,_):m(qe,ot,ue,s,d,_);if(!(oi===i?qe===ot||v(qe,ot,g,m,_):oi)){Be=!1;break}$e||($e=ue=="constructor")}if(Be&&!$e){var On=s.constructor,ai=d.constructor;On!=ai&&"constructor"in s&&"constructor"in d&&!(typeof On=="function"&&On instanceof On&&typeof ai=="function"&&ai instanceof ai)&&(Be=!1)}return _.delete(s),_.delete(d),Be}function Ca(s){return C0(bw(s,i,Sw),s+"")}function O0(s){return Cv(s,Zr,A0)}function I0(s){return Cv(s,jn,pw)}var E0=yy?function(s){return yy.get(s)}:W0;function Dy(s){for(var d=s.name+"",g=vd[d],m=Et.call(vd,d)?g.length:0;m--;){var v=g[m],_=v.func;if(_==null||_==s)return v.name}return d}function Td(s){var d=Et.call(w,"placeholder")?w:s;return d.placeholder}function Ae(){var s=w.iteratee||z0;return s=s===z0?kv:s,arguments.length?s(arguments[0],arguments[1]):s}function Cy(s,d){var g=s.__data__;return Ox(d)?g[typeof d=="string"?"string":"hash"]:g.map}function S0(s){for(var d=Zr(s),g=d.length;g--;){var m=d[g],v=s[m];d[g]=[m,v,mw(v)]}return d}function pu(s,d){var g=S_(s,d);return Rv(g)?g:i}function yx(s){var d=Et.call(s,su),g=s[su];try{s[su]=i;var m=!0}catch{}var v=ly.call(s);return m&&(d?s[su]=g:delete s[su]),v}var A0=t0?function(s){return s==null?[]:(s=Pt(s),Va(t0(s),function(d){return vv.call(s,d)}))}:G0,pw=t0?function(s){for(var d=[];s;)Wa(d,A0(s)),s=fy(s);return d}:G0,an=wn;(r0&&an(new r0(new ArrayBuffer(1)))!=Sn||ug&&an(new ug)!=qt||n0&&an(n0.resolve())!=La||yd&&an(new yd)!=jr||xg&&an(new xg)!=En)&&(an=function(s){var d=wn(s),g=d==In?s.constructor:i,m=g?hu(g):"";if(m)switch(m){case Q_:return Sn;case e1:return qt;case t1:return La;case r1:return jr;case n1:return En}return d});function bx(s,d,g){for(var m=-1,v=g.length;++m<v;){var _=g[m],P=_.size;switch(_.type){case"drop":s+=P;break;case"dropRight":d-=P;break;case"take":d=on(d,s+P);break;case"takeRight":s=Ir(s,d-P);break}}return{start:s,end:d}}function vx(s){var d=s.match(ui);return d?d[1].split(Ys):[]}function hw(s,d,g){d=js(d,s);for(var m=-1,v=d.length,_=!1;++m<v;){var P=_a(d[m]);if(!(_=s!=null&&g(s,P)))break;s=s[P]}return _||++m!=v?_:(v=s==null?0:s.length,!!v&&Uy(v)&&Na(P,v)&&(Fe(s)||gu(s)))}function wx(s){var d=s.length,g=new s.constructor(d);return d&&typeof s[0]=="string"&&Et.call(s,"index")&&(g.index=s.index,g.input=s.input),g}function gw(s){return typeof s.constructor=="function"&&!Cg(s)?wd(fy(s)):{}}function _x(s,d,g){var m=s.constructor;switch(d){case ga:return _0(s);case Ar:case Gt:return new m(+s);case Sn:return ix(s,g);case Ks:case he:case xa:case ya:case Ma:case Ta:case Ua:case Ee:case ba:return Yv(s,g);case qt:return new m;case vn:case Yn:return new m(s);case Qr:return ox(s);case jr:return new m;case si:return ax(s)}}function xx(s,d){var g=d.length;if(!g)return s;var m=g-1;return d[m]=(g>1?"& ":"")+d[m],d=d.join(g>2?", ":" "),s.replace(At,`{
/* [wrapped with `+d+`] */
`)}function Tx(s){return Fe(s)||gu(s)||!!(wv&&s&&s[wv])}function Na(s,d){var g=typeof s;return d=d??Ut,!!d&&(g=="number"||g!="symbol"&&Vg.test(s))&&s>-1&&s%1==0&&s<d}function _n(s,d,g){if(!zt(g))return!1;var m=typeof d;return(m=="number"?Pn(g)&&Na(d,g.length):m=="string"&&d in g)?ia(g[d],s):!1}function P0(s,d){if(Fe(s))return!1;var g=typeof s;return g=="number"||g=="symbol"||g=="boolean"||s==null||ii(s)?!0:vr.test(s)||!Xr.test(s)||d!=null&&s in Pt(d)}function Ox(s){var d=typeof s;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?s!=="__proto__":s===null}function $0(s){var d=Dy(s),g=w[d];if(typeof g!="function"||!(d in Qe.prototype))return!1;if(s===g)return!0;var m=E0(g);return!!m&&s===m[0]}function Ix(s){return!!mv&&mv in s}var Ex=sy?Ra:H0;function Cg(s){var d=s&&s.constructor,g=typeof d=="function"&&d.prototype||tl;return s===g}function mw(s){return s===s&&!zt(s)}function yw(s,d){return function(g){return g==null?!1:g[s]===d&&(d!==i||s in Pt(g))}}function Sx(s){var d=Ly(s,function(m){return g.size===r&&g.clear(),m}),g=d.cache;return d}function Ax(s,d){var g=s[1],m=d[1],v=g|m,_=v<(A|V|Ye),P=m==Ye&&g==B||m==Ye&&g==et&&s[7].length<=d[8]||m==(Ye|et)&&d[7].length<=d[8]&&g==B;if(!(_||P))return s;m&A&&(s[2]=d[2],v|=g&A?0:N);var C=d[3];if(C){var M=s[3];s[3]=M?Qv(M,C,d[4]):C,s[4]=M?Ga(s[3],u):d[4]}return C=d[5],C&&(M=s[5],s[5]=M?ew(M,C,d[6]):C,s[6]=M?Ga(s[5],u):d[6]),C=d[7],C&&(s[7]=C),m&Ye&&(s[8]=s[8]==null?d[8]:on(s[8],d[8])),s[9]==null&&(s[9]=d[9]),s[0]=d[0],s[1]=v,s}function Px(s){var d=[];if(s!=null)for(var g in Pt(s))d.push(g);return d}function $x(s){return ly.call(s)}function bw(s,d,g){return d=Ir(d===i?s.length-1:d,0),function(){for(var m=arguments,v=-1,_=Ir(m.length-d,0),P=G(_);++v<_;)P[v]=m[d+v];v=-1;for(var C=G(d+1);++v<d;)C[v]=m[v];return C[d]=g(P),ti(s,this,C)}}function vw(s,d){return d.length<2?s:fu(s,Uo(d,0,-1))}function Dx(s,d){for(var g=s.length,m=on(d.length,g),v=An(s);m--;){var _=d[m];s[m]=Na(_,g)?v[_]:i}return s}function D0(s,d){if(!(d==="constructor"&&typeof s[d]=="function")&&d!="__proto__")return s[d]}var ww=xw(zv),Ng=G_||function(s,d){return Yr.setTimeout(s,d)},C0=xw(ex);function _w(s,d,g){var m=d+"";return C0(s,xx(m,Cx(vx(m),g)))}function xw(s){var d=0,g=0;return function(){var m=X_(),v=$t-(m-g);if(g=m,v>0){if(++d>=_t)return arguments[0]}else d=0;return s.apply(i,arguments)}}function Ny(s,d){var g=-1,m=s.length,v=m-1;for(d=d===i?m:d;++g<d;){var _=h0(g,v),P=s[_];s[_]=s[g],s[g]=P}return s.length=d,s}var Tw=Sx(function(s){var d=[];return s.charCodeAt(0)===46&&d.push(""),s.replace(_r,function(g,m,v,_){d.push(v?_.replace(jg,"$1"):m||g)}),d});function _a(s){if(typeof s=="string"||ii(s))return s;var d=s+"";return d=="0"&&1/s==-Dt?"-0":d}function hu(s){if(s!=null){try{return uy.call(s)}catch{}try{return s+""}catch{}}return""}function Cx(s,d){return fi(Kr,function(g){var m="_."+g[0];d&g[1]&&!ny(s,m)&&s.push(m)}),s.sort()}function Ow(s){if(s instanceof Qe)return s.clone();var d=new Ro(s.__wrapped__,s.__chain__);return d.__actions__=An(s.__actions__),d.__index__=s.__index__,d.__values__=s.__values__,d}function Nx(s,d,g){(g?_n(s,d,g):d===i)?d=1:d=Ir(Me(d),0);var m=s==null?0:s.length;if(!m||d<1)return[];for(var v=0,_=0,P=G(gy(m/d));v<m;)P[_++]=Uo(s,v,v+=d);return P}function Rx(s){for(var d=-1,g=s==null?0:s.length,m=0,v=[];++d<g;){var _=s[d];_&&(v[m++]=_)}return v}function kx(){var s=arguments.length;if(!s)return[];for(var d=G(s-1),g=arguments[0],m=s;m--;)d[m-1]=arguments[m];return Wa(Fe(g)?An(g):[g],Jr(d,1))}var Fx=ze(function(s,d){return tr(s)?Sg(s,Jr(d,1,tr,!0)):[]}),Lx=ze(function(s,d){var g=Bo(d);return tr(g)&&(g=i),tr(s)?Sg(s,Jr(d,1,tr,!0),Ae(g,2)):[]}),Mx=ze(function(s,d){var g=Bo(d);return tr(g)&&(g=i),tr(s)?Sg(s,Jr(d,1,tr,!0),i,g):[]});function Ux(s,d,g){var m=s==null?0:s.length;return m?(d=g||d===i?1:Me(d),Uo(s,d<0?0:d,m)):[]}function Bx(s,d,g){var m=s==null?0:s.length;return m?(d=g||d===i?1:Me(d),d=m-d,Uo(s,0,d<0?0:d)):[]}function jx(s,d){return s&&s.length?Iy(s,Ae(d,3),!0,!0):[]}function Zx(s,d){return s&&s.length?Iy(s,Ae(d,3),!0):[]}function zx(s,d,g,m){var v=s==null?0:s.length;return v?(g&&typeof g!="number"&&_n(s,d,g)&&(g=0,m=v),k1(s,d,g,m)):[]}function Iw(s,d,g){var m=s==null?0:s.length;if(!m)return-1;var v=g==null?0:Me(g);return v<0&&(v=Ir(m+v,0)),iy(s,Ae(d,3),v)}function Ew(s,d,g){var m=s==null?0:s.length;if(!m)return-1;var v=m-1;return g!==i&&(v=Me(g),v=g<0?Ir(m+v,0):on(v,m-1)),iy(s,Ae(d,3),v,!0)}function Sw(s){var d=s==null?0:s.length;return d?Jr(s,1):[]}function Vx(s){var d=s==null?0:s.length;return d?Jr(s,Dt):[]}function Wx(s,d){var g=s==null?0:s.length;return g?(d=d===i?1:Me(d),Jr(s,d)):[]}function Gx(s){for(var d=-1,g=s==null?0:s.length,m={};++d<g;){var v=s[d];m[v[0]]=v[1]}return m}function Aw(s){return s&&s.length?s[0]:i}function Hx(s,d,g){var m=s==null?0:s.length;if(!m)return-1;var v=g==null?0:Me(g);return v<0&&(v=Ir(m+v,0)),Au(s,d,v)}function qx(s){var d=s==null?0:s.length;return d?Uo(s,0,-1):[]}var Kx=ze(function(s){var d=Mt(s,v0);return d.length&&d[0]===s[0]?l0(d):[]}),Xx=ze(function(s){var d=Bo(s),g=Mt(s,v0);return d===Bo(g)?d=i:g.pop(),g.length&&g[0]===s[0]?l0(g,Ae(d,2)):[]}),Yx=ze(function(s){var d=Bo(s),g=Mt(s,v0);return d=typeof d=="function"?d:i,d&&g.pop(),g.length&&g[0]===s[0]?l0(g,i,d):[]});function Jx(s,d){return s==null?"":q_.call(s,d)}function Bo(s){var d=s==null?0:s.length;return d?s[d-1]:i}function Qx(s,d,g){var m=s==null?0:s.length;if(!m)return-1;var v=m;return g!==i&&(v=Me(g),v=v<0?Ir(m+v,0):on(v,m-1)),d===d?C_(s,d,v):iy(s,uv,v,!0)}function eT(s,d){return s&&s.length?Uv(s,Me(d)):i}var tT=ze(Pw);function Pw(s,d){return s&&s.length&&d&&d.length?p0(s,d):s}function rT(s,d,g){return s&&s.length&&d&&d.length?p0(s,d,Ae(g,2)):s}function nT(s,d,g){return s&&s.length&&d&&d.length?p0(s,d,i,g):s}var iT=Ca(function(s,d){var g=s==null?0:s.length,m=o0(s,d);return Zv(s,Mt(d,function(v){return Na(v,g)?+v:v}).sort(Jv)),m});function oT(s,d){var g=[];if(!(s&&s.length))return g;var m=-1,v=[],_=s.length;for(d=Ae(d,3);++m<_;){var P=s[m];d(P,m,s)&&(g.push(P),v.push(m))}return Zv(s,v),g}function N0(s){return s==null?s:J_.call(s)}function aT(s,d,g){var m=s==null?0:s.length;return m?(g&&typeof g!="number"&&_n(s,d,g)?(d=0,g=m):(d=d==null?0:Me(d),g=g===i?m:Me(g)),Uo(s,d,g)):[]}function sT(s,d){return Oy(s,d)}function uT(s,d,g){return m0(s,d,Ae(g,2))}function lT(s,d){var g=s==null?0:s.length;if(g){var m=Oy(s,d);if(m<g&&ia(s[m],d))return m}return-1}function cT(s,d){return Oy(s,d,!0)}function dT(s,d,g){return m0(s,d,Ae(g,2),!0)}function fT(s,d){var g=s==null?0:s.length;if(g){var m=Oy(s,d,!0)-1;if(ia(s[m],d))return m}return-1}function pT(s){return s&&s.length?Vv(s):[]}function hT(s,d){return s&&s.length?Vv(s,Ae(d,2)):[]}function gT(s){var d=s==null?0:s.length;return d?Uo(s,1,d):[]}function mT(s,d,g){return s&&s.length?(d=g||d===i?1:Me(d),Uo(s,0,d<0?0:d)):[]}function yT(s,d,g){var m=s==null?0:s.length;return m?(d=g||d===i?1:Me(d),d=m-d,Uo(s,d<0?0:d,m)):[]}function bT(s,d){return s&&s.length?Iy(s,Ae(d,3),!1,!0):[]}function vT(s,d){return s&&s.length?Iy(s,Ae(d,3)):[]}var wT=ze(function(s){return Us(Jr(s,1,tr,!0))}),_T=ze(function(s){var d=Bo(s);return tr(d)&&(d=i),Us(Jr(s,1,tr,!0),Ae(d,2))}),xT=ze(function(s){var d=Bo(s);return d=typeof d=="function"?d:i,Us(Jr(s,1,tr,!0),i,d)});function TT(s){return s&&s.length?Us(s):[]}function OT(s,d){return s&&s.length?Us(s,Ae(d,2)):[]}function IT(s,d){return d=typeof d=="function"?d:i,s&&s.length?Us(s,i,d):[]}function R0(s){if(!(s&&s.length))return[];var d=0;return s=Va(s,function(g){if(tr(g))return d=Ir(g.length,d),!0}),Qy(d,function(g){return Mt(s,Xy(g))})}function $w(s,d){if(!(s&&s.length))return[];var g=R0(s);return d==null?g:Mt(g,function(m){return ti(d,i,m)})}var ET=ze(function(s,d){return tr(s)?Sg(s,d):[]}),ST=ze(function(s){return b0(Va(s,tr))}),AT=ze(function(s){var d=Bo(s);return tr(d)&&(d=i),b0(Va(s,tr),Ae(d,2))}),PT=ze(function(s){var d=Bo(s);return d=typeof d=="function"?d:i,b0(Va(s,tr),i,d)}),$T=ze(R0);function DT(s,d){return qv(s||[],d||[],Eg)}function CT(s,d){return qv(s||[],d||[],$g)}var NT=ze(function(s){var d=s.length,g=d>1?s[d-1]:i;return g=typeof g=="function"?(s.pop(),g):i,$w(s,g)});function Dw(s){var d=w(s);return d.__chain__=!0,d}function RT(s,d){return d(s),s}function Ry(s,d){return d(s)}var kT=Ca(function(s){var d=s.length,g=d?s[0]:0,m=this.__wrapped__,v=function(_){return o0(_,s)};return d>1||this.__actions__.length||!(m instanceof Qe)||!Na(g)?this.thru(v):(m=m.slice(g,+g+(d?1:0)),m.__actions__.push({func:Ry,args:[v],thisArg:i}),new Ro(m,this.__chain__).thru(function(_){return d&&!_.length&&_.push(i),_}))});function FT(){return Dw(this)}function LT(){return new Ro(this.value(),this.__chain__)}function MT(){this.__values__===i&&(this.__values__=Ww(this.value()));var s=this.__index__>=this.__values__.length,d=s?i:this.__values__[this.__index__++];return{done:s,value:d}}function UT(){return this}function BT(s){for(var d,g=this;g instanceof vy;){var m=Ow(g);m.__index__=0,m.__values__=i,d?v.__wrapped__=m:d=m;var v=m;g=g.__wrapped__}return v.__wrapped__=s,d}function jT(){var s=this.__wrapped__;if(s instanceof Qe){var d=s;return this.__actions__.length&&(d=new Qe(this)),d=d.reverse(),d.__actions__.push({func:Ry,args:[N0],thisArg:i}),new Ro(d,this.__chain__)}return this.thru(N0)}function ZT(){return Hv(this.__wrapped__,this.__actions__)}var zT=Ey(function(s,d,g){Et.call(s,g)?++s[g]:$a(s,g,1)});function VT(s,d,g){var m=Fe(s)?av:R1;return g&&_n(s,d,g)&&(d=i),m(s,Ae(d,3))}function WT(s,d){var g=Fe(s)?Va:$v;return g(s,Ae(d,3))}var GT=iw(Iw),HT=iw(Ew);function qT(s,d){return Jr(ky(s,d),1)}function KT(s,d){return Jr(ky(s,d),Dt)}function XT(s,d,g){return g=g===i?1:Me(g),Jr(ky(s,d),g)}function Cw(s,d){var g=Fe(s)?fi:Ms;return g(s,Ae(d,3))}function Nw(s,d){var g=Fe(s)?g_:Pv;return g(s,Ae(d,3))}var YT=Ey(function(s,d,g){Et.call(s,g)?s[g].push(d):$a(s,g,[d])});function JT(s,d,g,m){s=Pn(s)?s:Md(s),g=g&&!m?Me(g):0;var v=s.length;return g<0&&(g=Ir(v+g,0)),By(s)?g<=v&&s.indexOf(d,g)>-1:!!v&&Au(s,d,g)>-1}var QT=ze(function(s,d,g){var m=-1,v=typeof d=="function",_=Pn(s)?G(s.length):[];return Ms(s,function(P){_[++m]=v?ti(d,P,g):Ag(P,d,g)}),_}),e2=Ey(function(s,d,g){$a(s,g,d)});function ky(s,d){var g=Fe(s)?Mt:Fv;return g(s,Ae(d,3))}function t2(s,d,g,m){return s==null?[]:(Fe(d)||(d=d==null?[]:[d]),g=m?i:g,Fe(g)||(g=g==null?[]:[g]),Bv(s,d,g))}var r2=Ey(function(s,d,g){s[g?0:1].push(d)},function(){return[[],[]]});function n2(s,d,g){var m=Fe(s)?qy:cv,v=arguments.length<3;return m(s,Ae(d,4),g,v,Ms)}function i2(s,d,g){var m=Fe(s)?m_:cv,v=arguments.length<3;return m(s,Ae(d,4),g,v,Pv)}function o2(s,d){var g=Fe(s)?Va:$v;return g(s,My(Ae(d,3)))}function a2(s){var d=Fe(s)?Iv:J1;return d(s)}function s2(s,d,g){(g?_n(s,d,g):d===i)?d=1:d=Me(d);var m=Fe(s)?P1:Q1;return m(s,d)}function u2(s){var d=Fe(s)?$1:tx;return d(s)}function l2(s){if(s==null)return 0;if(Pn(s))return By(s)?Du(s):s.length;var d=an(s);return d==qt||d==jr?s.size:d0(s).length}function c2(s,d,g){var m=Fe(s)?Ky:rx;return g&&_n(s,d,g)&&(d=i),m(s,Ae(d,3))}var d2=ze(function(s,d){if(s==null)return[];var g=d.length;return g>1&&_n(s,d[0],d[1])?d=[]:g>2&&_n(d[0],d[1],d[2])&&(d=[d[0]]),Bv(s,Jr(d,1),[])}),Fy=W_||function(){return Yr.Date.now()};function f2(s,d){if(typeof d!="function")throw new No(a);return s=Me(s),function(){if(--s<1)return d.apply(this,arguments)}}function Rw(s,d,g){return d=g?i:d,d=s&&d==null?s.length:d,Da(s,Ye,i,i,i,i,d)}function kw(s,d){var g;if(typeof d!="function")throw new No(a);return s=Me(s),function(){return--s>0&&(g=d.apply(this,arguments)),s<=1&&(d=i),g}}var k0=ze(function(s,d,g){var m=A;if(g.length){var v=Ga(g,Td(k0));m|=ve}return Da(s,m,d,g,v)}),Fw=ze(function(s,d,g){var m=A|V;if(g.length){var v=Ga(g,Td(Fw));m|=ve}return Da(d,m,s,g,v)});function Lw(s,d,g){d=g?i:d;var m=Da(s,B,i,i,i,i,i,d);return m.placeholder=Lw.placeholder,m}function Mw(s,d,g){d=g?i:d;var m=Da(s,te,i,i,i,i,i,d);return m.placeholder=Mw.placeholder,m}function Uw(s,d,g){var m,v,_,P,C,M,J=0,Q=!1,ne=!1,ue=!0;if(typeof s!="function")throw new No(a);d=zo(d)||0,zt(g)&&(Q=!!g.leading,ne="maxWait"in g,_=ne?Ir(zo(g.maxWait)||0,d):_,ue="trailing"in g?!!g.trailing:ue);function Te(rr){var oa=m,Fa=v;return m=v=i,J=rr,P=s.apply(Fa,oa),P}function Pe(rr){return J=rr,C=Ng(qe,d),Q?Te(rr):P}function Be(rr){var oa=rr-M,Fa=rr-J,i_=d-oa;return ne?on(i_,_-Fa):i_}function $e(rr){var oa=rr-M,Fa=rr-J;return M===i||oa>=d||oa<0||ne&&Fa>=_}function qe(){var rr=Fy();if($e(rr))return ot(rr);C=Ng(qe,Be(rr))}function ot(rr){return C=i,ue&&m?Te(rr):(m=v=i,P)}function oi(){C!==i&&Kv(C),J=0,m=M=v=C=i}function On(){return C===i?P:ot(Fy())}function ai(){var rr=Fy(),oa=$e(rr);if(m=arguments,v=this,M=rr,oa){if(C===i)return Pe(M);if(ne)return Kv(C),C=Ng(qe,d),Te(M)}return C===i&&(C=Ng(qe,d)),P}return ai.cancel=oi,ai.flush=On,ai}var p2=ze(function(s,d){return Av(s,1,d)}),h2=ze(function(s,d,g){return Av(s,zo(d)||0,g)});function g2(s){return Da(s,pe)}function Ly(s,d){if(typeof s!="function"||d!=null&&typeof d!="function")throw new No(a);var g=function(){var m=arguments,v=d?d.apply(this,m):m[0],_=g.cache;if(_.has(v))return _.get(v);var P=s.apply(this,m);return g.cache=_.set(v,P)||_,P};return g.cache=new(Ly.Cache||Pa),g}Ly.Cache=Pa;function My(s){if(typeof s!="function")throw new No(a);return function(){var d=arguments;switch(d.length){case 0:return!s.call(this);case 1:return!s.call(this,d[0]);case 2:return!s.call(this,d[0],d[1]);case 3:return!s.call(this,d[0],d[1],d[2])}return!s.apply(this,d)}}function m2(s){return kw(2,s)}var y2=nx(function(s,d){d=d.length==1&&Fe(d[0])?Mt(d[0],ri(Ae())):Mt(Jr(d,1),ri(Ae()));var g=d.length;return ze(function(m){for(var v=-1,_=on(m.length,g);++v<_;)m[v]=d[v].call(this,m[v]);return ti(s,this,m)})}),F0=ze(function(s,d){var g=Ga(d,Td(F0));return Da(s,ve,i,d,g)}),Bw=ze(function(s,d){var g=Ga(d,Td(Bw));return Da(s,St,i,d,g)}),b2=Ca(function(s,d){return Da(s,et,i,i,i,d)});function v2(s,d){if(typeof s!="function")throw new No(a);return d=d===i?d:Me(d),ze(s,d)}function w2(s,d){if(typeof s!="function")throw new No(a);return d=d==null?0:Ir(Me(d),0),ze(function(g){var m=g[d],v=Vs(g,0,d);return m&&Wa(v,m),ti(s,this,v)})}function _2(s,d,g){var m=!0,v=!0;if(typeof s!="function")throw new No(a);return zt(g)&&(m="leading"in g?!!g.leading:m,v="trailing"in g?!!g.trailing:v),Uw(s,d,{leading:m,maxWait:d,trailing:v})}function x2(s){return Rw(s,1)}function T2(s,d){return F0(w0(d),s)}function O2(){if(!arguments.length)return[];var s=arguments[0];return Fe(s)?s:[s]}function I2(s){return Mo(s,y)}function E2(s,d){return d=typeof d=="function"?d:i,Mo(s,y,d)}function S2(s){return Mo(s,l|y)}function A2(s,d){return d=typeof d=="function"?d:i,Mo(s,l|y,d)}function P2(s,d){return d==null||Sv(s,d,Zr(d))}function ia(s,d){return s===d||s!==s&&d!==d}var $2=$y(u0),D2=$y(function(s,d){return s>=d}),gu=Nv(function(){return arguments}())?Nv:function(s){return Qt(s)&&Et.call(s,"callee")&&!vv.call(s,"callee")},Fe=G.isArray,C2=ev?ri(ev):B1;function Pn(s){return s!=null&&Uy(s.length)&&!Ra(s)}function tr(s){return Qt(s)&&Pn(s)}function N2(s){return s===!0||s===!1||Qt(s)&&wn(s)==Ar}var Gs=H_||H0,R2=tv?ri(tv):j1;function k2(s){return Qt(s)&&s.nodeType===1&&!Rg(s)}function F2(s){if(s==null)return!0;if(Pn(s)&&(Fe(s)||typeof s=="string"||typeof s.splice=="function"||Gs(s)||Rd(s)||gu(s)))return!s.length;var d=an(s);if(d==qt||d==jr)return!s.size;if(Cg(s))return!d0(s).length;for(var g in s)if(Et.call(s,g))return!1;return!0}function L2(s,d){return Pg(s,d)}function M2(s,d,g){g=typeof g=="function"?g:i;var m=g?g(s,d):i;return m===i?Pg(s,d,i,g):!!m}function L0(s){if(!Qt(s))return!1;var d=wn(s);return d==Ft||d==Ct||typeof s.message=="string"&&typeof s.name=="string"&&!Rg(s)}function U2(s){return typeof s=="number"&&_v(s)}function Ra(s){if(!zt(s))return!1;var d=wn(s);return d==Cr||d==qn||d==nr||d==mu}function jw(s){return typeof s=="number"&&s==Me(s)}function Uy(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Ut}function zt(s){var d=typeof s;return s!=null&&(d=="object"||d=="function")}function Qt(s){return s!=null&&typeof s=="object"}var Zw=rv?ri(rv):z1;function B2(s,d){return s===d||c0(s,d,S0(d))}function j2(s,d,g){return g=typeof g=="function"?g:i,c0(s,d,S0(d),g)}function Z2(s){return zw(s)&&s!=+s}function z2(s){if(Ex(s))throw new ke(n);return Rv(s)}function V2(s){return s===null}function W2(s){return s==null}function zw(s){return typeof s=="number"||Qt(s)&&wn(s)==vn}function Rg(s){if(!Qt(s)||wn(s)!=In)return!1;var d=fy(s);if(d===null)return!0;var g=Et.call(d,"constructor")&&d.constructor;return typeof g=="function"&&g instanceof g&&uy.call(g)==j_}var M0=nv?ri(nv):V1;function G2(s){return jw(s)&&s>=-Ut&&s<=Ut}var Vw=iv?ri(iv):W1;function By(s){return typeof s=="string"||!Fe(s)&&Qt(s)&&wn(s)==Yn}function ii(s){return typeof s=="symbol"||Qt(s)&&wn(s)==si}var Rd=ov?ri(ov):G1;function H2(s){return s===i}function q2(s){return Qt(s)&&an(s)==En}function K2(s){return Qt(s)&&wn(s)==qs}var X2=$y(f0),Y2=$y(function(s,d){return s<=d});function Ww(s){if(!s)return[];if(Pn(s))return By(s)?Go(s):An(s);if(rg&&s[rg])return P_(s[rg]());var d=an(s),g=d==qt?qb:d==jr?oy:Md;return g(s)}function ka(s){if(!s)return s===0?s:0;if(s=zo(s),s===Dt||s===-Dt){var d=s<0?-1:1;return d*cr}return s===s?s:0}function Me(s){var d=ka(s),g=d%1;return d===d?g?d-g:d:0}function Gw(s){return s?cu(Me(s),0,gt):0}function zo(s){if(typeof s=="number")return s;if(ii(s))return er;if(zt(s)){var d=typeof s.valueOf=="function"?s.valueOf():s;s=zt(d)?d+"":d}if(typeof s!="string")return s===0?s:+s;s=dv(s);var g=Ba.test(s);return g||zg.test(s)?f_(s.slice(2),g?2:8):Bd.test(s)?er:+s}function Hw(s){return wa(s,jn(s))}function J2(s){return s?cu(Me(s),-Ut,Ut):s===0?s:0}function vt(s){return s==null?"":ni(s)}var Q2=_d(function(s,d){if(Cg(d)||Pn(d)){wa(d,Zr(d),s);return}for(var g in d)Et.call(d,g)&&Eg(s,g,d[g])}),qw=_d(function(s,d){wa(d,jn(d),s)}),jy=_d(function(s,d,g,m){wa(d,jn(d),s,m)}),eO=_d(function(s,d,g,m){wa(d,Zr(d),s,m)}),tO=Ca(o0);function rO(s,d){var g=wd(s);return d==null?g:Ev(g,d)}var nO=ze(function(s,d){s=Pt(s);var g=-1,m=d.length,v=m>2?d[2]:i;for(v&&_n(d[0],d[1],v)&&(m=1);++g<m;)for(var _=d[g],P=jn(_),C=-1,M=P.length;++C<M;){var J=P[C],Q=s[J];(Q===i||ia(Q,tl[J])&&!Et.call(s,J))&&(s[J]=_[J])}return s}),iO=ze(function(s){return s.push(i,dw),ti(Kw,i,s)});function oO(s,d){return sv(s,Ae(d,3),va)}function aO(s,d){return sv(s,Ae(d,3),s0)}function sO(s,d){return s==null?s:a0(s,Ae(d,3),jn)}function uO(s,d){return s==null?s:Dv(s,Ae(d,3),jn)}function lO(s,d){return s&&va(s,Ae(d,3))}function cO(s,d){return s&&s0(s,Ae(d,3))}function dO(s){return s==null?[]:xy(s,Zr(s))}function fO(s){return s==null?[]:xy(s,jn(s))}function U0(s,d,g){var m=s==null?i:fu(s,d);return m===i?g:m}function pO(s,d){return s!=null&&hw(s,d,F1)}function B0(s,d){return s!=null&&hw(s,d,L1)}var hO=aw(function(s,d,g){d!=null&&typeof d.toString!="function"&&(d=ly.call(d)),s[d]=g},Z0(Hn)),gO=aw(function(s,d,g){d!=null&&typeof d.toString!="function"&&(d=ly.call(d)),Et.call(s,d)?s[d].push(g):s[d]=[g]},Ae),mO=ze(Ag);function Zr(s){return Pn(s)?Ov(s):d0(s)}function jn(s){return Pn(s)?Ov(s,!0):H1(s)}function yO(s,d){var g={};return d=Ae(d,3),va(s,function(m,v,_){$a(g,d(m,v,_),m)}),g}function bO(s,d){var g={};return d=Ae(d,3),va(s,function(m,v,_){$a(g,v,d(m,v,_))}),g}var vO=_d(function(s,d,g){Ty(s,d,g)}),Kw=_d(function(s,d,g,m){Ty(s,d,g,m)}),wO=Ca(function(s,d){var g={};if(s==null)return g;var m=!1;d=Mt(d,function(_){return _=js(_,s),m||(m=_.length>1),_}),wa(s,I0(s),g),m&&(g=Mo(g,l|h|y,hx));for(var v=d.length;v--;)y0(g,d[v]);return g});function _O(s,d){return Xw(s,My(Ae(d)))}var xO=Ca(function(s,d){return s==null?{}:K1(s,d)});function Xw(s,d){if(s==null)return{};var g=Mt(I0(s),function(m){return[m]});return d=Ae(d),jv(s,g,function(m,v){return d(m,v[0])})}function TO(s,d,g){d=js(d,s);var m=-1,v=d.length;for(v||(v=1,s=i);++m<v;){var _=s==null?i:s[_a(d[m])];_===i&&(m=v,_=g),s=Ra(_)?_.call(s):_}return s}function OO(s,d,g){return s==null?s:$g(s,d,g)}function IO(s,d,g,m){return m=typeof m=="function"?m:i,s==null?s:$g(s,d,g,m)}var Yw=lw(Zr),Jw=lw(jn);function EO(s,d,g){var m=Fe(s),v=m||Gs(s)||Rd(s);if(d=Ae(d,4),g==null){var _=s&&s.constructor;v?g=m?new _:[]:zt(s)?g=Ra(_)?wd(fy(s)):{}:g={}}return(v?fi:va)(s,function(P,C,M){return d(g,P,C,M)}),g}function SO(s,d){return s==null?!0:y0(s,d)}function AO(s,d,g){return s==null?s:Gv(s,d,w0(g))}function PO(s,d,g,m){return m=typeof m=="function"?m:i,s==null?s:Gv(s,d,w0(g),m)}function Md(s){return s==null?[]:jb(s,Zr(s))}function $O(s){return s==null?[]:jb(s,jn(s))}function DO(s,d,g){return g===i&&(g=d,d=i),g!==i&&(g=zo(g),g=g===g?g:0),d!==i&&(d=zo(d),d=d===d?d:0),cu(zo(s),d,g)}function CO(s,d,g){return d=ka(d),g===i?(g=d,d=0):g=ka(g),s=zo(s),M1(s,d,g)}function NO(s,d,g){if(g&&typeof g!="boolean"&&_n(s,d,g)&&(d=g=i),g===i&&(typeof d=="boolean"?(g=d,d=i):typeof s=="boolean"&&(g=s,s=i)),s===i&&d===i?(s=0,d=1):(s=ka(s),d===i?(d=s,s=0):d=ka(d)),s>d){var m=s;s=d,d=m}if(g||s%1||d%1){var v=xv();return on(s+v*(d-s+d_("1e-"+((v+"").length-1))),d)}return h0(s,d)}var RO=xd(function(s,d,g){return d=d.toLowerCase(),s+(g?Qw(d):d)});function Qw(s){return j0(vt(s).toLowerCase())}function e_(s){return s=vt(s),s&&s.replace(Wg,O_).replace(ci,"")}function kO(s,d,g){s=vt(s),d=ni(d);var m=s.length;g=g===i?m:cu(Me(g),0,m);var v=g;return g-=d.length,g>=0&&s.slice(g,v)==d}function FO(s){return s=vt(s),s&&de.test(s)?s.replace(L,I_):s}function LO(s){return s=vt(s),s&&Xs.test(s)?s.replace(Ea,"\\$&"):s}var MO=xd(function(s,d,g){return s+(g?"-":"")+d.toLowerCase()}),UO=xd(function(s,d,g){return s+(g?" ":"")+d.toLowerCase()}),BO=nw("toLowerCase");function jO(s,d,g){s=vt(s),d=Me(d);var m=d?Du(s):0;if(!d||m>=d)return s;var v=(d-m)/2;return Py(my(v),g)+s+Py(gy(v),g)}function ZO(s,d,g){s=vt(s),d=Me(d);var m=d?Du(s):0;return d&&m<d?s+Py(d-m,g):s}function zO(s,d,g){s=vt(s),d=Me(d);var m=d?Du(s):0;return d&&m<d?Py(d-m,g)+s:s}function VO(s,d,g){return g||d==null?d=0:d&&(d=+d),Y_(vt(s).replace(H,""),d||0)}function WO(s,d,g){return(g?_n(s,d,g):d===i)?d=1:d=Me(d),g0(vt(s),d)}function GO(){var s=arguments,d=vt(s[0]);return s.length<3?d:d.replace(s[1],s[2])}var HO=xd(function(s,d,g){return s+(g?"_":"")+d.toLowerCase()});function qO(s,d,g){return g&&typeof g!="number"&&_n(s,d,g)&&(d=g=i),g=g===i?gt:g>>>0,g?(s=vt(s),s&&(typeof d=="string"||d!=null&&!M0(d))&&(d=ni(d),!d&&$u(s))?Vs(Go(s),0,g):s.split(d,g)):[]}var KO=xd(function(s,d,g){return s+(g?" ":"")+j0(d)});function XO(s,d,g){return s=vt(s),g=g==null?0:cu(Me(g),0,s.length),d=ni(d),s.slice(g,g+d.length)==d}function YO(s,d,g){var m=w.templateSettings;g&&_n(s,d,g)&&(d=i),s=vt(s),d=jy({},d,m,cw);var v=jy({},d.imports,m.imports,cw),_=Zr(v),P=jb(v,_),C,M,J=0,Q=d.interpolate||tu,ne="__p += '",ue=e0((d.escape||tu).source+"|"+Q.source+"|"+(Q===Kt?Ud:tu).source+"|"+(d.evaluate||tu).source+"|$","g"),Te="//# sourceURL="+(Et.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++It+"]")+`
`;s.replace(ue,function($e,qe,ot,oi,On,ai){return ot||(ot=oi),ne+=s.slice(J,ai).replace(zd,E_),qe&&(C=!0,ne+=`' +
__e(`+qe+`) +
'`),On&&(M=!0,ne+=`';
`+On+`;
__p += '`),ot&&(ne+=`' +
((__t = (`+ot+`)) == null ? '' : __t) +
'`),J=ai+$e.length,$e}),ne+=`';
`;var Pe=Et.call(d,"variable")&&d.variable;if(!Pe)ne=`with (obj) {
`+ne+`
}
`;else if(Bg.test(Pe))throw new ke(f);ne=(M?ne.replace(Oa,""):ne).replace(Ia,"$1").replace(T,"$1;"),ne="function("+(Pe||"obj")+`) {
`+(Pe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(C?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ne+`return __p
}`;var Be=r_(function(){return bt(_,Te+"return "+ne).apply(i,P)});if(Be.source=ne,L0(Be))throw Be;return Be}function JO(s){return vt(s).toLowerCase()}function QO(s){return vt(s).toUpperCase()}function eI(s,d,g){if(s=vt(s),s&&(g||d===i))return dv(s);if(!s||!(d=ni(d)))return s;var m=Go(s),v=Go(d),_=fv(m,v),P=pv(m,v)+1;return Vs(m,_,P).join("")}function tI(s,d,g){if(s=vt(s),s&&(g||d===i))return s.slice(0,gv(s)+1);if(!s||!(d=ni(d)))return s;var m=Go(s),v=pv(m,Go(d))+1;return Vs(m,0,v).join("")}function rI(s,d,g){if(s=vt(s),s&&(g||d===i))return s.replace(H,"");if(!s||!(d=ni(d)))return s;var m=Go(s),v=fv(m,Go(d));return Vs(m,v).join("")}function nI(s,d){var g=rt,m=Vo;if(zt(d)){var v="separator"in d?d.separator:v;g="length"in d?Me(d.length):g,m="omission"in d?ni(d.omission):m}s=vt(s);var _=s.length;if($u(s)){var P=Go(s);_=P.length}if(g>=_)return s;var C=g-Du(m);if(C<1)return m;var M=P?Vs(P,0,C).join(""):s.slice(0,C);if(v===i)return M+m;if(P&&(C+=M.length-C),M0(v)){if(s.slice(C).search(v)){var J,Q=M;for(v.global||(v=e0(v.source,vt(Qs.exec(v))+"g")),v.lastIndex=0;J=v.exec(Q);)var ne=J.index;M=M.slice(0,ne===i?C:ne)}}else if(s.indexOf(ni(v),C)!=C){var ue=M.lastIndexOf(v);ue>-1&&(M=M.slice(0,ue))}return M+m}function iI(s){return s=vt(s),s&&Y.test(s)?s.replace(k,N_):s}var oI=xd(function(s,d,g){return s+(g?" ":"")+d.toUpperCase()}),j0=nw("toUpperCase");function t_(s,d,g){return s=vt(s),d=g?i:d,d===i?A_(s)?F_(s):v_(s):s.match(d)||[]}var r_=ze(function(s,d){try{return ti(s,i,d)}catch(g){return L0(g)?g:new ke(g)}}),aI=Ca(function(s,d){return fi(d,function(g){g=_a(g),$a(s,g,k0(s[g],s))}),s});function sI(s){var d=s==null?0:s.length,g=Ae();return s=d?Mt(s,function(m){if(typeof m[1]!="function")throw new No(a);return[g(m[0]),m[1]]}):[],ze(function(m){for(var v=-1;++v<d;){var _=s[v];if(ti(_[0],this,m))return ti(_[1],this,m)}})}function uI(s){return N1(Mo(s,l))}function Z0(s){return function(){return s}}function lI(s,d){return s==null||s!==s?d:s}var cI=ow(),dI=ow(!0);function Hn(s){return s}function z0(s){return kv(typeof s=="function"?s:Mo(s,l))}function fI(s){return Lv(Mo(s,l))}function pI(s,d){return Mv(s,Mo(d,l))}var hI=ze(function(s,d){return function(g){return Ag(g,s,d)}}),gI=ze(function(s,d){return function(g){return Ag(s,g,d)}});function V0(s,d,g){var m=Zr(d),v=xy(d,m);g==null&&!(zt(d)&&(v.length||!m.length))&&(g=d,d=s,s=this,v=xy(d,Zr(d)));var _=!(zt(g)&&"chain"in g)||!!g.chain,P=Ra(s);return fi(v,function(C){var M=d[C];s[C]=M,P&&(s.prototype[C]=function(){var J=this.__chain__;if(_||J){var Q=s(this.__wrapped__),ne=Q.__actions__=An(this.__actions__);return ne.push({func:M,args:arguments,thisArg:s}),Q.__chain__=J,Q}return M.apply(s,Wa([this.value()],arguments))})}),s}function mI(){return Yr._===this&&(Yr._=Z_),this}function W0(){}function yI(s){return s=Me(s),ze(function(d){return Uv(d,s)})}var bI=x0(Mt),vI=x0(av),wI=x0(Ky);function n_(s){return P0(s)?Xy(_a(s)):X1(s)}function _I(s){return function(d){return s==null?i:fu(s,d)}}var xI=sw(),TI=sw(!0);function G0(){return[]}function H0(){return!1}function OI(){return{}}function II(){return""}function EI(){return!0}function SI(s,d){if(s=Me(s),s<1||s>Ut)return[];var g=gt,m=on(s,gt);d=Ae(d),s-=gt;for(var v=Qy(m,d);++g<s;)d(g);return v}function AI(s){return Fe(s)?Mt(s,_a):ii(s)?[s]:An(Tw(vt(s)))}function PI(s){var d=++B_;return vt(s)+d}var $I=Ay(function(s,d){return s+d},0),DI=T0("ceil"),CI=Ay(function(s,d){return s/d},1),NI=T0("floor");function RI(s){return s&&s.length?_y(s,Hn,u0):i}function kI(s,d){return s&&s.length?_y(s,Ae(d,2),u0):i}function FI(s){return lv(s,Hn)}function LI(s,d){return lv(s,Ae(d,2))}function MI(s){return s&&s.length?_y(s,Hn,f0):i}function UI(s,d){return s&&s.length?_y(s,Ae(d,2),f0):i}var BI=Ay(function(s,d){return s*d},1),jI=T0("round"),ZI=Ay(function(s,d){return s-d},0);function zI(s){return s&&s.length?Jy(s,Hn):0}function VI(s,d){return s&&s.length?Jy(s,Ae(d,2)):0}return w.after=f2,w.ary=Rw,w.assign=Q2,w.assignIn=qw,w.assignInWith=jy,w.assignWith=eO,w.at=tO,w.before=kw,w.bind=k0,w.bindAll=aI,w.bindKey=Fw,w.castArray=O2,w.chain=Dw,w.chunk=Nx,w.compact=Rx,w.concat=kx,w.cond=sI,w.conforms=uI,w.constant=Z0,w.countBy=zT,w.create=rO,w.curry=Lw,w.curryRight=Mw,w.debounce=Uw,w.defaults=nO,w.defaultsDeep=iO,w.defer=p2,w.delay=h2,w.difference=Fx,w.differenceBy=Lx,w.differenceWith=Mx,w.drop=Ux,w.dropRight=Bx,w.dropRightWhile=jx,w.dropWhile=Zx,w.fill=zx,w.filter=WT,w.flatMap=qT,w.flatMapDeep=KT,w.flatMapDepth=XT,w.flatten=Sw,w.flattenDeep=Vx,w.flattenDepth=Wx,w.flip=g2,w.flow=cI,w.flowRight=dI,w.fromPairs=Gx,w.functions=dO,w.functionsIn=fO,w.groupBy=YT,w.initial=qx,w.intersection=Kx,w.intersectionBy=Xx,w.intersectionWith=Yx,w.invert=hO,w.invertBy=gO,w.invokeMap=QT,w.iteratee=z0,w.keyBy=e2,w.keys=Zr,w.keysIn=jn,w.map=ky,w.mapKeys=yO,w.mapValues=bO,w.matches=fI,w.matchesProperty=pI,w.memoize=Ly,w.merge=vO,w.mergeWith=Kw,w.method=hI,w.methodOf=gI,w.mixin=V0,w.negate=My,w.nthArg=yI,w.omit=wO,w.omitBy=_O,w.once=m2,w.orderBy=t2,w.over=bI,w.overArgs=y2,w.overEvery=vI,w.overSome=wI,w.partial=F0,w.partialRight=Bw,w.partition=r2,w.pick=xO,w.pickBy=Xw,w.property=n_,w.propertyOf=_I,w.pull=tT,w.pullAll=Pw,w.pullAllBy=rT,w.pullAllWith=nT,w.pullAt=iT,w.range=xI,w.rangeRight=TI,w.rearg=b2,w.reject=o2,w.remove=oT,w.rest=v2,w.reverse=N0,w.sampleSize=s2,w.set=OO,w.setWith=IO,w.shuffle=u2,w.slice=aT,w.sortBy=d2,w.sortedUniq=pT,w.sortedUniqBy=hT,w.split=qO,w.spread=w2,w.tail=gT,w.take=mT,w.takeRight=yT,w.takeRightWhile=bT,w.takeWhile=vT,w.tap=RT,w.throttle=_2,w.thru=Ry,w.toArray=Ww,w.toPairs=Yw,w.toPairsIn=Jw,w.toPath=AI,w.toPlainObject=Hw,w.transform=EO,w.unary=x2,w.union=wT,w.unionBy=_T,w.unionWith=xT,w.uniq=TT,w.uniqBy=OT,w.uniqWith=IT,w.unset=SO,w.unzip=R0,w.unzipWith=$w,w.update=AO,w.updateWith=PO,w.values=Md,w.valuesIn=$O,w.without=ET,w.words=t_,w.wrap=T2,w.xor=ST,w.xorBy=AT,w.xorWith=PT,w.zip=$T,w.zipObject=DT,w.zipObjectDeep=CT,w.zipWith=NT,w.entries=Yw,w.entriesIn=Jw,w.extend=qw,w.extendWith=jy,V0(w,w),w.add=$I,w.attempt=r_,w.camelCase=RO,w.capitalize=Qw,w.ceil=DI,w.clamp=DO,w.clone=I2,w.cloneDeep=S2,w.cloneDeepWith=A2,w.cloneWith=E2,w.conformsTo=P2,w.deburr=e_,w.defaultTo=lI,w.divide=CI,w.endsWith=kO,w.eq=ia,w.escape=FO,w.escapeRegExp=LO,w.every=VT,w.find=GT,w.findIndex=Iw,w.findKey=oO,w.findLast=HT,w.findLastIndex=Ew,w.findLastKey=aO,w.floor=NI,w.forEach=Cw,w.forEachRight=Nw,w.forIn=sO,w.forInRight=uO,w.forOwn=lO,w.forOwnRight=cO,w.get=U0,w.gt=$2,w.gte=D2,w.has=pO,w.hasIn=B0,w.head=Aw,w.identity=Hn,w.includes=JT,w.indexOf=Hx,w.inRange=CO,w.invoke=mO,w.isArguments=gu,w.isArray=Fe,w.isArrayBuffer=C2,w.isArrayLike=Pn,w.isArrayLikeObject=tr,w.isBoolean=N2,w.isBuffer=Gs,w.isDate=R2,w.isElement=k2,w.isEmpty=F2,w.isEqual=L2,w.isEqualWith=M2,w.isError=L0,w.isFinite=U2,w.isFunction=Ra,w.isInteger=jw,w.isLength=Uy,w.isMap=Zw,w.isMatch=B2,w.isMatchWith=j2,w.isNaN=Z2,w.isNative=z2,w.isNil=W2,w.isNull=V2,w.isNumber=zw,w.isObject=zt,w.isObjectLike=Qt,w.isPlainObject=Rg,w.isRegExp=M0,w.isSafeInteger=G2,w.isSet=Vw,w.isString=By,w.isSymbol=ii,w.isTypedArray=Rd,w.isUndefined=H2,w.isWeakMap=q2,w.isWeakSet=K2,w.join=Jx,w.kebabCase=MO,w.last=Bo,w.lastIndexOf=Qx,w.lowerCase=UO,w.lowerFirst=BO,w.lt=X2,w.lte=Y2,w.max=RI,w.maxBy=kI,w.mean=FI,w.meanBy=LI,w.min=MI,w.minBy=UI,w.stubArray=G0,w.stubFalse=H0,w.stubObject=OI,w.stubString=II,w.stubTrue=EI,w.multiply=BI,w.nth=eT,w.noConflict=mI,w.noop=W0,w.now=Fy,w.pad=jO,w.padEnd=ZO,w.padStart=zO,w.parseInt=VO,w.random=NO,w.reduce=n2,w.reduceRight=i2,w.repeat=WO,w.replace=GO,w.result=TO,w.round=jI,w.runInContext=F,w.sample=a2,w.size=l2,w.snakeCase=HO,w.some=c2,w.sortedIndex=sT,w.sortedIndexBy=uT,w.sortedIndexOf=lT,w.sortedLastIndex=cT,w.sortedLastIndexBy=dT,w.sortedLastIndexOf=fT,w.startCase=KO,w.startsWith=XO,w.subtract=ZI,w.sum=zI,w.sumBy=VI,w.template=YO,w.times=SI,w.toFinite=ka,w.toInteger=Me,w.toLength=Gw,w.toLower=JO,w.toNumber=zo,w.toSafeInteger=J2,w.toString=vt,w.toUpper=QO,w.trim=eI,w.trimEnd=tI,w.trimStart=rI,w.truncate=nI,w.unescape=iI,w.uniqueId=PI,w.upperCase=oI,w.upperFirst=j0,w.each=Cw,w.eachRight=Nw,w.first=Aw,V0(w,function(){var s={};return va(w,function(d,g){Et.call(w.prototype,g)||(s[g]=d)}),s}(),{chain:!1}),w.VERSION=o,fi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){w[s].placeholder=w}),fi(["drop","take"],function(s,d){Qe.prototype[s]=function(g){g=g===i?1:Ir(Me(g),0);var m=this.__filtered__&&!d?new Qe(this):this.clone();return m.__filtered__?m.__takeCount__=on(g,m.__takeCount__):m.__views__.push({size:on(g,gt),type:s+(m.__dir__<0?"Right":"")}),m},Qe.prototype[s+"Right"]=function(g){return this.reverse()[s](g).reverse()}}),fi(["filter","map","takeWhile"],function(s,d){var g=d+1,m=g==We||g==Ue;Qe.prototype[s]=function(v){var _=this.clone();return _.__iteratees__.push({iteratee:Ae(v,3),type:g}),_.__filtered__=_.__filtered__||m,_}}),fi(["head","last"],function(s,d){var g="take"+(d?"Right":"");Qe.prototype[s]=function(){return this[g](1).value()[0]}}),fi(["initial","tail"],function(s,d){var g="drop"+(d?"":"Right");Qe.prototype[s]=function(){return this.__filtered__?new Qe(this):this[g](1)}}),Qe.prototype.compact=function(){return this.filter(Hn)},Qe.prototype.find=function(s){return this.filter(s).head()},Qe.prototype.findLast=function(s){return this.reverse().find(s)},Qe.prototype.invokeMap=ze(function(s,d){return typeof s=="function"?new Qe(this):this.map(function(g){return Ag(g,s,d)})}),Qe.prototype.reject=function(s){return this.filter(My(Ae(s)))},Qe.prototype.slice=function(s,d){s=Me(s);var g=this;return g.__filtered__&&(s>0||d<0)?new Qe(g):(s<0?g=g.takeRight(-s):s&&(g=g.drop(s)),d!==i&&(d=Me(d),g=d<0?g.dropRight(-d):g.take(d-s)),g)},Qe.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Qe.prototype.toArray=function(){return this.take(gt)},va(Qe.prototype,function(s,d){var g=/^(?:filter|find|map|reject)|While$/.test(d),m=/^(?:head|last)$/.test(d),v=w[m?"take"+(d=="last"?"Right":""):d],_=m||/^find/.test(d);v&&(w.prototype[d]=function(){var P=this.__wrapped__,C=m?[1]:arguments,M=P instanceof Qe,J=C[0],Q=M||Fe(P),ne=function(qe){var ot=v.apply(w,Wa([qe],C));return m&&ue?ot[0]:ot};Q&&g&&typeof J=="function"&&J.length!=1&&(M=Q=!1);var ue=this.__chain__,Te=!!this.__actions__.length,Pe=_&&!ue,Be=M&&!Te;if(!_&&Q){P=Be?P:new Qe(this);var $e=s.apply(P,C);return $e.__actions__.push({func:Ry,args:[ne],thisArg:i}),new Ro($e,ue)}return Pe&&Be?s.apply(this,C):($e=this.thru(ne),Pe?m?$e.value()[0]:$e.value():$e)})}),fi(["pop","push","shift","sort","splice","unshift"],function(s){var d=ay[s],g=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",m=/^(?:pop|shift)$/.test(s);w.prototype[s]=function(){var v=arguments;if(m&&!this.__chain__){var _=this.value();return d.apply(Fe(_)?_:[],v)}return this[g](function(P){return d.apply(Fe(P)?P:[],v)})}}),va(Qe.prototype,function(s,d){var g=w[d];if(g){var m=g.name+"";Et.call(vd,m)||(vd[m]=[]),vd[m].push({name:d,func:g})}}),vd[Sy(i,V).name]=[{name:"wrapper",func:i}],Qe.prototype.clone=i1,Qe.prototype.reverse=o1,Qe.prototype.value=a1,w.prototype.at=kT,w.prototype.chain=FT,w.prototype.commit=LT,w.prototype.next=MT,w.prototype.plant=BT,w.prototype.reverse=jT,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=ZT,w.prototype.first=w.prototype.head,rg&&(w.prototype[rg]=UT),w},Fu=L_();au?((au.exports=Fu)._=Fu,Wy._=Fu):Yr._=Fu}).call(commonjsGlobal)}(lodash,lodash.exports);var lodashExports=lodash.exports;function iota$1(e){for(var t=new Array(e),i=0;i<e;++i)t[i]=i;return t}var iota_1=iota$1;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var isBuffer_1=function(e){return e!=null&&(isBuffer$1(e)||isSlowBuffer(e)||!!e._isBuffer)};function isBuffer$1(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&isBuffer$1(e.slice(0,0))}var iota=iota_1,isBuffer=isBuffer_1,hasTypedArrays=typeof Float64Array<"u";function compare1st(e,t){return e[0]-t[0]}function order(){var e=this.stride,t=new Array(e.length),i;for(i=0;i<t.length;++i)t[i]=[Math.abs(e[i]),i];t.sort(compare1st);var o=new Array(t.length);for(i=0;i<o.length;++i)o[i]=t[i][1];return o}function compileConstructor(e,t){var i=["View",t,"d",e].join("");t<0&&(i="View_Nil"+e);var o=e==="generic";if(t===-1){var c="function "+i+"(a){this.data=a;};var proto="+i+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+i+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+i+"(a){return new "+i+"(a);}",S=new Function(c);return S()}else if(t===0){var c="function "+i+"(a,d) {this.data = a;this.offset = d};var proto="+i+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+i+"_copy() {return new "+i+"(this.data,this.offset)};proto.pick=function "+i+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+i+"_get(){return "+(o?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+i+"_set(v){return "+(o?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+i+"(a,b,c,d){return new "+i+"(a,d)}",S=new Function("TrivialArray",c);return S(CACHED_CONSTRUCTORS[e][0])}var c=["'use strict'"],n=iota(t),a=n.map(function(A){return"i"+A}),f="this.offset+"+n.map(function(A){return"this.stride["+A+"]*i"+A}).join("+"),p=n.map(function(A){return"b"+A}).join(","),r=n.map(function(A){return"c"+A}).join(",");c.push("function "+i+"(a,"+p+","+r+",d){this.data=a","this.shape=["+p+"]","this.stride=["+r+"]","this.offset=d|0}","var proto="+i+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),c.push("Object.defineProperty(proto,'size',{get:function "+i+"_size(){return "+n.map(function(A){return"this.shape["+A+"]"}).join("*"),"}})"),t===1?c.push("proto.order=[0]"):(c.push("Object.defineProperty(proto,'order',{get:"),t<4?(c.push("function "+i+"_order(){"),t===2?c.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):t===3&&c.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):c.push("ORDER})")),c.push("proto.set=function "+i+"_set("+a.join(",")+",v){"),o?c.push("return this.data.set("+f+",v)}"):c.push("return this.data["+f+"]=v}"),c.push("proto.get=function "+i+"_get("+a.join(",")+"){"),o?c.push("return this.data.get("+f+")}"):c.push("return this.data["+f+"]}"),c.push("proto.index=function "+i+"_index(",a.join(),"){return "+f+"}"),c.push("proto.hi=function "+i+"_hi("+a.join(",")+"){return new "+i+"(this.data,"+n.map(function(A){return["(typeof i",A,"!=='number'||i",A,"<0)?this.shape[",A,"]:i",A,"|0"].join("")}).join(",")+","+n.map(function(A){return"this.stride["+A+"]"}).join(",")+",this.offset)}");var u=n.map(function(A){return"a"+A+"=this.shape["+A+"]"}),l=n.map(function(A){return"c"+A+"=this.stride["+A+"]"});c.push("proto.lo=function "+i+"_lo("+a.join(",")+"){var b=this.offset,d=0,"+u.join(",")+","+l.join(","));for(var h=0;h<t;++h)c.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");c.push("return new "+i+"(this.data,"+n.map(function(A){return"a"+A}).join(",")+","+n.map(function(A){return"c"+A}).join(",")+",b)}"),c.push("proto.step=function "+i+"_step("+a.join(",")+"){var "+n.map(function(A){return"a"+A+"=this.shape["+A+"]"}).join(",")+","+n.map(function(A){return"b"+A+"=this.stride["+A+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var h=0;h<t;++h)c.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");c.push("return new "+i+"(this.data,"+n.map(function(A){return"a"+A}).join(",")+","+n.map(function(A){return"b"+A}).join(",")+",c)}");for(var y=new Array(t),I=new Array(t),h=0;h<t;++h)y[h]="a[i"+h+"]",I[h]="b[i"+h+"]";c.push("proto.transpose=function "+i+"_transpose("+a+"){"+a.map(function(A,V){return A+"=("+A+"===undefined?"+V+":"+A+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+i+"(this.data,"+y.join(",")+","+I.join(",")+",this.offset)}"),c.push("proto.pick=function "+i+"_pick("+a+"){var a=[],b=[],c=this.offset");for(var h=0;h<t;++h)c.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");c.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),c.push("return function construct_"+i+"(data,shape,stride,offset){return new "+i+"(data,"+n.map(function(A){return"shape["+A+"]"}).join(",")+","+n.map(function(A){return"stride["+A+"]"}).join(",")+",offset)}");var S=new Function("CTOR_LIST","ORDER",c.join(`
`));return S(CACHED_CONSTRUCTORS[e],order)}function arrayDType(e){if(isBuffer(e))return"buffer";if(hasTypedArrays)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}var CACHED_CONSTRUCTORS={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function wrappedNDArrayCtor(e,t,i,o){if(e===void 0){var r=CACHED_CONSTRUCTORS.array[0];return r([])}else typeof e=="number"&&(e=[e]);t===void 0&&(t=[e.length]);var c=t.length;if(i===void 0){i=new Array(c);for(var n=c-1,a=1;n>=0;--n)i[n]=a,a*=t[n]}if(o===void 0){o=0;for(var n=0;n<c;++n)i[n]<0&&(o-=(t[n]-1)*i[n])}for(var f=arrayDType(e),p=CACHED_CONSTRUCTORS[f];p.length<=c+1;)p.push(compileConstructor(f,p.length-1));var r=p[c+1];return r(e,t,i,o)}var ndarray=wrappedNDArrayCtor,ndarray5=getDefaultExportFromCjs(ndarray);/*!
 * ONNX Runtime Web v1.17.3
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var Od=Object.create,Dn=Object.defineProperty,Id=Object.getOwnPropertyDescriptor,Sd=Object.getOwnPropertyNames,Ad=Object.getPrototypeOf,Pd=Object.prototype.hasOwnProperty,E=(e,t)=>()=>(e&&(t=e(e=0)),t),me=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Pr=(e,t)=>{for(var i in t)Dn(e,i,{get:t[i],enumerable:!0})},Ha=(e,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of Sd(t))!Pd.call(e,c)&&c!==i&&Dn(e,c,{get:()=>t[c],enumerable:!(o=Id(t,c))||o.enumerable});return e},Er=(e,t,i)=>(i=e!=null?Od(Ad(e)):{},Ha(!e||!e.__esModule?Dn(i,"default",{value:e,enumerable:!0}):i,e)),or=e=>Ha(Dn({},"__esModule",{value:!0}),e),Ln,ir,Dr,Ed,Fn,Cn=E(()=>{Ln=new Map,ir=[],Dr=(e,t,i)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let o=Ln.get(e);if(o===void 0)Ln.set(e,{backend:t,priority:i});else{if(o.priority>i)return;if(o.priority===i&&o.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${i}`)}if(i>=0){let c=ir.indexOf(e);c!==-1&&ir.splice(c,1);for(let n=0;n<ir.length;n++)if(Ln.get(ir[n]).priority<=i){ir.splice(n,0,e);return}ir.push(e)}return}throw new TypeError("not a valid backend")},Ed=async e=>{let t=Ln.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let i=!!t.initPromise;try{return i||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(o){return i||(t.error=`${o}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},Fn=async e=>{let t=e.executionProviders||[],i=t.map(p=>typeof p=="string"?p:p.name),o=i.length===0?ir:i,c,n=[],a=new Set;for(let p of o){let r=await Ed(p);typeof r=="string"?n.push({name:p,err:r}):(c||(c=r),c===r&&a.add(p))}if(!c)throw new Error(`no available backend found. ERR: ${n.map(p=>`[${p.name}] ${p.err}`).join(", ")}`);for(let{name:p,err:r}of n)i.includes(p)&&console.warn(`removing requested execution provider "${p}" from session options because it is not available: ${r}`);let f=t.filter(p=>a.has(typeof p=="string"?p:p.name));return[c,new Proxy(e,{get:(p,r)=>r==="executionProviders"?f:Reflect.get(p,r)})]}}),qa=E(()=>{Cn()}),ja,Ya=E(()=>{ja="1.17.3"}),Xa,it,Ho=E(()=>{Ya(),Xa="warning",it={wasm:{},webgl:{},webgpu:{},versions:{common:ja},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);Xa=e}},get logLevel(){return Xa}},Object.defineProperty(it,"logLevel",{enumerable:!0})}),Z,Ka=E(()=>{Ho(),Z=it}),Ja,Za,Qa=E(()=>{Ja=(e,t)=>{let i=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);i.width=e.dims[3],i.height=e.dims[2];let o=i.getContext("2d");if(o!=null){let c,n;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(c=e.dims[2],n=e.dims[3]):(c=e.dims[3],n=e.dims[2]);let a=(t==null?void 0:t.format)!==void 0?t.format:"RGB",f=t==null?void 0:t.norm,p,r;f===void 0||f.mean===void 0?p=[255,255,255,255]:typeof f.mean=="number"?p=[f.mean,f.mean,f.mean,f.mean]:(p=[f.mean[0],f.mean[1],f.mean[2],0],f.mean[3]!==void 0&&(p[3]=f.mean[3])),f===void 0||f.bias===void 0?r=[0,0,0,0]:typeof f.bias=="number"?r=[f.bias,f.bias,f.bias,f.bias]:(r=[f.bias[0],f.bias[1],f.bias[2],0],f.bias[3]!==void 0&&(r[3]=f.bias[3]));let u=n*c,l=0,h=u,y=u*2,I=-1;a==="RGBA"?(l=0,h=u,y=u*2,I=u*3):a==="RGB"?(l=0,h=u,y=u*2):a==="RBG"&&(l=0,y=u,h=u*2);for(let S=0;S<n;S++)for(let A=0;A<c;A++){let V=(e.data[l++]-r[0])*p[0],N=(e.data[h++]-r[1])*p[1],B=(e.data[y++]-r[2])*p[2],te=I===-1?255:(e.data[I++]-r[3])*p[3];o.fillStyle="rgba("+V+","+N+","+B+","+te+")",o.fillRect(A,S,1,1)}if("toDataURL"in i)return i.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},Za=(e,t)=>{let i=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),o;if(i!=null){let c,n,a;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(c=e.dims[2],n=e.dims[1],a=e.dims[3]):(c=e.dims[3],n=e.dims[2],a=e.dims[1]);let f=t!==void 0&&t.format!==void 0?t.format:"RGB",p=t==null?void 0:t.norm,r,u;p===void 0||p.mean===void 0?r=[255,255,255,255]:typeof p.mean=="number"?r=[p.mean,p.mean,p.mean,p.mean]:(r=[p.mean[0],p.mean[1],p.mean[2],255],p.mean[3]!==void 0&&(r[3]=p.mean[3])),p===void 0||p.bias===void 0?u=[0,0,0,0]:typeof p.bias=="number"?u=[p.bias,p.bias,p.bias,p.bias]:(u=[p.bias[0],p.bias[1],p.bias[2],0],p.bias[3]!==void 0&&(u[3]=p.bias[3]));let l=n*c;if(t!==void 0&&(t.format!==void 0&&a===4&&t.format!=="RGBA"||a===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let h=4,y=0,I=1,S=2,A=3,V=0,N=l,B=l*2,te=-1;f==="RGBA"?(V=0,N=l,B=l*2,te=l*3):f==="RGB"?(V=0,N=l,B=l*2):f==="RBG"&&(V=0,B=l,N=l*2),o=i.createImageData(c,n);for(let ve=0;ve<n*c;y+=h,I+=h,S+=h,A+=h,ve++)o.data[y]=(e.data[V++]-u[0])*r[0],o.data[I]=(e.data[N++]-u[1])*r[1],o.data[S]=(e.data[B++]-u[2])*r[2],o.data[A]=te===-1?255:(e.data[te++]-u[3])*r[3]}else throw new Error("Can not access image data");return o}}),qo,es,ts,rs,ns,os=E(()=>{$n(),qo=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:i,width:o}=t,c=t.norm??{mean:255,bias:0},n,a;typeof c.mean=="number"?n=[c.mean,c.mean,c.mean,c.mean]:n=[c.mean[0],c.mean[1],c.mean[2],c.mean[3]??255],typeof c.bias=="number"?a=[c.bias,c.bias,c.bias,c.bias]:a=[c.bias[0],c.bias[1],c.bias[2],c.bias[3]??0];let f=t.format!==void 0?t.format:"RGBA",p=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",r=i*o,u=p==="RGBA"?new Float32Array(r*4):new Float32Array(r*3),l=4,h=0,y=1,I=2,S=3,A=0,V=r,N=r*2,B=-1;f==="RGB"&&(l=3,h=0,y=1,I=2,S=-1),p==="RGBA"?B=r*3:p==="RBG"?(A=0,N=r,V=r*2):p==="BGR"&&(N=0,V=r,A=r*2);for(let te=0;te<r;te++,h+=l,I+=l,y+=l,S+=l)u[A++]=(e[h]+a[0])/n[0],u[V++]=(e[y]+a[1])/n[1],u[N++]=(e[I]+a[2])/n[2],B!==-1&&S!==-1&&(u[B++]=(e[S]+a[3])/n[3]);return p==="RGBA"?new Xe("float32",u,[1,4,i,o]):new Xe("float32",u,[1,3,i,o])},es=async(e,t)=>{let i=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,o=typeof ImageData<"u"&&e instanceof ImageData,c=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,n=typeof e=="string",a,f=t??{},p=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},r=u=>u instanceof HTMLCanvasElement||u instanceof OffscreenCanvas?u.getContext("2d"):null;if(i){let u=p();u.width=e.width,u.height=e.height;let l=r(u);if(l!=null){let h=e.height,y=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(h=t.resizedHeight,y=t.resizedWidth),t!==void 0){if(f=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");f.tensorFormat="RGBA",f.height=h,f.width=y}else f.tensorFormat="RGBA",f.height=h,f.width=y;l.drawImage(e,0,0),a=l.getImageData(0,0,y,h).data}else throw new Error("Can not access image data")}else if(o){let u,l;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(u=t.resizedHeight,l=t.resizedWidth):(u=e.height,l=e.width),t!==void 0&&(f=t),f.format="RGBA",f.height=u,f.width=l,t!==void 0){let h=p();h.width=l,h.height=u;let y=r(h);if(y!=null)y.putImageData(e,0,0),a=y.getImageData(0,0,l,u).data;else throw new Error("Can not access image data")}else a=e.data}else if(c){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let u=p();u.width=e.width,u.height=e.height;let l=r(u);if(l!=null){let h=e.height,y=e.width;return l.drawImage(e,0,0,y,h),a=l.getImageData(0,0,y,h).data,f.height=h,f.width=y,qo(a,f)}else throw new Error("Can not access image data")}else{if(n)return new Promise((u,l)=>{let h=p(),y=r(h);if(!e||!y)return l();let I=new Image;I.crossOrigin="Anonymous",I.src=e,I.onload=()=>{h.width=I.width,h.height=I.height,y.drawImage(I,0,0,h.width,h.height);let S=y.getImageData(0,0,h.width,h.height);f.height=h.height,f.width=h.width,u(qo(S.data,f))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(a!==void 0)return qo(a,f);throw new Error("Input data provided is not supported - aborted tensor creation")},ts=(e,t)=>{let{width:i,height:o,download:c,dispose:n}=t,a=[1,o,i,4];return new Xe({location:"texture",type:"float32",texture:e,dims:a,download:c,dispose:n})},rs=(e,t)=>{let{dataType:i,dims:o,download:c,dispose:n}=t;return new Xe({location:"gpu-buffer",type:i??"float32",gpuBuffer:e,dims:o,download:c,dispose:n})},ns=(e,t,i)=>new Xe({location:"cpu-pinned",type:e,data:t,dims:i??[t.length]})}),ar,tn,is,as,ss=E(()=>{ar=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),tn=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),is=!1,as=()=>{if(!is){is=!0;let e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,i=typeof Float16Array<"u"&&Float16Array.from;e&&(ar.set("int64",BigInt64Array),tn.set(BigInt64Array,"int64")),t&&(ar.set("uint64",BigUint64Array),tn.set(BigUint64Array,"uint64")),i?(ar.set("float16",Float16Array),tn.set(Float16Array,"float16")):ar.set("float16",Uint16Array)}}}),us,ls,fs=E(()=>{$n(),us=e=>{let t=1;for(let i=0;i<e.length;i++){let o=e[i];if(typeof o!="number"||!Number.isSafeInteger(o))throw new TypeError(`dims[${i}] must be an integer, got: ${o}`);if(o<0)throw new RangeError(`dims[${i}] must be a non-negative integer, got: ${o}`);t*=o}return t},ls=(e,t)=>{switch(e.location){case"cpu":return new Xe(e.type,e.data,t);case"cpu-pinned":return new Xe({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new Xe({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new Xe({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}}),Xe,$n=E(()=>{Qa(),os(),ss(),fs(),Xe=class{constructor(e,t,i){as();let o,c;if(typeof e=="object"&&"location"in e)switch(this.dataLocation=e.location,o=e.type,c=e.dims,e.location){case"cpu-pinned":{let a=ar.get(o);if(!a)throw new TypeError(`unsupported type "${o}" to create tensor from pinned buffer`);if(!(e.data instanceof a))throw new TypeError(`buffer should be of type ${a.name}`);this.cpuData=e.data;break}case"texture":{if(o!=="float32")throw new TypeError(`unsupported type "${o}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break}case"gpu-buffer":{if(o!=="float32"&&o!=="float16"&&o!=="int32"&&o!=="int64"&&o!=="uint32"&&o!=="uint8"&&o!=="bool")throw new TypeError(`unsupported type "${o}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let a,f;if(typeof e=="string")if(o=e,f=i,e==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");a=t}else{let p=ar.get(e);if(p===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if(e==="float16"&&p===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");e==="uint64"||e==="int64"?a=p.from(t,BigInt):a=p.from(t)}else if(t instanceof p)a=t;else throw new TypeError(`A ${o} tensor's data must be type of ${p}`)}else if(f=t,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let p=typeof e[0];if(p==="string")o="string",a=e;else if(p==="boolean")o="bool",a=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${p}.`)}else{let p=tn.get(e.constructor);if(p===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);o=p,a=e}if(f===void 0)f=[a.length];else if(!Array.isArray(f))throw new TypeError("A tensor's dims must be a number array");c=f,this.cpuData=a,this.dataLocation="cpu"}let n=us(c);if(this.cpuData&&n!==this.cpuData.length)throw new Error(`Tensor's size(${n}) does not match data length(${this.cpuData.length}).`);this.type=o,this.dims=c,this.size=n}static async fromImage(e,t){return es(e,t)}static fromTexture(e,t){return ts(e,t)}static fromGpuBuffer(e,t){return rs(e,t)}static fromPinnedBuffer(e,t,i){return ns(e,t,i)}toDataURL(e){return Ja(this,e)}toImageData(e){return Za(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ls(this,e)}}}),Re,kn=E(()=>{$n(),Re=Xe}),cs,ps,sr,ur,jo=E(()=>{Ho(),cs=(e,t)=>{(typeof it.trace>"u"?!it.wasm.trace:!it.trace)||console.timeStamp(`${e}::ORT::${t}`)},ps=(e,t)=>{var c;let i=((c=new Error().stack)==null?void 0:c.split(/\r\n|\r|\n/g))||[],o=!1;for(let n=0;n<i.length;n++){if(o&&!i[n].includes("TRACE_FUNC")){let a=`FUNC_${e}::${i[n].trim().split(" ")[1]}`;t&&(a+=`::${t}`),cs("CPU",a);return}i[n].includes("TRACE_FUNC")&&(o=!0)}},sr=e=>{(typeof it.trace>"u"?!it.wasm.trace:!it.trace)||ps("BEGIN",e)},ur=e=>{(typeof it.trace>"u"?!it.wasm.trace:!it.trace)||ps("END",e)}}),Bn,ds=E(()=>{Cn(),kn(),jo(),Bn=class o_{constructor(t){this.handler=t}async run(t,i,o){sr();let c={},n={};if(typeof t!="object"||t===null||t instanceof Re||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let a=!0;if(typeof i=="object"){if(i===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(i instanceof Re)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(i)){if(i.length===0)throw new TypeError("'fetches' cannot be an empty array.");a=!1;for(let r of i){if(typeof r!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(r)===-1)throw new RangeError(`'fetches' contains invalid output name: ${r}.`);c[r]=null}if(typeof o=="object"&&o!==null)n=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else{let r=!1,u=Object.getOwnPropertyNames(i);for(let l of this.outputNames)if(u.indexOf(l)!==-1){let h=i[l];(h===null||h instanceof Re)&&(r=!0,a=!1,c[l]=h)}if(r){if(typeof o=="object"&&o!==null)n=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else n=i}}else if(typeof i<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let r of this.inputNames)if(typeof t[r]>"u")throw new Error(`input '${r}' is missing in 'feeds'.`);if(a)for(let r of this.outputNames)c[r]=null;let f=await this.handler.run(t,c,n),p={};for(let r in f)if(Object.hasOwnProperty.call(f,r)){let u=f[r];u instanceof Re?p[r]=u:p[r]=new Re(u.type,u.data,u.dims)}return ur(),p}async release(){return this.handler.dispose()}static async create(t,i,o,c){sr();let n,a={};if(typeof t=="string"){if(n=t,typeof i=="object"&&i!==null)a=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(n=t,typeof i=="object"&&i!==null)a=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let u=t,l=0,h=t.byteLength;if(typeof i=="object"&&i!==null)a=i;else if(typeof i=="number"){if(l=i,!Number.isSafeInteger(l))throw new RangeError("'byteOffset' must be an integer.");if(l<0||l>=u.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${u.byteLength}).`);if(h=t.byteLength-l,typeof o=="number"){if(h=o,!Number.isSafeInteger(h))throw new RangeError("'byteLength' must be an integer.");if(h<=0||l+h>u.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${u.byteLength-l}].`);if(typeof c=="object"&&c!==null)a=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(typeof o<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof i<"u")throw new TypeError("'options' must be an object.");n=new Uint8Array(u,l,h)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[f,p]=await Fn(a),r=await f.createInferenceSessionHandler(n,p);return ur(),new o_(r)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),Dd,hs=E(()=>{ds(),Dd=Bn}),ms=E(()=>{}),bs=E(()=>{}),gs=E(()=>{}),ys=E(()=>{}),Ld,Nn,Ts=E(()=>{Cn(),kn(),Ld="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",Nn=class a_{constructor(t,i,o){this.handler=t,this.hasOptimizerModel=i,this.hasEvalModel=o}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(t,i){let o=t.evalModel||"",c=t.optimizerModel||"",n=i||{},[a,f]=await Fn(n);if(a.createTrainingSessionHandler){let p=await a.createTrainingSessionHandler(t.checkpointState,t.trainModel,o,c,f);return new a_(p,!!t.optimizerModel,!!t.evalModel)}else throw new Error(Ld)}typeNarrowingForRunStep(t,i,o,c,n){let a={},f={};if(typeof o!="object"||o===null||o instanceof Re||Array.isArray(o))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let p=!0;if(typeof c=="object"){if(c===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(c instanceof Re)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(c)){if(c.length===0)throw new TypeError("'fetches' cannot be an empty array.");p=!1;for(let r of c){if(typeof r!="string")throw new TypeError("'fetches' must be a string array or an object.");if(i.indexOf(r)===-1)throw new RangeError(`'fetches' contains invalid output name: ${r}.`);a[r]=null}if(typeof n=="object"&&n!==null)f=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let r=!1,u=Object.getOwnPropertyNames(c);for(let l of i)if(u.indexOf(l)!==-1){let h=c[l];(h===null||h instanceof Re)&&(r=!0,p=!1,a[l]=h)}if(r){if(typeof n=="object"&&n!==null)f=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else f=c}}else if(typeof c<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let r of t)if(typeof o[r]>"u")throw new Error(`input '${r}' is missing in 'feeds'.`);if(p)for(let r of i)a[r]=null;return[a,f]}convertHandlerReturnTypeToMapOfTensors(t){let i={};for(let o in t)if(Object.hasOwnProperty.call(t,o)){let c=t[o];c instanceof Re?i[o]=c:i[o]=new Re(c.type,c.data,c.dims)}return i}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(t,i,o){let[c,n]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,t,i,o),a=await this.handler.runTrainStep(t,c,n);return this.convertHandlerReturnTypeToMapOfTensors(a)}async runOptimizerStep(t){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(t||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(t,i,o){if(this.hasEvalModel){let[c,n]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,t,i,o),a=await this.handler.runEvalStep(t,c,n);return this.convertHandlerReturnTypeToMapOfTensors(a)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(t=!0){return this.handler.getParametersSize(t)}async loadParametersBuffer(t,i=!0){let o=await this.getParametersSize(i);if(t.length!==4*o)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(t,i)}async getContiguousParameters(t=!0){return this.handler.getContiguousParameters(t)}async release(){return this.handler.dispose()}}}),Fd,xs=E(()=>{Ts(),Fd=Nn}),Yo={};Pr(Yo,{InferenceSession:()=>Dd,TRACE:()=>cs,TRACE_FUNC_BEGIN:()=>sr,TRACE_FUNC_END:()=>ur,Tensor:()=>Re,TrainingSession:()=>Fd,env:()=>Z,registerBackend:()=>Dr});var Tt=E(()=>{qa(),Ka(),hs(),kn(),ms(),bs(),jo(),gs(),ys(),xs()});function jt(e,t,i,o){if(t===void 0)return $d(e);if(i===void 0)Rn(e,t);else if(typeof i=="number"&&o===void 0)Rn(e,t);else if(typeof i=="string"&&o===void 0)Rn(e,i,1,t);else if(typeof i=="string"&&typeof o=="number")Rn(e,i,o,t);else throw new TypeError("input is valid")}function $d(e){return{verbose:jt.verbose.bind(null,e),info:jt.info.bind(null,e),warning:jt.warning.bind(null,e),error:jt.error.bind(null,e),fatal:jt.fatal.bind(null,e)}}function Rn(e,t,i,o){let c=rn[o||""]||rn[""];vs[e]<vs[c.minimalSeverity]||(c.logDateTime&&(t=`${new Date().toISOString()}|${t}`),c.logSourceLocation,Cd[c.provider].log(e,t,o))}var Xo,Ko,vs,Cd,_s,rn,ce,Gn,Un,zn,Mn,at=E(()=>{Xo=class{log(e,t,i){}},Ko=class{log(e,t,i){console.log(`${this.color(e)} ${i?"\x1B[35m"+i+"\x1B[0m ":""}${t}`)}color(e){switch(e){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${e}`)}}},vs={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},Cd={none:new Xo,console:new Ko},_s={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},rn={"":_s},(e=>{function t(r,u){e("verbose",r,u)}e.verbose=t;function i(r,u){e("info",r,u)}e.info=i;function o(r,u){e("warning",r,u)}e.warning=o;function c(r,u){e("error",r,u)}e.error=c;function n(r,u){e("fatal",r,u)}e.fatal=n;function a(r){rn={},f("",r||{})}e.reset=a;function f(r,u){if(r==="*")a(u);else{let l=rn[r]||_s;rn[r]={provider:u.provider||l.provider,minimalSeverity:u.minimalSeverity||l.minimalSeverity,logDateTime:u.logDateTime===void 0?l.logDateTime:u.logDateTime,logSourceLocation:u.logSourceLocation===void 0?l.logSourceLocation:u.logSourceLocation}}}e.set=f;function p(r){let u={};r.logLevel&&(u.minimalSeverity=r.logLevel),f("",u)}e.setWithEnv=p})(jt||(jt={})),ce=jt,Gn=class{constructor(e,t,i,o,c,n){this.category=e,this.name=t,this.startTime=i,this.endCallback=o,this.timer=c,this.ctx=n}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}},Un=class{constructor(e,t,i,o){this.category=e,this.name=t,this.startTime=i,this.endTime=o}},zn=class{constructor(e,t,i){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=e===void 0?1e4:e,this._flushBatchSize=t===void 0?10:t,this._flushIntervalInMilliseconds=i===void 0?5e3:i}static create(e){return e===void 0?new this:new this(e.maxNumberEvents,e.flushBatchSize,e.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=Mn(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(e,t,i,o){let c=this._started?this.begin(e,t,o):void 0,n=!1,a=i();if(a&&typeof a.then=="function")return n=!0,new Promise((f,p)=>{a.then(async r=>{c&&await c.end(),f(r)},async r=>{c&&await c.end(),p(r)})});if(!n&&c){let f=c.end();if(f&&typeof f.then=="function")return new Promise((p,r)=>{f.then(()=>{p(a)},u=>{r(u)})})}return a}begin(e,t,i){if(!this._started)throw new Error("profiler is not started yet");if(i===void 0){let o=Mn();return this.flush(o),new Gn(e,t,o,c=>this.endSync(c))}else{let o=i.beginTimer();return new Gn(e,t,0,async c=>this.end(c),o,i)}}async end(e){let t=await e.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Un(e.category,e.name,e.startTime,t)),this.flush(t))}endSync(e){let t=Mn();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Un(e.category,e.name,e.startTime,t)),this.flush(t))}logOneEvent(e){ce.verbose(`Profiler.${e.category}`,`${(e.endTime-e.startTime).toFixed(2)}ms on event '${e.name}' at ${e.endTime.toFixed(2)}`)}flush(e){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||e-this._flushTime>=this._flushIntervalInMilliseconds){for(let t=this._flushPointer;this._flushPointer<t+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=Mn()}}get started(){return this._started}},Mn=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function Os(e,t,i){for(let o of i){let c=o[0],n=o[1],a=o[2],f=o[3],p=o[4];if(e.opType===c){for(let r of t)if((r.domain===n||r.domain==="ai.onnx"&&n==="")&&kd(r.version,a))return{opImpl:f,opInit:p}}}throw new TypeError(`cannot resolve operator '${e.opType}' with opsets: ${t.map(o=>`${o.domain||"ai.onnx"} v${o.version}`).join(", ")}`)}function kd(e,t){if(t.endsWith("+")){let i=Number.parseInt(t.substring(0,t.length-1),10);return!isNaN(i)&&i<=e}else if(t.split("-").length===2){let i=t.split("-"),o=Number.parseInt(i[0],10),c=Number.parseInt(i[1],10);return!isNaN(o)&&!isNaN(c)&&o<=e&&e<=c}else return Number.parseInt(t,10)===e}var Is=E(()=>{}),Ss=me(e=>{e.__esModule=!0;var t=function(){function i(o){if(!o)throw new TypeError("Invalid argument; `value` has no value.");this.value=i.EMPTY,o&&i.isGuid(o)&&(this.value=o)}return i.isGuid=function(o){var c=o.toString();return o&&(o instanceof i||i.validator.test(c))},i.create=function(){return new i([i.gen(2),i.gen(1),i.gen(1),i.gen(1),i.gen(3)].join("-"))},i.createEmpty=function(){return new i("emptyguid")},i.parse=function(o){return new i(o)},i.raw=function(){return[i.gen(2),i.gen(1),i.gen(1),i.gen(1),i.gen(3)].join("-")},i.gen=function(o){for(var c="",n=0;n<o;n++)c+=((1+Math.random())*65536|0).toString(16).substring(1);return c},i.prototype.equals=function(o){return i.isGuid(o)&&this.value===o.toString()},i.prototype.isEmpty=function(){return this.value===i.EMPTY},i.prototype.toString=function(){return this.value},i.prototype.toJSON=function(){return{value:this.value}},i.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),i.EMPTY="00000000-0000-0000-0000-000000000000",i}();e.Guid=t});function be(e,t,i){this.low=e|0,this.high=t|0,this.unsigned=!!i}function je(e){return(e&&e.__isLong__)===!0}function As(e){var t=Math.clz32(e&-e);return e?31-t:t}function lr(e,t){var i,o,c;return t?(e>>>=0,(c=0<=e&&e<256)&&(o=Es[e],o)?o:(i=le(e,0,!0),c&&(Es[e]=i),i)):(e|=0,(c=-128<=e&&e<128)&&(o=Ps[e],o)?o:(i=le(e,e<0?-1:0,!1),c&&(Ps[e]=i),i))}function ut(e,t){if(isNaN(e))return t?Vt:xt;if(t){if(e<0)return Vt;if(e>=Cs)return Bs}else{if(e<=-Ls)return tt;if(e+1>=Ls)return ks}return e<0?ut(-e,t).neg():le(e%Fr|0,e/Fr|0,t)}function le(e,t,i){return new be(e,t,i)}function Qo(e,t,i){if(e.length===0)throw Error("empty string");if(typeof t=="number"?(i=t,t=!1):t=!!t,e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return t?Vt:xt;if(i=i||10,i<2||36<i)throw RangeError("radix");var o;if((o=e.indexOf("-"))>0)throw Error("interior hyphen");if(o===0)return Qo(e.substring(1),t,i).neg();for(var c=ut(Vn(i,8)),n=xt,a=0;a<e.length;a+=8){var f=Math.min(8,e.length-a),p=parseInt(e.substring(a,a+f),i);if(f<8){var r=ut(Vn(i,f));n=n.mul(r).add(ut(p))}else n=n.mul(c),n=n.add(ut(p))}return n.unsigned=t,n}function wt(e,t){return typeof e=="number"?ut(e,t):typeof e=="string"?Qo(e,t):le(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}var st,Ps,Es,Vn,Ds,Nd,Fr,Cs,Ls,Fs,xt,Vt,Lr,$s,Zo,ks,Bs,tt,$,Wt,ei=E(()=>{st=null;try{st=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}be.prototype.__isLong__,Object.defineProperty(be.prototype,"__isLong__",{value:!0}),be.isLong=je,Ps={},Es={},be.fromInt=lr,be.fromNumber=ut,be.fromBits=le,Vn=Math.pow,be.fromString=Qo,be.fromValue=wt,Ds=65536,Nd=1<<24,Fr=Ds*Ds,Cs=Fr*Fr,Ls=Cs/2,Fs=lr(Nd),xt=lr(0),be.ZERO=xt,Vt=lr(0,!0),be.UZERO=Vt,Lr=lr(1),be.ONE=Lr,$s=lr(1,!0),be.UONE=$s,Zo=lr(-1),be.NEG_ONE=Zo,ks=le(-1,2147483647,!1),be.MAX_VALUE=ks,Bs=le(-1,-1,!0),be.MAX_UNSIGNED_VALUE=Bs,tt=le(0,-2147483648,!1),be.MIN_VALUE=tt,$=be.prototype,$.toInt=function(){return this.unsigned?this.low>>>0:this.low},$.toNumber=function(){return this.unsigned?(this.high>>>0)*Fr+(this.low>>>0):this.high*Fr+(this.low>>>0)},$.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(tt)){var t=ut(e),i=this.div(t),o=i.mul(t).sub(this);return i.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var c=ut(Vn(e,6),this.unsigned),n=this,a="";;){var f=n.div(c),p=n.sub(f.mul(c)).toInt()>>>0,r=p.toString(e);if(n=f,n.isZero())return r+a;for(;r.length<6;)r="0"+r;a=""+r+a}},$.getHighBits=function(){return this.high},$.getHighBitsUnsigned=function(){return this.high>>>0},$.getLowBits=function(){return this.low},$.getLowBitsUnsigned=function(){return this.low>>>0},$.getNumBitsAbs=function(){if(this.isNegative())return this.eq(tt)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1},$.isZero=function(){return this.high===0&&this.low===0},$.eqz=$.isZero,$.isNegative=function(){return!this.unsigned&&this.high<0},$.isPositive=function(){return this.unsigned||this.high>=0},$.isOdd=function(){return(this.low&1)===1},$.isEven=function(){return(this.low&1)===0},$.equals=function(e){return je(e)||(e=wt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},$.eq=$.equals,$.notEquals=function(e){return!this.eq(e)},$.neq=$.notEquals,$.ne=$.notEquals,$.lessThan=function(e){return this.comp(e)<0},$.lt=$.lessThan,$.lessThanOrEqual=function(e){return this.comp(e)<=0},$.lte=$.lessThanOrEqual,$.le=$.lessThanOrEqual,$.greaterThan=function(e){return this.comp(e)>0},$.gt=$.greaterThan,$.greaterThanOrEqual=function(e){return this.comp(e)>=0},$.gte=$.greaterThanOrEqual,$.ge=$.greaterThanOrEqual,$.compare=function(e){if(je(e)||(e=wt(e)),this.eq(e))return 0;var t=this.isNegative(),i=e.isNegative();return t&&!i?-1:!t&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},$.comp=$.compare,$.negate=function(){return!this.unsigned&&this.eq(tt)?tt:this.not().add(Lr)},$.neg=$.negate,$.add=function(e){je(e)||(e=wt(e));var t=this.high>>>16,i=this.high&65535,o=this.low>>>16,c=this.low&65535,n=e.high>>>16,a=e.high&65535,f=e.low>>>16,p=e.low&65535,r=0,u=0,l=0,h=0;return h+=c+p,l+=h>>>16,h&=65535,l+=o+f,u+=l>>>16,l&=65535,u+=i+a,r+=u>>>16,u&=65535,r+=t+n,r&=65535,le(l<<16|h,r<<16|u,this.unsigned)},$.subtract=function(e){return je(e)||(e=wt(e)),this.add(e.neg())},$.sub=$.subtract,$.multiply=function(e){if(this.isZero())return this;if(je(e)||(e=wt(e)),st){var t=st.mul(this.low,this.high,e.low,e.high);return le(t,st.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?Vt:xt;if(this.eq(tt))return e.isOdd()?tt:xt;if(e.eq(tt))return this.isOdd()?tt:xt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Fs)&&e.lt(Fs))return ut(this.toNumber()*e.toNumber(),this.unsigned);var i=this.high>>>16,o=this.high&65535,c=this.low>>>16,n=this.low&65535,a=e.high>>>16,f=e.high&65535,p=e.low>>>16,r=e.low&65535,u=0,l=0,h=0,y=0;return y+=n*r,h+=y>>>16,y&=65535,h+=c*r,l+=h>>>16,h&=65535,h+=n*p,l+=h>>>16,h&=65535,l+=o*r,u+=l>>>16,l&=65535,l+=c*p,u+=l>>>16,l&=65535,l+=n*f,u+=l>>>16,l&=65535,u+=i*r+o*p+c*f+n*a,u&=65535,le(h<<16|y,u<<16|l,this.unsigned)},$.mul=$.multiply,$.divide=function(e){if(je(e)||(e=wt(e)),e.isZero())throw Error("division by zero");if(st){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?st.div_u:st.div_s)(this.low,this.high,e.low,e.high);return le(t,st.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Vt:xt;var i,o,c;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Vt;if(e.gt(this.shru(1)))return $s;c=Vt}else{if(this.eq(tt)){if(e.eq(Lr)||e.eq(Zo))return tt;if(e.eq(tt))return Lr;var n=this.shr(1);return i=n.div(e).shl(1),i.eq(xt)?e.isNegative()?Lr:Zo:(o=this.sub(e.mul(i)),c=i.add(o.div(e)),c)}else if(e.eq(tt))return this.unsigned?Vt:xt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();c=xt}for(o=this;o.gte(e);){i=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(i)/Math.LN2),f=a<=48?1:Vn(2,a-48),p=ut(i),r=p.mul(e);r.isNegative()||r.gt(o);)i-=f,p=ut(i,this.unsigned),r=p.mul(e);p.isZero()&&(p=Lr),c=c.add(p),o=o.sub(r)}return c},$.div=$.divide,$.modulo=function(e){if(je(e)||(e=wt(e)),st){var t=(this.unsigned?st.rem_u:st.rem_s)(this.low,this.high,e.low,e.high);return le(t,st.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},$.mod=$.modulo,$.rem=$.modulo,$.not=function(){return le(~this.low,~this.high,this.unsigned)},$.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},$.clz=$.countLeadingZeros,$.countTrailingZeros=function(){return this.low?As(this.low):As(this.high)+32},$.ctz=$.countTrailingZeros,$.and=function(e){return je(e)||(e=wt(e)),le(this.low&e.low,this.high&e.high,this.unsigned)},$.or=function(e){return je(e)||(e=wt(e)),le(this.low|e.low,this.high|e.high,this.unsigned)},$.xor=function(e){return je(e)||(e=wt(e)),le(this.low^e.low,this.high^e.high,this.unsigned)},$.shiftLeft=function(e){return je(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):le(0,this.low<<e-32,this.unsigned)},$.shl=$.shiftLeft,$.shiftRight=function(e){return je(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):le(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},$.shr=$.shiftRight,$.shiftRightUnsigned=function(e){return je(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?le(this.high,0,this.unsigned):le(this.high>>>e-32,0,this.unsigned)},$.shru=$.shiftRightUnsigned,$.shr_u=$.shiftRightUnsigned,$.rotateLeft=function(e){var t;return je(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?le(this.high,this.low,this.unsigned):e<32?(t=32-e,le(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,le(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},$.rotl=$.rotateLeft,$.rotateRight=function(e){var t;return je(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?le(this.high,this.low,this.unsigned):e<32?(t=32-e,le(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,le(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},$.rotr=$.rotateRight,$.toSigned=function(){return this.unsigned?le(this.low,this.high,!1):this},$.toUnsigned=function(){return this.unsigned?this:le(this.low,this.high,!0)},$.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},$.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},$.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]},be.fromBytes=function(e,t,i){return i?be.fromBytesLE(e,t):be.fromBytesBE(e,t)},be.fromBytesLE=function(e,t){return new be(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},be.fromBytesBE=function(e,t){return new be(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},Wt=be}),O,Wn=E(()=>{O={},O.Offset,O.Table,O.SIZEOF_SHORT=2,O.SIZEOF_INT=4,O.FILE_IDENTIFIER_LENGTH=4,O.SIZE_PREFIX_LENGTH=4,O.Encoding={UTF8_BYTES:1,UTF16_STRING:2},O.int32=new Int32Array(2),O.float32=new Float32Array(O.int32.buffer),O.float64=new Float64Array(O.int32.buffer),O.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,O.Long=function(e,t){this.low=e|0,this.high=t|0},O.Long.create=function(e,t){return e==0&&t==0?O.Long.ZERO:new O.Long(e,t)},O.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296},O.Long.prototype.equals=function(e){return this.low==e.low&&this.high==e.high},O.Long.ZERO=new O.Long(0,0),O.Builder=function(e){if(e)var t=e;else var t=1024;this.bb=O.ByteBuffer.allocate(t),this.space=t,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},O.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},O.Builder.prototype.forceDefaults=function(e){this.force_defaults=e},O.Builder.prototype.dataBuffer=function(){return this.bb},O.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},O.Builder.prototype.prep=function(e,t){e>this.minalign&&(this.minalign=e);for(var i=~(this.bb.capacity()-this.space+t)+1&e-1;this.space<i+e+t;){var o=this.bb.capacity();this.bb=O.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-o}this.pad(i)},O.Builder.prototype.pad=function(e){for(var t=0;t<e;t++)this.bb.writeInt8(--this.space,0)},O.Builder.prototype.writeInt8=function(e){this.bb.writeInt8(this.space-=1,e)},O.Builder.prototype.writeInt16=function(e){this.bb.writeInt16(this.space-=2,e)},O.Builder.prototype.writeInt32=function(e){this.bb.writeInt32(this.space-=4,e)},O.Builder.prototype.writeInt64=function(e){this.bb.writeInt64(this.space-=8,e)},O.Builder.prototype.writeFloat32=function(e){this.bb.writeFloat32(this.space-=4,e)},O.Builder.prototype.writeFloat64=function(e){this.bb.writeFloat64(this.space-=8,e)},O.Builder.prototype.addInt8=function(e){this.prep(1,0),this.writeInt8(e)},O.Builder.prototype.addInt16=function(e){this.prep(2,0),this.writeInt16(e)},O.Builder.prototype.addInt32=function(e){this.prep(4,0),this.writeInt32(e)},O.Builder.prototype.addInt64=function(e){this.prep(8,0),this.writeInt64(e)},O.Builder.prototype.addFloat32=function(e){this.prep(4,0),this.writeFloat32(e)},O.Builder.prototype.addFloat64=function(e){this.prep(8,0),this.writeFloat64(e)},O.Builder.prototype.addFieldInt8=function(e,t,i){(this.force_defaults||t!=i)&&(this.addInt8(t),this.slot(e))},O.Builder.prototype.addFieldInt16=function(e,t,i){(this.force_defaults||t!=i)&&(this.addInt16(t),this.slot(e))},O.Builder.prototype.addFieldInt32=function(e,t,i){(this.force_defaults||t!=i)&&(this.addInt32(t),this.slot(e))},O.Builder.prototype.addFieldInt64=function(e,t,i){(this.force_defaults||!t.equals(i))&&(this.addInt64(t),this.slot(e))},O.Builder.prototype.addFieldFloat32=function(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat32(t),this.slot(e))},O.Builder.prototype.addFieldFloat64=function(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat64(t),this.slot(e))},O.Builder.prototype.addFieldOffset=function(e,t,i){(this.force_defaults||t!=i)&&(this.addOffset(t),this.slot(e))},O.Builder.prototype.addFieldStruct=function(e,t,i){t!=i&&(this.nested(t),this.slot(e))},O.Builder.prototype.nested=function(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},O.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},O.Builder.prototype.slot=function(e){this.vtable[e]=this.offset()},O.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},O.Builder.growByteBuffer=function(e){var t=e.capacity();if(t&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var i=t<<1,o=O.ByteBuffer.allocate(i);return o.setPosition(i-t),o.bytes().set(e.bytes(),i-t),o},O.Builder.prototype.addOffset=function(e){this.prep(O.SIZEOF_INT,0),this.writeInt32(this.offset()-e+O.SIZEOF_INT)},O.Builder.prototype.startObject=function(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(var t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()},O.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var e=this.offset(),t=this.vtable_in_use-1;t>=0&&this.vtable[t]==0;t--);for(var i=t+1;t>=0;t--)this.addInt16(this.vtable[t]!=0?e-this.vtable[t]:0);var o=2;this.addInt16(e-this.object_start);var c=(i+o)*O.SIZEOF_SHORT;this.addInt16(c);var n=0,a=this.space;e:for(t=0;t<this.vtables.length;t++){var f=this.bb.capacity()-this.vtables[t];if(c==this.bb.readInt16(f)){for(var p=O.SIZEOF_SHORT;p<c;p+=O.SIZEOF_SHORT)if(this.bb.readInt16(a+p)!=this.bb.readInt16(f+p))continue e;n=this.vtables[t];break}}return n?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,n-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e},O.Builder.prototype.finish=function(e,t,i){var o=i?O.SIZE_PREFIX_LENGTH:0;if(t){var c=t;if(this.prep(this.minalign,O.SIZEOF_INT+O.FILE_IDENTIFIER_LENGTH+o),c.length!=O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+O.FILE_IDENTIFIER_LENGTH);for(var n=O.FILE_IDENTIFIER_LENGTH-1;n>=0;n--)this.writeInt8(c.charCodeAt(n))}this.prep(this.minalign,O.SIZEOF_INT+o),this.addOffset(e),o&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},O.Builder.prototype.finishSizePrefixed=function(e,t){this.finish(e,t,!0)},O.Builder.prototype.requiredField=function(e,t){var i=this.bb.capacity()-e,o=i-this.bb.readInt32(i),c=this.bb.readInt16(o+t)!=0;if(!c)throw new Error("FlatBuffers: field "+t+" must be set")},O.Builder.prototype.startVector=function(e,t,i){this.notNested(),this.vector_num_elems=t,this.prep(O.SIZEOF_INT,e*t),this.prep(i,e*t)},O.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},O.Builder.prototype.createString=function(e){if(e instanceof Uint8Array)var t=e;else for(var t=[],i=0;i<e.length;){var o,c=e.charCodeAt(i++);if(c<55296||c>=56320)o=c;else{var n=e.charCodeAt(i++);o=(c<<10)+n+-56613888}o<128?t.push(o):(o<2048?t.push(o>>6&31|192):(o<65536?t.push(o>>12&15|224):t.push(o>>18&7|240,o>>12&63|128),t.push(o>>6&63|128)),t.push(o&63|128))}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(var i=0,a=this.space,f=this.bb.bytes();i<t.length;i++)f[a++]=t[i];return this.endVector()},O.Builder.prototype.createLong=function(e,t){return O.Long.create(e,t)},O.ByteBuffer=function(e){this.bytes_=e,this.position_=0},O.ByteBuffer.allocate=function(e){return new O.ByteBuffer(new Uint8Array(e))},O.ByteBuffer.prototype.clear=function(){this.position_=0},O.ByteBuffer.prototype.bytes=function(){return this.bytes_},O.ByteBuffer.prototype.position=function(){return this.position_},O.ByteBuffer.prototype.setPosition=function(e){this.position_=e},O.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},O.ByteBuffer.prototype.readInt8=function(e){return this.readUint8(e)<<24>>24},O.ByteBuffer.prototype.readUint8=function(e){return this.bytes_[e]},O.ByteBuffer.prototype.readInt16=function(e){return this.readUint16(e)<<16>>16},O.ByteBuffer.prototype.readUint16=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8},O.ByteBuffer.prototype.readInt32=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24},O.ByteBuffer.prototype.readUint32=function(e){return this.readInt32(e)>>>0},O.ByteBuffer.prototype.readInt64=function(e){return new O.Long(this.readInt32(e),this.readInt32(e+4))},O.ByteBuffer.prototype.readUint64=function(e){return new O.Long(this.readUint32(e),this.readUint32(e+4))},O.ByteBuffer.prototype.readFloat32=function(e){return O.int32[0]=this.readInt32(e),O.float32[0]},O.ByteBuffer.prototype.readFloat64=function(e){return O.int32[O.isLittleEndian?0:1]=this.readInt32(e),O.int32[O.isLittleEndian?1:0]=this.readInt32(e+4),O.float64[0]},O.ByteBuffer.prototype.writeInt8=function(e,t){this.bytes_[e]=t},O.ByteBuffer.prototype.writeUint8=function(e,t){this.bytes_[e]=t},O.ByteBuffer.prototype.writeInt16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},O.ByteBuffer.prototype.writeUint16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},O.ByteBuffer.prototype.writeInt32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},O.ByteBuffer.prototype.writeUint32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},O.ByteBuffer.prototype.writeInt64=function(e,t){this.writeInt32(e,t.low),this.writeInt32(e+4,t.high)},O.ByteBuffer.prototype.writeUint64=function(e,t){this.writeUint32(e,t.low),this.writeUint32(e+4,t.high)},O.ByteBuffer.prototype.writeFloat32=function(e,t){O.float32[0]=t,this.writeInt32(e,O.int32[0])},O.ByteBuffer.prototype.writeFloat64=function(e,t){O.float64[0]=t,this.writeInt32(e,O.int32[O.isLittleEndian?0:1]),this.writeInt32(e+4,O.int32[O.isLittleEndian?1:0])},O.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+O.SIZEOF_INT+O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var e="",t=0;t<O.FILE_IDENTIFIER_LENGTH;t++)e+=String.fromCharCode(this.readInt8(this.position_+O.SIZEOF_INT+t));return e},O.ByteBuffer.prototype.__offset=function(e,t){var i=e-this.readInt32(e);return t<this.readInt16(i)?this.readInt16(i+t):0},O.ByteBuffer.prototype.__union=function(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e},O.ByteBuffer.prototype.__string=function(e,t){e+=this.readInt32(e);var i=this.readInt32(e),o="",c=0;if(e+=O.SIZEOF_INT,t===O.Encoding.UTF8_BYTES)return this.bytes_.subarray(e,e+i);for(;c<i;){var n,a=this.readUint8(e+c++);if(a<192)n=a;else{var f=this.readUint8(e+c++);if(a<224)n=(a&31)<<6|f&63;else{var p=this.readUint8(e+c++);if(a<240)n=(a&15)<<12|(f&63)<<6|p&63;else{var r=this.readUint8(e+c++);n=(a&7)<<18|(f&63)<<12|(p&63)<<6|r&63}}}n<65536?o+=String.fromCharCode(n):(n-=65536,o+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return o},O.ByteBuffer.prototype.__indirect=function(e){return e+this.readInt32(e)},O.ByteBuffer.prototype.__vector=function(e){return e+this.readInt32(e)+O.SIZEOF_INT},O.ByteBuffer.prototype.__vector_len=function(e){return this.readInt32(e+this.readInt32(e))},O.ByteBuffer.prototype.__has_identifier=function(e){if(e.length!=O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+O.FILE_IDENTIFIER_LENGTH);for(var t=0;t<O.FILE_IDENTIFIER_LENGTH;t++)if(e.charCodeAt(t)!=this.readInt8(this.position_+O.SIZEOF_INT+t))return!1;return!0},O.ByteBuffer.prototype.createLong=function(e,t){return O.Long.create(e,t)}}),W,nn=E(()=>{Wn(),(e=>{(t=>{(i=>{(o=>(o[o.UNDEFINED=0]="UNDEFINED",o[o.FLOAT=1]="FLOAT",o[o.INT=2]="INT",o[o.STRING=3]="STRING",o[o.TENSOR=4]="TENSOR",o[o.GRAPH=5]="GRAPH",o[o.FLOATS=6]="FLOATS",o[o.INTS=7]="INTS",o[o.STRINGS=8]="STRINGS",o[o.TENSORS=9]="TENSORS",o[o.GRAPHS=10]="GRAPHS",o[o.SPARSE_TENSOR=11]="SPARSE_TENSOR",o[o.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(i.AttributeType||(i.AttributeType={}))})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{(o=>(o[o.UNKNOWN=0]="UNKNOWN",o[o.VALUE=1]="VALUE",o[o.PARAM=2]="PARAM"))(i.DimensionValueType||(i.DimensionValueType={}))})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{(o=>(o[o.UNDEFINED=0]="UNDEFINED",o[o.FLOAT=1]="FLOAT",o[o.UINT8=2]="UINT8",o[o.INT8=3]="INT8",o[o.UINT16=4]="UINT16",o[o.INT16=5]="INT16",o[o.INT32=6]="INT32",o[o.INT64=7]="INT64",o[o.STRING=8]="STRING",o[o.BOOL=9]="BOOL",o[o.FLOAT16=10]="FLOAT16",o[o.DOUBLE=11]="DOUBLE",o[o.UINT32=12]="UINT32",o[o.UINT64=13]="UINT64",o[o.COMPLEX64=14]="COMPLEX64",o[o.COMPLEX128=15]="COMPLEX128",o[o.BFLOAT16=16]="BFLOAT16",o[o.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",o[o.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",o[o.FLOAT8E5M2=19]="FLOAT8E5M2",o[o.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(i.TensorDataType||(i.TensorDataType={}))})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{(o=>(o[o.Primitive=0]="Primitive",o[o.Fused=1]="Fused"))(i.NodeType||(i.NodeType={}))})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{(o=>(o[o.NONE=0]="NONE",o[o.tensor_type=1]="tensor_type",o[o.sequence_type=2]="sequence_type",o[o.map_type=3]="map_type"))(i.TypeInfoValue||(i.TypeInfoValue={}))})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsShape(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsShape(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}dim(n,a){let f=this.bb.__offset(this.bb_pos,4);return f?(a||new e.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+f)+n*4),this.bb):null}dimLength(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__vector_len(this.bb_pos+n):0}static startShape(n){n.startObject(1)}static addDim(n,a){n.addFieldOffset(0,a,0)}static createDimVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startDimVector(n,a){n.startVector(4,a,4)}static endShape(n){return n.endObject()}static createShape(n,a){return o.startShape(n),o.addDim(n,a),o.endShape(n)}}i.Shape=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsDimension(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsDimension(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}value(n){let a=this.bb.__offset(this.bb_pos,4);return a?(n||new e.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}denotation(n){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__string(this.bb_pos+a,n):null}static startDimension(n){n.startObject(2)}static addValue(n,a){n.addFieldOffset(0,a,0)}static addDenotation(n,a){n.addFieldOffset(1,a,0)}static endDimension(n){return n.endObject()}static createDimension(n,a,f){return o.startDimension(n),o.addValue(n,a),o.addDenotation(n,f),o.endDimension(n)}}i.Dimension=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsDimensionValue(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsDimensionValue(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}dimType(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt8(this.bb_pos+n):0}dimValue(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}dimParam(n){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__string(this.bb_pos+a,n):null}static startDimensionValue(n){n.startObject(3)}static addDimType(n,a){n.addFieldInt8(0,a,0)}static addDimValue(n,a){n.addFieldInt64(1,a,n.createLong(0,0))}static addDimParam(n,a){n.addFieldOffset(2,a,0)}static endDimensionValue(n){return n.endObject()}static createDimensionValue(n,a,f,p){return o.startDimensionValue(n),o.addDimType(n,a),o.addDimValue(n,f),o.addDimParam(n,p),o.endDimensionValue(n)}}i.DimensionValue=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsTensorTypeAndShape(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsTensorTypeAndShape(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}elemType(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt32(this.bb_pos+n):0}shape(n){let a=this.bb.__offset(this.bb_pos,6);return a?(n||new e.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}static startTensorTypeAndShape(n){n.startObject(2)}static addElemType(n,a){n.addFieldInt32(0,a,0)}static addShape(n,a){n.addFieldOffset(1,a,0)}static endTensorTypeAndShape(n){return n.endObject()}static createTensorTypeAndShape(n,a,f){return o.startTensorTypeAndShape(n),o.addElemType(n,a),o.addShape(n,f),o.endTensorTypeAndShape(n)}}i.TensorTypeAndShape=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsMapType(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsMapType(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}keyType(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt32(this.bb_pos+n):0}valueType(n){let a=this.bb.__offset(this.bb_pos,6);return a?(n||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}static startMapType(n){n.startObject(2)}static addKeyType(n,a){n.addFieldInt32(0,a,0)}static addValueType(n,a){n.addFieldOffset(1,a,0)}static endMapType(n){return n.endObject()}static createMapType(n,a,f){return o.startMapType(n),o.addKeyType(n,a),o.addValueType(n,f),o.endMapType(n)}}i.MapType=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsSequenceType(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsSequenceType(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}elemType(n){let a=this.bb.__offset(this.bb_pos,4);return a?(n||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}static startSequenceType(n){n.startObject(1)}static addElemType(n,a){n.addFieldOffset(0,a,0)}static endSequenceType(n){return n.endObject()}static createSequenceType(n,a){return o.startSequenceType(n),o.addElemType(n,a),o.endSequenceType(n)}}i.SequenceType=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(n,a,f,p){return n.prep(4,12),n.writeInt32(p),n.writeInt32(f),n.writeInt32(a),n.offset()}}i.EdgeEnd=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsNodeEdge(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsNodeEdge(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}nodeIndex(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readUint32(this.bb_pos+n):0}inputEdges(n,a){let f=this.bb.__offset(this.bb_pos,6);return f?(a||new e.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+f)+n*12,this.bb):null}inputEdgesLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}outputEdges(n,a){let f=this.bb.__offset(this.bb_pos,8);return f?(a||new e.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+f)+n*12,this.bb):null}outputEdgesLength(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__vector_len(this.bb_pos+n):0}static startNodeEdge(n){n.startObject(3)}static addNodeIndex(n,a){n.addFieldInt32(0,a,0)}static addInputEdges(n,a){n.addFieldOffset(1,a,0)}static startInputEdgesVector(n,a){n.startVector(12,a,4)}static addOutputEdges(n,a){n.addFieldOffset(2,a,0)}static startOutputEdgesVector(n,a){n.startVector(12,a,4)}static endNodeEdge(n){return n.endObject()}static createNodeEdge(n,a,f,p){return o.startNodeEdge(n),o.addNodeIndex(n,a),o.addInputEdges(n,f),o.addOutputEdges(n,p),o.endNodeEdge(n)}}i.NodeEdge=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsNode(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsNode(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}name(n){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__string(this.bb_pos+a,n):null}docString(n){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__string(this.bb_pos+a,n):null}domain(n){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__string(this.bb_pos+a,n):null}sinceVersion(){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt32(this.bb_pos+n):0}index(){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.readUint32(this.bb_pos+n):0}opType(n){let a=this.bb.__offset(this.bb_pos,14);return a?this.bb.__string(this.bb_pos+a,n):null}type(){let n=this.bb.__offset(this.bb_pos,16);return n?this.bb.readInt32(this.bb_pos+n):0}executionProviderType(n){let a=this.bb.__offset(this.bb_pos,18);return a?this.bb.__string(this.bb_pos+a,n):null}inputs(n,a){let f=this.bb.__offset(this.bb_pos,20);return f?this.bb.__string(this.bb.__vector(this.bb_pos+f)+n*4,a):null}inputsLength(){let n=this.bb.__offset(this.bb_pos,20);return n?this.bb.__vector_len(this.bb_pos+n):0}outputs(n,a){let f=this.bb.__offset(this.bb_pos,22);return f?this.bb.__string(this.bb.__vector(this.bb_pos+f)+n*4,a):null}outputsLength(){let n=this.bb.__offset(this.bb_pos,22);return n?this.bb.__vector_len(this.bb_pos+n):0}attributes(n,a){let f=this.bb.__offset(this.bb_pos,24);return f?(a||new e.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+f)+n*4),this.bb):null}attributesLength(){let n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__vector_len(this.bb_pos+n):0}inputArgCounts(n){let a=this.bb.__offset(this.bb_pos,26);return a?this.bb.readInt32(this.bb.__vector(this.bb_pos+a)+n*4):0}inputArgCountsLength(){let n=this.bb.__offset(this.bb_pos,26);return n?this.bb.__vector_len(this.bb_pos+n):0}inputArgCountsArray(){let n=this.bb.__offset(this.bb_pos,26);return n?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+n),this.bb.__vector_len(this.bb_pos+n)):null}implicitInputs(n,a){let f=this.bb.__offset(this.bb_pos,28);return f?this.bb.__string(this.bb.__vector(this.bb_pos+f)+n*4,a):null}implicitInputsLength(){let n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__vector_len(this.bb_pos+n):0}static startNode(n){n.startObject(13)}static addName(n,a){n.addFieldOffset(0,a,0)}static addDocString(n,a){n.addFieldOffset(1,a,0)}static addDomain(n,a){n.addFieldOffset(2,a,0)}static addSinceVersion(n,a){n.addFieldInt32(3,a,0)}static addIndex(n,a){n.addFieldInt32(4,a,0)}static addOpType(n,a){n.addFieldOffset(5,a,0)}static addType(n,a){n.addFieldInt32(6,a,0)}static addExecutionProviderType(n,a){n.addFieldOffset(7,a,0)}static addInputs(n,a){n.addFieldOffset(8,a,0)}static createInputsVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startInputsVector(n,a){n.startVector(4,a,4)}static addOutputs(n,a){n.addFieldOffset(9,a,0)}static createOutputsVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startOutputsVector(n,a){n.startVector(4,a,4)}static addAttributes(n,a){n.addFieldOffset(10,a,0)}static createAttributesVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startAttributesVector(n,a){n.startVector(4,a,4)}static addInputArgCounts(n,a){n.addFieldOffset(11,a,0)}static createInputArgCountsVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addInt32(a[f]);return n.endVector()}static startInputArgCountsVector(n,a){n.startVector(4,a,4)}static addImplicitInputs(n,a){n.addFieldOffset(12,a,0)}static createImplicitInputsVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startImplicitInputsVector(n,a){n.startVector(4,a,4)}static endNode(n){return n.endObject()}static createNode(n,a,f,p,r,u,l,h,y,I,S,A,V,N){return o.startNode(n),o.addName(n,a),o.addDocString(n,f),o.addDomain(n,p),o.addSinceVersion(n,r),o.addIndex(n,u),o.addOpType(n,l),o.addType(n,h),o.addExecutionProviderType(n,y),o.addInputs(n,I),o.addOutputs(n,S),o.addAttributes(n,A),o.addInputArgCounts(n,V),o.addImplicitInputs(n,N),o.endNode(n)}}i.Node=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsValueInfo(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsValueInfo(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}name(n){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__string(this.bb_pos+a,n):null}docString(n){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__string(this.bb_pos+a,n):null}type(n){let a=this.bb.__offset(this.bb_pos,8);return a?(n||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}static startValueInfo(n){n.startObject(3)}static addName(n,a){n.addFieldOffset(0,a,0)}static addDocString(n,a){n.addFieldOffset(1,a,0)}static addType(n,a){n.addFieldOffset(2,a,0)}static endValueInfo(n){return n.endObject()}static createValueInfo(n,a,f,p){return o.startValueInfo(n),o.addName(n,a),o.addDocString(n,f),o.addType(n,p),o.endValueInfo(n)}}i.ValueInfo=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsTypeInfo(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsTypeInfo(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}denotation(n){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__string(this.bb_pos+a,n):null}valueType(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readUint8(this.bb_pos+n):0}value(n){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__union(n,this.bb_pos+a):null}static startTypeInfo(n){n.startObject(3)}static addDenotation(n,a){n.addFieldOffset(0,a,0)}static addValueType(n,a){n.addFieldInt8(1,a,0)}static addValue(n,a){n.addFieldOffset(2,a,0)}static endTypeInfo(n){return n.endObject()}static createTypeInfo(n,a,f,p){return o.startTypeInfo(n),o.addDenotation(n,a),o.addValueType(n,f),o.addValue(n,p),o.endTypeInfo(n)}}i.TypeInfo=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsOperatorSetId(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsOperatorSetId(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}domain(n){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__string(this.bb_pos+a,n):null}version(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}static startOperatorSetId(n){n.startObject(2)}static addDomain(n,a){n.addFieldOffset(0,a,0)}static addVersion(n,a){n.addFieldInt64(1,a,n.createLong(0,0))}static endOperatorSetId(n){return n.endObject()}static createOperatorSetId(n,a,f){return o.startOperatorSetId(n),o.addDomain(n,a),o.addVersion(n,f),o.endOperatorSetId(n)}}i.OperatorSetId=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsTensor(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsTensor(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}name(n){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__string(this.bb_pos+a,n):null}docString(n){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__string(this.bb_pos+a,n):null}dims(n){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.readInt64(this.bb.__vector(this.bb_pos+a)+n*8):this.bb.createLong(0,0)}dimsLength(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__vector_len(this.bb_pos+n):0}dataType(){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt32(this.bb_pos+n):0}rawData(n){let a=this.bb.__offset(this.bb_pos,12);return a?this.bb.readUint8(this.bb.__vector(this.bb_pos+a)+n):0}rawDataLength(){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.__vector_len(this.bb_pos+n):0}rawDataArray(){let n=this.bb.__offset(this.bb_pos,12);return n?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+n),this.bb.__vector_len(this.bb_pos+n)):null}stringData(n,a){let f=this.bb.__offset(this.bb_pos,14);return f?this.bb.__string(this.bb.__vector(this.bb_pos+f)+n*4,a):null}stringDataLength(){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__vector_len(this.bb_pos+n):0}static startTensor(n){n.startObject(6)}static addName(n,a){n.addFieldOffset(0,a,0)}static addDocString(n,a){n.addFieldOffset(1,a,0)}static addDims(n,a){n.addFieldOffset(2,a,0)}static createDimsVector(n,a){n.startVector(8,a.length,8);for(let f=a.length-1;f>=0;f--)n.addInt64(a[f]);return n.endVector()}static startDimsVector(n,a){n.startVector(8,a,8)}static addDataType(n,a){n.addFieldInt32(3,a,0)}static addRawData(n,a){n.addFieldOffset(4,a,0)}static createRawDataVector(n,a){n.startVector(1,a.length,1);for(let f=a.length-1;f>=0;f--)n.addInt8(a[f]);return n.endVector()}static startRawDataVector(n,a){n.startVector(1,a,1)}static addStringData(n,a){n.addFieldOffset(5,a,0)}static createStringDataVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startStringDataVector(n,a){n.startVector(4,a,4)}static endTensor(n){return n.endObject()}static createTensor(n,a,f,p,r,u,l){return o.startTensor(n),o.addName(n,a),o.addDocString(n,f),o.addDims(n,p),o.addDataType(n,r),o.addRawData(n,u),o.addStringData(n,l),o.endTensor(n)}}i.Tensor=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsSparseTensor(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsSparseTensor(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}values(n){let a=this.bb.__offset(this.bb_pos,4);return a?(n||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}indices(n){let a=this.bb.__offset(this.bb_pos,6);return a?(n||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}dims(n){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.readInt64(this.bb.__vector(this.bb_pos+a)+n*8):this.bb.createLong(0,0)}dimsLength(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__vector_len(this.bb_pos+n):0}static startSparseTensor(n){n.startObject(3)}static addValues(n,a){n.addFieldOffset(0,a,0)}static addIndices(n,a){n.addFieldOffset(1,a,0)}static addDims(n,a){n.addFieldOffset(2,a,0)}static createDimsVector(n,a){n.startVector(8,a.length,8);for(let f=a.length-1;f>=0;f--)n.addInt64(a[f]);return n.endVector()}static startDimsVector(n,a){n.startVector(8,a,8)}static endSparseTensor(n){return n.endObject()}static createSparseTensor(n,a,f,p){return o.startSparseTensor(n),o.addValues(n,a),o.addIndices(n,f),o.addDims(n,p),o.endSparseTensor(n)}}i.SparseTensor=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsAttribute(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsAttribute(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}name(n){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__string(this.bb_pos+a,n):null}docString(n){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__string(this.bb_pos+a,n):null}type(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.readInt32(this.bb_pos+n):0}f(){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readFloat32(this.bb_pos+n):0}i(){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}s(n){let a=this.bb.__offset(this.bb_pos,14);return a?this.bb.__string(this.bb_pos+a,n):null}t(n){let a=this.bb.__offset(this.bb_pos,16);return a?(n||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}g(n){let a=this.bb.__offset(this.bb_pos,18);return a?(n||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}floats(n){let a=this.bb.__offset(this.bb_pos,20);return a?this.bb.readFloat32(this.bb.__vector(this.bb_pos+a)+n*4):0}floatsLength(){let n=this.bb.__offset(this.bb_pos,20);return n?this.bb.__vector_len(this.bb_pos+n):0}floatsArray(){let n=this.bb.__offset(this.bb_pos,20);return n?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+n),this.bb.__vector_len(this.bb_pos+n)):null}ints(n){let a=this.bb.__offset(this.bb_pos,22);return a?this.bb.readInt64(this.bb.__vector(this.bb_pos+a)+n*8):this.bb.createLong(0,0)}intsLength(){let n=this.bb.__offset(this.bb_pos,22);return n?this.bb.__vector_len(this.bb_pos+n):0}strings(n,a){let f=this.bb.__offset(this.bb_pos,24);return f?this.bb.__string(this.bb.__vector(this.bb_pos+f)+n*4,a):null}stringsLength(){let n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__vector_len(this.bb_pos+n):0}tensors(n,a){let f=this.bb.__offset(this.bb_pos,26);return f?(a||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+f)+n*4),this.bb):null}tensorsLength(){let n=this.bb.__offset(this.bb_pos,26);return n?this.bb.__vector_len(this.bb_pos+n):0}graphs(n,a){let f=this.bb.__offset(this.bb_pos,28);return f?(a||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+f)+n*4),this.bb):null}graphsLength(){let n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__vector_len(this.bb_pos+n):0}static startAttribute(n){n.startObject(13)}static addName(n,a){n.addFieldOffset(0,a,0)}static addDocString(n,a){n.addFieldOffset(1,a,0)}static addType(n,a){n.addFieldInt32(2,a,0)}static addF(n,a){n.addFieldFloat32(3,a,0)}static addI(n,a){n.addFieldInt64(4,a,n.createLong(0,0))}static addS(n,a){n.addFieldOffset(5,a,0)}static addT(n,a){n.addFieldOffset(6,a,0)}static addG(n,a){n.addFieldOffset(7,a,0)}static addFloats(n,a){n.addFieldOffset(8,a,0)}static createFloatsVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addFloat32(a[f]);return n.endVector()}static startFloatsVector(n,a){n.startVector(4,a,4)}static addInts(n,a){n.addFieldOffset(9,a,0)}static createIntsVector(n,a){n.startVector(8,a.length,8);for(let f=a.length-1;f>=0;f--)n.addInt64(a[f]);return n.endVector()}static startIntsVector(n,a){n.startVector(8,a,8)}static addStrings(n,a){n.addFieldOffset(10,a,0)}static createStringsVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startStringsVector(n,a){n.startVector(4,a,4)}static addTensors(n,a){n.addFieldOffset(11,a,0)}static createTensorsVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startTensorsVector(n,a){n.startVector(4,a,4)}static addGraphs(n,a){n.addFieldOffset(12,a,0)}static createGraphsVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startGraphsVector(n,a){n.startVector(4,a,4)}static endAttribute(n){return n.endObject()}static createAttribute(n,a,f,p,r,u,l,h,y,I,S,A,V,N){return o.startAttribute(n),o.addName(n,a),o.addDocString(n,f),o.addType(n,p),o.addF(n,r),o.addI(n,u),o.addS(n,l),o.addT(n,h),o.addG(n,y),o.addFloats(n,I),o.addInts(n,S),o.addStrings(n,A),o.addTensors(n,V),o.addGraphs(n,N),o.endAttribute(n)}}i.Attribute=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsGraph(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsGraph(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}initializers(n,a){let f=this.bb.__offset(this.bb_pos,4);return f?(a||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+f)+n*4),this.bb):null}initializersLength(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__vector_len(this.bb_pos+n):0}nodeArgs(n,a){let f=this.bb.__offset(this.bb_pos,6);return f?(a||new e.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+f)+n*4),this.bb):null}nodeArgsLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}nodes(n,a){let f=this.bb.__offset(this.bb_pos,8);return f?(a||new e.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+f)+n*4),this.bb):null}nodesLength(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__vector_len(this.bb_pos+n):0}maxNodeIndex(){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readUint32(this.bb_pos+n):0}nodeEdges(n,a){let f=this.bb.__offset(this.bb_pos,12);return f?(a||new e.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+f)+n*4),this.bb):null}nodeEdgesLength(){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.__vector_len(this.bb_pos+n):0}inputs(n,a){let f=this.bb.__offset(this.bb_pos,14);return f?this.bb.__string(this.bb.__vector(this.bb_pos+f)+n*4,a):null}inputsLength(){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__vector_len(this.bb_pos+n):0}outputs(n,a){let f=this.bb.__offset(this.bb_pos,16);return f?this.bb.__string(this.bb.__vector(this.bb_pos+f)+n*4,a):null}outputsLength(){let n=this.bb.__offset(this.bb_pos,16);return n?this.bb.__vector_len(this.bb_pos+n):0}sparseInitializers(n,a){let f=this.bb.__offset(this.bb_pos,18);return f?(a||new e.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+f)+n*4),this.bb):null}sparseInitializersLength(){let n=this.bb.__offset(this.bb_pos,18);return n?this.bb.__vector_len(this.bb_pos+n):0}static startGraph(n){n.startObject(8)}static addInitializers(n,a){n.addFieldOffset(0,a,0)}static createInitializersVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startInitializersVector(n,a){n.startVector(4,a,4)}static addNodeArgs(n,a){n.addFieldOffset(1,a,0)}static createNodeArgsVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startNodeArgsVector(n,a){n.startVector(4,a,4)}static addNodes(n,a){n.addFieldOffset(2,a,0)}static createNodesVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startNodesVector(n,a){n.startVector(4,a,4)}static addMaxNodeIndex(n,a){n.addFieldInt32(3,a,0)}static addNodeEdges(n,a){n.addFieldOffset(4,a,0)}static createNodeEdgesVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startNodeEdgesVector(n,a){n.startVector(4,a,4)}static addInputs(n,a){n.addFieldOffset(5,a,0)}static createInputsVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startInputsVector(n,a){n.startVector(4,a,4)}static addOutputs(n,a){n.addFieldOffset(6,a,0)}static createOutputsVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startOutputsVector(n,a){n.startVector(4,a,4)}static addSparseInitializers(n,a){n.addFieldOffset(7,a,0)}static createSparseInitializersVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startSparseInitializersVector(n,a){n.startVector(4,a,4)}static endGraph(n){return n.endObject()}static createGraph(n,a,f,p,r,u,l,h,y){return o.startGraph(n),o.addInitializers(n,a),o.addNodeArgs(n,f),o.addNodes(n,p),o.addMaxNodeIndex(n,r),o.addNodeEdges(n,u),o.addInputs(n,l),o.addOutputs(n,h),o.addSparseInitializers(n,y),o.endGraph(n)}}i.Graph=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsModel(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsModel(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}irVersion(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}opsetImport(n,a){let f=this.bb.__offset(this.bb_pos,6);return f?(a||new e.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+f)+n*4),this.bb):null}opsetImportLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}producerName(n){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__string(this.bb_pos+a,n):null}producerVersion(n){let a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__string(this.bb_pos+a,n):null}domain(n){let a=this.bb.__offset(this.bb_pos,12);return a?this.bb.__string(this.bb_pos+a,n):null}modelVersion(){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}docString(n){let a=this.bb.__offset(this.bb_pos,16);return a?this.bb.__string(this.bb_pos+a,n):null}graph(n){let a=this.bb.__offset(this.bb_pos,18);return a?(n||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}graphDocString(n){let a=this.bb.__offset(this.bb_pos,20);return a?this.bb.__string(this.bb_pos+a,n):null}static startModel(n){n.startObject(9)}static addIrVersion(n,a){n.addFieldInt64(0,a,n.createLong(0,0))}static addOpsetImport(n,a){n.addFieldOffset(1,a,0)}static createOpsetImportVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startOpsetImportVector(n,a){n.startVector(4,a,4)}static addProducerName(n,a){n.addFieldOffset(2,a,0)}static addProducerVersion(n,a){n.addFieldOffset(3,a,0)}static addDomain(n,a){n.addFieldOffset(4,a,0)}static addModelVersion(n,a){n.addFieldInt64(5,a,n.createLong(0,0))}static addDocString(n,a){n.addFieldOffset(6,a,0)}static addGraph(n,a){n.addFieldOffset(7,a,0)}static addGraphDocString(n,a){n.addFieldOffset(8,a,0)}static endModel(n){return n.endObject()}static createModel(n,a,f,p,r,u,l,h,y,I){return o.startModel(n),o.addIrVersion(n,a),o.addOpsetImport(n,f),o.addProducerName(n,p),o.addProducerVersion(n,r),o.addDomain(n,u),o.addModelVersion(n,l),o.addDocString(n,h),o.addGraph(n,y),o.addGraphDocString(n,I),o.endModel(n)}}i.Model=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsKernelCreateInfos(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsKernelCreateInfos(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}nodeIndices(n){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readUint32(this.bb.__vector(this.bb_pos+a)+n*4):0}nodeIndicesLength(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__vector_len(this.bb_pos+n):0}nodeIndicesArray(){let n=this.bb.__offset(this.bb_pos,4);return n?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+n),this.bb.__vector_len(this.bb_pos+n)):null}kernelDefHashes(n){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readUint64(this.bb.__vector(this.bb_pos+a)+n*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}static startKernelCreateInfos(n){n.startObject(2)}static addNodeIndices(n,a){n.addFieldOffset(0,a,0)}static createNodeIndicesVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addInt32(a[f]);return n.endVector()}static startNodeIndicesVector(n,a){n.startVector(4,a,4)}static addKernelDefHashes(n,a){n.addFieldOffset(1,a,0)}static createKernelDefHashesVector(n,a){n.startVector(8,a.length,8);for(let f=a.length-1;f>=0;f--)n.addInt64(a[f]);return n.endVector()}static startKernelDefHashesVector(n,a){n.startVector(8,a,8)}static endKernelCreateInfos(n){return n.endObject()}static createKernelCreateInfos(n,a,f){return o.startKernelCreateInfos(n),o.addNodeIndices(n,a),o.addKernelDefHashes(n,f),o.endKernelCreateInfos(n)}}i.KernelCreateInfos=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsSubGraphSessionState(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsSubGraphSessionState(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}graphId(n){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__string(this.bb_pos+a,n):null}sessionState(n){let a=this.bb.__offset(this.bb_pos,6);return a?(n||new e.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}static startSubGraphSessionState(n){n.startObject(2)}static addGraphId(n,a){n.addFieldOffset(0,a,0)}static addSessionState(n,a){n.addFieldOffset(1,a,0)}static endSubGraphSessionState(n){let a=n.endObject();return n.requiredField(a,4),a}static createSubGraphSessionState(n,a,f){return o.startSubGraphSessionState(n),o.addGraphId(n,a),o.addSessionState(n,f),o.endSubGraphSessionState(n)}}i.SubGraphSessionState=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsSessionState(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsSessionState(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}kernels(n){let a=this.bb.__offset(this.bb_pos,4);return a?(n||new e.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}subGraphSessionStates(n,a){let f=this.bb.__offset(this.bb_pos,6);return f?(a||new e.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+f)+n*4),this.bb):null}subGraphSessionStatesLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}static startSessionState(n){n.startObject(2)}static addKernels(n,a){n.addFieldOffset(0,a,0)}static addSubGraphSessionStates(n,a){n.addFieldOffset(1,a,0)}static createSubGraphSessionStatesVector(n,a){n.startVector(4,a.length,4);for(let f=a.length-1;f>=0;f--)n.addOffset(a[f]);return n.endVector()}static startSubGraphSessionStatesVector(n,a){n.startVector(4,a,4)}static endSessionState(n){return n.endObject()}static createSessionState(n,a,f){return o.startSessionState(n),o.addKernels(n,a),o.addSubGraphSessionStates(n,f),o.endSessionState(n)}}i.SessionState=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={})),(e=>{(t=>{(i=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(n,a){return this.bb_pos=n,this.bb=a,this}static getRootAsInferenceSession(n,a){return(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsInferenceSession(n,a){return n.setPosition(n.position()+O.SIZE_PREFIX_LENGTH),(a||new o).__init(n.readInt32(n.position())+n.position(),n)}static bufferHasIdentifier(n){return n.__has_identifier("ORTM")}ortVersion(n){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__string(this.bb_pos+a,n):null}model(n){let a=this.bb.__offset(this.bb_pos,6);return a?(n||new e.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}sessionState(n){let a=this.bb.__offset(this.bb_pos,8);return a?(n||new e.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}static startInferenceSession(n){n.startObject(3)}static addOrtVersion(n,a){n.addFieldOffset(0,a,0)}static addModel(n,a){n.addFieldOffset(1,a,0)}static addSessionState(n,a){n.addFieldOffset(2,a,0)}static endInferenceSession(n){return n.endObject()}static finishInferenceSessionBuffer(n,a){n.finish(a,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(n,a){n.finish(a,"ORTM",!0)}static createInferenceSession(n,a,f,p){return o.startInferenceSession(n),o.addOrtVersion(n,a),o.addModel(n,f),o.addSessionState(n,p),o.endInferenceSession(n)}}i.InferenceSession=o})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(W||(W={}))}),Rs=me((e,t)=>{t.exports=i;function i(o,c){for(var n=new Array(arguments.length-1),a=0,f=2,p=!0;f<arguments.length;)n[a++]=arguments[f++];return new Promise(function(r,u){n[a]=function(l){if(p)if(p=!1,l)u(l);else{for(var h=new Array(arguments.length-1),y=0;y<h.length;)h[y++]=arguments[y];r.apply(null,h)}};try{o.apply(c||null,n)}catch(l){p&&(p=!1,u(l))}})}}),zs=me(e=>{var t=e;t.length=function(a){var f=a.length;if(!f)return 0;for(var p=0;--f%4>1&&a.charAt(f)==="=";)++p;return Math.ceil(a.length*3)/4-p};var i=new Array(64),o=new Array(123);for(c=0;c<64;)o[i[c]=c<26?c+65:c<52?c+71:c<62?c-4:c-59|43]=c++;var c;t.encode=function(a,f,p){for(var r=null,u=[],l=0,h=0,y;f<p;){var I=a[f++];switch(h){case 0:u[l++]=i[I>>2],y=(I&3)<<4,h=1;break;case 1:u[l++]=i[y|I>>4],y=(I&15)<<2,h=2;break;case 2:u[l++]=i[y|I>>6],u[l++]=i[I&63],h=0;break}l>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,u)),l=0)}return h&&(u[l++]=i[y],u[l++]=61,h===1&&(u[l++]=61)),r?(l&&r.push(String.fromCharCode.apply(String,u.slice(0,l))),r.join("")):String.fromCharCode.apply(String,u.slice(0,l))};var n="invalid encoding";t.decode=function(a,f,p){for(var r=p,u=0,l,h=0;h<a.length;){var y=a.charCodeAt(h++);if(y===61&&u>1)break;if((y=o[y])===void 0)throw Error(n);switch(u){case 0:l=y,u=1;break;case 1:f[p++]=l<<2|(y&48)>>4,l=y,u=2;break;case 2:f[p++]=(l&15)<<4|(y&60)>>2,l=y,u=3;break;case 3:f[p++]=(l&3)<<6|y,u=0;break}}if(u===1)throw Error(n);return p-r},t.test=function(a){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)}}),Ws=me((e,t)=>{t.exports=i;function i(){this._listeners={}}i.prototype.on=function(o,c,n){return(this._listeners[o]||(this._listeners[o]=[])).push({fn:c,ctx:n||this}),this},i.prototype.off=function(o,c){if(o===void 0)this._listeners={};else if(c===void 0)this._listeners[o]=[];else for(var n=this._listeners[o],a=0;a<n.length;)n[a].fn===c?n.splice(a,1):++a;return this},i.prototype.emit=function(o){var c=this._listeners[o];if(c){for(var n=[],a=1;a<arguments.length;)n.push(arguments[a++]);for(a=0;a<c.length;)c[a].fn.apply(c[a++].ctx,n)}return this}}),Js=me((e,t)=>{t.exports=i(i);function i(f){return typeof Float32Array<"u"?function(){var p=new Float32Array([-0]),r=new Uint8Array(p.buffer),u=r[3]===128;function l(S,A,V){p[0]=S,A[V]=r[0],A[V+1]=r[1],A[V+2]=r[2],A[V+3]=r[3]}function h(S,A,V){p[0]=S,A[V]=r[3],A[V+1]=r[2],A[V+2]=r[1],A[V+3]=r[0]}f.writeFloatLE=u?l:h,f.writeFloatBE=u?h:l;function y(S,A){return r[0]=S[A],r[1]=S[A+1],r[2]=S[A+2],r[3]=S[A+3],p[0]}function I(S,A){return r[3]=S[A],r[2]=S[A+1],r[1]=S[A+2],r[0]=S[A+3],p[0]}f.readFloatLE=u?y:I,f.readFloatBE=u?I:y}():function(){function p(u,l,h,y){var I=l<0?1:0;if(I&&(l=-l),l===0)u(1/l>0?0:2147483648,h,y);else if(isNaN(l))u(2143289344,h,y);else if(l>34028234663852886e22)u((I<<31|2139095040)>>>0,h,y);else if(l<11754943508222875e-54)u((I<<31|Math.round(l/1401298464324817e-60))>>>0,h,y);else{var S=Math.floor(Math.log(l)/Math.LN2),A=Math.round(l*Math.pow(2,-S)*8388608)&8388607;u((I<<31|S+127<<23|A)>>>0,h,y)}}f.writeFloatLE=p.bind(null,o),f.writeFloatBE=p.bind(null,c);function r(u,l,h){var y=u(l,h),I=(y>>31)*2+1,S=y>>>23&255,A=y&8388607;return S===255?A?NaN:I*(1/0):S===0?I*1401298464324817e-60*A:I*Math.pow(2,S-150)*(A+8388608)}f.readFloatLE=r.bind(null,n),f.readFloatBE=r.bind(null,a)}(),typeof Float64Array<"u"?function(){var p=new Float64Array([-0]),r=new Uint8Array(p.buffer),u=r[7]===128;function l(S,A,V){p[0]=S,A[V]=r[0],A[V+1]=r[1],A[V+2]=r[2],A[V+3]=r[3],A[V+4]=r[4],A[V+5]=r[5],A[V+6]=r[6],A[V+7]=r[7]}function h(S,A,V){p[0]=S,A[V]=r[7],A[V+1]=r[6],A[V+2]=r[5],A[V+3]=r[4],A[V+4]=r[3],A[V+5]=r[2],A[V+6]=r[1],A[V+7]=r[0]}f.writeDoubleLE=u?l:h,f.writeDoubleBE=u?h:l;function y(S,A){return r[0]=S[A],r[1]=S[A+1],r[2]=S[A+2],r[3]=S[A+3],r[4]=S[A+4],r[5]=S[A+5],r[6]=S[A+6],r[7]=S[A+7],p[0]}function I(S,A){return r[7]=S[A],r[6]=S[A+1],r[5]=S[A+2],r[4]=S[A+3],r[3]=S[A+4],r[2]=S[A+5],r[1]=S[A+6],r[0]=S[A+7],p[0]}f.readDoubleLE=u?y:I,f.readDoubleBE=u?I:y}():function(){function p(u,l,h,y,I,S){var A=y<0?1:0;if(A&&(y=-y),y===0)u(0,I,S+l),u(1/y>0?0:2147483648,I,S+h);else if(isNaN(y))u(0,I,S+l),u(2146959360,I,S+h);else if(y>17976931348623157e292)u(0,I,S+l),u((A<<31|2146435072)>>>0,I,S+h);else{var V;if(y<22250738585072014e-324)V=y/5e-324,u(V>>>0,I,S+l),u((A<<31|V/4294967296)>>>0,I,S+h);else{var N=Math.floor(Math.log(y)/Math.LN2);N===1024&&(N=1023),V=y*Math.pow(2,-N),u(V*4503599627370496>>>0,I,S+l),u((A<<31|N+1023<<20|V*1048576&1048575)>>>0,I,S+h)}}}f.writeDoubleLE=p.bind(null,o,0,4),f.writeDoubleBE=p.bind(null,c,4,0);function r(u,l,h,y,I){var S=u(y,I+l),A=u(y,I+h),V=(A>>31)*2+1,N=A>>>20&2047,B=4294967296*(A&1048575)+S;return N===2047?B?NaN:V*(1/0):N===0?V*5e-324*B:V*Math.pow(2,N-1075)*(B+4503599627370496)}f.readDoubleLE=r.bind(null,n,0,4),f.readDoubleBE=r.bind(null,a,4,0)}(),f}function o(f,p,r){p[r]=f&255,p[r+1]=f>>>8&255,p[r+2]=f>>>16&255,p[r+3]=f>>>24}function c(f,p,r){p[r]=f>>>24,p[r+1]=f>>>16&255,p[r+2]=f>>>8&255,p[r+3]=f&255}function n(f,p){return(f[p]|f[p+1]<<8|f[p+2]<<16|f[p+3]<<24)>>>0}function a(f,p){return(f[p]<<24|f[p+1]<<16|f[p+2]<<8|f[p+3])>>>0}}),Zs=me((exports$1,module)=>{module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}}),eu=me(e=>{var t=e;t.length=function(i){for(var o=0,c=0,n=0;n<i.length;++n)c=i.charCodeAt(n),c<128?o+=1:c<2048?o+=2:(c&64512)===55296&&(i.charCodeAt(n+1)&64512)===56320?(++n,o+=4):o+=3;return o},t.read=function(i,o,c){var n=c-o;if(n<1)return"";for(var a=null,f=[],p=0,r;o<c;)r=i[o++],r<128?f[p++]=r:r>191&&r<224?f[p++]=(r&31)<<6|i[o++]&63:r>239&&r<365?(r=((r&7)<<18|(i[o++]&63)<<12|(i[o++]&63)<<6|i[o++]&63)-65536,f[p++]=55296+(r>>10),f[p++]=56320+(r&1023)):f[p++]=(r&15)<<12|(i[o++]&63)<<6|i[o++]&63,p>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,f)),p=0);return a?(p&&a.push(String.fromCharCode.apply(String,f.slice(0,p))),a.join("")):String.fromCharCode.apply(String,f.slice(0,p))},t.write=function(i,o,c){for(var n=c,a,f,p=0;p<i.length;++p)a=i.charCodeAt(p),a<128?o[c++]=a:a<2048?(o[c++]=a>>6|192,o[c++]=a&63|128):(a&64512)===55296&&((f=i.charCodeAt(p+1))&64512)===56320?(a=65536+((a&1023)<<10)+(f&1023),++p,o[c++]=a>>18|240,o[c++]=a>>12&63|128,o[c++]=a>>6&63|128,o[c++]=a&63|128):(o[c++]=a>>12|224,o[c++]=a>>6&63|128,o[c++]=a&63|128);return c-n}}),ru=me((e,t)=>{t.exports=i;function i(o,c,n){var a=n||8192,f=a>>>1,p=null,r=a;return function(u){if(u<1||u>f)return o(u);r+u>a&&(p=o(a),r=0);var l=c.call(p,r,r+=u);return r&7&&(r=(r|7)+1),l}}}),ou=me((e,t)=>{t.exports=o;var i=Xt();function o(f,p){this.lo=f>>>0,this.hi=p>>>0}var c=o.zero=new o(0,0);c.toNumber=function(){return 0},c.zzEncode=c.zzDecode=function(){return this},c.length=function(){return 1};var n=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(f){if(f===0)return c;var p=f<0;p&&(f=-f);var r=f>>>0,u=(f-r)/4294967296>>>0;return p&&(u=~u>>>0,r=~r>>>0,++r>4294967295&&(r=0,++u>4294967295&&(u=0))),new o(r,u)},o.from=function(f){if(typeof f=="number")return o.fromNumber(f);if(i.isString(f))if(i.Long)f=i.Long.fromString(f);else return o.fromNumber(parseInt(f,10));return f.low||f.high?new o(f.low>>>0,f.high>>>0):c},o.prototype.toNumber=function(f){if(!f&&this.hi>>>31){var p=~this.lo+1>>>0,r=~this.hi>>>0;return p||(r=r+1>>>0),-(p+r*4294967296)}return this.lo+this.hi*4294967296},o.prototype.toLong=function(f){return i.Long?new i.Long(this.lo|0,this.hi|0,!!f):{low:this.lo|0,high:this.hi|0,unsigned:!!f}};var a=String.prototype.charCodeAt;o.fromHash=function(f){return f===n?c:new o((a.call(f,0)|a.call(f,1)<<8|a.call(f,2)<<16|a.call(f,3)<<24)>>>0,(a.call(f,4)|a.call(f,5)<<8|a.call(f,6)<<16|a.call(f,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var f=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^f)>>>0,this.lo=(this.lo<<1^f)>>>0,this},o.prototype.zzDecode=function(){var f=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^f)>>>0,this.hi=(this.hi>>>1^f)>>>0,this},o.prototype.length=function(){var f=this.lo,p=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return r===0?p===0?f<16384?f<128?1:2:f<2097152?3:4:p<16384?p<128?5:6:p<2097152?7:8:r<128?9:10}}),Xt=me(e=>{var t=e;t.asPromise=Rs(),t.base64=zs(),t.EventEmitter=Ws(),t.float=Js(),t.inquire=Zs(),t.utf8=eu(),t.pool=ru(),t.LongBits=ou(),t.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),t.global=t.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||e,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(c){return typeof c=="number"&&isFinite(c)&&Math.floor(c)===c},t.isString=function(c){return typeof c=="string"||c instanceof String},t.isObject=function(c){return c&&typeof c=="object"},t.isset=t.isSet=function(c,n){var a=c[n];return a!=null&&c.hasOwnProperty(n)?typeof a!="object"||(Array.isArray(a)?a.length:Object.keys(a).length)>0:!1},t.Buffer=function(){try{var c=t.inquire("buffer").Buffer;return c.prototype.utf8Write?c:null}catch{return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(c){return typeof c=="number"?t.Buffer?t._Buffer_allocUnsafe(c):new t.Array(c):t.Buffer?t._Buffer_from(c):typeof Uint8Array>"u"?c:new Uint8Array(c)},t.Array=typeof Uint8Array<"u"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(c){return c?t.LongBits.from(c).toHash():t.LongBits.zeroHash},t.longFromHash=function(c,n){var a=t.LongBits.fromHash(c);return t.Long?t.Long.fromBits(a.lo,a.hi,n):a.toNumber(!!n)};function i(c,n,a){for(var f=Object.keys(n),p=0;p<f.length;++p)(c[f[p]]===void 0||!a)&&(c[f[p]]=n[f[p]]);return c}t.merge=i,t.lcFirst=function(c){return c.charAt(0).toLowerCase()+c.substring(1)};function o(c){function n(a,f){if(!(this instanceof n))return new n(a,f);Object.defineProperty(this,"message",{get:function(){return a}}),Error.captureStackTrace?Error.captureStackTrace(this,n):Object.defineProperty(this,"stack",{value:new Error().stack||""}),f&&i(this,f)}return n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return c},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),n}t.newError=o,t.ProtocolError=o("ProtocolError"),t.oneOfGetter=function(c){for(var n={},a=0;a<c.length;++a)n[c[a]]=1;return function(){for(var f=Object.keys(this),p=f.length-1;p>-1;--p)if(n[f[p]]===1&&this[f[p]]!==void 0&&this[f[p]]!==null)return f[p]}},t.oneOfSetter=function(c){return function(n){for(var a=0;a<c.length;++a)c[a]!==n&&delete this[c[a]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var c=t.Buffer;if(!c){t._Buffer_from=t._Buffer_allocUnsafe=null;return}t._Buffer_from=c.from!==Uint8Array.from&&c.from||function(n,a){return new c(n,a)},t._Buffer_allocUnsafe=c.allocUnsafe||function(n){return new c(n)}}}),li=me((e,t)=>{t.exports=u;var i=Xt(),o,c=i.LongBits,n=i.base64,a=i.utf8;function f(N,B,te){this.fn=N,this.len=B,this.next=void 0,this.val=te}function p(){}function r(N){this.head=N.head,this.tail=N.tail,this.len=N.len,this.next=N.states}function u(){this.len=0,this.head=new f(p,0,0),this.tail=this.head,this.states=null}var l=function(){return i.Buffer?function(){return(u.create=function(){return new o})()}:function(){return new u}};u.create=l(),u.alloc=function(N){return new i.Array(N)},i.Array!==Array&&(u.alloc=i.pool(u.alloc,i.Array.prototype.subarray)),u.prototype._push=function(N,B,te){return this.tail=this.tail.next=new f(N,B,te),this.len+=B,this};function h(N,B,te){B[te]=N&255}function y(N,B,te){for(;N>127;)B[te++]=N&127|128,N>>>=7;B[te]=N}function I(N,B){this.len=N,this.next=void 0,this.val=B}I.prototype=Object.create(f.prototype),I.prototype.fn=y,u.prototype.uint32=function(N){return this.len+=(this.tail=this.tail.next=new I((N=N>>>0)<128?1:N<16384?2:N<2097152?3:N<268435456?4:5,N)).len,this},u.prototype.int32=function(N){return N<0?this._push(S,10,c.fromNumber(N)):this.uint32(N)},u.prototype.sint32=function(N){return this.uint32((N<<1^N>>31)>>>0)};function S(N,B,te){for(;N.hi;)B[te++]=N.lo&127|128,N.lo=(N.lo>>>7|N.hi<<25)>>>0,N.hi>>>=7;for(;N.lo>127;)B[te++]=N.lo&127|128,N.lo=N.lo>>>7;B[te++]=N.lo}u.prototype.uint64=function(N){var B=c.from(N);return this._push(S,B.length(),B)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(N){var B=c.from(N).zzEncode();return this._push(S,B.length(),B)},u.prototype.bool=function(N){return this._push(h,1,N?1:0)};function A(N,B,te){B[te]=N&255,B[te+1]=N>>>8&255,B[te+2]=N>>>16&255,B[te+3]=N>>>24}u.prototype.fixed32=function(N){return this._push(A,4,N>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(N){var B=c.from(N);return this._push(A,4,B.lo)._push(A,4,B.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(N){return this._push(i.float.writeFloatLE,4,N)},u.prototype.double=function(N){return this._push(i.float.writeDoubleLE,8,N)};var V=i.Array.prototype.set?function(N,B,te){B.set(N,te)}:function(N,B,te){for(var ve=0;ve<N.length;++ve)B[te+ve]=N[ve]};u.prototype.bytes=function(N){var B=N.length>>>0;if(!B)return this._push(h,1,0);if(i.isString(N)){var te=u.alloc(B=n.length(N));n.decode(N,te,0),N=te}return this.uint32(B)._push(V,B,N)},u.prototype.string=function(N){var B=a.length(N);return B?this.uint32(B)._push(a.write,B,N):this._push(h,1,0)},u.prototype.fork=function(){return this.states=new r(this),this.head=this.tail=new f(p,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new f(p,0,0),this.len=0),this},u.prototype.ldelim=function(){var N=this.head,B=this.tail,te=this.len;return this.reset().uint32(te),te&&(this.tail.next=N.next,this.tail=B,this.len+=te),this},u.prototype.finish=function(){for(var N=this.head.next,B=this.constructor.alloc(this.len),te=0;N;)N.fn(N.val,B,te),te+=N.len,N=N.next;return B},u._configure=function(N){o=N,u.create=l(),o._configure()}}),du=me((e,t)=>{t.exports=c;var i=li();(c.prototype=Object.create(i.prototype)).constructor=c;var o=Xt();function c(){i.call(this)}c._configure=function(){c.alloc=o._Buffer_allocUnsafe,c.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&o.Buffer.prototype.set.name==="set"?function(a,f,p){f.set(a,p)}:function(a,f,p){if(a.copy)a.copy(f,p,0,a.length);else for(var r=0;r<a.length;)f[p++]=a[r++]}},c.prototype.bytes=function(a){o.isString(a)&&(a=o._Buffer_from(a,"base64"));var f=a.length>>>0;return this.uint32(f),f&&this._push(c.writeBytesBuffer,f,a),this};function n(a,f,p){a.length<40?o.utf8.write(a,f,p):f.utf8Write?f.utf8Write(a,p):f.write(a,p)}c.prototype.string=function(a){var f=o.Buffer.byteLength(a);return this.uint32(f),f&&this._push(n,f,a),this},c._configure()}),pi=me((e,t)=>{t.exports=f;var i=Xt(),o,c=i.LongBits,n=i.utf8;function a(y,I){return RangeError("index out of range: "+y.pos+" + "+(I||1)+" > "+y.len)}function f(y){this.buf=y,this.pos=0,this.len=y.length}var p=typeof Uint8Array<"u"?function(y){if(y instanceof Uint8Array||Array.isArray(y))return new f(y);throw Error("illegal buffer")}:function(y){if(Array.isArray(y))return new f(y);throw Error("illegal buffer")},r=function(){return i.Buffer?function(y){return(f.create=function(I){return i.Buffer.isBuffer(I)?new o(I):p(I)})(y)}:p};f.create=r(),f.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,f.prototype.uint32=function(){var y=4294967295;return function(){if(y=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(y=(y|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(y=(y|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(y=(y|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(y=(y|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return y;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return y}}(),f.prototype.int32=function(){return this.uint32()|0},f.prototype.sint32=function(){var y=this.uint32();return y>>>1^-(y&1)|0};function u(){var y=new c(0,0),I=0;if(this.len-this.pos>4){for(;I<4;++I)if(y.lo=(y.lo|(this.buf[this.pos]&127)<<I*7)>>>0,this.buf[this.pos++]<128)return y;if(y.lo=(y.lo|(this.buf[this.pos]&127)<<28)>>>0,y.hi=(y.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return y;I=0}else{for(;I<3;++I){if(this.pos>=this.len)throw a(this);if(y.lo=(y.lo|(this.buf[this.pos]&127)<<I*7)>>>0,this.buf[this.pos++]<128)return y}return y.lo=(y.lo|(this.buf[this.pos++]&127)<<I*7)>>>0,y}if(this.len-this.pos>4){for(;I<5;++I)if(y.hi=(y.hi|(this.buf[this.pos]&127)<<I*7+3)>>>0,this.buf[this.pos++]<128)return y}else for(;I<5;++I){if(this.pos>=this.len)throw a(this);if(y.hi=(y.hi|(this.buf[this.pos]&127)<<I*7+3)>>>0,this.buf[this.pos++]<128)return y}throw Error("invalid varint encoding")}f.prototype.bool=function(){return this.uint32()!==0};function l(y,I){return(y[I-4]|y[I-3]<<8|y[I-2]<<16|y[I-1]<<24)>>>0}f.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return l(this.buf,this.pos+=4)},f.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return l(this.buf,this.pos+=4)|0};function h(){if(this.pos+8>this.len)throw a(this,8);return new c(l(this.buf,this.pos+=4),l(this.buf,this.pos+=4))}f.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var y=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,y},f.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var y=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,y},f.prototype.bytes=function(){var y=this.uint32(),I=this.pos,S=this.pos+y;if(S>this.len)throw a(this,y);return this.pos+=y,Array.isArray(this.buf)?this.buf.slice(I,S):I===S?new this.buf.constructor(0):this._slice.call(this.buf,I,S)},f.prototype.string=function(){var y=this.bytes();return n.read(y,0,y.length)},f.prototype.skip=function(y){if(typeof y=="number"){if(this.pos+y>this.len)throw a(this,y);this.pos+=y}else do if(this.pos>=this.len)throw a(this);while(this.buf[this.pos++]&128);return this},f.prototype.skipType=function(y){switch(y){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(y=this.uint32()&7)!==4;)this.skipType(y);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+y+" at offset "+this.pos)}return this},f._configure=function(y){o=y,f.create=r(),o._configure();var I=i.Long?"toLong":"toNumber";i.merge(f.prototype,{int64:function(){return u.call(this)[I](!1)},uint64:function(){return u.call(this)[I](!0)},sint64:function(){return u.call(this).zzDecode()[I](!1)},fixed64:function(){return h.call(this)[I](!0)},sfixed64:function(){return h.call(this)[I](!1)}})}}),vu=me((e,t)=>{t.exports=c;var i=pi();(c.prototype=Object.create(i.prototype)).constructor=c;var o=Xt();function c(n){i.call(this,n)}c._configure=function(){o.Buffer&&(c.prototype._slice=o.Buffer.prototype.slice)},c.prototype.string=function(){var n=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+n,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+n,this.len))},c._configure()}),Ou=me((e,t)=>{t.exports=o;var i=Xt();(o.prototype=Object.create(i.EventEmitter.prototype)).constructor=o;function o(c,n,a){if(typeof c!="function")throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=c,this.requestDelimited=!!n,this.responseDelimited=!!a}o.prototype.rpcCall=function c(n,a,f,p,r){if(!p)throw TypeError("request must be specified");var u=this;if(!r)return i.asPromise(c,u,n,a,f,p);if(!u.rpcImpl){setTimeout(function(){r(Error("already ended"))},0);return}try{return u.rpcImpl(n,a[u.requestDelimited?"encodeDelimited":"encode"](p).finish(),function(l,h){if(l)return u.emit("error",l,n),r(l);if(h===null){u.end(!0);return}if(!(h instanceof f))try{h=f[u.responseDelimited?"decodeDelimited":"decode"](h)}catch(y){return u.emit("error",y,n),r(y)}return u.emit("data",h,n),r(null,h)})}catch(l){u.emit("error",l,n),setTimeout(function(){r(l)},0);return}},o.prototype.end=function(c){return this.rpcImpl&&(c||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),Su=me(e=>{var t=e;t.Service=Ou()}),Pu=me((e,t)=>{t.exports={}}),Lu=me(e=>{var t=e;t.build="minimal",t.Writer=li(),t.BufferWriter=du(),t.Reader=pi(),t.BufferReader=vu(),t.util=Xt(),t.rpc=Su(),t.roots=Pu(),t.configure=i;function i(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}i()}),Cu=me((e,t)=>{t.exports=Lu()}),$r=me((e,t)=>{var i=Cu(),o=i.Reader,c=i.Writer,n=i.util,a=i.roots.default||(i.roots.default={});a.onnx=function(){var f={};return f.Version=function(){var p={},r=Object.create(p);return r[p[0]="_START_VERSION"]=0,r[p[1]="IR_VERSION_2017_10_10"]=1,r[p[2]="IR_VERSION_2017_10_30"]=2,r[p[3]="IR_VERSION_2017_11_3"]=3,r[p[4]="IR_VERSION_2019_1_22"]=4,r[p[5]="IR_VERSION_2019_3_18"]=5,r[p[6]="IR_VERSION_2019_9_19"]=6,r[p[7]="IR_VERSION_2020_5_8"]=7,r[p[8]="IR_VERSION_2021_7_30"]=8,r[p[9]="IR_VERSION"]=9,r}(),f.AttributeProto=function(){function p(r){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],r)for(var u=Object.keys(r),l=0;l<u.length;++l)r[u[l]]!=null&&(this[u[l]]=r[u[l]])}return p.prototype.name="",p.prototype.refAttrName="",p.prototype.docString="",p.prototype.type=0,p.prototype.f=0,p.prototype.i=n.Long?n.Long.fromBits(0,0,!1):0,p.prototype.s=n.newBuffer([]),p.prototype.t=null,p.prototype.g=null,p.prototype.sparseTensor=null,p.prototype.tp=null,p.prototype.floats=n.emptyArray,p.prototype.ints=n.emptyArray,p.prototype.strings=n.emptyArray,p.prototype.tensors=n.emptyArray,p.prototype.graphs=n.emptyArray,p.prototype.sparseTensors=n.emptyArray,p.prototype.typeProtos=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,u){if(u||(u=c.create()),r.name!=null&&Object.hasOwnProperty.call(r,"name")&&u.uint32(10).string(r.name),r.f!=null&&Object.hasOwnProperty.call(r,"f")&&u.uint32(21).float(r.f),r.i!=null&&Object.hasOwnProperty.call(r,"i")&&u.uint32(24).int64(r.i),r.s!=null&&Object.hasOwnProperty.call(r,"s")&&u.uint32(34).bytes(r.s),r.t!=null&&Object.hasOwnProperty.call(r,"t")&&a.onnx.TensorProto.encode(r.t,u.uint32(42).fork()).ldelim(),r.g!=null&&Object.hasOwnProperty.call(r,"g")&&a.onnx.GraphProto.encode(r.g,u.uint32(50).fork()).ldelim(),r.floats!=null&&r.floats.length){u.uint32(58).fork();for(var l=0;l<r.floats.length;++l)u.float(r.floats[l]);u.ldelim()}if(r.ints!=null&&r.ints.length){u.uint32(66).fork();for(var l=0;l<r.ints.length;++l)u.int64(r.ints[l]);u.ldelim()}if(r.strings!=null&&r.strings.length)for(var l=0;l<r.strings.length;++l)u.uint32(74).bytes(r.strings[l]);if(r.tensors!=null&&r.tensors.length)for(var l=0;l<r.tensors.length;++l)a.onnx.TensorProto.encode(r.tensors[l],u.uint32(82).fork()).ldelim();if(r.graphs!=null&&r.graphs.length)for(var l=0;l<r.graphs.length;++l)a.onnx.GraphProto.encode(r.graphs[l],u.uint32(90).fork()).ldelim();if(r.docString!=null&&Object.hasOwnProperty.call(r,"docString")&&u.uint32(106).string(r.docString),r.tp!=null&&Object.hasOwnProperty.call(r,"tp")&&a.onnx.TypeProto.encode(r.tp,u.uint32(114).fork()).ldelim(),r.typeProtos!=null&&r.typeProtos.length)for(var l=0;l<r.typeProtos.length;++l)a.onnx.TypeProto.encode(r.typeProtos[l],u.uint32(122).fork()).ldelim();if(r.type!=null&&Object.hasOwnProperty.call(r,"type")&&u.uint32(160).int32(r.type),r.refAttrName!=null&&Object.hasOwnProperty.call(r,"refAttrName")&&u.uint32(170).string(r.refAttrName),r.sparseTensor!=null&&Object.hasOwnProperty.call(r,"sparseTensor")&&a.onnx.SparseTensorProto.encode(r.sparseTensor,u.uint32(178).fork()).ldelim(),r.sparseTensors!=null&&r.sparseTensors.length)for(var l=0;l<r.sparseTensors.length;++l)a.onnx.SparseTensorProto.encode(r.sparseTensors[l],u.uint32(186).fork()).ldelim();return u},p.encodeDelimited=function(r,u){return this.encode(r,u).ldelim()},p.decode=function(r,u){r instanceof o||(r=o.create(r));for(var l=u===void 0?r.len:r.pos+u,h=new a.onnx.AttributeProto;r.pos<l;){var y=r.uint32();switch(y>>>3){case 1:{h.name=r.string();break}case 21:{h.refAttrName=r.string();break}case 13:{h.docString=r.string();break}case 20:{h.type=r.int32();break}case 2:{h.f=r.float();break}case 3:{h.i=r.int64();break}case 4:{h.s=r.bytes();break}case 5:{h.t=a.onnx.TensorProto.decode(r,r.uint32());break}case 6:{h.g=a.onnx.GraphProto.decode(r,r.uint32());break}case 22:{h.sparseTensor=a.onnx.SparseTensorProto.decode(r,r.uint32());break}case 14:{h.tp=a.onnx.TypeProto.decode(r,r.uint32());break}case 7:{if(h.floats&&h.floats.length||(h.floats=[]),(y&7)===2)for(var I=r.uint32()+r.pos;r.pos<I;)h.floats.push(r.float());else h.floats.push(r.float());break}case 8:{if(h.ints&&h.ints.length||(h.ints=[]),(y&7)===2)for(var I=r.uint32()+r.pos;r.pos<I;)h.ints.push(r.int64());else h.ints.push(r.int64());break}case 9:{h.strings&&h.strings.length||(h.strings=[]),h.strings.push(r.bytes());break}case 10:{h.tensors&&h.tensors.length||(h.tensors=[]),h.tensors.push(a.onnx.TensorProto.decode(r,r.uint32()));break}case 11:{h.graphs&&h.graphs.length||(h.graphs=[]),h.graphs.push(a.onnx.GraphProto.decode(r,r.uint32()));break}case 23:{h.sparseTensors&&h.sparseTensors.length||(h.sparseTensors=[]),h.sparseTensors.push(a.onnx.SparseTensorProto.decode(r,r.uint32()));break}case 15:{h.typeProtos&&h.typeProtos.length||(h.typeProtos=[]),h.typeProtos.push(a.onnx.TypeProto.decode(r,r.uint32()));break}default:r.skipType(y&7);break}}return h},p.decodeDelimited=function(r){return r instanceof o||(r=new o(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.name!=null&&r.hasOwnProperty("name")&&!n.isString(r.name))return"name: string expected";if(r.refAttrName!=null&&r.hasOwnProperty("refAttrName")&&!n.isString(r.refAttrName))return"refAttrName: string expected";if(r.docString!=null&&r.hasOwnProperty("docString")&&!n.isString(r.docString))return"docString: string expected";if(r.type!=null&&r.hasOwnProperty("type"))switch(r.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(r.f!=null&&r.hasOwnProperty("f")&&typeof r.f!="number")return"f: number expected";if(r.i!=null&&r.hasOwnProperty("i")&&!n.isInteger(r.i)&&!(r.i&&n.isInteger(r.i.low)&&n.isInteger(r.i.high)))return"i: integer|Long expected";if(r.s!=null&&r.hasOwnProperty("s")&&!(r.s&&typeof r.s.length=="number"||n.isString(r.s)))return"s: buffer expected";if(r.t!=null&&r.hasOwnProperty("t")){var u=a.onnx.TensorProto.verify(r.t);if(u)return"t."+u}if(r.g!=null&&r.hasOwnProperty("g")){var u=a.onnx.GraphProto.verify(r.g);if(u)return"g."+u}if(r.sparseTensor!=null&&r.hasOwnProperty("sparseTensor")){var u=a.onnx.SparseTensorProto.verify(r.sparseTensor);if(u)return"sparseTensor."+u}if(r.tp!=null&&r.hasOwnProperty("tp")){var u=a.onnx.TypeProto.verify(r.tp);if(u)return"tp."+u}if(r.floats!=null&&r.hasOwnProperty("floats")){if(!Array.isArray(r.floats))return"floats: array expected";for(var l=0;l<r.floats.length;++l)if(typeof r.floats[l]!="number")return"floats: number[] expected"}if(r.ints!=null&&r.hasOwnProperty("ints")){if(!Array.isArray(r.ints))return"ints: array expected";for(var l=0;l<r.ints.length;++l)if(!n.isInteger(r.ints[l])&&!(r.ints[l]&&n.isInteger(r.ints[l].low)&&n.isInteger(r.ints[l].high)))return"ints: integer|Long[] expected"}if(r.strings!=null&&r.hasOwnProperty("strings")){if(!Array.isArray(r.strings))return"strings: array expected";for(var l=0;l<r.strings.length;++l)if(!(r.strings[l]&&typeof r.strings[l].length=="number"||n.isString(r.strings[l])))return"strings: buffer[] expected"}if(r.tensors!=null&&r.hasOwnProperty("tensors")){if(!Array.isArray(r.tensors))return"tensors: array expected";for(var l=0;l<r.tensors.length;++l){var u=a.onnx.TensorProto.verify(r.tensors[l]);if(u)return"tensors."+u}}if(r.graphs!=null&&r.hasOwnProperty("graphs")){if(!Array.isArray(r.graphs))return"graphs: array expected";for(var l=0;l<r.graphs.length;++l){var u=a.onnx.GraphProto.verify(r.graphs[l]);if(u)return"graphs."+u}}if(r.sparseTensors!=null&&r.hasOwnProperty("sparseTensors")){if(!Array.isArray(r.sparseTensors))return"sparseTensors: array expected";for(var l=0;l<r.sparseTensors.length;++l){var u=a.onnx.SparseTensorProto.verify(r.sparseTensors[l]);if(u)return"sparseTensors."+u}}if(r.typeProtos!=null&&r.hasOwnProperty("typeProtos")){if(!Array.isArray(r.typeProtos))return"typeProtos: array expected";for(var l=0;l<r.typeProtos.length;++l){var u=a.onnx.TypeProto.verify(r.typeProtos[l]);if(u)return"typeProtos."+u}}return null},p.fromObject=function(r){if(r instanceof a.onnx.AttributeProto)return r;var u=new a.onnx.AttributeProto;switch(r.name!=null&&(u.name=String(r.name)),r.refAttrName!=null&&(u.refAttrName=String(r.refAttrName)),r.docString!=null&&(u.docString=String(r.docString)),r.type){default:if(typeof r.type=="number"){u.type=r.type;break}break;case"UNDEFINED":case 0:u.type=0;break;case"FLOAT":case 1:u.type=1;break;case"INT":case 2:u.type=2;break;case"STRING":case 3:u.type=3;break;case"TENSOR":case 4:u.type=4;break;case"GRAPH":case 5:u.type=5;break;case"SPARSE_TENSOR":case 11:u.type=11;break;case"TYPE_PROTO":case 13:u.type=13;break;case"FLOATS":case 6:u.type=6;break;case"INTS":case 7:u.type=7;break;case"STRINGS":case 8:u.type=8;break;case"TENSORS":case 9:u.type=9;break;case"GRAPHS":case 10:u.type=10;break;case"SPARSE_TENSORS":case 12:u.type=12;break;case"TYPE_PROTOS":case 14:u.type=14;break}if(r.f!=null&&(u.f=Number(r.f)),r.i!=null&&(n.Long?(u.i=n.Long.fromValue(r.i)).unsigned=!1:typeof r.i=="string"?u.i=parseInt(r.i,10):typeof r.i=="number"?u.i=r.i:typeof r.i=="object"&&(u.i=new n.LongBits(r.i.low>>>0,r.i.high>>>0).toNumber())),r.s!=null&&(typeof r.s=="string"?n.base64.decode(r.s,u.s=n.newBuffer(n.base64.length(r.s)),0):r.s.length>=0&&(u.s=r.s)),r.t!=null){if(typeof r.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");u.t=a.onnx.TensorProto.fromObject(r.t)}if(r.g!=null){if(typeof r.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");u.g=a.onnx.GraphProto.fromObject(r.g)}if(r.sparseTensor!=null){if(typeof r.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");u.sparseTensor=a.onnx.SparseTensorProto.fromObject(r.sparseTensor)}if(r.tp!=null){if(typeof r.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");u.tp=a.onnx.TypeProto.fromObject(r.tp)}if(r.floats){if(!Array.isArray(r.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");u.floats=[];for(var l=0;l<r.floats.length;++l)u.floats[l]=Number(r.floats[l])}if(r.ints){if(!Array.isArray(r.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");u.ints=[];for(var l=0;l<r.ints.length;++l)n.Long?(u.ints[l]=n.Long.fromValue(r.ints[l])).unsigned=!1:typeof r.ints[l]=="string"?u.ints[l]=parseInt(r.ints[l],10):typeof r.ints[l]=="number"?u.ints[l]=r.ints[l]:typeof r.ints[l]=="object"&&(u.ints[l]=new n.LongBits(r.ints[l].low>>>0,r.ints[l].high>>>0).toNumber())}if(r.strings){if(!Array.isArray(r.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");u.strings=[];for(var l=0;l<r.strings.length;++l)typeof r.strings[l]=="string"?n.base64.decode(r.strings[l],u.strings[l]=n.newBuffer(n.base64.length(r.strings[l])),0):r.strings[l].length>=0&&(u.strings[l]=r.strings[l])}if(r.tensors){if(!Array.isArray(r.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");u.tensors=[];for(var l=0;l<r.tensors.length;++l){if(typeof r.tensors[l]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");u.tensors[l]=a.onnx.TensorProto.fromObject(r.tensors[l])}}if(r.graphs){if(!Array.isArray(r.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");u.graphs=[];for(var l=0;l<r.graphs.length;++l){if(typeof r.graphs[l]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");u.graphs[l]=a.onnx.GraphProto.fromObject(r.graphs[l])}}if(r.sparseTensors){if(!Array.isArray(r.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");u.sparseTensors=[];for(var l=0;l<r.sparseTensors.length;++l){if(typeof r.sparseTensors[l]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");u.sparseTensors[l]=a.onnx.SparseTensorProto.fromObject(r.sparseTensors[l])}}if(r.typeProtos){if(!Array.isArray(r.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");u.typeProtos=[];for(var l=0;l<r.typeProtos.length;++l){if(typeof r.typeProtos[l]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");u.typeProtos[l]=a.onnx.TypeProto.fromObject(r.typeProtos[l])}}return u},p.toObject=function(r,u){u||(u={});var l={};if((u.arrays||u.defaults)&&(l.floats=[],l.ints=[],l.strings=[],l.tensors=[],l.graphs=[],l.typeProtos=[],l.sparseTensors=[]),u.defaults){if(l.name="",l.f=0,n.Long){var h=new n.Long(0,0,!1);l.i=u.longs===String?h.toString():u.longs===Number?h.toNumber():h}else l.i=u.longs===String?"0":0;u.bytes===String?l.s="":(l.s=[],u.bytes!==Array&&(l.s=n.newBuffer(l.s))),l.t=null,l.g=null,l.docString="",l.tp=null,l.type=u.enums===String?"UNDEFINED":0,l.refAttrName="",l.sparseTensor=null}if(r.name!=null&&r.hasOwnProperty("name")&&(l.name=r.name),r.f!=null&&r.hasOwnProperty("f")&&(l.f=u.json&&!isFinite(r.f)?String(r.f):r.f),r.i!=null&&r.hasOwnProperty("i")&&(typeof r.i=="number"?l.i=u.longs===String?String(r.i):r.i:l.i=u.longs===String?n.Long.prototype.toString.call(r.i):u.longs===Number?new n.LongBits(r.i.low>>>0,r.i.high>>>0).toNumber():r.i),r.s!=null&&r.hasOwnProperty("s")&&(l.s=u.bytes===String?n.base64.encode(r.s,0,r.s.length):u.bytes===Array?Array.prototype.slice.call(r.s):r.s),r.t!=null&&r.hasOwnProperty("t")&&(l.t=a.onnx.TensorProto.toObject(r.t,u)),r.g!=null&&r.hasOwnProperty("g")&&(l.g=a.onnx.GraphProto.toObject(r.g,u)),r.floats&&r.floats.length){l.floats=[];for(var y=0;y<r.floats.length;++y)l.floats[y]=u.json&&!isFinite(r.floats[y])?String(r.floats[y]):r.floats[y]}if(r.ints&&r.ints.length){l.ints=[];for(var y=0;y<r.ints.length;++y)typeof r.ints[y]=="number"?l.ints[y]=u.longs===String?String(r.ints[y]):r.ints[y]:l.ints[y]=u.longs===String?n.Long.prototype.toString.call(r.ints[y]):u.longs===Number?new n.LongBits(r.ints[y].low>>>0,r.ints[y].high>>>0).toNumber():r.ints[y]}if(r.strings&&r.strings.length){l.strings=[];for(var y=0;y<r.strings.length;++y)l.strings[y]=u.bytes===String?n.base64.encode(r.strings[y],0,r.strings[y].length):u.bytes===Array?Array.prototype.slice.call(r.strings[y]):r.strings[y]}if(r.tensors&&r.tensors.length){l.tensors=[];for(var y=0;y<r.tensors.length;++y)l.tensors[y]=a.onnx.TensorProto.toObject(r.tensors[y],u)}if(r.graphs&&r.graphs.length){l.graphs=[];for(var y=0;y<r.graphs.length;++y)l.graphs[y]=a.onnx.GraphProto.toObject(r.graphs[y],u)}if(r.docString!=null&&r.hasOwnProperty("docString")&&(l.docString=r.docString),r.tp!=null&&r.hasOwnProperty("tp")&&(l.tp=a.onnx.TypeProto.toObject(r.tp,u)),r.typeProtos&&r.typeProtos.length){l.typeProtos=[];for(var y=0;y<r.typeProtos.length;++y)l.typeProtos[y]=a.onnx.TypeProto.toObject(r.typeProtos[y],u)}if(r.type!=null&&r.hasOwnProperty("type")&&(l.type=u.enums===String?a.onnx.AttributeProto.AttributeType[r.type]===void 0?r.type:a.onnx.AttributeProto.AttributeType[r.type]:r.type),r.refAttrName!=null&&r.hasOwnProperty("refAttrName")&&(l.refAttrName=r.refAttrName),r.sparseTensor!=null&&r.hasOwnProperty("sparseTensor")&&(l.sparseTensor=a.onnx.SparseTensorProto.toObject(r.sparseTensor,u)),r.sparseTensors&&r.sparseTensors.length){l.sparseTensors=[];for(var y=0;y<r.sparseTensors.length;++y)l.sparseTensors[y]=a.onnx.SparseTensorProto.toObject(r.sparseTensors[y],u)}return l},p.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.AttributeProto"},p.AttributeType=function(){var r={},u=Object.create(r);return u[r[0]="UNDEFINED"]=0,u[r[1]="FLOAT"]=1,u[r[2]="INT"]=2,u[r[3]="STRING"]=3,u[r[4]="TENSOR"]=4,u[r[5]="GRAPH"]=5,u[r[11]="SPARSE_TENSOR"]=11,u[r[13]="TYPE_PROTO"]=13,u[r[6]="FLOATS"]=6,u[r[7]="INTS"]=7,u[r[8]="STRINGS"]=8,u[r[9]="TENSORS"]=9,u[r[10]="GRAPHS"]=10,u[r[12]="SPARSE_TENSORS"]=12,u[r[14]="TYPE_PROTOS"]=14,u}(),p}(),f.ValueInfoProto=function(){function p(r){if(r)for(var u=Object.keys(r),l=0;l<u.length;++l)r[u[l]]!=null&&(this[u[l]]=r[u[l]])}return p.prototype.name="",p.prototype.type=null,p.prototype.docString="",p.create=function(r){return new p(r)},p.encode=function(r,u){return u||(u=c.create()),r.name!=null&&Object.hasOwnProperty.call(r,"name")&&u.uint32(10).string(r.name),r.type!=null&&Object.hasOwnProperty.call(r,"type")&&a.onnx.TypeProto.encode(r.type,u.uint32(18).fork()).ldelim(),r.docString!=null&&Object.hasOwnProperty.call(r,"docString")&&u.uint32(26).string(r.docString),u},p.encodeDelimited=function(r,u){return this.encode(r,u).ldelim()},p.decode=function(r,u){r instanceof o||(r=o.create(r));for(var l=u===void 0?r.len:r.pos+u,h=new a.onnx.ValueInfoProto;r.pos<l;){var y=r.uint32();switch(y>>>3){case 1:{h.name=r.string();break}case 2:{h.type=a.onnx.TypeProto.decode(r,r.uint32());break}case 3:{h.docString=r.string();break}default:r.skipType(y&7);break}}return h},p.decodeDelimited=function(r){return r instanceof o||(r=new o(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.name!=null&&r.hasOwnProperty("name")&&!n.isString(r.name))return"name: string expected";if(r.type!=null&&r.hasOwnProperty("type")){var u=a.onnx.TypeProto.verify(r.type);if(u)return"type."+u}return r.docString!=null&&r.hasOwnProperty("docString")&&!n.isString(r.docString)?"docString: string expected":null},p.fromObject=function(r){if(r instanceof a.onnx.ValueInfoProto)return r;var u=new a.onnx.ValueInfoProto;if(r.name!=null&&(u.name=String(r.name)),r.type!=null){if(typeof r.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");u.type=a.onnx.TypeProto.fromObject(r.type)}return r.docString!=null&&(u.docString=String(r.docString)),u},p.toObject=function(r,u){u||(u={});var l={};return u.defaults&&(l.name="",l.type=null,l.docString=""),r.name!=null&&r.hasOwnProperty("name")&&(l.name=r.name),r.type!=null&&r.hasOwnProperty("type")&&(l.type=a.onnx.TypeProto.toObject(r.type,u)),r.docString!=null&&r.hasOwnProperty("docString")&&(l.docString=r.docString),l},p.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.ValueInfoProto"},p}(),f.NodeProto=function(){function p(r){if(this.input=[],this.output=[],this.attribute=[],r)for(var u=Object.keys(r),l=0;l<u.length;++l)r[u[l]]!=null&&(this[u[l]]=r[u[l]])}return p.prototype.input=n.emptyArray,p.prototype.output=n.emptyArray,p.prototype.name="",p.prototype.opType="",p.prototype.domain="",p.prototype.attribute=n.emptyArray,p.prototype.docString="",p.create=function(r){return new p(r)},p.encode=function(r,u){if(u||(u=c.create()),r.input!=null&&r.input.length)for(var l=0;l<r.input.length;++l)u.uint32(10).string(r.input[l]);if(r.output!=null&&r.output.length)for(var l=0;l<r.output.length;++l)u.uint32(18).string(r.output[l]);if(r.name!=null&&Object.hasOwnProperty.call(r,"name")&&u.uint32(26).string(r.name),r.opType!=null&&Object.hasOwnProperty.call(r,"opType")&&u.uint32(34).string(r.opType),r.attribute!=null&&r.attribute.length)for(var l=0;l<r.attribute.length;++l)a.onnx.AttributeProto.encode(r.attribute[l],u.uint32(42).fork()).ldelim();return r.docString!=null&&Object.hasOwnProperty.call(r,"docString")&&u.uint32(50).string(r.docString),r.domain!=null&&Object.hasOwnProperty.call(r,"domain")&&u.uint32(58).string(r.domain),u},p.encodeDelimited=function(r,u){return this.encode(r,u).ldelim()},p.decode=function(r,u){r instanceof o||(r=o.create(r));for(var l=u===void 0?r.len:r.pos+u,h=new a.onnx.NodeProto;r.pos<l;){var y=r.uint32();switch(y>>>3){case 1:{h.input&&h.input.length||(h.input=[]),h.input.push(r.string());break}case 2:{h.output&&h.output.length||(h.output=[]),h.output.push(r.string());break}case 3:{h.name=r.string();break}case 4:{h.opType=r.string();break}case 7:{h.domain=r.string();break}case 5:{h.attribute&&h.attribute.length||(h.attribute=[]),h.attribute.push(a.onnx.AttributeProto.decode(r,r.uint32()));break}case 6:{h.docString=r.string();break}default:r.skipType(y&7);break}}return h},p.decodeDelimited=function(r){return r instanceof o||(r=new o(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.input!=null&&r.hasOwnProperty("input")){if(!Array.isArray(r.input))return"input: array expected";for(var u=0;u<r.input.length;++u)if(!n.isString(r.input[u]))return"input: string[] expected"}if(r.output!=null&&r.hasOwnProperty("output")){if(!Array.isArray(r.output))return"output: array expected";for(var u=0;u<r.output.length;++u)if(!n.isString(r.output[u]))return"output: string[] expected"}if(r.name!=null&&r.hasOwnProperty("name")&&!n.isString(r.name))return"name: string expected";if(r.opType!=null&&r.hasOwnProperty("opType")&&!n.isString(r.opType))return"opType: string expected";if(r.domain!=null&&r.hasOwnProperty("domain")&&!n.isString(r.domain))return"domain: string expected";if(r.attribute!=null&&r.hasOwnProperty("attribute")){if(!Array.isArray(r.attribute))return"attribute: array expected";for(var u=0;u<r.attribute.length;++u){var l=a.onnx.AttributeProto.verify(r.attribute[u]);if(l)return"attribute."+l}}return r.docString!=null&&r.hasOwnProperty("docString")&&!n.isString(r.docString)?"docString: string expected":null},p.fromObject=function(r){if(r instanceof a.onnx.NodeProto)return r;var u=new a.onnx.NodeProto;if(r.input){if(!Array.isArray(r.input))throw TypeError(".onnx.NodeProto.input: array expected");u.input=[];for(var l=0;l<r.input.length;++l)u.input[l]=String(r.input[l])}if(r.output){if(!Array.isArray(r.output))throw TypeError(".onnx.NodeProto.output: array expected");u.output=[];for(var l=0;l<r.output.length;++l)u.output[l]=String(r.output[l])}if(r.name!=null&&(u.name=String(r.name)),r.opType!=null&&(u.opType=String(r.opType)),r.domain!=null&&(u.domain=String(r.domain)),r.attribute){if(!Array.isArray(r.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");u.attribute=[];for(var l=0;l<r.attribute.length;++l){if(typeof r.attribute[l]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");u.attribute[l]=a.onnx.AttributeProto.fromObject(r.attribute[l])}}return r.docString!=null&&(u.docString=String(r.docString)),u},p.toObject=function(r,u){u||(u={});var l={};if((u.arrays||u.defaults)&&(l.input=[],l.output=[],l.attribute=[]),u.defaults&&(l.name="",l.opType="",l.docString="",l.domain=""),r.input&&r.input.length){l.input=[];for(var h=0;h<r.input.length;++h)l.input[h]=r.input[h]}if(r.output&&r.output.length){l.output=[];for(var h=0;h<r.output.length;++h)l.output[h]=r.output[h]}if(r.name!=null&&r.hasOwnProperty("name")&&(l.name=r.name),r.opType!=null&&r.hasOwnProperty("opType")&&(l.opType=r.opType),r.attribute&&r.attribute.length){l.attribute=[];for(var h=0;h<r.attribute.length;++h)l.attribute[h]=a.onnx.AttributeProto.toObject(r.attribute[h],u)}return r.docString!=null&&r.hasOwnProperty("docString")&&(l.docString=r.docString),r.domain!=null&&r.hasOwnProperty("domain")&&(l.domain=r.domain),l},p.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.NodeProto"},p}(),f.TrainingInfoProto=function(){function p(r){if(this.initializationBinding=[],this.updateBinding=[],r)for(var u=Object.keys(r),l=0;l<u.length;++l)r[u[l]]!=null&&(this[u[l]]=r[u[l]])}return p.prototype.initialization=null,p.prototype.algorithm=null,p.prototype.initializationBinding=n.emptyArray,p.prototype.updateBinding=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,u){if(u||(u=c.create()),r.initialization!=null&&Object.hasOwnProperty.call(r,"initialization")&&a.onnx.GraphProto.encode(r.initialization,u.uint32(10).fork()).ldelim(),r.algorithm!=null&&Object.hasOwnProperty.call(r,"algorithm")&&a.onnx.GraphProto.encode(r.algorithm,u.uint32(18).fork()).ldelim(),r.initializationBinding!=null&&r.initializationBinding.length)for(var l=0;l<r.initializationBinding.length;++l)a.onnx.StringStringEntryProto.encode(r.initializationBinding[l],u.uint32(26).fork()).ldelim();if(r.updateBinding!=null&&r.updateBinding.length)for(var l=0;l<r.updateBinding.length;++l)a.onnx.StringStringEntryProto.encode(r.updateBinding[l],u.uint32(34).fork()).ldelim();return u},p.encodeDelimited=function(r,u){return this.encode(r,u).ldelim()},p.decode=function(r,u){r instanceof o||(r=o.create(r));for(var l=u===void 0?r.len:r.pos+u,h=new a.onnx.TrainingInfoProto;r.pos<l;){var y=r.uint32();switch(y>>>3){case 1:{h.initialization=a.onnx.GraphProto.decode(r,r.uint32());break}case 2:{h.algorithm=a.onnx.GraphProto.decode(r,r.uint32());break}case 3:{h.initializationBinding&&h.initializationBinding.length||(h.initializationBinding=[]),h.initializationBinding.push(a.onnx.StringStringEntryProto.decode(r,r.uint32()));break}case 4:{h.updateBinding&&h.updateBinding.length||(h.updateBinding=[]),h.updateBinding.push(a.onnx.StringStringEntryProto.decode(r,r.uint32()));break}default:r.skipType(y&7);break}}return h},p.decodeDelimited=function(r){return r instanceof o||(r=new o(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.initialization!=null&&r.hasOwnProperty("initialization")){var u=a.onnx.GraphProto.verify(r.initialization);if(u)return"initialization."+u}if(r.algorithm!=null&&r.hasOwnProperty("algorithm")){var u=a.onnx.GraphProto.verify(r.algorithm);if(u)return"algorithm."+u}if(r.initializationBinding!=null&&r.hasOwnProperty("initializationBinding")){if(!Array.isArray(r.initializationBinding))return"initializationBinding: array expected";for(var l=0;l<r.initializationBinding.length;++l){var u=a.onnx.StringStringEntryProto.verify(r.initializationBinding[l]);if(u)return"initializationBinding."+u}}if(r.updateBinding!=null&&r.hasOwnProperty("updateBinding")){if(!Array.isArray(r.updateBinding))return"updateBinding: array expected";for(var l=0;l<r.updateBinding.length;++l){var u=a.onnx.StringStringEntryProto.verify(r.updateBinding[l]);if(u)return"updateBinding."+u}}return null},p.fromObject=function(r){if(r instanceof a.onnx.TrainingInfoProto)return r;var u=new a.onnx.TrainingInfoProto;if(r.initialization!=null){if(typeof r.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");u.initialization=a.onnx.GraphProto.fromObject(r.initialization)}if(r.algorithm!=null){if(typeof r.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");u.algorithm=a.onnx.GraphProto.fromObject(r.algorithm)}if(r.initializationBinding){if(!Array.isArray(r.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");u.initializationBinding=[];for(var l=0;l<r.initializationBinding.length;++l){if(typeof r.initializationBinding[l]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");u.initializationBinding[l]=a.onnx.StringStringEntryProto.fromObject(r.initializationBinding[l])}}if(r.updateBinding){if(!Array.isArray(r.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");u.updateBinding=[];for(var l=0;l<r.updateBinding.length;++l){if(typeof r.updateBinding[l]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");u.updateBinding[l]=a.onnx.StringStringEntryProto.fromObject(r.updateBinding[l])}}return u},p.toObject=function(r,u){u||(u={});var l={};if((u.arrays||u.defaults)&&(l.initializationBinding=[],l.updateBinding=[]),u.defaults&&(l.initialization=null,l.algorithm=null),r.initialization!=null&&r.hasOwnProperty("initialization")&&(l.initialization=a.onnx.GraphProto.toObject(r.initialization,u)),r.algorithm!=null&&r.hasOwnProperty("algorithm")&&(l.algorithm=a.onnx.GraphProto.toObject(r.algorithm,u)),r.initializationBinding&&r.initializationBinding.length){l.initializationBinding=[];for(var h=0;h<r.initializationBinding.length;++h)l.initializationBinding[h]=a.onnx.StringStringEntryProto.toObject(r.initializationBinding[h],u)}if(r.updateBinding&&r.updateBinding.length){l.updateBinding=[];for(var h=0;h<r.updateBinding.length;++h)l.updateBinding[h]=a.onnx.StringStringEntryProto.toObject(r.updateBinding[h],u)}return l},p.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TrainingInfoProto"},p}(),f.ModelProto=function(){function p(r){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],r)for(var u=Object.keys(r),l=0;l<u.length;++l)r[u[l]]!=null&&(this[u[l]]=r[u[l]])}return p.prototype.irVersion=n.Long?n.Long.fromBits(0,0,!1):0,p.prototype.opsetImport=n.emptyArray,p.prototype.producerName="",p.prototype.producerVersion="",p.prototype.domain="",p.prototype.modelVersion=n.Long?n.Long.fromBits(0,0,!1):0,p.prototype.docString="",p.prototype.graph=null,p.prototype.metadataProps=n.emptyArray,p.prototype.trainingInfo=n.emptyArray,p.prototype.functions=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,u){if(u||(u=c.create()),r.irVersion!=null&&Object.hasOwnProperty.call(r,"irVersion")&&u.uint32(8).int64(r.irVersion),r.producerName!=null&&Object.hasOwnProperty.call(r,"producerName")&&u.uint32(18).string(r.producerName),r.producerVersion!=null&&Object.hasOwnProperty.call(r,"producerVersion")&&u.uint32(26).string(r.producerVersion),r.domain!=null&&Object.hasOwnProperty.call(r,"domain")&&u.uint32(34).string(r.domain),r.modelVersion!=null&&Object.hasOwnProperty.call(r,"modelVersion")&&u.uint32(40).int64(r.modelVersion),r.docString!=null&&Object.hasOwnProperty.call(r,"docString")&&u.uint32(50).string(r.docString),r.graph!=null&&Object.hasOwnProperty.call(r,"graph")&&a.onnx.GraphProto.encode(r.graph,u.uint32(58).fork()).ldelim(),r.opsetImport!=null&&r.opsetImport.length)for(var l=0;l<r.opsetImport.length;++l)a.onnx.OperatorSetIdProto.encode(r.opsetImport[l],u.uint32(66).fork()).ldelim();if(r.metadataProps!=null&&r.metadataProps.length)for(var l=0;l<r.metadataProps.length;++l)a.onnx.StringStringEntryProto.encode(r.metadataProps[l],u.uint32(114).fork()).ldelim();if(r.trainingInfo!=null&&r.trainingInfo.length)for(var l=0;l<r.trainingInfo.length;++l)a.onnx.TrainingInfoProto.encode(r.trainingInfo[l],u.uint32(162).fork()).ldelim();if(r.functions!=null&&r.functions.length)for(var l=0;l<r.functions.length;++l)a.onnx.FunctionProto.encode(r.functions[l],u.uint32(202).fork()).ldelim();return u},p.encodeDelimited=function(r,u){return this.encode(r,u).ldelim()},p.decode=function(r,u){r instanceof o||(r=o.create(r));for(var l=u===void 0?r.len:r.pos+u,h=new a.onnx.ModelProto;r.pos<l;){var y=r.uint32();switch(y>>>3){case 1:{h.irVersion=r.int64();break}case 8:{h.opsetImport&&h.opsetImport.length||(h.opsetImport=[]),h.opsetImport.push(a.onnx.OperatorSetIdProto.decode(r,r.uint32()));break}case 2:{h.producerName=r.string();break}case 3:{h.producerVersion=r.string();break}case 4:{h.domain=r.string();break}case 5:{h.modelVersion=r.int64();break}case 6:{h.docString=r.string();break}case 7:{h.graph=a.onnx.GraphProto.decode(r,r.uint32());break}case 14:{h.metadataProps&&h.metadataProps.length||(h.metadataProps=[]),h.metadataProps.push(a.onnx.StringStringEntryProto.decode(r,r.uint32()));break}case 20:{h.trainingInfo&&h.trainingInfo.length||(h.trainingInfo=[]),h.trainingInfo.push(a.onnx.TrainingInfoProto.decode(r,r.uint32()));break}case 25:{h.functions&&h.functions.length||(h.functions=[]),h.functions.push(a.onnx.FunctionProto.decode(r,r.uint32()));break}default:r.skipType(y&7);break}}return h},p.decodeDelimited=function(r){return r instanceof o||(r=new o(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.irVersion!=null&&r.hasOwnProperty("irVersion")&&!n.isInteger(r.irVersion)&&!(r.irVersion&&n.isInteger(r.irVersion.low)&&n.isInteger(r.irVersion.high)))return"irVersion: integer|Long expected";if(r.opsetImport!=null&&r.hasOwnProperty("opsetImport")){if(!Array.isArray(r.opsetImport))return"opsetImport: array expected";for(var u=0;u<r.opsetImport.length;++u){var l=a.onnx.OperatorSetIdProto.verify(r.opsetImport[u]);if(l)return"opsetImport."+l}}if(r.producerName!=null&&r.hasOwnProperty("producerName")&&!n.isString(r.producerName))return"producerName: string expected";if(r.producerVersion!=null&&r.hasOwnProperty("producerVersion")&&!n.isString(r.producerVersion))return"producerVersion: string expected";if(r.domain!=null&&r.hasOwnProperty("domain")&&!n.isString(r.domain))return"domain: string expected";if(r.modelVersion!=null&&r.hasOwnProperty("modelVersion")&&!n.isInteger(r.modelVersion)&&!(r.modelVersion&&n.isInteger(r.modelVersion.low)&&n.isInteger(r.modelVersion.high)))return"modelVersion: integer|Long expected";if(r.docString!=null&&r.hasOwnProperty("docString")&&!n.isString(r.docString))return"docString: string expected";if(r.graph!=null&&r.hasOwnProperty("graph")){var l=a.onnx.GraphProto.verify(r.graph);if(l)return"graph."+l}if(r.metadataProps!=null&&r.hasOwnProperty("metadataProps")){if(!Array.isArray(r.metadataProps))return"metadataProps: array expected";for(var u=0;u<r.metadataProps.length;++u){var l=a.onnx.StringStringEntryProto.verify(r.metadataProps[u]);if(l)return"metadataProps."+l}}if(r.trainingInfo!=null&&r.hasOwnProperty("trainingInfo")){if(!Array.isArray(r.trainingInfo))return"trainingInfo: array expected";for(var u=0;u<r.trainingInfo.length;++u){var l=a.onnx.TrainingInfoProto.verify(r.trainingInfo[u]);if(l)return"trainingInfo."+l}}if(r.functions!=null&&r.hasOwnProperty("functions")){if(!Array.isArray(r.functions))return"functions: array expected";for(var u=0;u<r.functions.length;++u){var l=a.onnx.FunctionProto.verify(r.functions[u]);if(l)return"functions."+l}}return null},p.fromObject=function(r){if(r instanceof a.onnx.ModelProto)return r;var u=new a.onnx.ModelProto;if(r.irVersion!=null&&(n.Long?(u.irVersion=n.Long.fromValue(r.irVersion)).unsigned=!1:typeof r.irVersion=="string"?u.irVersion=parseInt(r.irVersion,10):typeof r.irVersion=="number"?u.irVersion=r.irVersion:typeof r.irVersion=="object"&&(u.irVersion=new n.LongBits(r.irVersion.low>>>0,r.irVersion.high>>>0).toNumber())),r.opsetImport){if(!Array.isArray(r.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");u.opsetImport=[];for(var l=0;l<r.opsetImport.length;++l){if(typeof r.opsetImport[l]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");u.opsetImport[l]=a.onnx.OperatorSetIdProto.fromObject(r.opsetImport[l])}}if(r.producerName!=null&&(u.producerName=String(r.producerName)),r.producerVersion!=null&&(u.producerVersion=String(r.producerVersion)),r.domain!=null&&(u.domain=String(r.domain)),r.modelVersion!=null&&(n.Long?(u.modelVersion=n.Long.fromValue(r.modelVersion)).unsigned=!1:typeof r.modelVersion=="string"?u.modelVersion=parseInt(r.modelVersion,10):typeof r.modelVersion=="number"?u.modelVersion=r.modelVersion:typeof r.modelVersion=="object"&&(u.modelVersion=new n.LongBits(r.modelVersion.low>>>0,r.modelVersion.high>>>0).toNumber())),r.docString!=null&&(u.docString=String(r.docString)),r.graph!=null){if(typeof r.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");u.graph=a.onnx.GraphProto.fromObject(r.graph)}if(r.metadataProps){if(!Array.isArray(r.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");u.metadataProps=[];for(var l=0;l<r.metadataProps.length;++l){if(typeof r.metadataProps[l]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");u.metadataProps[l]=a.onnx.StringStringEntryProto.fromObject(r.metadataProps[l])}}if(r.trainingInfo){if(!Array.isArray(r.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");u.trainingInfo=[];for(var l=0;l<r.trainingInfo.length;++l){if(typeof r.trainingInfo[l]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");u.trainingInfo[l]=a.onnx.TrainingInfoProto.fromObject(r.trainingInfo[l])}}if(r.functions){if(!Array.isArray(r.functions))throw TypeError(".onnx.ModelProto.functions: array expected");u.functions=[];for(var l=0;l<r.functions.length;++l){if(typeof r.functions[l]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");u.functions[l]=a.onnx.FunctionProto.fromObject(r.functions[l])}}return u},p.toObject=function(r,u){u||(u={});var l={};if((u.arrays||u.defaults)&&(l.opsetImport=[],l.metadataProps=[],l.trainingInfo=[],l.functions=[]),u.defaults){if(n.Long){var h=new n.Long(0,0,!1);l.irVersion=u.longs===String?h.toString():u.longs===Number?h.toNumber():h}else l.irVersion=u.longs===String?"0":0;if(l.producerName="",l.producerVersion="",l.domain="",n.Long){var h=new n.Long(0,0,!1);l.modelVersion=u.longs===String?h.toString():u.longs===Number?h.toNumber():h}else l.modelVersion=u.longs===String?"0":0;l.docString="",l.graph=null}if(r.irVersion!=null&&r.hasOwnProperty("irVersion")&&(typeof r.irVersion=="number"?l.irVersion=u.longs===String?String(r.irVersion):r.irVersion:l.irVersion=u.longs===String?n.Long.prototype.toString.call(r.irVersion):u.longs===Number?new n.LongBits(r.irVersion.low>>>0,r.irVersion.high>>>0).toNumber():r.irVersion),r.producerName!=null&&r.hasOwnProperty("producerName")&&(l.producerName=r.producerName),r.producerVersion!=null&&r.hasOwnProperty("producerVersion")&&(l.producerVersion=r.producerVersion),r.domain!=null&&r.hasOwnProperty("domain")&&(l.domain=r.domain),r.modelVersion!=null&&r.hasOwnProperty("modelVersion")&&(typeof r.modelVersion=="number"?l.modelVersion=u.longs===String?String(r.modelVersion):r.modelVersion:l.modelVersion=u.longs===String?n.Long.prototype.toString.call(r.modelVersion):u.longs===Number?new n.LongBits(r.modelVersion.low>>>0,r.modelVersion.high>>>0).toNumber():r.modelVersion),r.docString!=null&&r.hasOwnProperty("docString")&&(l.docString=r.docString),r.graph!=null&&r.hasOwnProperty("graph")&&(l.graph=a.onnx.GraphProto.toObject(r.graph,u)),r.opsetImport&&r.opsetImport.length){l.opsetImport=[];for(var y=0;y<r.opsetImport.length;++y)l.opsetImport[y]=a.onnx.OperatorSetIdProto.toObject(r.opsetImport[y],u)}if(r.metadataProps&&r.metadataProps.length){l.metadataProps=[];for(var y=0;y<r.metadataProps.length;++y)l.metadataProps[y]=a.onnx.StringStringEntryProto.toObject(r.metadataProps[y],u)}if(r.trainingInfo&&r.trainingInfo.length){l.trainingInfo=[];for(var y=0;y<r.trainingInfo.length;++y)l.trainingInfo[y]=a.onnx.TrainingInfoProto.toObject(r.trainingInfo[y],u)}if(r.functions&&r.functions.length){l.functions=[];for(var y=0;y<r.functions.length;++y)l.functions[y]=a.onnx.FunctionProto.toObject(r.functions[y],u)}return l},p.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.ModelProto"},p}(),f.StringStringEntryProto=function(){function p(r){if(r)for(var u=Object.keys(r),l=0;l<u.length;++l)r[u[l]]!=null&&(this[u[l]]=r[u[l]])}return p.prototype.key="",p.prototype.value="",p.create=function(r){return new p(r)},p.encode=function(r,u){return u||(u=c.create()),r.key!=null&&Object.hasOwnProperty.call(r,"key")&&u.uint32(10).string(r.key),r.value!=null&&Object.hasOwnProperty.call(r,"value")&&u.uint32(18).string(r.value),u},p.encodeDelimited=function(r,u){return this.encode(r,u).ldelim()},p.decode=function(r,u){r instanceof o||(r=o.create(r));for(var l=u===void 0?r.len:r.pos+u,h=new a.onnx.StringStringEntryProto;r.pos<l;){var y=r.uint32();switch(y>>>3){case 1:{h.key=r.string();break}case 2:{h.value=r.string();break}default:r.skipType(y&7);break}}return h},p.decodeDelimited=function(r){return r instanceof o||(r=new o(r)),this.decode(r,r.uint32())},p.verify=function(r){return typeof r!="object"||r===null?"object expected":r.key!=null&&r.hasOwnProperty("key")&&!n.isString(r.key)?"key: string expected":r.value!=null&&r.hasOwnProperty("value")&&!n.isString(r.value)?"value: string expected":null},p.fromObject=function(r){if(r instanceof a.onnx.StringStringEntryProto)return r;var u=new a.onnx.StringStringEntryProto;return r.key!=null&&(u.key=String(r.key)),r.value!=null&&(u.value=String(r.value)),u},p.toObject=function(r,u){u||(u={});var l={};return u.defaults&&(l.key="",l.value=""),r.key!=null&&r.hasOwnProperty("key")&&(l.key=r.key),r.value!=null&&r.hasOwnProperty("value")&&(l.value=r.value),l},p.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.StringStringEntryProto"},p}(),f.TensorAnnotation=function(){function p(r){if(this.quantParameterTensorNames=[],r)for(var u=Object.keys(r),l=0;l<u.length;++l)r[u[l]]!=null&&(this[u[l]]=r[u[l]])}return p.prototype.tensorName="",p.prototype.quantParameterTensorNames=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,u){if(u||(u=c.create()),r.tensorName!=null&&Object.hasOwnProperty.call(r,"tensorName")&&u.uint32(10).string(r.tensorName),r.quantParameterTensorNames!=null&&r.quantParameterTensorNames.length)for(var l=0;l<r.quantParameterTensorNames.length;++l)a.onnx.StringStringEntryProto.encode(r.quantParameterTensorNames[l],u.uint32(18).fork()).ldelim();return u},p.encodeDelimited=function(r,u){return this.encode(r,u).ldelim()},p.decode=function(r,u){r instanceof o||(r=o.create(r));for(var l=u===void 0?r.len:r.pos+u,h=new a.onnx.TensorAnnotation;r.pos<l;){var y=r.uint32();switch(y>>>3){case 1:{h.tensorName=r.string();break}case 2:{h.quantParameterTensorNames&&h.quantParameterTensorNames.length||(h.quantParameterTensorNames=[]),h.quantParameterTensorNames.push(a.onnx.StringStringEntryProto.decode(r,r.uint32()));break}default:r.skipType(y&7);break}}return h},p.decodeDelimited=function(r){return r instanceof o||(r=new o(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.tensorName!=null&&r.hasOwnProperty("tensorName")&&!n.isString(r.tensorName))return"tensorName: string expected";if(r.quantParameterTensorNames!=null&&r.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(r.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var u=0;u<r.quantParameterTensorNames.length;++u){var l=a.onnx.StringStringEntryProto.verify(r.quantParameterTensorNames[u]);if(l)return"quantParameterTensorNames."+l}}return null},p.fromObject=function(r){if(r instanceof a.onnx.TensorAnnotation)return r;var u=new a.onnx.TensorAnnotation;if(r.tensorName!=null&&(u.tensorName=String(r.tensorName)),r.quantParameterTensorNames){if(!Array.isArray(r.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");u.quantParameterTensorNames=[];for(var l=0;l<r.quantParameterTensorNames.length;++l){if(typeof r.quantParameterTensorNames[l]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");u.quantParameterTensorNames[l]=a.onnx.StringStringEntryProto.fromObject(r.quantParameterTensorNames[l])}}return u},p.toObject=function(r,u){u||(u={});var l={};if((u.arrays||u.defaults)&&(l.quantParameterTensorNames=[]),u.defaults&&(l.tensorName=""),r.tensorName!=null&&r.hasOwnProperty("tensorName")&&(l.tensorName=r.tensorName),r.quantParameterTensorNames&&r.quantParameterTensorNames.length){l.quantParameterTensorNames=[];for(var h=0;h<r.quantParameterTensorNames.length;++h)l.quantParameterTensorNames[h]=a.onnx.StringStringEntryProto.toObject(r.quantParameterTensorNames[h],u)}return l},p.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TensorAnnotation"},p}(),f.GraphProto=function(){function p(r){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],r)for(var u=Object.keys(r),l=0;l<u.length;++l)r[u[l]]!=null&&(this[u[l]]=r[u[l]])}return p.prototype.node=n.emptyArray,p.prototype.name="",p.prototype.initializer=n.emptyArray,p.prototype.sparseInitializer=n.emptyArray,p.prototype.docString="",p.prototype.input=n.emptyArray,p.prototype.output=n.emptyArray,p.prototype.valueInfo=n.emptyArray,p.prototype.quantizationAnnotation=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,u){if(u||(u=c.create()),r.node!=null&&r.node.length)for(var l=0;l<r.node.length;++l)a.onnx.NodeProto.encode(r.node[l],u.uint32(10).fork()).ldelim();if(r.name!=null&&Object.hasOwnProperty.call(r,"name")&&u.uint32(18).string(r.name),r.initializer!=null&&r.initializer.length)for(var l=0;l<r.initializer.length;++l)a.onnx.TensorProto.encode(r.initializer[l],u.uint32(42).fork()).ldelim();if(r.docString!=null&&Object.hasOwnProperty.call(r,"docString")&&u.uint32(82).string(r.docString),r.input!=null&&r.input.length)for(var l=0;l<r.input.length;++l)a.onnx.ValueInfoProto.encode(r.input[l],u.uint32(90).fork()).ldelim();if(r.output!=null&&r.output.length)for(var l=0;l<r.output.length;++l)a.onnx.ValueInfoProto.encode(r.output[l],u.uint32(98).fork()).ldelim();if(r.valueInfo!=null&&r.valueInfo.length)for(var l=0;l<r.valueInfo.length;++l)a.onnx.ValueInfoProto.encode(r.valueInfo[l],u.uint32(106).fork()).ldelim();if(r.quantizationAnnotation!=null&&r.quantizationAnnotation.length)for(var l=0;l<r.quantizationAnnotation.length;++l)a.onnx.TensorAnnotation.encode(r.quantizationAnnotation[l],u.uint32(114).fork()).ldelim();if(r.sparseInitializer!=null&&r.sparseInitializer.length)for(var l=0;l<r.sparseInitializer.length;++l)a.onnx.SparseTensorProto.encode(r.sparseInitializer[l],u.uint32(122).fork()).ldelim();return u},p.encodeDelimited=function(r,u){return this.encode(r,u).ldelim()},p.decode=function(r,u){r instanceof o||(r=o.create(r));for(var l=u===void 0?r.len:r.pos+u,h=new a.onnx.GraphProto;r.pos<l;){var y=r.uint32();switch(y>>>3){case 1:{h.node&&h.node.length||(h.node=[]),h.node.push(a.onnx.NodeProto.decode(r,r.uint32()));break}case 2:{h.name=r.string();break}case 5:{h.initializer&&h.initializer.length||(h.initializer=[]),h.initializer.push(a.onnx.TensorProto.decode(r,r.uint32()));break}case 15:{h.sparseInitializer&&h.sparseInitializer.length||(h.sparseInitializer=[]),h.sparseInitializer.push(a.onnx.SparseTensorProto.decode(r,r.uint32()));break}case 10:{h.docString=r.string();break}case 11:{h.input&&h.input.length||(h.input=[]),h.input.push(a.onnx.ValueInfoProto.decode(r,r.uint32()));break}case 12:{h.output&&h.output.length||(h.output=[]),h.output.push(a.onnx.ValueInfoProto.decode(r,r.uint32()));break}case 13:{h.valueInfo&&h.valueInfo.length||(h.valueInfo=[]),h.valueInfo.push(a.onnx.ValueInfoProto.decode(r,r.uint32()));break}case 14:{h.quantizationAnnotation&&h.quantizationAnnotation.length||(h.quantizationAnnotation=[]),h.quantizationAnnotation.push(a.onnx.TensorAnnotation.decode(r,r.uint32()));break}default:r.skipType(y&7);break}}return h},p.decodeDelimited=function(r){return r instanceof o||(r=new o(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.node!=null&&r.hasOwnProperty("node")){if(!Array.isArray(r.node))return"node: array expected";for(var u=0;u<r.node.length;++u){var l=a.onnx.NodeProto.verify(r.node[u]);if(l)return"node."+l}}if(r.name!=null&&r.hasOwnProperty("name")&&!n.isString(r.name))return"name: string expected";if(r.initializer!=null&&r.hasOwnProperty("initializer")){if(!Array.isArray(r.initializer))return"initializer: array expected";for(var u=0;u<r.initializer.length;++u){var l=a.onnx.TensorProto.verify(r.initializer[u]);if(l)return"initializer."+l}}if(r.sparseInitializer!=null&&r.hasOwnProperty("sparseInitializer")){if(!Array.isArray(r.sparseInitializer))return"sparseInitializer: array expected";for(var u=0;u<r.sparseInitializer.length;++u){var l=a.onnx.SparseTensorProto.verify(r.sparseInitializer[u]);if(l)return"sparseInitializer."+l}}if(r.docString!=null&&r.hasOwnProperty("docString")&&!n.isString(r.docString))return"docString: string expected";if(r.input!=null&&r.hasOwnProperty("input")){if(!Array.isArray(r.input))return"input: array expected";for(var u=0;u<r.input.length;++u){var l=a.onnx.ValueInfoProto.verify(r.input[u]);if(l)return"input."+l}}if(r.output!=null&&r.hasOwnProperty("output")){if(!Array.isArray(r.output))return"output: array expected";for(var u=0;u<r.output.length;++u){var l=a.onnx.ValueInfoProto.verify(r.output[u]);if(l)return"output."+l}}if(r.valueInfo!=null&&r.hasOwnProperty("valueInfo")){if(!Array.isArray(r.valueInfo))return"valueInfo: array expected";for(var u=0;u<r.valueInfo.length;++u){var l=a.onnx.ValueInfoProto.verify(r.valueInfo[u]);if(l)return"valueInfo."+l}}if(r.quantizationAnnotation!=null&&r.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(r.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var u=0;u<r.quantizationAnnotation.length;++u){var l=a.onnx.TensorAnnotation.verify(r.quantizationAnnotation[u]);if(l)return"quantizationAnnotation."+l}}return null},p.fromObject=function(r){if(r instanceof a.onnx.GraphProto)return r;var u=new a.onnx.GraphProto;if(r.node){if(!Array.isArray(r.node))throw TypeError(".onnx.GraphProto.node: array expected");u.node=[];for(var l=0;l<r.node.length;++l){if(typeof r.node[l]!="object")throw TypeError(".onnx.GraphProto.node: object expected");u.node[l]=a.onnx.NodeProto.fromObject(r.node[l])}}if(r.name!=null&&(u.name=String(r.name)),r.initializer){if(!Array.isArray(r.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");u.initializer=[];for(var l=0;l<r.initializer.length;++l){if(typeof r.initializer[l]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");u.initializer[l]=a.onnx.TensorProto.fromObject(r.initializer[l])}}if(r.sparseInitializer){if(!Array.isArray(r.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");u.sparseInitializer=[];for(var l=0;l<r.sparseInitializer.length;++l){if(typeof r.sparseInitializer[l]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");u.sparseInitializer[l]=a.onnx.SparseTensorProto.fromObject(r.sparseInitializer[l])}}if(r.docString!=null&&(u.docString=String(r.docString)),r.input){if(!Array.isArray(r.input))throw TypeError(".onnx.GraphProto.input: array expected");u.input=[];for(var l=0;l<r.input.length;++l){if(typeof r.input[l]!="object")throw TypeError(".onnx.GraphProto.input: object expected");u.input[l]=a.onnx.ValueInfoProto.fromObject(r.input[l])}}if(r.output){if(!Array.isArray(r.output))throw TypeError(".onnx.GraphProto.output: array expected");u.output=[];for(var l=0;l<r.output.length;++l){if(typeof r.output[l]!="object")throw TypeError(".onnx.GraphProto.output: object expected");u.output[l]=a.onnx.ValueInfoProto.fromObject(r.output[l])}}if(r.valueInfo){if(!Array.isArray(r.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");u.valueInfo=[];for(var l=0;l<r.valueInfo.length;++l){if(typeof r.valueInfo[l]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");u.valueInfo[l]=a.onnx.ValueInfoProto.fromObject(r.valueInfo[l])}}if(r.quantizationAnnotation){if(!Array.isArray(r.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");u.quantizationAnnotation=[];for(var l=0;l<r.quantizationAnnotation.length;++l){if(typeof r.quantizationAnnotation[l]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");u.quantizationAnnotation[l]=a.onnx.TensorAnnotation.fromObject(r.quantizationAnnotation[l])}}return u},p.toObject=function(r,u){u||(u={});var l={};if((u.arrays||u.defaults)&&(l.node=[],l.initializer=[],l.input=[],l.output=[],l.valueInfo=[],l.quantizationAnnotation=[],l.sparseInitializer=[]),u.defaults&&(l.name="",l.docString=""),r.node&&r.node.length){l.node=[];for(var h=0;h<r.node.length;++h)l.node[h]=a.onnx.NodeProto.toObject(r.node[h],u)}if(r.name!=null&&r.hasOwnProperty("name")&&(l.name=r.name),r.initializer&&r.initializer.length){l.initializer=[];for(var h=0;h<r.initializer.length;++h)l.initializer[h]=a.onnx.TensorProto.toObject(r.initializer[h],u)}if(r.docString!=null&&r.hasOwnProperty("docString")&&(l.docString=r.docString),r.input&&r.input.length){l.input=[];for(var h=0;h<r.input.length;++h)l.input[h]=a.onnx.ValueInfoProto.toObject(r.input[h],u)}if(r.output&&r.output.length){l.output=[];for(var h=0;h<r.output.length;++h)l.output[h]=a.onnx.ValueInfoProto.toObject(r.output[h],u)}if(r.valueInfo&&r.valueInfo.length){l.valueInfo=[];for(var h=0;h<r.valueInfo.length;++h)l.valueInfo[h]=a.onnx.ValueInfoProto.toObject(r.valueInfo[h],u)}if(r.quantizationAnnotation&&r.quantizationAnnotation.length){l.quantizationAnnotation=[];for(var h=0;h<r.quantizationAnnotation.length;++h)l.quantizationAnnotation[h]=a.onnx.TensorAnnotation.toObject(r.quantizationAnnotation[h],u)}if(r.sparseInitializer&&r.sparseInitializer.length){l.sparseInitializer=[];for(var h=0;h<r.sparseInitializer.length;++h)l.sparseInitializer[h]=a.onnx.SparseTensorProto.toObject(r.sparseInitializer[h],u)}return l},p.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.GraphProto"},p}(),f.TensorProto=function(){function p(r){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],r)for(var u=Object.keys(r),l=0;l<u.length;++l)r[u[l]]!=null&&(this[u[l]]=r[u[l]])}return p.prototype.dims=n.emptyArray,p.prototype.dataType=0,p.prototype.segment=null,p.prototype.floatData=n.emptyArray,p.prototype.int32Data=n.emptyArray,p.prototype.stringData=n.emptyArray,p.prototype.int64Data=n.emptyArray,p.prototype.name="",p.prototype.docString="",p.prototype.rawData=n.newBuffer([]),p.prototype.externalData=n.emptyArray,p.prototype.dataLocation=0,p.prototype.doubleData=n.emptyArray,p.prototype.uint64Data=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,u){if(u||(u=c.create()),r.dims!=null&&r.dims.length){u.uint32(10).fork();for(var l=0;l<r.dims.length;++l)u.int64(r.dims[l]);u.ldelim()}if(r.dataType!=null&&Object.hasOwnProperty.call(r,"dataType")&&u.uint32(16).int32(r.dataType),r.segment!=null&&Object.hasOwnProperty.call(r,"segment")&&a.onnx.TensorProto.Segment.encode(r.segment,u.uint32(26).fork()).ldelim(),r.floatData!=null&&r.floatData.length){u.uint32(34).fork();for(var l=0;l<r.floatData.length;++l)u.float(r.floatData[l]);u.ldelim()}if(r.int32Data!=null&&r.int32Data.length){u.uint32(42).fork();for(var l=0;l<r.int32Data.length;++l)u.int32(r.int32Data[l]);u.ldelim()}if(r.stringData!=null&&r.stringData.length)for(var l=0;l<r.stringData.length;++l)u.uint32(50).bytes(r.stringData[l]);if(r.int64Data!=null&&r.int64Data.length){u.uint32(58).fork();for(var l=0;l<r.int64Data.length;++l)u.int64(r.int64Data[l]);u.ldelim()}if(r.name!=null&&Object.hasOwnProperty.call(r,"name")&&u.uint32(66).string(r.name),r.rawData!=null&&Object.hasOwnProperty.call(r,"rawData")&&u.uint32(74).bytes(r.rawData),r.doubleData!=null&&r.doubleData.length){u.uint32(82).fork();for(var l=0;l<r.doubleData.length;++l)u.double(r.doubleData[l]);u.ldelim()}if(r.uint64Data!=null&&r.uint64Data.length){u.uint32(90).fork();for(var l=0;l<r.uint64Data.length;++l)u.uint64(r.uint64Data[l]);u.ldelim()}if(r.docString!=null&&Object.hasOwnProperty.call(r,"docString")&&u.uint32(98).string(r.docString),r.externalData!=null&&r.externalData.length)for(var l=0;l<r.externalData.length;++l)a.onnx.StringStringEntryProto.encode(r.externalData[l],u.uint32(106).fork()).ldelim();return r.dataLocation!=null&&Object.hasOwnProperty.call(r,"dataLocation")&&u.uint32(112).int32(r.dataLocation),u},p.encodeDelimited=function(r,u){return this.encode(r,u).ldelim()},p.decode=function(r,u){r instanceof o||(r=o.create(r));for(var l=u===void 0?r.len:r.pos+u,h=new a.onnx.TensorProto;r.pos<l;){var y=r.uint32();switch(y>>>3){case 1:{if(h.dims&&h.dims.length||(h.dims=[]),(y&7)===2)for(var I=r.uint32()+r.pos;r.pos<I;)h.dims.push(r.int64());else h.dims.push(r.int64());break}case 2:{h.dataType=r.int32();break}case 3:{h.segment=a.onnx.TensorProto.Segment.decode(r,r.uint32());break}case 4:{if(h.floatData&&h.floatData.length||(h.floatData=[]),(y&7)===2)for(var I=r.uint32()+r.pos;r.pos<I;)h.floatData.push(r.float());else h.floatData.push(r.float());break}case 5:{if(h.int32Data&&h.int32Data.length||(h.int32Data=[]),(y&7)===2)for(var I=r.uint32()+r.pos;r.pos<I;)h.int32Data.push(r.int32());else h.int32Data.push(r.int32());break}case 6:{h.stringData&&h.stringData.length||(h.stringData=[]),h.stringData.push(r.bytes());break}case 7:{if(h.int64Data&&h.int64Data.length||(h.int64Data=[]),(y&7)===2)for(var I=r.uint32()+r.pos;r.pos<I;)h.int64Data.push(r.int64());else h.int64Data.push(r.int64());break}case 8:{h.name=r.string();break}case 12:{h.docString=r.string();break}case 9:{h.rawData=r.bytes();break}case 13:{h.externalData&&h.externalData.length||(h.externalData=[]),h.externalData.push(a.onnx.StringStringEntryProto.decode(r,r.uint32()));break}case 14:{h.dataLocation=r.int32();break}case 10:{if(h.doubleData&&h.doubleData.length||(h.doubleData=[]),(y&7)===2)for(var I=r.uint32()+r.pos;r.pos<I;)h.doubleData.push(r.double());else h.doubleData.push(r.double());break}case 11:{if(h.uint64Data&&h.uint64Data.length||(h.uint64Data=[]),(y&7)===2)for(var I=r.uint32()+r.pos;r.pos<I;)h.uint64Data.push(r.uint64());else h.uint64Data.push(r.uint64());break}default:r.skipType(y&7);break}}return h},p.decodeDelimited=function(r){return r instanceof o||(r=new o(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.dims!=null&&r.hasOwnProperty("dims")){if(!Array.isArray(r.dims))return"dims: array expected";for(var u=0;u<r.dims.length;++u)if(!n.isInteger(r.dims[u])&&!(r.dims[u]&&n.isInteger(r.dims[u].low)&&n.isInteger(r.dims[u].high)))return"dims: integer|Long[] expected"}if(r.dataType!=null&&r.hasOwnProperty("dataType")&&!n.isInteger(r.dataType))return"dataType: integer expected";if(r.segment!=null&&r.hasOwnProperty("segment")){var l=a.onnx.TensorProto.Segment.verify(r.segment);if(l)return"segment."+l}if(r.floatData!=null&&r.hasOwnProperty("floatData")){if(!Array.isArray(r.floatData))return"floatData: array expected";for(var u=0;u<r.floatData.length;++u)if(typeof r.floatData[u]!="number")return"floatData: number[] expected"}if(r.int32Data!=null&&r.hasOwnProperty("int32Data")){if(!Array.isArray(r.int32Data))return"int32Data: array expected";for(var u=0;u<r.int32Data.length;++u)if(!n.isInteger(r.int32Data[u]))return"int32Data: integer[] expected"}if(r.stringData!=null&&r.hasOwnProperty("stringData")){if(!Array.isArray(r.stringData))return"stringData: array expected";for(var u=0;u<r.stringData.length;++u)if(!(r.stringData[u]&&typeof r.stringData[u].length=="number"||n.isString(r.stringData[u])))return"stringData: buffer[] expected"}if(r.int64Data!=null&&r.hasOwnProperty("int64Data")){if(!Array.isArray(r.int64Data))return"int64Data: array expected";for(var u=0;u<r.int64Data.length;++u)if(!n.isInteger(r.int64Data[u])&&!(r.int64Data[u]&&n.isInteger(r.int64Data[u].low)&&n.isInteger(r.int64Data[u].high)))return"int64Data: integer|Long[] expected"}if(r.name!=null&&r.hasOwnProperty("name")&&!n.isString(r.name))return"name: string expected";if(r.docString!=null&&r.hasOwnProperty("docString")&&!n.isString(r.docString))return"docString: string expected";if(r.rawData!=null&&r.hasOwnProperty("rawData")&&!(r.rawData&&typeof r.rawData.length=="number"||n.isString(r.rawData)))return"rawData: buffer expected";if(r.externalData!=null&&r.hasOwnProperty("externalData")){if(!Array.isArray(r.externalData))return"externalData: array expected";for(var u=0;u<r.externalData.length;++u){var l=a.onnx.StringStringEntryProto.verify(r.externalData[u]);if(l)return"externalData."+l}}if(r.dataLocation!=null&&r.hasOwnProperty("dataLocation"))switch(r.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(r.doubleData!=null&&r.hasOwnProperty("doubleData")){if(!Array.isArray(r.doubleData))return"doubleData: array expected";for(var u=0;u<r.doubleData.length;++u)if(typeof r.doubleData[u]!="number")return"doubleData: number[] expected"}if(r.uint64Data!=null&&r.hasOwnProperty("uint64Data")){if(!Array.isArray(r.uint64Data))return"uint64Data: array expected";for(var u=0;u<r.uint64Data.length;++u)if(!n.isInteger(r.uint64Data[u])&&!(r.uint64Data[u]&&n.isInteger(r.uint64Data[u].low)&&n.isInteger(r.uint64Data[u].high)))return"uint64Data: integer|Long[] expected"}return null},p.fromObject=function(r){if(r instanceof a.onnx.TensorProto)return r;var u=new a.onnx.TensorProto;if(r.dims){if(!Array.isArray(r.dims))throw TypeError(".onnx.TensorProto.dims: array expected");u.dims=[];for(var l=0;l<r.dims.length;++l)n.Long?(u.dims[l]=n.Long.fromValue(r.dims[l])).unsigned=!1:typeof r.dims[l]=="string"?u.dims[l]=parseInt(r.dims[l],10):typeof r.dims[l]=="number"?u.dims[l]=r.dims[l]:typeof r.dims[l]=="object"&&(u.dims[l]=new n.LongBits(r.dims[l].low>>>0,r.dims[l].high>>>0).toNumber())}if(r.dataType!=null&&(u.dataType=r.dataType|0),r.segment!=null){if(typeof r.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");u.segment=a.onnx.TensorProto.Segment.fromObject(r.segment)}if(r.floatData){if(!Array.isArray(r.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");u.floatData=[];for(var l=0;l<r.floatData.length;++l)u.floatData[l]=Number(r.floatData[l])}if(r.int32Data){if(!Array.isArray(r.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");u.int32Data=[];for(var l=0;l<r.int32Data.length;++l)u.int32Data[l]=r.int32Data[l]|0}if(r.stringData){if(!Array.isArray(r.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");u.stringData=[];for(var l=0;l<r.stringData.length;++l)typeof r.stringData[l]=="string"?n.base64.decode(r.stringData[l],u.stringData[l]=n.newBuffer(n.base64.length(r.stringData[l])),0):r.stringData[l].length>=0&&(u.stringData[l]=r.stringData[l])}if(r.int64Data){if(!Array.isArray(r.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");u.int64Data=[];for(var l=0;l<r.int64Data.length;++l)n.Long?(u.int64Data[l]=n.Long.fromValue(r.int64Data[l])).unsigned=!1:typeof r.int64Data[l]=="string"?u.int64Data[l]=parseInt(r.int64Data[l],10):typeof r.int64Data[l]=="number"?u.int64Data[l]=r.int64Data[l]:typeof r.int64Data[l]=="object"&&(u.int64Data[l]=new n.LongBits(r.int64Data[l].low>>>0,r.int64Data[l].high>>>0).toNumber())}if(r.name!=null&&(u.name=String(r.name)),r.docString!=null&&(u.docString=String(r.docString)),r.rawData!=null&&(typeof r.rawData=="string"?n.base64.decode(r.rawData,u.rawData=n.newBuffer(n.base64.length(r.rawData)),0):r.rawData.length>=0&&(u.rawData=r.rawData)),r.externalData){if(!Array.isArray(r.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");u.externalData=[];for(var l=0;l<r.externalData.length;++l){if(typeof r.externalData[l]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");u.externalData[l]=a.onnx.StringStringEntryProto.fromObject(r.externalData[l])}}switch(r.dataLocation){default:if(typeof r.dataLocation=="number"){u.dataLocation=r.dataLocation;break}break;case"DEFAULT":case 0:u.dataLocation=0;break;case"EXTERNAL":case 1:u.dataLocation=1;break}if(r.doubleData){if(!Array.isArray(r.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");u.doubleData=[];for(var l=0;l<r.doubleData.length;++l)u.doubleData[l]=Number(r.doubleData[l])}if(r.uint64Data){if(!Array.isArray(r.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");u.uint64Data=[];for(var l=0;l<r.uint64Data.length;++l)n.Long?(u.uint64Data[l]=n.Long.fromValue(r.uint64Data[l])).unsigned=!0:typeof r.uint64Data[l]=="string"?u.uint64Data[l]=parseInt(r.uint64Data[l],10):typeof r.uint64Data[l]=="number"?u.uint64Data[l]=r.uint64Data[l]:typeof r.uint64Data[l]=="object"&&(u.uint64Data[l]=new n.LongBits(r.uint64Data[l].low>>>0,r.uint64Data[l].high>>>0).toNumber(!0))}return u},p.toObject=function(r,u){u||(u={});var l={};if((u.arrays||u.defaults)&&(l.dims=[],l.floatData=[],l.int32Data=[],l.stringData=[],l.int64Data=[],l.doubleData=[],l.uint64Data=[],l.externalData=[]),u.defaults&&(l.dataType=0,l.segment=null,l.name="",u.bytes===String?l.rawData="":(l.rawData=[],u.bytes!==Array&&(l.rawData=n.newBuffer(l.rawData))),l.docString="",l.dataLocation=u.enums===String?"DEFAULT":0),r.dims&&r.dims.length){l.dims=[];for(var h=0;h<r.dims.length;++h)typeof r.dims[h]=="number"?l.dims[h]=u.longs===String?String(r.dims[h]):r.dims[h]:l.dims[h]=u.longs===String?n.Long.prototype.toString.call(r.dims[h]):u.longs===Number?new n.LongBits(r.dims[h].low>>>0,r.dims[h].high>>>0).toNumber():r.dims[h]}if(r.dataType!=null&&r.hasOwnProperty("dataType")&&(l.dataType=r.dataType),r.segment!=null&&r.hasOwnProperty("segment")&&(l.segment=a.onnx.TensorProto.Segment.toObject(r.segment,u)),r.floatData&&r.floatData.length){l.floatData=[];for(var h=0;h<r.floatData.length;++h)l.floatData[h]=u.json&&!isFinite(r.floatData[h])?String(r.floatData[h]):r.floatData[h]}if(r.int32Data&&r.int32Data.length){l.int32Data=[];for(var h=0;h<r.int32Data.length;++h)l.int32Data[h]=r.int32Data[h]}if(r.stringData&&r.stringData.length){l.stringData=[];for(var h=0;h<r.stringData.length;++h)l.stringData[h]=u.bytes===String?n.base64.encode(r.stringData[h],0,r.stringData[h].length):u.bytes===Array?Array.prototype.slice.call(r.stringData[h]):r.stringData[h]}if(r.int64Data&&r.int64Data.length){l.int64Data=[];for(var h=0;h<r.int64Data.length;++h)typeof r.int64Data[h]=="number"?l.int64Data[h]=u.longs===String?String(r.int64Data[h]):r.int64Data[h]:l.int64Data[h]=u.longs===String?n.Long.prototype.toString.call(r.int64Data[h]):u.longs===Number?new n.LongBits(r.int64Data[h].low>>>0,r.int64Data[h].high>>>0).toNumber():r.int64Data[h]}if(r.name!=null&&r.hasOwnProperty("name")&&(l.name=r.name),r.rawData!=null&&r.hasOwnProperty("rawData")&&(l.rawData=u.bytes===String?n.base64.encode(r.rawData,0,r.rawData.length):u.bytes===Array?Array.prototype.slice.call(r.rawData):r.rawData),r.doubleData&&r.doubleData.length){l.doubleData=[];for(var h=0;h<r.doubleData.length;++h)l.doubleData[h]=u.json&&!isFinite(r.doubleData[h])?String(r.doubleData[h]):r.doubleData[h]}if(r.uint64Data&&r.uint64Data.length){l.uint64Data=[];for(var h=0;h<r.uint64Data.length;++h)typeof r.uint64Data[h]=="number"?l.uint64Data[h]=u.longs===String?String(r.uint64Data[h]):r.uint64Data[h]:l.uint64Data[h]=u.longs===String?n.Long.prototype.toString.call(r.uint64Data[h]):u.longs===Number?new n.LongBits(r.uint64Data[h].low>>>0,r.uint64Data[h].high>>>0).toNumber(!0):r.uint64Data[h]}if(r.docString!=null&&r.hasOwnProperty("docString")&&(l.docString=r.docString),r.externalData&&r.externalData.length){l.externalData=[];for(var h=0;h<r.externalData.length;++h)l.externalData[h]=a.onnx.StringStringEntryProto.toObject(r.externalData[h],u)}return r.dataLocation!=null&&r.hasOwnProperty("dataLocation")&&(l.dataLocation=u.enums===String?a.onnx.TensorProto.DataLocation[r.dataLocation]===void 0?r.dataLocation:a.onnx.TensorProto.DataLocation[r.dataLocation]:r.dataLocation),l},p.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TensorProto"},p.DataType=function(){var r={},u=Object.create(r);return u[r[0]="UNDEFINED"]=0,u[r[1]="FLOAT"]=1,u[r[2]="UINT8"]=2,u[r[3]="INT8"]=3,u[r[4]="UINT16"]=4,u[r[5]="INT16"]=5,u[r[6]="INT32"]=6,u[r[7]="INT64"]=7,u[r[8]="STRING"]=8,u[r[9]="BOOL"]=9,u[r[10]="FLOAT16"]=10,u[r[11]="DOUBLE"]=11,u[r[12]="UINT32"]=12,u[r[13]="UINT64"]=13,u[r[14]="COMPLEX64"]=14,u[r[15]="COMPLEX128"]=15,u[r[16]="BFLOAT16"]=16,u[r[17]="FLOAT8E4M3FN"]=17,u[r[18]="FLOAT8E4M3FNUZ"]=18,u[r[19]="FLOAT8E5M2"]=19,u[r[20]="FLOAT8E5M2FNUZ"]=20,u}(),p.Segment=function(){function r(u){if(u)for(var l=Object.keys(u),h=0;h<l.length;++h)u[l[h]]!=null&&(this[l[h]]=u[l[h]])}return r.prototype.begin=n.Long?n.Long.fromBits(0,0,!1):0,r.prototype.end=n.Long?n.Long.fromBits(0,0,!1):0,r.create=function(u){return new r(u)},r.encode=function(u,l){return l||(l=c.create()),u.begin!=null&&Object.hasOwnProperty.call(u,"begin")&&l.uint32(8).int64(u.begin),u.end!=null&&Object.hasOwnProperty.call(u,"end")&&l.uint32(16).int64(u.end),l},r.encodeDelimited=function(u,l){return this.encode(u,l).ldelim()},r.decode=function(u,l){u instanceof o||(u=o.create(u));for(var h=l===void 0?u.len:u.pos+l,y=new a.onnx.TensorProto.Segment;u.pos<h;){var I=u.uint32();switch(I>>>3){case 1:{y.begin=u.int64();break}case 2:{y.end=u.int64();break}default:u.skipType(I&7);break}}return y},r.decodeDelimited=function(u){return u instanceof o||(u=new o(u)),this.decode(u,u.uint32())},r.verify=function(u){return typeof u!="object"||u===null?"object expected":u.begin!=null&&u.hasOwnProperty("begin")&&!n.isInteger(u.begin)&&!(u.begin&&n.isInteger(u.begin.low)&&n.isInteger(u.begin.high))?"begin: integer|Long expected":u.end!=null&&u.hasOwnProperty("end")&&!n.isInteger(u.end)&&!(u.end&&n.isInteger(u.end.low)&&n.isInteger(u.end.high))?"end: integer|Long expected":null},r.fromObject=function(u){if(u instanceof a.onnx.TensorProto.Segment)return u;var l=new a.onnx.TensorProto.Segment;return u.begin!=null&&(n.Long?(l.begin=n.Long.fromValue(u.begin)).unsigned=!1:typeof u.begin=="string"?l.begin=parseInt(u.begin,10):typeof u.begin=="number"?l.begin=u.begin:typeof u.begin=="object"&&(l.begin=new n.LongBits(u.begin.low>>>0,u.begin.high>>>0).toNumber())),u.end!=null&&(n.Long?(l.end=n.Long.fromValue(u.end)).unsigned=!1:typeof u.end=="string"?l.end=parseInt(u.end,10):typeof u.end=="number"?l.end=u.end:typeof u.end=="object"&&(l.end=new n.LongBits(u.end.low>>>0,u.end.high>>>0).toNumber())),l},r.toObject=function(u,l){l||(l={});var h={};if(l.defaults){if(n.Long){var y=new n.Long(0,0,!1);h.begin=l.longs===String?y.toString():l.longs===Number?y.toNumber():y}else h.begin=l.longs===String?"0":0;if(n.Long){var y=new n.Long(0,0,!1);h.end=l.longs===String?y.toString():l.longs===Number?y.toNumber():y}else h.end=l.longs===String?"0":0}return u.begin!=null&&u.hasOwnProperty("begin")&&(typeof u.begin=="number"?h.begin=l.longs===String?String(u.begin):u.begin:h.begin=l.longs===String?n.Long.prototype.toString.call(u.begin):l.longs===Number?new n.LongBits(u.begin.low>>>0,u.begin.high>>>0).toNumber():u.begin),u.end!=null&&u.hasOwnProperty("end")&&(typeof u.end=="number"?h.end=l.longs===String?String(u.end):u.end:h.end=l.longs===String?n.Long.prototype.toString.call(u.end):l.longs===Number?new n.LongBits(u.end.low>>>0,u.end.high>>>0).toNumber():u.end),h},r.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},r.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/onnx.TensorProto.Segment"},r}(),p.DataLocation=function(){var r={},u=Object.create(r);return u[r[0]="DEFAULT"]=0,u[r[1]="EXTERNAL"]=1,u}(),p}(),f.SparseTensorProto=function(){function p(r){if(this.dims=[],r)for(var u=Object.keys(r),l=0;l<u.length;++l)r[u[l]]!=null&&(this[u[l]]=r[u[l]])}return p.prototype.values=null,p.prototype.indices=null,p.prototype.dims=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,u){if(u||(u=c.create()),r.values!=null&&Object.hasOwnProperty.call(r,"values")&&a.onnx.TensorProto.encode(r.values,u.uint32(10).fork()).ldelim(),r.indices!=null&&Object.hasOwnProperty.call(r,"indices")&&a.onnx.TensorProto.encode(r.indices,u.uint32(18).fork()).ldelim(),r.dims!=null&&r.dims.length){u.uint32(26).fork();for(var l=0;l<r.dims.length;++l)u.int64(r.dims[l]);u.ldelim()}return u},p.encodeDelimited=function(r,u){return this.encode(r,u).ldelim()},p.decode=function(r,u){r instanceof o||(r=o.create(r));for(var l=u===void 0?r.len:r.pos+u,h=new a.onnx.SparseTensorProto;r.pos<l;){var y=r.uint32();switch(y>>>3){case 1:{h.values=a.onnx.TensorProto.decode(r,r.uint32());break}case 2:{h.indices=a.onnx.TensorProto.decode(r,r.uint32());break}case 3:{if(h.dims&&h.dims.length||(h.dims=[]),(y&7)===2)for(var I=r.uint32()+r.pos;r.pos<I;)h.dims.push(r.int64());else h.dims.push(r.int64());break}default:r.skipType(y&7);break}}return h},p.decodeDelimited=function(r){return r instanceof o||(r=new o(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.values!=null&&r.hasOwnProperty("values")){var u=a.onnx.TensorProto.verify(r.values);if(u)return"values."+u}if(r.indices!=null&&r.hasOwnProperty("indices")){var u=a.onnx.TensorProto.verify(r.indices);if(u)return"indices."+u}if(r.dims!=null&&r.hasOwnProperty("dims")){if(!Array.isArray(r.dims))return"dims: array expected";for(var l=0;l<r.dims.length;++l)if(!n.isInteger(r.dims[l])&&!(r.dims[l]&&n.isInteger(r.dims[l].low)&&n.isInteger(r.dims[l].high)))return"dims: integer|Long[] expected"}return null},p.fromObject=function(r){if(r instanceof a.onnx.SparseTensorProto)return r;var u=new a.onnx.SparseTensorProto;if(r.values!=null){if(typeof r.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");u.values=a.onnx.TensorProto.fromObject(r.values)}if(r.indices!=null){if(typeof r.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");u.indices=a.onnx.TensorProto.fromObject(r.indices)}if(r.dims){if(!Array.isArray(r.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");u.dims=[];for(var l=0;l<r.dims.length;++l)n.Long?(u.dims[l]=n.Long.fromValue(r.dims[l])).unsigned=!1:typeof r.dims[l]=="string"?u.dims[l]=parseInt(r.dims[l],10):typeof r.dims[l]=="number"?u.dims[l]=r.dims[l]:typeof r.dims[l]=="object"&&(u.dims[l]=new n.LongBits(r.dims[l].low>>>0,r.dims[l].high>>>0).toNumber())}return u},p.toObject=function(r,u){u||(u={});var l={};if((u.arrays||u.defaults)&&(l.dims=[]),u.defaults&&(l.values=null,l.indices=null),r.values!=null&&r.hasOwnProperty("values")&&(l.values=a.onnx.TensorProto.toObject(r.values,u)),r.indices!=null&&r.hasOwnProperty("indices")&&(l.indices=a.onnx.TensorProto.toObject(r.indices,u)),r.dims&&r.dims.length){l.dims=[];for(var h=0;h<r.dims.length;++h)typeof r.dims[h]=="number"?l.dims[h]=u.longs===String?String(r.dims[h]):r.dims[h]:l.dims[h]=u.longs===String?n.Long.prototype.toString.call(r.dims[h]):u.longs===Number?new n.LongBits(r.dims[h].low>>>0,r.dims[h].high>>>0).toNumber():r.dims[h]}return l},p.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.SparseTensorProto"},p}(),f.TensorShapeProto=function(){function p(r){if(this.dim=[],r)for(var u=Object.keys(r),l=0;l<u.length;++l)r[u[l]]!=null&&(this[u[l]]=r[u[l]])}return p.prototype.dim=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,u){if(u||(u=c.create()),r.dim!=null&&r.dim.length)for(var l=0;l<r.dim.length;++l)a.onnx.TensorShapeProto.Dimension.encode(r.dim[l],u.uint32(10).fork()).ldelim();return u},p.encodeDelimited=function(r,u){return this.encode(r,u).ldelim()},p.decode=function(r,u){r instanceof o||(r=o.create(r));for(var l=u===void 0?r.len:r.pos+u,h=new a.onnx.TensorShapeProto;r.pos<l;){var y=r.uint32();switch(y>>>3){case 1:{h.dim&&h.dim.length||(h.dim=[]),h.dim.push(a.onnx.TensorShapeProto.Dimension.decode(r,r.uint32()));break}default:r.skipType(y&7);break}}return h},p.decodeDelimited=function(r){return r instanceof o||(r=new o(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.dim!=null&&r.hasOwnProperty("dim")){if(!Array.isArray(r.dim))return"dim: array expected";for(var u=0;u<r.dim.length;++u){var l=a.onnx.TensorShapeProto.Dimension.verify(r.dim[u]);if(l)return"dim."+l}}return null},p.fromObject=function(r){if(r instanceof a.onnx.TensorShapeProto)return r;var u=new a.onnx.TensorShapeProto;if(r.dim){if(!Array.isArray(r.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");u.dim=[];for(var l=0;l<r.dim.length;++l){if(typeof r.dim[l]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");u.dim[l]=a.onnx.TensorShapeProto.Dimension.fromObject(r.dim[l])}}return u},p.toObject=function(r,u){u||(u={});var l={};if((u.arrays||u.defaults)&&(l.dim=[]),r.dim&&r.dim.length){l.dim=[];for(var h=0;h<r.dim.length;++h)l.dim[h]=a.onnx.TensorShapeProto.Dimension.toObject(r.dim[h],u)}return l},p.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TensorShapeProto"},p.Dimension=function(){function r(l){if(l)for(var h=Object.keys(l),y=0;y<h.length;++y)l[h[y]]!=null&&(this[h[y]]=l[h[y]])}r.prototype.dimValue=null,r.prototype.dimParam=null,r.prototype.denotation="";var u;return Object.defineProperty(r.prototype,"value",{get:n.oneOfGetter(u=["dimValue","dimParam"]),set:n.oneOfSetter(u)}),r.create=function(l){return new r(l)},r.encode=function(l,h){return h||(h=c.create()),l.dimValue!=null&&Object.hasOwnProperty.call(l,"dimValue")&&h.uint32(8).int64(l.dimValue),l.dimParam!=null&&Object.hasOwnProperty.call(l,"dimParam")&&h.uint32(18).string(l.dimParam),l.denotation!=null&&Object.hasOwnProperty.call(l,"denotation")&&h.uint32(26).string(l.denotation),h},r.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},r.decode=function(l,h){l instanceof o||(l=o.create(l));for(var y=h===void 0?l.len:l.pos+h,I=new a.onnx.TensorShapeProto.Dimension;l.pos<y;){var S=l.uint32();switch(S>>>3){case 1:{I.dimValue=l.int64();break}case 2:{I.dimParam=l.string();break}case 3:{I.denotation=l.string();break}default:l.skipType(S&7);break}}return I},r.decodeDelimited=function(l){return l instanceof o||(l=new o(l)),this.decode(l,l.uint32())},r.verify=function(l){if(typeof l!="object"||l===null)return"object expected";var h={};if(l.dimValue!=null&&l.hasOwnProperty("dimValue")&&(h.value=1,!n.isInteger(l.dimValue)&&!(l.dimValue&&n.isInteger(l.dimValue.low)&&n.isInteger(l.dimValue.high))))return"dimValue: integer|Long expected";if(l.dimParam!=null&&l.hasOwnProperty("dimParam")){if(h.value===1)return"value: multiple values";if(h.value=1,!n.isString(l.dimParam))return"dimParam: string expected"}return l.denotation!=null&&l.hasOwnProperty("denotation")&&!n.isString(l.denotation)?"denotation: string expected":null},r.fromObject=function(l){if(l instanceof a.onnx.TensorShapeProto.Dimension)return l;var h=new a.onnx.TensorShapeProto.Dimension;return l.dimValue!=null&&(n.Long?(h.dimValue=n.Long.fromValue(l.dimValue)).unsigned=!1:typeof l.dimValue=="string"?h.dimValue=parseInt(l.dimValue,10):typeof l.dimValue=="number"?h.dimValue=l.dimValue:typeof l.dimValue=="object"&&(h.dimValue=new n.LongBits(l.dimValue.low>>>0,l.dimValue.high>>>0).toNumber())),l.dimParam!=null&&(h.dimParam=String(l.dimParam)),l.denotation!=null&&(h.denotation=String(l.denotation)),h},r.toObject=function(l,h){h||(h={});var y={};return h.defaults&&(y.denotation=""),l.dimValue!=null&&l.hasOwnProperty("dimValue")&&(typeof l.dimValue=="number"?y.dimValue=h.longs===String?String(l.dimValue):l.dimValue:y.dimValue=h.longs===String?n.Long.prototype.toString.call(l.dimValue):h.longs===Number?new n.LongBits(l.dimValue.low>>>0,l.dimValue.high>>>0).toNumber():l.dimValue,h.oneofs&&(y.value="dimValue")),l.dimParam!=null&&l.hasOwnProperty("dimParam")&&(y.dimParam=l.dimParam,h.oneofs&&(y.value="dimParam")),l.denotation!=null&&l.hasOwnProperty("denotation")&&(y.denotation=l.denotation),y},r.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},r.getTypeUrl=function(l){return l===void 0&&(l="type.googleapis.com"),l+"/onnx.TensorShapeProto.Dimension"},r}(),p}(),f.TypeProto=function(){function p(u){if(u)for(var l=Object.keys(u),h=0;h<l.length;++h)u[l[h]]!=null&&(this[l[h]]=u[l[h]])}p.prototype.tensorType=null,p.prototype.sequenceType=null,p.prototype.mapType=null,p.prototype.optionalType=null,p.prototype.sparseTensorType=null,p.prototype.denotation="";var r;return Object.defineProperty(p.prototype,"value",{get:n.oneOfGetter(r=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:n.oneOfSetter(r)}),p.create=function(u){return new p(u)},p.encode=function(u,l){return l||(l=c.create()),u.tensorType!=null&&Object.hasOwnProperty.call(u,"tensorType")&&a.onnx.TypeProto.Tensor.encode(u.tensorType,l.uint32(10).fork()).ldelim(),u.sequenceType!=null&&Object.hasOwnProperty.call(u,"sequenceType")&&a.onnx.TypeProto.Sequence.encode(u.sequenceType,l.uint32(34).fork()).ldelim(),u.mapType!=null&&Object.hasOwnProperty.call(u,"mapType")&&a.onnx.TypeProto.Map.encode(u.mapType,l.uint32(42).fork()).ldelim(),u.denotation!=null&&Object.hasOwnProperty.call(u,"denotation")&&l.uint32(50).string(u.denotation),u.sparseTensorType!=null&&Object.hasOwnProperty.call(u,"sparseTensorType")&&a.onnx.TypeProto.SparseTensor.encode(u.sparseTensorType,l.uint32(66).fork()).ldelim(),u.optionalType!=null&&Object.hasOwnProperty.call(u,"optionalType")&&a.onnx.TypeProto.Optional.encode(u.optionalType,l.uint32(74).fork()).ldelim(),l},p.encodeDelimited=function(u,l){return this.encode(u,l).ldelim()},p.decode=function(u,l){u instanceof o||(u=o.create(u));for(var h=l===void 0?u.len:u.pos+l,y=new a.onnx.TypeProto;u.pos<h;){var I=u.uint32();switch(I>>>3){case 1:{y.tensorType=a.onnx.TypeProto.Tensor.decode(u,u.uint32());break}case 4:{y.sequenceType=a.onnx.TypeProto.Sequence.decode(u,u.uint32());break}case 5:{y.mapType=a.onnx.TypeProto.Map.decode(u,u.uint32());break}case 9:{y.optionalType=a.onnx.TypeProto.Optional.decode(u,u.uint32());break}case 8:{y.sparseTensorType=a.onnx.TypeProto.SparseTensor.decode(u,u.uint32());break}case 6:{y.denotation=u.string();break}default:u.skipType(I&7);break}}return y},p.decodeDelimited=function(u){return u instanceof o||(u=new o(u)),this.decode(u,u.uint32())},p.verify=function(u){if(typeof u!="object"||u===null)return"object expected";var l={};if(u.tensorType!=null&&u.hasOwnProperty("tensorType")){l.value=1;{var h=a.onnx.TypeProto.Tensor.verify(u.tensorType);if(h)return"tensorType."+h}}if(u.sequenceType!=null&&u.hasOwnProperty("sequenceType")){if(l.value===1)return"value: multiple values";l.value=1;{var h=a.onnx.TypeProto.Sequence.verify(u.sequenceType);if(h)return"sequenceType."+h}}if(u.mapType!=null&&u.hasOwnProperty("mapType")){if(l.value===1)return"value: multiple values";l.value=1;{var h=a.onnx.TypeProto.Map.verify(u.mapType);if(h)return"mapType."+h}}if(u.optionalType!=null&&u.hasOwnProperty("optionalType")){if(l.value===1)return"value: multiple values";l.value=1;{var h=a.onnx.TypeProto.Optional.verify(u.optionalType);if(h)return"optionalType."+h}}if(u.sparseTensorType!=null&&u.hasOwnProperty("sparseTensorType")){if(l.value===1)return"value: multiple values";l.value=1;{var h=a.onnx.TypeProto.SparseTensor.verify(u.sparseTensorType);if(h)return"sparseTensorType."+h}}return u.denotation!=null&&u.hasOwnProperty("denotation")&&!n.isString(u.denotation)?"denotation: string expected":null},p.fromObject=function(u){if(u instanceof a.onnx.TypeProto)return u;var l=new a.onnx.TypeProto;if(u.tensorType!=null){if(typeof u.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");l.tensorType=a.onnx.TypeProto.Tensor.fromObject(u.tensorType)}if(u.sequenceType!=null){if(typeof u.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");l.sequenceType=a.onnx.TypeProto.Sequence.fromObject(u.sequenceType)}if(u.mapType!=null){if(typeof u.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");l.mapType=a.onnx.TypeProto.Map.fromObject(u.mapType)}if(u.optionalType!=null){if(typeof u.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");l.optionalType=a.onnx.TypeProto.Optional.fromObject(u.optionalType)}if(u.sparseTensorType!=null){if(typeof u.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");l.sparseTensorType=a.onnx.TypeProto.SparseTensor.fromObject(u.sparseTensorType)}return u.denotation!=null&&(l.denotation=String(u.denotation)),l},p.toObject=function(u,l){l||(l={});var h={};return l.defaults&&(h.denotation=""),u.tensorType!=null&&u.hasOwnProperty("tensorType")&&(h.tensorType=a.onnx.TypeProto.Tensor.toObject(u.tensorType,l),l.oneofs&&(h.value="tensorType")),u.sequenceType!=null&&u.hasOwnProperty("sequenceType")&&(h.sequenceType=a.onnx.TypeProto.Sequence.toObject(u.sequenceType,l),l.oneofs&&(h.value="sequenceType")),u.mapType!=null&&u.hasOwnProperty("mapType")&&(h.mapType=a.onnx.TypeProto.Map.toObject(u.mapType,l),l.oneofs&&(h.value="mapType")),u.denotation!=null&&u.hasOwnProperty("denotation")&&(h.denotation=u.denotation),u.sparseTensorType!=null&&u.hasOwnProperty("sparseTensorType")&&(h.sparseTensorType=a.onnx.TypeProto.SparseTensor.toObject(u.sparseTensorType,l),l.oneofs&&(h.value="sparseTensorType")),u.optionalType!=null&&u.hasOwnProperty("optionalType")&&(h.optionalType=a.onnx.TypeProto.Optional.toObject(u.optionalType,l),l.oneofs&&(h.value="optionalType")),h},p.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/onnx.TypeProto"},p.Tensor=function(){function u(l){if(l)for(var h=Object.keys(l),y=0;y<h.length;++y)l[h[y]]!=null&&(this[h[y]]=l[h[y]])}return u.prototype.elemType=0,u.prototype.shape=null,u.create=function(l){return new u(l)},u.encode=function(l,h){return h||(h=c.create()),l.elemType!=null&&Object.hasOwnProperty.call(l,"elemType")&&h.uint32(8).int32(l.elemType),l.shape!=null&&Object.hasOwnProperty.call(l,"shape")&&a.onnx.TensorShapeProto.encode(l.shape,h.uint32(18).fork()).ldelim(),h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof o||(l=o.create(l));for(var y=h===void 0?l.len:l.pos+h,I=new a.onnx.TypeProto.Tensor;l.pos<y;){var S=l.uint32();switch(S>>>3){case 1:{I.elemType=l.int32();break}case 2:{I.shape=a.onnx.TensorShapeProto.decode(l,l.uint32());break}default:l.skipType(S&7);break}}return I},u.decodeDelimited=function(l){return l instanceof o||(l=new o(l)),this.decode(l,l.uint32())},u.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.elemType!=null&&l.hasOwnProperty("elemType")&&!n.isInteger(l.elemType))return"elemType: integer expected";if(l.shape!=null&&l.hasOwnProperty("shape")){var h=a.onnx.TensorShapeProto.verify(l.shape);if(h)return"shape."+h}return null},u.fromObject=function(l){if(l instanceof a.onnx.TypeProto.Tensor)return l;var h=new a.onnx.TypeProto.Tensor;if(l.elemType!=null&&(h.elemType=l.elemType|0),l.shape!=null){if(typeof l.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");h.shape=a.onnx.TensorShapeProto.fromObject(l.shape)}return h},u.toObject=function(l,h){h||(h={});var y={};return h.defaults&&(y.elemType=0,y.shape=null),l.elemType!=null&&l.hasOwnProperty("elemType")&&(y.elemType=l.elemType),l.shape!=null&&l.hasOwnProperty("shape")&&(y.shape=a.onnx.TensorShapeProto.toObject(l.shape,h)),y},u.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},u.getTypeUrl=function(l){return l===void 0&&(l="type.googleapis.com"),l+"/onnx.TypeProto.Tensor"},u}(),p.Sequence=function(){function u(l){if(l)for(var h=Object.keys(l),y=0;y<h.length;++y)l[h[y]]!=null&&(this[h[y]]=l[h[y]])}return u.prototype.elemType=null,u.create=function(l){return new u(l)},u.encode=function(l,h){return h||(h=c.create()),l.elemType!=null&&Object.hasOwnProperty.call(l,"elemType")&&a.onnx.TypeProto.encode(l.elemType,h.uint32(10).fork()).ldelim(),h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof o||(l=o.create(l));for(var y=h===void 0?l.len:l.pos+h,I=new a.onnx.TypeProto.Sequence;l.pos<y;){var S=l.uint32();switch(S>>>3){case 1:{I.elemType=a.onnx.TypeProto.decode(l,l.uint32());break}default:l.skipType(S&7);break}}return I},u.decodeDelimited=function(l){return l instanceof o||(l=new o(l)),this.decode(l,l.uint32())},u.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.elemType!=null&&l.hasOwnProperty("elemType")){var h=a.onnx.TypeProto.verify(l.elemType);if(h)return"elemType."+h}return null},u.fromObject=function(l){if(l instanceof a.onnx.TypeProto.Sequence)return l;var h=new a.onnx.TypeProto.Sequence;if(l.elemType!=null){if(typeof l.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");h.elemType=a.onnx.TypeProto.fromObject(l.elemType)}return h},u.toObject=function(l,h){h||(h={});var y={};return h.defaults&&(y.elemType=null),l.elemType!=null&&l.hasOwnProperty("elemType")&&(y.elemType=a.onnx.TypeProto.toObject(l.elemType,h)),y},u.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},u.getTypeUrl=function(l){return l===void 0&&(l="type.googleapis.com"),l+"/onnx.TypeProto.Sequence"},u}(),p.Map=function(){function u(l){if(l)for(var h=Object.keys(l),y=0;y<h.length;++y)l[h[y]]!=null&&(this[h[y]]=l[h[y]])}return u.prototype.keyType=0,u.prototype.valueType=null,u.create=function(l){return new u(l)},u.encode=function(l,h){return h||(h=c.create()),l.keyType!=null&&Object.hasOwnProperty.call(l,"keyType")&&h.uint32(8).int32(l.keyType),l.valueType!=null&&Object.hasOwnProperty.call(l,"valueType")&&a.onnx.TypeProto.encode(l.valueType,h.uint32(18).fork()).ldelim(),h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof o||(l=o.create(l));for(var y=h===void 0?l.len:l.pos+h,I=new a.onnx.TypeProto.Map;l.pos<y;){var S=l.uint32();switch(S>>>3){case 1:{I.keyType=l.int32();break}case 2:{I.valueType=a.onnx.TypeProto.decode(l,l.uint32());break}default:l.skipType(S&7);break}}return I},u.decodeDelimited=function(l){return l instanceof o||(l=new o(l)),this.decode(l,l.uint32())},u.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.keyType!=null&&l.hasOwnProperty("keyType")&&!n.isInteger(l.keyType))return"keyType: integer expected";if(l.valueType!=null&&l.hasOwnProperty("valueType")){var h=a.onnx.TypeProto.verify(l.valueType);if(h)return"valueType."+h}return null},u.fromObject=function(l){if(l instanceof a.onnx.TypeProto.Map)return l;var h=new a.onnx.TypeProto.Map;if(l.keyType!=null&&(h.keyType=l.keyType|0),l.valueType!=null){if(typeof l.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");h.valueType=a.onnx.TypeProto.fromObject(l.valueType)}return h},u.toObject=function(l,h){h||(h={});var y={};return h.defaults&&(y.keyType=0,y.valueType=null),l.keyType!=null&&l.hasOwnProperty("keyType")&&(y.keyType=l.keyType),l.valueType!=null&&l.hasOwnProperty("valueType")&&(y.valueType=a.onnx.TypeProto.toObject(l.valueType,h)),y},u.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},u.getTypeUrl=function(l){return l===void 0&&(l="type.googleapis.com"),l+"/onnx.TypeProto.Map"},u}(),p.Optional=function(){function u(l){if(l)for(var h=Object.keys(l),y=0;y<h.length;++y)l[h[y]]!=null&&(this[h[y]]=l[h[y]])}return u.prototype.elemType=null,u.create=function(l){return new u(l)},u.encode=function(l,h){return h||(h=c.create()),l.elemType!=null&&Object.hasOwnProperty.call(l,"elemType")&&a.onnx.TypeProto.encode(l.elemType,h.uint32(10).fork()).ldelim(),h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof o||(l=o.create(l));for(var y=h===void 0?l.len:l.pos+h,I=new a.onnx.TypeProto.Optional;l.pos<y;){var S=l.uint32();switch(S>>>3){case 1:{I.elemType=a.onnx.TypeProto.decode(l,l.uint32());break}default:l.skipType(S&7);break}}return I},u.decodeDelimited=function(l){return l instanceof o||(l=new o(l)),this.decode(l,l.uint32())},u.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.elemType!=null&&l.hasOwnProperty("elemType")){var h=a.onnx.TypeProto.verify(l.elemType);if(h)return"elemType."+h}return null},u.fromObject=function(l){if(l instanceof a.onnx.TypeProto.Optional)return l;var h=new a.onnx.TypeProto.Optional;if(l.elemType!=null){if(typeof l.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");h.elemType=a.onnx.TypeProto.fromObject(l.elemType)}return h},u.toObject=function(l,h){h||(h={});var y={};return h.defaults&&(y.elemType=null),l.elemType!=null&&l.hasOwnProperty("elemType")&&(y.elemType=a.onnx.TypeProto.toObject(l.elemType,h)),y},u.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},u.getTypeUrl=function(l){return l===void 0&&(l="type.googleapis.com"),l+"/onnx.TypeProto.Optional"},u}(),p.SparseTensor=function(){function u(l){if(l)for(var h=Object.keys(l),y=0;y<h.length;++y)l[h[y]]!=null&&(this[h[y]]=l[h[y]])}return u.prototype.elemType=0,u.prototype.shape=null,u.create=function(l){return new u(l)},u.encode=function(l,h){return h||(h=c.create()),l.elemType!=null&&Object.hasOwnProperty.call(l,"elemType")&&h.uint32(8).int32(l.elemType),l.shape!=null&&Object.hasOwnProperty.call(l,"shape")&&a.onnx.TensorShapeProto.encode(l.shape,h.uint32(18).fork()).ldelim(),h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof o||(l=o.create(l));for(var y=h===void 0?l.len:l.pos+h,I=new a.onnx.TypeProto.SparseTensor;l.pos<y;){var S=l.uint32();switch(S>>>3){case 1:{I.elemType=l.int32();break}case 2:{I.shape=a.onnx.TensorShapeProto.decode(l,l.uint32());break}default:l.skipType(S&7);break}}return I},u.decodeDelimited=function(l){return l instanceof o||(l=new o(l)),this.decode(l,l.uint32())},u.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.elemType!=null&&l.hasOwnProperty("elemType")&&!n.isInteger(l.elemType))return"elemType: integer expected";if(l.shape!=null&&l.hasOwnProperty("shape")){var h=a.onnx.TensorShapeProto.verify(l.shape);if(h)return"shape."+h}return null},u.fromObject=function(l){if(l instanceof a.onnx.TypeProto.SparseTensor)return l;var h=new a.onnx.TypeProto.SparseTensor;if(l.elemType!=null&&(h.elemType=l.elemType|0),l.shape!=null){if(typeof l.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");h.shape=a.onnx.TensorShapeProto.fromObject(l.shape)}return h},u.toObject=function(l,h){h||(h={});var y={};return h.defaults&&(y.elemType=0,y.shape=null),l.elemType!=null&&l.hasOwnProperty("elemType")&&(y.elemType=l.elemType),l.shape!=null&&l.hasOwnProperty("shape")&&(y.shape=a.onnx.TensorShapeProto.toObject(l.shape,h)),y},u.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},u.getTypeUrl=function(l){return l===void 0&&(l="type.googleapis.com"),l+"/onnx.TypeProto.SparseTensor"},u}(),p}(),f.OperatorSetIdProto=function(){function p(r){if(r)for(var u=Object.keys(r),l=0;l<u.length;++l)r[u[l]]!=null&&(this[u[l]]=r[u[l]])}return p.prototype.domain="",p.prototype.version=n.Long?n.Long.fromBits(0,0,!1):0,p.create=function(r){return new p(r)},p.encode=function(r,u){return u||(u=c.create()),r.domain!=null&&Object.hasOwnProperty.call(r,"domain")&&u.uint32(10).string(r.domain),r.version!=null&&Object.hasOwnProperty.call(r,"version")&&u.uint32(16).int64(r.version),u},p.encodeDelimited=function(r,u){return this.encode(r,u).ldelim()},p.decode=function(r,u){r instanceof o||(r=o.create(r));for(var l=u===void 0?r.len:r.pos+u,h=new a.onnx.OperatorSetIdProto;r.pos<l;){var y=r.uint32();switch(y>>>3){case 1:{h.domain=r.string();break}case 2:{h.version=r.int64();break}default:r.skipType(y&7);break}}return h},p.decodeDelimited=function(r){return r instanceof o||(r=new o(r)),this.decode(r,r.uint32())},p.verify=function(r){return typeof r!="object"||r===null?"object expected":r.domain!=null&&r.hasOwnProperty("domain")&&!n.isString(r.domain)?"domain: string expected":r.version!=null&&r.hasOwnProperty("version")&&!n.isInteger(r.version)&&!(r.version&&n.isInteger(r.version.low)&&n.isInteger(r.version.high))?"version: integer|Long expected":null},p.fromObject=function(r){if(r instanceof a.onnx.OperatorSetIdProto)return r;var u=new a.onnx.OperatorSetIdProto;return r.domain!=null&&(u.domain=String(r.domain)),r.version!=null&&(n.Long?(u.version=n.Long.fromValue(r.version)).unsigned=!1:typeof r.version=="string"?u.version=parseInt(r.version,10):typeof r.version=="number"?u.version=r.version:typeof r.version=="object"&&(u.version=new n.LongBits(r.version.low>>>0,r.version.high>>>0).toNumber())),u},p.toObject=function(r,u){u||(u={});var l={};if(u.defaults)if(l.domain="",n.Long){var h=new n.Long(0,0,!1);l.version=u.longs===String?h.toString():u.longs===Number?h.toNumber():h}else l.version=u.longs===String?"0":0;return r.domain!=null&&r.hasOwnProperty("domain")&&(l.domain=r.domain),r.version!=null&&r.hasOwnProperty("version")&&(typeof r.version=="number"?l.version=u.longs===String?String(r.version):r.version:l.version=u.longs===String?n.Long.prototype.toString.call(r.version):u.longs===Number?new n.LongBits(r.version.low>>>0,r.version.high>>>0).toNumber():r.version),l},p.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.OperatorSetIdProto"},p}(),f.OperatorStatus=function(){var p={},r=Object.create(p);return r[p[0]="EXPERIMENTAL"]=0,r[p[1]="STABLE"]=1,r}(),f.FunctionProto=function(){function p(r){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],r)for(var u=Object.keys(r),l=0;l<u.length;++l)r[u[l]]!=null&&(this[u[l]]=r[u[l]])}return p.prototype.name="",p.prototype.input=n.emptyArray,p.prototype.output=n.emptyArray,p.prototype.attribute=n.emptyArray,p.prototype.attributeProto=n.emptyArray,p.prototype.node=n.emptyArray,p.prototype.docString="",p.prototype.opsetImport=n.emptyArray,p.prototype.domain="",p.create=function(r){return new p(r)},p.encode=function(r,u){if(u||(u=c.create()),r.name!=null&&Object.hasOwnProperty.call(r,"name")&&u.uint32(10).string(r.name),r.input!=null&&r.input.length)for(var l=0;l<r.input.length;++l)u.uint32(34).string(r.input[l]);if(r.output!=null&&r.output.length)for(var l=0;l<r.output.length;++l)u.uint32(42).string(r.output[l]);if(r.attribute!=null&&r.attribute.length)for(var l=0;l<r.attribute.length;++l)u.uint32(50).string(r.attribute[l]);if(r.node!=null&&r.node.length)for(var l=0;l<r.node.length;++l)a.onnx.NodeProto.encode(r.node[l],u.uint32(58).fork()).ldelim();if(r.docString!=null&&Object.hasOwnProperty.call(r,"docString")&&u.uint32(66).string(r.docString),r.opsetImport!=null&&r.opsetImport.length)for(var l=0;l<r.opsetImport.length;++l)a.onnx.OperatorSetIdProto.encode(r.opsetImport[l],u.uint32(74).fork()).ldelim();if(r.domain!=null&&Object.hasOwnProperty.call(r,"domain")&&u.uint32(82).string(r.domain),r.attributeProto!=null&&r.attributeProto.length)for(var l=0;l<r.attributeProto.length;++l)a.onnx.AttributeProto.encode(r.attributeProto[l],u.uint32(90).fork()).ldelim();return u},p.encodeDelimited=function(r,u){return this.encode(r,u).ldelim()},p.decode=function(r,u){r instanceof o||(r=o.create(r));for(var l=u===void 0?r.len:r.pos+u,h=new a.onnx.FunctionProto;r.pos<l;){var y=r.uint32();switch(y>>>3){case 1:{h.name=r.string();break}case 4:{h.input&&h.input.length||(h.input=[]),h.input.push(r.string());break}case 5:{h.output&&h.output.length||(h.output=[]),h.output.push(r.string());break}case 6:{h.attribute&&h.attribute.length||(h.attribute=[]),h.attribute.push(r.string());break}case 11:{h.attributeProto&&h.attributeProto.length||(h.attributeProto=[]),h.attributeProto.push(a.onnx.AttributeProto.decode(r,r.uint32()));break}case 7:{h.node&&h.node.length||(h.node=[]),h.node.push(a.onnx.NodeProto.decode(r,r.uint32()));break}case 8:{h.docString=r.string();break}case 9:{h.opsetImport&&h.opsetImport.length||(h.opsetImport=[]),h.opsetImport.push(a.onnx.OperatorSetIdProto.decode(r,r.uint32()));break}case 10:{h.domain=r.string();break}default:r.skipType(y&7);break}}return h},p.decodeDelimited=function(r){return r instanceof o||(r=new o(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.name!=null&&r.hasOwnProperty("name")&&!n.isString(r.name))return"name: string expected";if(r.input!=null&&r.hasOwnProperty("input")){if(!Array.isArray(r.input))return"input: array expected";for(var u=0;u<r.input.length;++u)if(!n.isString(r.input[u]))return"input: string[] expected"}if(r.output!=null&&r.hasOwnProperty("output")){if(!Array.isArray(r.output))return"output: array expected";for(var u=0;u<r.output.length;++u)if(!n.isString(r.output[u]))return"output: string[] expected"}if(r.attribute!=null&&r.hasOwnProperty("attribute")){if(!Array.isArray(r.attribute))return"attribute: array expected";for(var u=0;u<r.attribute.length;++u)if(!n.isString(r.attribute[u]))return"attribute: string[] expected"}if(r.attributeProto!=null&&r.hasOwnProperty("attributeProto")){if(!Array.isArray(r.attributeProto))return"attributeProto: array expected";for(var u=0;u<r.attributeProto.length;++u){var l=a.onnx.AttributeProto.verify(r.attributeProto[u]);if(l)return"attributeProto."+l}}if(r.node!=null&&r.hasOwnProperty("node")){if(!Array.isArray(r.node))return"node: array expected";for(var u=0;u<r.node.length;++u){var l=a.onnx.NodeProto.verify(r.node[u]);if(l)return"node."+l}}if(r.docString!=null&&r.hasOwnProperty("docString")&&!n.isString(r.docString))return"docString: string expected";if(r.opsetImport!=null&&r.hasOwnProperty("opsetImport")){if(!Array.isArray(r.opsetImport))return"opsetImport: array expected";for(var u=0;u<r.opsetImport.length;++u){var l=a.onnx.OperatorSetIdProto.verify(r.opsetImport[u]);if(l)return"opsetImport."+l}}return r.domain!=null&&r.hasOwnProperty("domain")&&!n.isString(r.domain)?"domain: string expected":null},p.fromObject=function(r){if(r instanceof a.onnx.FunctionProto)return r;var u=new a.onnx.FunctionProto;if(r.name!=null&&(u.name=String(r.name)),r.input){if(!Array.isArray(r.input))throw TypeError(".onnx.FunctionProto.input: array expected");u.input=[];for(var l=0;l<r.input.length;++l)u.input[l]=String(r.input[l])}if(r.output){if(!Array.isArray(r.output))throw TypeError(".onnx.FunctionProto.output: array expected");u.output=[];for(var l=0;l<r.output.length;++l)u.output[l]=String(r.output[l])}if(r.attribute){if(!Array.isArray(r.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");u.attribute=[];for(var l=0;l<r.attribute.length;++l)u.attribute[l]=String(r.attribute[l])}if(r.attributeProto){if(!Array.isArray(r.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");u.attributeProto=[];for(var l=0;l<r.attributeProto.length;++l){if(typeof r.attributeProto[l]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");u.attributeProto[l]=a.onnx.AttributeProto.fromObject(r.attributeProto[l])}}if(r.node){if(!Array.isArray(r.node))throw TypeError(".onnx.FunctionProto.node: array expected");u.node=[];for(var l=0;l<r.node.length;++l){if(typeof r.node[l]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");u.node[l]=a.onnx.NodeProto.fromObject(r.node[l])}}if(r.docString!=null&&(u.docString=String(r.docString)),r.opsetImport){if(!Array.isArray(r.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");u.opsetImport=[];for(var l=0;l<r.opsetImport.length;++l){if(typeof r.opsetImport[l]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");u.opsetImport[l]=a.onnx.OperatorSetIdProto.fromObject(r.opsetImport[l])}}return r.domain!=null&&(u.domain=String(r.domain)),u},p.toObject=function(r,u){u||(u={});var l={};if((u.arrays||u.defaults)&&(l.input=[],l.output=[],l.attribute=[],l.node=[],l.opsetImport=[],l.attributeProto=[]),u.defaults&&(l.name="",l.docString="",l.domain=""),r.name!=null&&r.hasOwnProperty("name")&&(l.name=r.name),r.input&&r.input.length){l.input=[];for(var h=0;h<r.input.length;++h)l.input[h]=r.input[h]}if(r.output&&r.output.length){l.output=[];for(var h=0;h<r.output.length;++h)l.output[h]=r.output[h]}if(r.attribute&&r.attribute.length){l.attribute=[];for(var h=0;h<r.attribute.length;++h)l.attribute[h]=r.attribute[h]}if(r.node&&r.node.length){l.node=[];for(var h=0;h<r.node.length;++h)l.node[h]=a.onnx.NodeProto.toObject(r.node[h],u)}if(r.docString!=null&&r.hasOwnProperty("docString")&&(l.docString=r.docString),r.opsetImport&&r.opsetImport.length){l.opsetImport=[];for(var h=0;h<r.opsetImport.length;++h)l.opsetImport[h]=a.onnx.OperatorSetIdProto.toObject(r.opsetImport[h],u)}if(r.domain!=null&&r.hasOwnProperty("domain")&&(l.domain=r.domain),r.attributeProto&&r.attributeProto.length){l.attributeProto=[];for(var h=0;h<r.attributeProto.length;++h)l.attributeProto[h]=a.onnx.AttributeProto.toObject(r.attributeProto[h],u)}return l},p.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.FunctionProto"},p}(),f}(),t.exports=a});function kr(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function ln(e){return new TextDecoder().decode(e)}var ye,pr,hi,Ke,Xn,Ve,nt,U,un,dr,hr,mr,fe=E(()=>{Wn(),ei(),ye=Er($r()),br(),pr=class{static arraysEqual(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}},hi=class{static preprocessInputShapes(e,t){let i=e.length===1?[1,e[0]]:e,o=t.length===1?[t[0],1]:t;return[i,o]}static postprocessOutputShape(e,t,i){t===1&&e.splice(e.length-2,1),i===1&&e.pop()}static calcMatMulShape(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]}},Ke=class kg{static calcShape(t,i,o=!1){let c=t.length,n=i.length;if(c===0)return i;if(n===0)return t;let a=Math.max(t.length,i.length),f=new Array(a);if(o){if(c<2||n<2)return;let p=hi.calcMatMulShape([t[c-2],t[c-1]],[i[n-2],i[n-1]]);if(p===void 0)return;[f[a-2],f[a-1]]=p}for(let p=o?3:1;p<=a;p++){let r=c-p<0?1:t[c-p],u=n-p<0?1:i[n-p];if(r!==u&&r>1&&u>1)return;f[a-p]=Math.max(r,u)}return f}static index(t,i){let o=new Array(i.length);return kg.fillIndex(t,i,o),o}static fillIndex(t,i,o){let c=t.length-i.length;for(let n=0;n<i.length;n++)o[n]=t[c+n]%i[n]}static calc(t,i,o,c,n){let a=kg.calcShape(t.dims,i.dims);if(a){if(c&&!U.areEqual(a,t.dims))return;let f=U.size(a),p=c?t:new Ce(a,n||t.type);if(a.length===0)p.set([],o(t.get([]),i.get([])));else{let r=new Array(a.length),u=new Array(t.dims.length),l=new Array(i.dims.length),h=0,y=0,I=!1,S=!1;t.dims.length===0&&(h=t.get([]),I=!0),i.dims.length===0&&(y=i.get([]),S=!0);let A;for(let V=0;V<f;V++){A=V;for(let N=a.length-1;N>=0;N--)r[N]=A%a[N],A=Math.floor(A/a[N]);I||(kg.fillIndex(r,t.dims,u),h=t.get(u)),S||(kg.fillIndex(r,i.dims,l),y=i.get(l)),p.set(r,o(h,y))}}return p}}static isValidBroadcast(t,i){let o=t.length,c=i.length;if(o>c)return!1;for(let n=1;n<=o;n++)if(t[o-n]!==1&&t[o-n]!==i[c-n])return!1;return!0}static getBroadcastDims(t,i){let o=t.length,c=[];for(let n=0;n<o;n++){let a=o-1-n,f=t[a]||1;(i[i.length-1-n]||1)>1&&f===1&&c.unshift(a)}return c}},Xn=class{static getShapeOfGemmResult(e,t,i,o,c){if(e.length!==2||i.length!==2)throw new Error("shape need to be of size 2");let n,a,f;t?(n=e[1],a=e[0]):(n=e[0],a=e[1]);let p=-1;if(o?(f=i[0],p=1):(f=i[1],p=0),i[p]!==a)throw new Error("dimension mismatch");if(n<=0||f<=0||a<=0)throw new Error("invalid shape specified");if(c&&!Ke.isValidBroadcast(c,[n,f]))throw new Error("gemm: invalid bias shape for broadcast");return[n,f,a]}},Ve=class K0{static tensorDataTypeFromProto(t){switch(t){case ye.onnx.TensorProto.DataType.INT8:return"int8";case ye.onnx.TensorProto.DataType.UINT8:return"uint8";case ye.onnx.TensorProto.DataType.BOOL:return"bool";case ye.onnx.TensorProto.DataType.INT16:return"int16";case ye.onnx.TensorProto.DataType.UINT16:return"uint16";case ye.onnx.TensorProto.DataType.INT32:return"int32";case ye.onnx.TensorProto.DataType.UINT32:return"uint32";case ye.onnx.TensorProto.DataType.FLOAT:return"float32";case ye.onnx.TensorProto.DataType.DOUBLE:return"float64";case ye.onnx.TensorProto.DataType.STRING:return"string";case ye.onnx.TensorProto.DataType.INT64:return"int32";case ye.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${ye.onnx.TensorProto.DataType[t]}`)}}static tensorDataTypeStringToEnum(t){switch(t){case"int8":return ye.onnx.TensorProto.DataType.INT8;case"uint8":return ye.onnx.TensorProto.DataType.UINT8;case"bool":return ye.onnx.TensorProto.DataType.BOOL;case"int16":return ye.onnx.TensorProto.DataType.INT16;case"uint16":return ye.onnx.TensorProto.DataType.UINT16;case"int32":return ye.onnx.TensorProto.DataType.INT32;case"uint32":return ye.onnx.TensorProto.DataType.UINT32;case"float32":return ye.onnx.TensorProto.DataType.FLOAT;case"float64":return ye.onnx.TensorProto.DataType.DOUBLE;case"string":return ye.onnx.TensorProto.DataType.STRING;case"int64":return ye.onnx.TensorProto.DataType.INT64;case"uint64":return ye.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${t}`)}}static tensorDimsFromProto(t){return t.map(i=>Wt.isLong(i)?i.toNumber():i)}static tensorValueTypeFromProto(t){return{tensorType:K0.tensorDataTypeFromProto(t.elemType),shape:{dims:K0.tensorDimsFromProto(t.shape.dim.map(i=>i.dimValue))}}}static tensorDimsFromORTFormat(t){let i=[];for(let o=0;o<t.dimsLength();o++)i.push(nt.longToNumber(t.dims(o)));return i}static tensorAttributesFromORTFormat(t){let i=[];for(let o=0;o<t.attributesLength();o++)i.push(t.attributes(o));return i}},nt=class{static longToNumber(e,t){return Wt.isLong(e)?e.toNumber():e instanceof O.Long?Wt.fromValue({low:e.low,high:e.high,unsigned:t??!1}).toNumber():e}static isLong(e){return Wt.isLong(e)||e instanceof O.Long}},U=class Hs{static size(t){return Hs.getSizeFromDimensionRange(t,0,t.length)}static sizeFromDimension(t,i){if(i<0||i>t.length)throw new Error(`invalid dimension of ${i} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return Hs.getSizeFromDimensionRange(t,i,t.length)}static sizeToDimension(t,i){if(i<0||i>t.length)throw new Error(`invalid dimension of ${i} for sizeToDimension as Tensor has ${t.length} dimensions.`);return Hs.getSizeFromDimensionRange(t,0,i)}static getSizeFromDimensionRange(t,i,o){let c=1;for(let n=i;n<o;n++){if(t[n]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");c*=t[n]}return c}static computeStrides(t){let i=t.length;if(i===0)return[];if(i===1)return[1];let o=new Array(i);o[i-1]=1,o[i-2]=t[i-1];for(let c=i-3;c>=0;--c)o[c]=o[c+1]*t[c+1];return o}static transpose(t){return t.slice().reverse()}static indicesToOffset(t,i,o){o===void 0&&(o=t.length);let c=0;for(let n=0;n<o;++n)c+=i[n]*t[n];return c}static offsetToIndices(t,i){let o=i.length;if(o===0)return[];if(o===1)return[t*i[0]];let c=new Array(i.length);for(let n=0;n<c.length-1;++n)c[n]=Math.floor(t/i[n]),t-=c[n]*i[n];return c[c.length-1]=t,c}static normalizeAxis(t,i){if(t<-i&&t>=i)throw new Error("unsupported axis for this operation.");return t<0?t+i:t}static normalizeAxes(t,i){return t.map(o=>this.normalizeAxis(o,i))}static incrementIndex(t,i,o){if(i.length===0||t.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(o===void 0)o=i.length;else if(o<=0||o>i.length)throw new Error("Incorrect axis to increment on");for(let c=o-1;c>=0&&(t[c]++,!(t[c]<i[c]));--c)t[c]=0}static calculateReshapedDims(t,i){if(i.length===0){if(t.length===0||Hs.size(t)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let o=i.length,c=new Array(o),n=-1,a=1;for(let p=0;p<o;p++){if(i[p]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(i[p]===-1){if(n!==-1)throw new Error("at most one dimension in shape hints can be -1");n=p}else{if(i[p]===0){if(p>=t.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");c[p]=t[p]}else c[p]=i[p];a*=c[p]}}let f=Hs.size(t);if(n!==-1){if(f%a!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${t}] Output shape: [${i}]`);c[n]=f/a}else if(a!==f)throw new Error("reshapedDims and originalDims don't have matching sizes");return c}static sortBasedOnPerm(t,i){return i?i.map(o=>t[o]):t.slice().reverse()}static padShape(t,i){let o=t.length;return t.map((c,n)=>c+i[n]+i[n+o])}static areEqual(t,i){return t.length!==i.length?!1:t.every((o,c)=>o===i[c])}static validateDimsAndCalcSize(t){if(t.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let i=1;for(let o of t){if(!Number.isInteger(o))throw new TypeError(`Invalid shape: ${o} is not an integer`);if(o<0||o>2147483647)throw new TypeError(`Invalid shape: length ${o} is not allowed`);i*=o}return i}static flattenShape(t,i){i<0&&(i+=t.length);let o=t.reduce((n,a)=>n*a,1),c=t.slice(i).reduce((n,a)=>n*a,1);return[o/c,c]}static squeezeShape(t,i){let o=new Array;i=Hs.normalizeAxes(i,t.length);for(let c=0;c<t.length;c++){let n=i.indexOf(c)>=0;if(n&&t[c]!==1)throw new Error("squeeze an axis of size different than 1");(i.length===0&&t[c]>1||i.length>0&&!n)&&o.push(t[c])}return o}static unsqueezeShape(t,i){let o=new Array(t.length+i.length);o.fill(0);for(let n=0;n<i.length;n++){let a=Hs.normalizeAxis(i[n],o.length);if(a>=o.length)throw new Error("'axes' has an out of range axis");if(o[a]!==0)throw new Error("'axes' has a duplicate axis");o[a]=1}let c=0;for(let n=0;n<o.length;n++)o[n]===0&&(o[n]=t[c++]);if(c!==t.length)throw new Error("the unsqueezed dimension could not be established");return o}},un=class s_{static splitShape(t,i,o,c){if(o.length===0){if(!c)throw new Error("need to know number of outputs when the 'split' attribute is not specified");s_.determineSplit(t[i],c,o)}let n=[],a=[0];for(let f=0;f<o.length;++f){f!==0&&a.push(a[f-1]+o[f-1]);let p=t.slice();p[i]=o[f],n.push(p)}return[n,a]}static determineSplit(t,i,o){if(t%i!==0)throw new Error("cannot split tensor to equal sized parts");for(let c=0;c<i;++c)o.push(t/i)}},dr=class Fg{static adjustPoolAttributes(t,i,o,c,n,a){if(!t&&o.length!==i.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let f=0;f<i.length-2;f++)f>=o.length?o.push(i[f+2]):o[f]=i[f+2];for(let f=0;f<o.length;f++)if(f<c.length){if(c[f]<0)throw new Error("strides should be greater than or equal to 1")}else c.push(1);for(let f=0;f<o.length;f++)if(f<n.length){if(n[f]<0)throw new Error("dilations should be greater than or equal to 1")}else n.push(1);for(let f=0;f<o.length*2;f++)if(f<a.length){if(a[f]<0)throw new Error("pad should be greater than or equal to 1")}else a.push(0);for(let f=0;f<o.length;f++){if(o[f]<=0)throw new Error("kernel shapes need to be greater than 0");if(a[f]>=o[f]||a[f+o.length]>=o[f])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,i,o,c,n,a){if(a){if(n.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(i.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(c.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let f=0;f<t.length-2;f++)Fg.adjustPadAndReturnShape(t[f+2],i[f],o[f],c[f],n,f,f+t.length-2,a)}}static computePoolOutputShape(t,i,o,c,n,a,f){if(i.length<=0)throw new Error("input shape must be of size greater than 0");let p=[i[0],i[1]];return Fg.computeShapeHelper(t,i,p,o,c,n,a,f),p}static computeConvOutputShape(t,i,o,c,n,a,f){if(t.length<=0||i.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let p=[t[0],i[0]];return Fg.computeShapeHelper(!1,t,p,o,c,n,a,f),p}static computeShapeHelper(t,i,o,c,n,a,f,p){if(t)for(let r=0;r<i.length-2;r++)o.push(1);else for(let r=0;r<i.length-2;r++)o.push(Fg.adjustPadAndReturnShape(i[r+2],c[r],n[r],a[r],f,r,r+i.length-2,p))}static adjustPadAndReturnShape(t,i,o,c,n,a,f,p){let r=o*(c-1)+1;if(p&&p!=="NOTSET")switch(p){case"VALID":return n[a]=0,n[f]=0,Math.floor((t-r)/i+1);case"SAME_LOWER":case"SAME_UPPER":if(o!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let u=((t+i-1)/i-1)*i+c-t;return n[a]=Math.floor(p==="SAME_LOWER"?(u+1)/2:u/2),n[f]=u-n[a],Math.floor((t+u-c)/i+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+n[a]+n[f]-r)/i+1)}},hr=-34028234663852886e22,mr=34028234663852886e22});function jd(e){switch(e){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${e}`)}}function ku(e){switch(e){case re.onnx.TensorProto.DataType.UINT8:case re.onnx.TensorProto.DataType.INT8:case re.onnx.TensorProto.DataType.BOOL:return 1;case re.onnx.TensorProto.DataType.UINT16:case re.onnx.TensorProto.DataType.INT16:return 2;case re.onnx.TensorProto.DataType.FLOAT:case re.onnx.TensorProto.DataType.INT32:case re.onnx.TensorProto.DataType.UINT32:return 4;case re.onnx.TensorProto.DataType.INT64:case re.onnx.TensorProto.DataType.DOUBLE:case re.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${re.onnx.TensorProto.DataType[e]}`)}}function Yd(e,t){return new(Ru(t))(e)}function Ru(e){switch(e){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function bi(e,t){if(t===re.onnx.TensorProto.DataType.INT64||t===mi.TensorDataType.INT64){if(e.greaterThanOrEqual(2147483648)||e.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(t===re.onnx.TensorProto.DataType.UINT32||t===mi.TensorDataType.UINT32||t===re.onnx.TensorProto.DataType.UINT64||t===mi.TensorDataType.UINT64){if(e.greaterThanOrEqual(4294967296)||e.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${re.onnx.TensorProto.DataType[t]}`);return e.toNumber()}function Bu(e,t,i){switch(t){case re.onnx.TensorProto.DataType.BOOL:case re.onnx.TensorProto.DataType.UINT8:return e.getUint8(i);case re.onnx.TensorProto.DataType.INT8:return e.getInt8(i);case re.onnx.TensorProto.DataType.UINT16:return e.getUint16(i,!0);case re.onnx.TensorProto.DataType.INT16:return e.getInt16(i,!0);case re.onnx.TensorProto.DataType.FLOAT:return e.getFloat32(i,!0);case re.onnx.TensorProto.DataType.INT32:return e.getInt32(i,!0);case re.onnx.TensorProto.DataType.UINT32:return e.getUint32(i,!0);case re.onnx.TensorProto.DataType.INT64:return bi(Wt.fromBits(e.getUint32(i,!0),e.getUint32(i+4,!0),!1),t);case re.onnx.TensorProto.DataType.DOUBLE:return e.getFloat64(i,!0);case re.onnx.TensorProto.DataType.UINT64:return bi(Wt.fromBits(e.getUint32(i,!0),e.getUint32(i+4,!0),!0),t);default:throw new Error(`cannot read from DataView for type ${re.onnx.TensorProto.DataType[t]}`)}}var Nu,re,mi,Ce,br=E(()=>{Nu=Er(Ss()),ei(),nn(),re=Er($r()),fe(),mi=W.experimental.fbs,Ce=class Zy{constructor(t,i,o,c,n,a=Nu.Guid.create()){this.dims=t,this.type=i,this.dataProvider=o,this.asyncDataProvider=c,this.cache=n,this.dataId=a,this.size=U.validateDimsAndCalcSize(t);let f=this.size,p=o===void 0&&c===void 0&&n===void 0;if(n!==void 0&&n.length!==f)throw new RangeError("Input dims doesn't match data length.");if(i==="string"){if(n!==void 0&&(!Array.isArray(n)||!n.every(r=>typeof r=="string")))throw new TypeError("cache should be a string array");p&&(this.cache=new Array(f))}else{if(n!==void 0){let r=Ru(i);if(!(n instanceof r))throw new TypeError(`cache should be type ${r.name}`)}if(p){let r=new ArrayBuffer(f*jd(i));this.cache=Yd(r,i)}}}get data(){if(this.cache===void 0){let t=this.dataProvider(this.dataId);if(t.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=t}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(t){return this.data[U.indicesToOffset(t,this.strides)]}set(t,i){this.data[U.indicesToOffset(t,this.strides)]=i}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=U.computeStrides(this.dims)),this._strides}static fromProto(t){if(!t)throw new Error("cannot construct Value from an empty tensor");let i=Ve.tensorDataTypeFromProto(t.dataType),o=Ve.tensorDimsFromProto(t.dims),c=new Zy(o,i);if(i==="string")t.stringData.forEach((n,a)=>{c.data[a]=ln(n)});else if(t.rawData&&typeof t.rawData.byteLength=="number"&&t.rawData.byteLength>0){let n=c.data,a=new DataView(t.rawData.buffer,t.rawData.byteOffset,t.rawData.byteLength),f=ku(t.dataType),p=t.rawData.byteLength/f;if(t.rawData.byteLength%f!==0)throw new Error("invalid buffer length");if(n.length!==p)throw new Error("buffer length mismatch");for(let r=0;r<p;r++){let u=Bu(a,t.dataType,r*f);n[r]=u}}else{let n;switch(t.dataType){case re.onnx.TensorProto.DataType.FLOAT:n=t.floatData;break;case re.onnx.TensorProto.DataType.INT32:case re.onnx.TensorProto.DataType.INT16:case re.onnx.TensorProto.DataType.UINT16:case re.onnx.TensorProto.DataType.INT8:case re.onnx.TensorProto.DataType.UINT8:case re.onnx.TensorProto.DataType.BOOL:n=t.int32Data;break;case re.onnx.TensorProto.DataType.INT64:n=t.int64Data;break;case re.onnx.TensorProto.DataType.DOUBLE:n=t.doubleData;break;case re.onnx.TensorProto.DataType.UINT32:case re.onnx.TensorProto.DataType.UINT64:n=t.uint64Data;break;default:throw new Error("unspecific error")}if(n==null)throw new Error("failed to populate data from a tensorproto value");let a=c.data;if(a.length!==n.length)throw new Error("array length mismatch");for(let f=0;f<n.length;f++){let p=n[f];Wt.isLong(p)?a[f]=bi(p,t.dataType):a[f]=p}}return c}static fromData(t,i,o){return new Zy(i,o,void 0,void 0,t)}static fromOrtTensor(t){if(!t)throw new Error("cannot construct Value from an empty tensor");let i=Ve.tensorDimsFromORTFormat(t),o=Ve.tensorDataTypeFromProto(t.dataType()),c=new Zy(i,o);if(o==="string")for(let n=0;n<t.stringDataLength();n++)c.data[n]=t.stringData(n);else if(t.rawDataArray()&&typeof t.rawDataLength()=="number"&&t.rawDataLength()>0){let n=c.data,a=new DataView(t.rawDataArray().buffer,t.rawDataArray().byteOffset,t.rawDataLength()),f=ku(t.dataType()),p=t.rawDataLength()/f;if(t.rawDataLength()%f!==0)throw new Error("invalid buffer length");if(n.length!==p)throw new Error("buffer length mismatch");for(let r=0;r<p;r++){let u=Bu(a,t.dataType(),r*f);n[r]=u}}return c}}});function q(e){return e===1?Xd:Kd}function Mu(e){let t=q(e);return`${t.version}
      precision highp float;
      ${t.attribute} vec3 position;
      ${t.attribute} vec2 textureCoord;

      ${t.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function Gu(e){let t=q(e);return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFrag} vec2 TexCoords;
    ${t.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function Uu(e,t){let i=q(e);return`
  void main() {
    int indices[${t}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${i.output} = result;
  }
  `}var Xd,Kd,xe=E(()=>{Xd={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},Kd={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),ae=E(()=>{});async function gi(e,t=o=>0,i){return new Promise((o,c)=>{let n=0,a=()=>{if(e()){o();return}n++;let f=t(n);setTimeout(a,f)};a()})}function Kn(e){return kr(typeof e<"u"&&e.length!==0,()=>"empty string found for sampler name"),"get"+e.charAt(0).toUpperCase()+e.slice(1)}function zu(e){return kr(typeof e<"u"&&e.length!==0,()=>"empty string found for sampler name"),"get"+e.charAt(0).toUpperCase()+e.slice(1)+"AtOutCoords"}function Br(e,t){let i=JSON.parse(JSON.stringify(e));return i=t,i}function Nr(e,t){return t.map(i=>e[i]).join(", ")}function Je(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function Ot(e=6){return["x","y","z","w","u","v"].slice(0,e)}var kt=E(()=>{fe()});function Jd(e,t){return Ot(t).map(i=>`${e}.${i}`)}function Rr(e,t){return t===1?[e]:Jd(e,t)}function Bt(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var gr=E(()=>{kt()});function Qd(e,t,i){if(e===0)return"false";if(e===1)return`rc > ${t[0]}`;let o="";for(let c=e-2;c<e;c++)o+=`${i[c]} >= ${t[c-e+2]}`,c<e-1&&(o+="||");return o}function eh(e,t){let i=e.length;if(i===0)return"getA(), 0, 0, 0";if(i===1)return`getA(rc),
            rc + 1 >= ${e[0]} ? 0. : getA(rc + 1),
            0, 0`;let o="r, c",c="r, cp1",n="rp1, c",a="rp1, cp1",f="";if(i>2)for(let p=0;p<i-2;++p)f=f+`${t[p]},`;return`getA(${f}${o}),
          rEdge ? 0. : getA(${f}${n}),
          cEdge ? 0. : getA(${f}${c}),
          rEdge || cEdge ? 0. : getA(${f}${a})`}function th(e,t,i,o){return e===0||e===1?"":`
    int r = ${t[e-2]};
    int c = ${t[e-1]};
    int rp1 = ${t[e-2]} + 1;
    int cp1 = ${t[e-1]} + 1;
    bool rEdge = rp1 >= ${o};
    bool cEdge = cp1 >= ${i};
    `}var Vu,Zd,Wu,Hu=E(()=>{xe(),ae(),kt(),gr(),Vu={name:"pack",inputNames:["A"],inputTypes:[1]},Zd=(e,t)=>{let i=q(e.session.backend.glContext.version),o=t.dims,c=o.length,n=t.dims.length,a=Je(n),f=Rr("rc",n),p=th(n,f,o[o.length-2],o[o.length-1]),r;c===0?r=[1,1]:c===1?r=[o[0],1]:r=[o[n-1],o[n-2]];let u=Qd(n,r,f),l=eh(o,f),h=`
        void main() {
          ${a} rc = getOutputCoords();

          if(${u}) {
            ${i.output} = vec4(0);
          } else {
            ${p}

            ${i.output} = vec4(${l});
          }
        }
      `;return{...Vu,hasMain:!0,output:{dims:t.dims,type:t.type,textureType:2},shaderSource:h}},Wu=(e,t)=>({...Vu,get:()=>Zd(e,t)})});function yi(e){if(e.length===0)return[1,1,1];let t=1;for(let i=0;i<e.length-2;++i)t*=e[i];return[t,e.length>1?e[e.length-2]:1,e[e.length-1]]}function ju(e,t){let i=!1;return e.length===0||t.length===0?i=!0:e.length<2||t.length<2?i=e[e.length-1]===t[t.length-1]:i=e[e.length-1]===t[t.length-1]&&e[e.length-2]===t[t.length-2],i}function oh(e){let t=U.computeStrides(e),i=["b","r","c"],o="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t.map((c,n)=>{let a=`int ${i[n]} = ${o} / ${c}`,f=n===t.length-1?`int ${i[n+1]} = ${o} - ${i[n]} * ${c}`:`index -= ${i[n]} * ${c}`;return`${a}; ${f};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function ih(e){let t=U.computeStrides(e);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${t[0]} + coords.z * ${t[1]} + coords.y;
  }
`}var rh,nh,qu,Yu=E(()=>{fe(),xe(),ae(),gr(),rh=e=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${e}`}),nh=(e,t,i,o)=>{let c=t.dims,n=o,a="";for(let r=0;r<4;r++){let u="";switch(r){case 0:u="outputCoords = rc;";break;case 1:u="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:u="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:u="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}a+=`
        ${u}
        ${r>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${r}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${r>0?"}":""}
      `}let f=q(e.session.backend.glContext.version),p=`
      ${oh(c)}
      ${ih(n)}
      ${Bt()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${n[2]};
        int cols = ${n[1]};

        ${a}
        ${f.output} = result;
      }
    `;return{...i,output:{dims:n,type:t.type,textureType:2},shaderSource:p,hasMain:!0}},qu=(e,t,i)=>{let o=rh(i);return{...o,get:()=>nh(e,t,o,i)}}}),Ti,Xu=E(()=>{xe(),ae(),Ti=(e,t)=>{let i=t.shape,o=q(e.session.backend.glContext.version),c=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${o.texture2D}(X,TexCoords).r;
      ${o.output} = encodeAsUint8(value);
    }`,n={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:i,type:t.tensor.type,textureType:3},shaderSource:c,hasMain:!0};return e.executeProgram(n,[t.tensor])}});function sh(e,t){if(e===1)return"rc";let i="";for(let o=0;o<e;o++)i+=t[o],o<e-1&&(i+=",");return i}var Ku,ah,Ju,Zu=E(()=>{xe(),ae(),kt(),gr(),Ku={name:"unpack",inputNames:["A"],inputTypes:[2]},ah=(e,t)=>{let i=t.dims.length,o=Rr("rc",i),c=o.slice(-2),n=Je(i),a=Bt(),f=t.dims.length===0?"":sh(i,o),p=i<=1?"rc":`vec2(${c.join(",")})`,r=q(e.session.backend.glContext.version),u=`
    ${a}
    void main() {
      ${n} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${f});

       ${r.output} = vec4(getChannel(packedInput, ${p}), 0, 0, 0);
     }
   `;return{...Ku,hasMain:!0,output:{dims:t.dims,type:t.type,textureType:0},shaderSource:u}},Ju=(e,t)=>({...Ku,get:()=>ah(e,t)})}),Jn,fn,Zn,cn=E(()=>{at(),Jn=class{constructor(e,t=1){if(t===1)this.internalFormat=e.R32F,this.format=e.RED,this.textureType=e.FLOAT,this.channelSize=t;else if(t===4)this.internalFormat=e.RGBA32F,this.format=e.RGBA,this.textureType=e.FLOAT,this.channelSize=t;else throw new Error(`Invalid number of channels: ${t}`)}encode(e,t){let i,o;return e.constructor!==Float32Array&&(ce.warning("Encoder","data was not of type Float32; creating new Float32Array"),o=new Float32Array(e)),t*this.channelSize>e.length?(ce.warning("Encoder","Source data too small. Allocating larger array"),o=e,i=this.allocate(t*this.channelSize),o.forEach((c,n)=>i[n]=c)):(o=e,i=o),i}allocate(e){return new Float32Array(e*4)}decode(e,t){return this.channelSize===1?e.filter((i,o)=>o%4===0).subarray(0,t):e.subarray(0,t)}},fn=class{constructor(e,t=1,i){if(t!==1&&t!==4)throw new Error(`Invalid number of channels: ${t}`);this.internalFormat=e.RGBA,this.format=e.RGBA,this.channelSize=t,this.textureType=i||e.FLOAT}encode(e,t){let i=e;return this.channelSize===1&&(ce.verbose("Encoder","Exploding into a larger array"),i=this.allocate(t),e.forEach((o,c)=>i[c*4]=o)),i}allocate(e){return new Float32Array(e*4)}decode(e,t){return this.channelSize===1?e.filter((i,o)=>o%4===0).subarray(0,t):e.subarray(0,t)}},Zn=class{constructor(e,t=1){if(this.channelSize=4,t===1)this.internalFormat=e.ALPHA,this.format=e.ALPHA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=t;else if(t===4)this.internalFormat=e.RGBA,this.format=e.RGBA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=t;else throw new Error(`Invalid number of channels: ${t}`)}encode(e,t){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}allocate(e){return new Uint8Array(e*this.channelSize)}decode(e,t){if(e instanceof Uint8Array)return e.subarray(0,t);throw new Error(`Invalid array type: ${e.constructor}`)}}}),pn,Qu,xi,el=E(()=>{fe(),ae(),pn=(e,t,i)=>{let o=i===0||i===1?1:4,c=i===2,n=i===1||i===2,a=i===4?t.length-1:void 0,f=i===4?t.map((p,r)=>r===t.length-1?p*4:p):void 0;return xi(e,t,o,f,{isPacked:c,reverseWH:n,breakAxis:a})},Qu=(e,t,i)=>{let o=pn(e,t,i);return[o.width,o.height]},xi=(e,t,i=1,o,c)=>{let n=!!(c&&c.isPacked),[a,f]=e.computeTextureWH(n&&o||t,c),p=t.length,r=t.slice(0);if(p===0&&(r=[1]),i===1)o=t;else if(n){if(i!==4)throw new Error("a packed texture must be 4-channel");o=t,p>0&&(r[p-1]=Math.ceil(r[p-1]/2)),p>1&&(r[p-2]=Math.ceil(r[p-2]/2))}else if(!o)throw new Error("Unpacked shape is needed when using channels > 1");return{width:a,height:f,channels:i,isPacked:n,shape:r,strides:U.computeStrides(r),unpackedShape:o,reversedWH:c&&c.reverseWH}}}),lh,Qn,rl=E(()=>{at(),br(),fe(),Hu(),Yu(),Xu(),Zu(),cn(),el(),ae(),lh=(e,t)=>{let i=t.map(c=>`${c.unpackedShape.join(",")};${c.width}x${c.height}`).join("_"),o=e.name;return e.cacheHint&&(o+="["+e.cacheHint+"]"),o+=":"+i,o},Qn=class{constructor(e){this.session=e,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(e,t){return Qu(this.session.layoutStrategy,e,t)}executeProgram(e,t){if(t.length<e.inputNames.length)throw new Error(`Input size mustn't be less than ${e.inputNames.length}.`);if(e.inputNames.length!==e.inputTypes.length)throw new Error("input names size does not match input types");let i=[];for(let p=0;p<e.inputNames.length;++p)i[p]=this.getOrCreateTextureData(t[p],e.inputTypes[p]);let o=lh(e,i),c=this.session.programManager.getArtifact(o),n=c?c.programInfo:typeof e.get=="function"?e.get():e,a=pn(this.session.layoutStrategy,n.output.dims,n.output.textureType),f=this.createTextureData(a,n.output.type);return c||(c=this.session.programManager.build(n,i,f),this.session.programManager.setArtifact(o,c)),this.runProgram(c,i,f),f}run(e,t){return this.executeProgram(e,t).tensor}runProgram(e,t,i){for(let o=0;o<t.length;++o)if(!!t[o].isPacked!=(e.programInfo.inputTypes[o]===2))throw new Error(`input[${o}] property packed inconsistent`);if(!!i.isPacked!=(e.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(e,t,i)}getOrCreateTextureData(e,t){let i=this.getTextureData(e.dataId,t===2);if(!i&&(i=this.getTextureData(e.dataId,t!==2),i))return t===2?this.pack(i):this.unpack(i);if(!i){let o=pn(this.session.layoutStrategy,e.dims,t);if(t===4){let c=e.dims;if(c.length===4){let n=[c[0],Math.ceil(c[1]*c[2]*c[3]/4)],a=pn(this.session.layoutStrategy,n,t),f=e.numberData;if(c[1]*c[2]*c[3]%4!==0){let p=c[0],r=c[1]*c[2]*c[3],u=Math.ceil(r*1/4)*4,l=p*u;f=new Float32Array(l);for(let h=0;h<p;++h){let y=h*r,I=h*u+h%1*r;f.set(e.numberData.subarray(y,y+r),I)}}return this.createTextureData(a,e.type,f,e,1)}}if(t===2){let c=xi(this.session.layoutStrategy,e.dims,1,[],{reverseWH:!0}),n=this.createTextureData(c,e.type,e.numberData,e,1);i=this.pack(n)}else i=this.createTextureData(o,e.type,e.numberData,e,1)}return i}createTextureDataFromLayoutBindTensor(e,t,i,o){return this.createTextureData(e,t,i,o,1)}createTextureData(e,t,i,o,c){ce.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(e)}]`);let n=this.session.textureManager.createTextureFromLayout(t,e,i,c);return this.createTextureDataFromTexture(e,t,n,o)}reshapeUnpacked(e,t){let i=this.getOrCreateTextureData(e,0),o={channels:i.channels,height:i.height,width:i.width,shape:t.length!==0?t:[1],strides:U.computeStrides(t),unpackedShape:t};return this.createTextureDataFromTexture(o,e.type,i.texture).tensor}reshapePacked(e,t){let i=this.getOrCreateTextureData(e,2);if(ju(e.dims,t)){let f={channels:i.channels,height:i.height,width:i.width,shape:t.length!==0?t:[1],strides:U.computeStrides(t),unpackedShape:t,isPacked:!0};return this.createTextureDataFromTexture(f,e.type,i.texture).tensor}let o=yi(e.dims),c=yi(t),n=this.reshapePacked(e,o),a=this.run(qu(this,n,c),[n]);return this.reshapePacked(a,t)}cast(e,t){let i=this.getOrCreateTextureData(e,0);return this.createTextureDataFromTexture(i,t,i.texture).tensor}createTextureDataFromTexture(e,t,i,o,c){let n={...e,tensor:o||new Ce(e.unpackedShape,t,a=>this.readTexture(n),async a=>this.readTextureAsync(n),void 0,c),texture:i};return this.setTextureData(n.tensor.dataId,n,e.isPacked),n}getTextureData(e,t=!1){return this.session.isInitializer(e)?this.session.getTextureData(e,t):t?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e)}setTextureData(e,t,i=!1){this.session.isInitializer(e)?this.session.setTextureData(e,t,i):(i?this.packedTextureDataCache:this.unpackedTextureDataCache).set(e,t)}isTextureLayoutCached(e,t=!1){return!!this.getTextureData(e.dataId,t)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(e=>this.session.textureManager.releaseTexture(e)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(e=>this.session.textureManager.releaseTexture(e)),this.unpackedTextureDataCache=new Map}readTexture(e){return e.isPacked?this.readTexture(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat(Ti(this,e))}async readTextureAsync(e){return e.isPacked?this.readTextureAsync(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat(Ti(this,e))}pack(e){return this.executeProgram(Wu(this,e.tensor),[e.tensor])}unpack(e){return this.executeProgram(Ju(this,e.tensor),[e.tensor])}}}),wi,ee,Ge=E(()=>{wi=class{constructor(e){Object.assign(this,e)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e=>`${this[e]}`).join(";")),this.key}},ee=e=>new wi(e)}),nl,ol,il,fh,ch,al=E(()=>{Ge(),xe(),ae(),nl={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},ol=(e,t,i)=>(ch(t),[e.run({...nl,cacheHint:i.cacheKey,get:()=>fh(e,t,i)},t)]),il=e=>{let t=e.attributes.getFloat("epsilon",1e-5),i=e.attributes.getFloat("momentum",.9),o=e.attributes.getInt("spatial",1);return ee({epsilon:t,momentum:i,spatial:o})},fh=(e,t,i)=>{let o=q(e.session.backend.glContext.version),c=t[0].dims.length,[n,a]=e.calculateTextureWidthAndHeight(t[1].dims,0),f=`
  float process(int[${c}] indices) {
    vec2 position = offsetToCoords(indices[1], ${n}, ${a});
    float scale = getColorAsFloat(${o.texture2D}(Scale, position));
    float mean = getColorAsFloat(${o.texture2D}(Mean, position));
    float variance = getColorAsFloat(${o.texture2D}(Variance, position));
    float b = getColorAsFloat(${o.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${i.epsilon})) ) + b;
  }`;return{...nl,output:{dims:t[0].dims,type:t[0].type,textureType:0},shaderSource:f}},ch=e=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let t=e[0],i=e[1],o=e[2],c=e[3],n=e[4];if(t.dims.length<3||i.dims.length!==1||o.dims.length!==1||c.dims.length!==1||n.dims.length!==1)throw new Error("invalid input shape.");if(i.dims[0]!==t.dims[1]||o.dims[0]!==t.dims[1]||c.dims[0]!==t.dims[1]||n.dims[0]!==t.dims[1])throw new Error("invalid input shape.");if(t.type!=="float32"&&t.type!=="float64"||i.type!=="float32"&&i.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||c.type!=="float32"&&c.type!=="float64"||n.type!=="float32"&&n.type!=="float64")throw new Error("invalid input tensor types.")}}),eo,ft,R,dn,to,Ht=E(()=>{eo=class{constructor(e,t,i,o){this.glContext=e,this.programInfo=t,this.inputTextureLayouts=i,this.outputTextureLayout=o}},ft=class{constructor(e){this.context=e}},R=class{constructor(e,t){this.routineBody=e,this.dependencies=t}},dn=class{constructor(e,t,i){this.name=e,i?this.dependencies=i:this.dependencies=[],t&&(this.routineBody=t)}addDependency(e){e&&this.dependencies.push(e)}},to=class{static returnOrderedNodes(e){if(!e||e.length===0)return[];if(e.length===1)return e;let t=new Set,i=new Set,o=new Array;return this.createOrderedNodes(e,t,i,o),o}static createOrderedNodes(e,t,i,o){for(let c=0;c<e.length;++c)this.dfsTraverse(e[c],t,i,o)}static dfsTraverse(e,t,i,o){if(!e||i.has(e.name))return;if(t.has(e.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");t.add(e.name);let c=e.dependencies;if(c&&c.length>0)for(let n=0;n<c.length;++n)this.dfsTraverse(c[n],t,i,o);o.push(e),i.add(e.name),t.delete(e.name)}}});function dh(){let e="add_";return{body:`
  float ${e}(float a, float b) {
    return a + b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:e,type:0}}function hh(){let e="div_";return{body:`
  float ${e}(float a, float b) {
    return a / b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:e,type:0}}function mh(){let e="mul_";return{body:`
  float ${e}(float a, float b) {
    return a * b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:e,type:0}}function bh(){let e="sub_";return{body:`
  float ${e}(float a, float b) {
    return a - b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:e,type:0}}function gh(){let e="equal_";return{body:`
  float ${e}(float a, float b) {
    return float(a == b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:e,type:0}}function yh(){let e="greater_";return{body:`
  float ${e}(float a, float b) {
    return float(a > b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:e,type:0}}function Th(){let e="less_";return{body:`
  float ${e}(float a, float b) {
    return float(a < b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:e,type:0}}function xh(){let e="and_";return{body:`
  float ${e}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:e,type:0}}function wh(){let e="or_";return{body:`
  float ${e}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:e,type:0}}function vh(){let e="xor_";return{body:`
  float ${e}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:e,type:0}}function _h(){return Ih("pow")}function Oh(){let e="prelu_";return{body:`
  float ${e}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:e,type:0}}function Ih(e){let t=`${e}_`;return{body:`
  float ${t}(float a, float b) {
    return ${e}(a, b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return ${e}(v1, v2);
  }
  `,name:t,type:0}}var ct,Sh,sl,ul,ll,fl,cl,pl,dl,hl,ml,bl,gl,yl,Tl=E(()=>{fe(),Ht(),xe(),ae(),ct=(e,t,i,o=t[0].type,c)=>{let n=e.session.pack?2:0;return{name:i.name,inputNames:["A","B"],inputTypes:[n,n],cacheHint:c,get:()=>Sh(e,t,i,o)}},Sh=(e,t,i,o=t[0].type)=>{let c=e.session.pack?2:0,n=!U.areEqual(t[0].dims,t[1].dims),a=t[0].dims,f=e.session.pack;if(n){let u=Ke.calcShape(t[0].dims,t[1].dims,!1);if(!u)throw new Error("Can't perform binary op on the given tensors");a=u;let l=a.length,h=t[0].dims.length!==0?t[0].dims.length:1,y=t[1].dims.length!==0?t[1].dims.length:1,I=t[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",S=t[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",A=q(e.session.backend.glContext.version),V=f?`
      ${i.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${i.name}(a, b);
        ${A.output} = result;
      }`:`
      ${i.body}
      float process(int indices[${l}]) {
        int aindices[${h}];
        int bindices[${y}];
        ${I}
        ${S}
        return ${i.name}(_A(aindices), _B(bindices));
      }`;return{name:i.name,inputNames:["A","B"],inputTypes:[c,c],output:{dims:a,type:o,textureType:c},shaderSource:V,hasMain:f}}let p=q(e.session.backend.glContext.version),r=`
    ${i.body}
    void main() {
      vec4 v1 = ${p.texture2D}(A, TexCoords);
      vec4 v2 = ${p.texture2D}(B, TexCoords);
      vec4 result = ${i.name}(v1, v2);
      ${p.output} = result;
    }
    `;return{name:i.name,inputNames:["A","B"],inputTypes:[c,c],output:{dims:t[0].dims,type:o,textureType:c},shaderSource:r,hasMain:!0}},sl=(e,t)=>[e.run(ct(e,t,dh()),t)],ul=(e,t)=>[e.run(ct(e,t,xh(),"bool"),t)],ll=(e,t)=>[e.run(ct(e,t,hh()),t)],fl=(e,t)=>[e.run(ct(e,t,gh(),"bool"),t)],cl=(e,t)=>[e.run(ct(e,t,yh(),"bool"),t)],pl=(e,t)=>[e.run(ct(e,t,Th(),"bool"),t)],dl=(e,t)=>[e.run(ct(e,t,mh()),t)],hl=(e,t)=>[e.run(ct(e,t,wh(),"bool"),t)],ml=(e,t)=>[e.run(ct(e,t,_h()),t)],bl=(e,t)=>[e.run(ct(e,t,Oh()),t)],gl=(e,t)=>[e.run(ct(e,t,bh()),t)],yl=(e,t)=>[e.run(ct(e,t,vh(),"bool"),t)]}),xl,wl,Ph,vl=E(()=>{fe(),xl=(e,t,i)=>(Ph(t),[e.cast(t[0],i)]),wl=e=>Ve.tensorDataTypeFromProto(e.attributes.getInt("to")),Ph=e=>{if(!e||e.length!==1)throw new Error("Cast requires 1 input.");if(e[0].type==="string")throw new Error("Invalid input type.")}}),Eh,Dh,_l,ro,Ol=E(()=>{xe(),ae(),kt(),gr(),Eh=(e,t)=>({name:"Concat (packed)",inputNames:Array.from({length:e},(i,o)=>`X${o}`),inputTypes:Array(e).fill(2),cacheHint:t}),Dh=(e,t,i,o)=>{let c=i[0].dims.slice();if(o>=c.length||o<-1*c.length)throw new Error("axis specified for concat doesn't match input dimensionality");o<0&&(o=c.length+o);let n=c.slice(0);for(let ve=1;ve<i.length;ve++){let St=i[ve].dims.slice();for(let Ye=0;Ye<c.length;Ye++)if(Ye===o)n[o]+=St[Ye];else if(c[Ye]!==St[Ye])throw new Error("non concat dimensions must match")}let a=n.length,f=Rr("coords",a),p=Je(a),r=Bt(),u=i.map(ve=>ve.dims),l=Ot(a),h=new Array(u.length-1);h[0]=u[0][o];for(let ve=1;ve<h.length;ve++)h[ve]=h[ve-1]+u[ve][o];let y=l[o],I=l.slice(-2),S=l.join(),A=`if (${y} < ${h[0]}) {
        return getChannel(
            getX0(${S}), vec2(${I.join()}));
        }`;for(let ve=1;ve<h.length;ve++){let St=h[ve-1];A+=`
            if (${y} < ${h[ve]}  && ${y} >= ${h[ve-1]}) {
              return getChannel(
                getX${ve}(${ro(l,y,St)}),
                vec2(${ro(I,y,St)}));
            }`}let V=h.length,N=h[h.length-1];A+=`
            return getChannel(
              getX${V}(${ro(l,y,N)}),
              vec2(${ro(I,y,N)}));`;let B=q(e.session.backend.glContext.version),te=`
          ${r}
          float getValue(${l.map(ve=>"int "+ve)}) {
            ${A}
          }

          void main() {
            ${p} coords = getOutputCoords();
            int lastDim = coords.${l[a-1]};
            coords.${l[a-1]} = coords.${l[a-2]};
            coords.${l[a-2]} = lastDim;

            vec4 result = vec4(getValue(${f}), 0., 0., 0.);

            ${f[a-1]} = ${f[a-1]} + 1;
            if (${f[a-1]} < ${n[a-1]}) {
              result.g = getValue(${f});
            }

            ${f[a-2]} = ${f[a-2]} + 1;
            if (${f[a-2]} < ${n[a-2]}) {
              result.a = getValue(${f});
            }

            ${f[a-1]} = ${f[a-1]} - 1;
            if (${f[a-2]} < ${n[a-2]} &&
                ${f[a-1]} < ${n[a-1]}) {
              result.b = getValue(${f});
            }
            ${B.output} = result;
          }
        `;return{...t,output:{dims:n,type:i[0].type,textureType:2},shaderSource:te,hasMain:!0}},_l=(e,t,i)=>{let o=Eh(t.length,i.cacheKey);return{...o,get:()=>Dh(e,o,t,i.axis)}},ro=(e,t,i)=>{let o=e.indexOf(t);return e.map((c,n)=>n===o?`${c} - ${i}`:c).join()}}),Il,Lh,Fh,Ch,Sl,$h,kh,Bh,Al,Nh,Pl=E(()=>{Ge(),ae(),Ol(),Il=(e,t,i)=>(Nh(t),e.session.pack&&t[0].dims.length>1?[e.run(_l(e,t,i),t)]:[e.run(Ch(e,t,i),t)]),Lh=(e,t)=>({name:"Concat",inputNames:Array.from({length:e},(i,o)=>`X${o}`),inputTypes:Array(e).fill(0),cacheHint:t}),Fh=(e,t,i,o)=>{let c=i[0].dims.slice();if(o>=c.length||o<-1*c.length)throw new Error("axis specified for concat doesn't match input dimensionality");o<0&&(o=c.length+o);let n=c.slice(0);for(let y=1;y<i.length;y++){let I=i[y].dims.slice();for(let S=0;S<c.length;S++)if(S===o)n[o]+=I[S];else if(c[S]!==I[S])throw new Error("non concat dimensions must match")}let a=n.length,f=new Array(i.length),p=0;for(let y=0;y<f.length;++y)p+=i[y].dims[o],f[y]=p;let r="";i.length<5?r=Sl(f):r=$h(f);let u=kh(i.length,a),l=Bh(f),h=`
        ${u}
        ${l}
        ${r}
        float process(int indices[${a}]) {
          int textureIndex = getTextureWhereDataResides (indices[${o}]);

          if(textureIndex != 0) {
            indices[${o}] = indices[${o}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return{...t,output:{dims:n,type:i[0].type,textureType:0},shaderSource:h}},Ch=(e,t,i)=>{let o=Lh(t.length,i.cacheKey);return{...o,get:()=>Fh(e,o,t,i.axis)}},Sl=e=>`int getTextureWhereDataResides(int index) {
      ${e.map((t,i)=>`if(index<${t}) {return ${i};}
`).join("")}
    }`,$h=e=>Sl(e),kh=(e,t)=>{let i=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${t}]) {`];for(let o=0;o<e;++o)o===0?i.push(`	if (textureIndex == ${o}) { return _X${o}(indices); }`):o===e-1?i.push(`	else { return _X${o}(indices); }`):i.push(`	else if (textureIndex == ${o}) { return _X${o}(indices); }`);return i.push("	}"),i.join(`
`)},Bh=e=>{let t=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let i=0;i<e.length;++i)i===0?t.push(`	if (index == ${i}) { return ${e[i]}; }`):i===e.length-1?t.push(`	else { return ${e[i]}; }`):t.push(`	else if (index == ${i}) { return ${e[i]}; }`);return t.push("	}"),t.join(`
`)},Al=e=>ee({axis:e.attributes.getInt("axis")}),Nh=e=>{if(!e||e.length<1)throw new Error("too few inputs");let t=e[0].type,i=e[0].dims.length;if(t==="string")throw new Error("string tensor is not supported yet");for(let o of e){if(o.type!==t)throw new Error("input tensors should be one type");if(o.dims.length!==i)throw new Error("input tensors should have the same shape")}}});function Rh(){return pt("abs")}function Mh(){return pt("acos")}function Gh(){return pt("asin")}function Uh(){return pt("atan")}function zh(){return pt("ceil")}function Vh(){return pt("cos")}function Wh(e){let t="elu";return{body:`
  const float alpha = float(${e});

  float ${t}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(${t}_(v.x), ${t}_(v.y), ${t}_(v.z), ${t}_(v.w));
  }
  `,name:t,type:0}}function Hh(){return pt("exp")}function qh(){return pt("floor")}function vi(e,t){let i="clip";return{body:`
  const float min = float(${e});
  const float max = float(${t});

  float ${i}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${i}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:i,type:0}}function jh(){let e="indentity";return{body:`
  float ${e}_(float a) {
    return a;
  }
  vec4 ${e}_(vec4 v) {
    return v;
  }
  `,name:e,type:0}}function Yh(e){let t="leakyRelu";return{body:`
  const float alpha = float(${e});

  float ${t}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(${t}_(v.x), ${t}_(v.y), ${t}_(v.z), ${t}_(v.w));
  }
  `,name:t,type:0}}function Xh(){return pt("log")}function Kh(){let e="neg";return{body:`
  float ${e}_(float a) {
    return -a;
  }
  vec4 ${e}_(vec4 v) {
    return -v;
  }
  `,name:e,type:0}}function Jh(){let e="not";return{body:`
  float ${e}_(float a) {
    return float( ! bool(a) );
  }
  bool ${e}_(bool a) {
    return !a;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${e}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:e,type:0}}function Zh(){return pt("sin")}function _i(){let e="relu";return{body:`
  float ${e}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${e}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:e,type:0}}function Oi(){let e="sigmoid";return{body:`
  float ${e}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${e}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:e,type:0}}function Qh(){return pt("sqrt")}function em(){return pt("tan")}function tm(){let e="tanh";return{body:`
  float ${e}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${e}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:e,type:0}}function pt(e){return{body:`
  float ${e}_(float a) {
    return ${e}(a);
  }
  vec4 ${e}_(vec4 v) {
    return ${e}(v);
  }
  `,name:e,type:0}}var rm,De,El,Dl,Ll,Fl,Ii,Cl,$l,nm,kl,Bl,Nl,Rl,Ml,Gl,Si,Ul,zl,Vl,Wl,Hl,ql,jl,Yl,Xl,Kl,Jl,Ai=E(()=>{Ge(),fe(),Ht(),xe(),ae(),rm=(e,t,i,o)=>{let c=e.session.pack?2:0,n=q(e.session.backend.glContext.version);return{...t,output:{dims:i.dims,type:i.type,textureType:c},shaderSource:`
     ${o.body}
     void main() {
       vec4 v = ${n.texture2D}(A, TexCoords);
       v = ${o.name}_(v);
       ${n.output} = v;
     }
     `,hasMain:!0}},De=(e,t,i,o)=>{let c=e.session.pack?2:0,n={name:i.name,inputTypes:[c],inputNames:["A"],cacheHint:o};return{...n,get:()=>rm(e,n,t,i)}},El=(e,t)=>[e.run(De(e,t[0],Rh()),t)],Dl=(e,t)=>[e.run(De(e,t[0],Mh()),t)],Ll=(e,t)=>[e.run(De(e,t[0],Gh()),t)],Fl=(e,t)=>[e.run(De(e,t[0],Uh()),t)],Ii=(e,t,i)=>[e.run(De(e,t[0],vi(i.min,i.max),i.cacheKey),t)],Cl=e=>ee({min:e.attributes.getFloat("min",hr),max:e.attributes.getFloat("max",mr)}),$l=(e,t)=>{let i=nm(e,t);return Ii(e,[t[0]],i)},nm=(e,t)=>{if(t.length>=3&&(!e.session.isInitializer(t[1].dataId)||!e.session.isInitializer(t[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let i=t.length>=3?t[1].numberData[0]:hr,o=t.length>=3?t[2].numberData[0]:mr;return ee({min:i,max:o})},kl=(e,t)=>[e.run(De(e,t[0],zh()),t)],Bl=(e,t)=>[e.run(De(e,t[0],Vh()),t)],Nl=(e,t,i)=>[e.run(De(e,t[0],Wh(i.alpha),i.cacheKey),t)],Rl=e=>ee({alpha:e.attributes.getFloat("alpha",1)}),Ml=(e,t)=>[e.run(De(e,t[0],Hh()),t)],Gl=(e,t)=>[e.run(De(e,t[0],qh()),t)],Si=(e,t)=>[e.run(De(e,t[0],jh()),t)],Ul=(e,t,i)=>[e.run(De(e,t[0],Yh(i.alpha),i.cacheKey),t)],zl=e=>ee({alpha:e.attributes.getFloat("alpha",.01)}),Vl=(e,t)=>[e.run(De(e,t[0],Xh()),t)],Wl=(e,t)=>[e.run(De(e,t[0],Kh()),t)],Hl=(e,t)=>[e.run(De(e,t[0],Jh()),t)],ql=(e,t)=>[e.run(De(e,t[0],_i()),t)],jl=(e,t)=>[e.run(De(e,t[0],Oi()),t)],Yl=(e,t)=>[e.run(De(e,t[0],Zh()),t)],Xl=(e,t)=>[e.run(De(e,t[0],Qh()),t)],Kl=(e,t)=>[e.run(De(e,t[0],em()),t)],Jl=(e,t)=>[e.run(De(e,t[0],tm()),t)]});function Nt(e){let t;switch(e.activation){case"Relu":t=_i();break;case"Sigmoid":t=Oi();break;case"Clip":t=vi(e.clipMin,e.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let i=t.name,o=t.body,c=`value = ${i}_(value);`;return{activationFunction:o,applyActivation:c}}var Mr,yr=E(()=>{fe(),Ai(),Mr=e=>{let t=e.getString("activation","");if(t==="Clip"){let[i,o]=e.getFloats("activation_params",[hr,mr]);return{activation:t,clipMax:o,clipMin:i,activationCacheKey:`${t}:${i},${o}`}}return{activation:t,activationCacheKey:t}}}),im,am,Zl,Ql=E(()=>{at(),xe(),ae(),no(),yr(),im=(e,t)=>({name:"GroupedConv",inputNames:e?["X","W","Bias"]:["X","W"],inputTypes:e?[0,0,0]:[0,0],cacheHint:t}),am=(e,t,i,o)=>{let c=t.length>2?"value += getBias(output_channel);":"",n=t[0].dims.slice(),a=t[1].dims.slice(),f=a[0]/o.group;ce.verbose("GroupedConv",`autpPad:${o.autoPad}, dilations:${o.dilations}, group:${o.group}, kernelShape:${o.kernelShape}, pads:${o.pads}, strides:${o.strides}`);let p=Gr(n,a,o.dilations,o.pads,o.strides),r=q(e.session.backend.glContext.version),{activationFunction:u,applyActivation:l}=Nt(o),h=`
  const ivec2 strides = ivec2(${o.strides[0]}, ${o.strides[1]});
  const ivec2 pads = ivec2(${o.pads[0]}, ${o.pads[1]});
  ${u}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${f};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${a[1]}; wInChannel++) {
      int input_channel = group_id * ${a[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${a[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${o.dilations[0]};

        if (xHeight < 0 || xHeight >= ${n[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${a[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${o.dilations[1]};
          if (xWidth < 0 || xWidth >= ${n[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${c}
    ${l}
    ${r.output} = vec4(value, .0, .0, .0);
  }
`;return{...i,output:{dims:p,type:t[0].type,textureType:0},shaderSource:h,hasMain:!0}},Zl=(e,t,i)=>{let o=im(t.length>2,i.cacheKey);return{...o,get:()=>am(e,t,o,i)}}}),sm,um,ef,tf=E(()=>{xe(),ae(),gr(),sm=e=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:e}),um=(e,t,i,o,c,n)=>{let a=i.dims,f=o.dims,p=2,r=3,u=c.length,l=[f[1]*f[2]*f[3],c[2]*c[3]],h=f[2]*f[3],y=Bt(),I=q(e.session.backend.glContext.version),S="";for(let V=0;V<=1;V++)for(let N=0;N<=1;N++)S+=`
            blockIndex = rc.x + ${N};
            pos = rc.y + ${V};

            if(blockIndex < ${l[1]} && pos < ${l[0]}) {
              offsetY = int(blockIndex / (${c[u-1]})) * ${n.strides[0]} -
                ${n.pads[0]};
              d0 = offsetY + ${n.dilations[0]} * (imod(pos, ${h}) / ${f[2]});

              if(d0 < ${a[p]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${c[u-1]}) * ${n.strides[1]} -
                  ${n.pads[1]};
                d1 = offsetX + ${n.dilations[1]} * imod(imod(pos, ${h}), ${f[2]});

                if(d1 < ${a[r]} && d1 >= 0) {

                  ch = int(float(pos)/ ${h}.);
                    innerDims = vec2(d0, d1);
                    result[${V*2+N}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let A=`
      ${y}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${S}
          ${I.output} = result;
      }
            `;return{...t,output:{dims:l,type:i.type,textureType:2},shaderSource:A,hasMain:!0}},ef=(e,t,i,o,c)=>{let n=sm(c.cacheKey);return{...n,get:()=>um(e,n,t,i,o,c)}}});function fm(e,t,i){let o=t[0].dims,c=t[1].dims,n=Ke.calcShape(o,c,!0);if(!n)throw new Error("Can't use matmul on the given tensors");let a=Je(n.length),f=Ot(),{activationFunction:p,applyActivation:r}=Nt(i),u=t.length>2,l=u?"value += getBiasForMatmul();":"",h=u?`${Ei(a,f,t[2].dims,n,!1)}`:"",y=n.length,I=o.length,S=c.length,A=o[o.length-1],V=`
    ${p}
    ${h}
    float process(int indices[${y}]) {
        int a[${I}];
        int b[${S}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${A}; ++k) {
            a[${I-1}] = k;
            b[${S-2}] = k;
            value += _A(a) * _B(b);
        }
        ${l}
        ${r}
        return value;
    }`;return{...e,output:{dims:n,type:t[0].type,textureType:0},shaderSource:V}}function Pi(e,t){let i=lm(e.length>2,t.activationCacheKey);return{...i,get:()=>fm(i,e,t)}}function Ei(e,t,i,o,c){let n="",a=i.length,f=o.length,p=f-a;f<2&&a>0?n="coords":n=i.map((h,y)=>`coords.${t[y+p]}`).join(", ");let r=Ke.getBroadcastDims(i,o).map(h=>`coords.${t[h+p]} = 0;`).join(`
`),u=U.size(i)===1,l="vec4(outputValue.xx, outputValue.yy)";return u&&(l="vec4(outputValue.x)"),c?`
vec4 getBiasForMatmul() {
  ${e} coords = getOutputCoords();
  ${r}
  vec4 outputValue = getBias(${n});
  return ${l};
}`:`
float getBiasForMatmul() {
  ${e} coords = getOutputCoords();
  ${r}
  return getBias(coords.x);
}`}var rf,nf,lm,cm,oo=E(()=>{fe(),ae(),kt(),yr(),Di(),rf=(e,t,i)=>(cm(t),e.session.pack?[e.run(io(e,t,i),t)]:[e.run(Pi(t,i),t)]),nf=e=>Mr(e.attributes),lm=(e,t)=>({name:"MatMul",inputNames:e?["A","B","Bias"]:["A","B"],inputTypes:e?[0,0,0]:[0,0],cacheHint:t}),cm=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.");if(e[0].type!=="float32"&&e[0].type!=="float64"||e[1].type!=="float32"&&e[1].type!=="float64")throw new Error("inputs should be float type");if(e[0].type!==e[1].type)throw new Error("inputs types should match")}});function hm(e,t,i,o){let c=[],n=[],a=i[0].dims,f=i[1].dims,p=a.length,r=f.length,u=o.length,l=u-p,h=u-r;c=a.map((N,B)=>`coords.${t[B+l]}`),c[p-1]="i*2",c.join(", "),n=f.map((N,B)=>`coords.${t[B+h]}`),n[r-2]="i*2",n.join(", ");let y=Ke.getBroadcastDims(a,o),I=Ke.getBroadcastDims(f,o),S=y.map(N=>`coords.${t[N+l]} = 0;`).join(`
`),A=I.map(N=>`coords.${t[N+h]} = 0;`).join(`
`),V=`int lastDim = coords.${t[u-1]};
  coords.${t[u-1]} = coords.${t[u-2]};
  coords.${t[u-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${e} coords = getOutputCoords();
  ${V}
  ${S}
  vec4 outputValue = getA(${c});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${e} coords = getOutputCoords();
  ${V}
  ${A}
  vec4 outputValue = getB(${n});
  return outputValue;
}`}function mm(e,t){let i="";for(let o=0;o<t-2;o++)i+=`rc.${e[o]}, `;return i+=`rc.${e[t-2]}, i*2`,i}function bm(e,t){let i="";for(let o=0;o<t-2;o++)i+=`rc.${e[o]}, `;return i+=`i*2, rc.${e[t-1]}`,i}var pm,dm,io,Di=E(()=>{fe(),xe(),ae(),kt(),yr(),oo(),pm=(e,t)=>({name:"MatMul (packed)",inputNames:e?["A","B","Bias"]:["A","B"],inputTypes:e?[2,2,2]:[2,2],cacheHint:t}),dm=(e,t,i,o)=>{let c=i.length>2,n=c?"value += getBiasForMatmul();":"",a=i[0].dims,f=i[1].dims,p=Ke.calcShape(a,f,!0),r=!U.areEqual(i[0].dims,i[1].dims);if(!p)throw new Error("Can't use matmul on the given tensors");let u=a[a.length-1],l=Math.ceil(u/2),h=a.length,y=f.length,I=q(e.session.backend.glContext.version),S=Je(p.length),A=p.length,V=Ot(),{activationFunction:N,applyActivation:B}=Nt(o),te=c?`${Ei(S,V,i[2].dims,p,!0)}`:"",ve=r?`${hm(S,V,i,p)}`:"",St=r?"getAAtOutCoordsMatmul(i)":`getA(${mm(V,h)})`,Ye=r?"getBAtOutCoordsMatmul(i)":`getB(${bm(V,y)})`,et=r?"":`${S} rc =
          getOutputCoords(); int lastDim = rc.${V[A-1]}; rc.${V[A-1]} =
          rc.${V[A-2]}; rc.${V[A-2]} = lastDim;
      `,pe=`
            ${ve}
            ${te}
            ${N}
            void main() {
              ${et}

              vec4 value = vec4(0);
              for (int i = 0; i < ${l}; i++) {
                vec4 a = ${St};
                vec4 b = ${Ye};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${n}
              ${B}
              ${I.output} = value;
            }`;return{...t,output:{dims:p,type:i[0].type,textureType:2},shaderSource:pe,hasMain:!0}},io=(e,t,i)=>{let o=pm(t.length>2,i.activationCacheKey);return{...o,get:()=>dm(e,o,t,i)}}}),of,af=E(()=>{no(),tf(),Di(),of=(e,t,i)=>{let o=t[0].dims,c=t[1].dims,n=Gr(o,c,i.dilations,i.pads,i.strides),a=e.run(ef(e,t[0],t[1],n,i),[t[0]]),f=e.reshapePacked(t[1],[c[0],c[1]*c[2]*c[3]]),p=t.length===3?[f,a,t[2]]:[f,a],r=e.run(io(e,p,i),p);return e.reshapePacked(r,n)}}),gm,ym,sf,Li,Fi=E(()=>{ae(),gm=e=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:e}),ym=(e,t,i,o,c,n)=>{let a=i.dims,f=o.dims,p=c.length,r=Li(a,f,c,4),u=`
        const int XC = ${a[1]};
        const int XH = ${a[2]};
        const int XW = ${a[3]};
        const int KH = ${n.kernelShape[0]};
        const int KW = ${n.kernelShape[1]};
        const int dilationH = ${n.dilations[0]};
        const int dilationW = ${n.dilations[1]};
        const int strideH = ${n.strides[0]};
        const int strideW = ${n.strides[1]};
        const int padH = ${n.pads[0]};
        const int padW = ${n.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${p}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${a.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return{...t,output:{dims:r,type:i.type,textureType:4},shaderSource:u}},sf=(e,t,i,o,c)=>{let n=gm(c.cacheKey);return{...n,get:()=>ym(e,n,t,i,o,c)}},Li=(e,t,i,o=4)=>[i[0],i[2],i[3],Math.ceil(e[1]*t[2]*t[3]/o)]}),Tm,xm,uf,lf=E(()=>{fe(),xe(),ae(),yr(),Fi(),Tm=(e,t)=>({name:"ConvDotProduct",inputNames:e?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:e?[0,4,0]:[0,4],cacheKey:t.activationCacheKey}),xm=(e,t,i,o,c)=>{let n=i[0].dims,a=i[1].dims,f=[a[0],Math.ceil(n[1]*a[2]*a[3]/4)],p=Li(n,a,o),[r,u]=e.calculateTextureWidthAndHeight(f,4),l=U.computeStrides(p),[h,y]=e.calculateTextureWidthAndHeight(p,4),I=o.length,S=i.length<3?"0.0":"_B(b)",A=Math.ceil(n[1]*a[2]*a[3]/4),{activationFunction:V,applyActivation:N}=Nt(c),B=q(e.session.backend.glContext.version),te=`
${V}
float process(int indices[${I}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${l[0]} + im2col[1] * ${l[1]} + im2col[2] * ${l[2]};
  int kernelOffset = indices[1] * ${f[1]};
  float value = ${S};
  for (int i = 0; i < ${A}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${h}, ${y});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${r}, ${u});
    value += dot(${B.texture2D}(Im2Col, im2colCoords), ${B.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${N}
  return value;
}`;return{...t,output:{dims:o,type:i[0].type,textureType:0},shaderSource:te}},uf=(e,t,i,o)=>{let c=Tm(t.length>2,o);return{...c,get:()=>xm(e,c,t,i,o)}}}),Gr,Ci,wm,vm,_m,Om,$i,Im,no=E(()=>{Ge(),fe(),Ql(),af(),lf(),yr(),Fi(),oo(),Gr=(e,t,i,o,c)=>{let n=e[0],a=e.slice(2),f=a.length,p=t[0],r=t.slice(2).map((l,h)=>l+(l-1)*(i[h]-1)),u=a.map((l,h)=>l+o[h]+o[h+f]).map((l,h)=>Math.floor((l-r[h]+c[h])/c[h]));return[n,p].concat(...u)},Ci=(e,t,i)=>(Im(t,i),wm(e,t,i)),wm=(e,t,i)=>{let o=Om(i,t),c=e.session.pack,n=o.kernelShape[0]===1&&o.kernelShape[1]===1;return o.group>1?[e.run(Zl(e,t,o),t)]:n&&c?[vm(e,t,o)]:c&&t[0].dims.length===4&&t[0].dims[0]===1&&!n?[of(e,t,o)]:[_m(e,t,o)]},vm=(e,t,i)=>{let o=t[0].dims,c=t[1].dims,n=Gr(o,c,i.dilations,i.pads,i.strides),a=e.reshapeUnpacked(t[0],[o[1],o[2]*o[3]]),f=e.reshapeUnpacked(t[1],[c[0],c[1]]),p=t.length>2?[f,a,t[2]]:[f,a],r=e.run(Pi(p,i),p);return e.reshapeUnpacked(r,n)},_m=(e,t,i)=>{let o=t[0].dims,c=t[1].dims,n=Gr(o,c,i.dilations,i.pads,i.strides),a=e.run(sf(e,t[0],t[1],n,i),[t[0]]),f=t.length===3?[a,t[1],t[2]]:[a,t[1]];return e.run(uf(e,t,n,i),f)},Om=(e,t)=>{let i=e.kernelShape.slice();if(e.kernelShape.length===0)for(let n=2;n<t[1].dims.length;++n)i.push(t[1].dims[n]);let o=e.pads.slice();dr.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,i,o,e.autoPad);let c=Object.assign({},e);return Object.assign(c,{kernelShape:i,pads:o,cacheKey:e.cacheKey}),c},$i=e=>{let t=e.attributes,i=Mr(t),o=t.getString("auto_pad","NOTSET"),c=t.getInts("dilations",[1,1]),n=t.getInt("group",1),a=t.getInts("kernel_shape",[]),f=t.getInts("pads",[0,0,0,0]),p=t.getInts("strides",[1,1]);return ee({autoPad:o,dilations:c,group:n,kernelShape:a,pads:f,strides:p,...i})},Im=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4||e[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let i=e[0].dims[1],o=e[1].dims[1]*t.group;if(i!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let c=e[0].dims.length-2;if(t.dilations.length!==c)throw new Error(`dilations should be ${c}D`);if(t.strides.length!==c)throw new Error(`strides should be ${c}D`);if(t.pads.length!==c*2)throw new Error(`pads should be ${c*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(e[0].type!=="float32"||e[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(e.length===3&&e[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}}),Sm,Am,Pm,ff,Em,Dm,Lm,Fm,Cm,$m,cf,km,pf=E(()=>{Ge(),xe(),ae(),yr(),Sm=(e,t,i,o,c,n)=>(e-1)*t+i+(o-1)*c+1-n,Am=(e,t,i,o,c)=>{let n=Math.floor(e/2);t==="SAME_UPPER"?(i[o]=n,i[c]=e-n):t==="SAME_LOWER"&&(i[o]=e-n,i[c]=n)},Pm=(e,t,i,o,c,n,a,f)=>{let p=e.length-2,r=f.length===0;for(let u=0;u<p;++u){let l=r?e[u+2]*n[u]:f[u],h=Sm(e[u+2],n[u],c[u],t[u],i[u],l);Am(h,o,c,u,u+p),r&&f.push(n[u]*(e[u+2]-1)+a[u]+(t[u]-1)*i[u]+1-c[u]-c[u+p])}},ff=(e,t,i)=>(km(t,i),Em(e,t,i)),Em=(e,t,i)=>{let o=$m(i,t);return[Cm(e,t,o)]},Dm=(e,t)=>({name:"ConvTranspose",inputNames:e?["X","W","B"]:["X","W"],inputTypes:e?[0,0,0]:[0,0],cacheHint:t}),Lm=(e,t,i,o)=>{let c=t.length>2?"getB(output_channel)":"0.0",n=t[0].dims,a=t[1].dims,f=a[1],p=a[0]/o.group,r=[t[0].dims[0],t[1].dims[1]*o.group,...o.outputShape],u=q(e.session.backend.glContext.version),{activationFunction:l,applyActivation:h}=Nt(o),y=`
  const ivec2 strides = ivec2(${o.strides[0]}, ${o.strides[1]});
  const ivec2 pads = ivec2(${o.pads[0]}, ${o.pads[1]});
  ${l}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${f};
    int wOutChannel = output_channel - group_id * ${f};

    float value = ${c};
    for (int inChannelOffset = 0; inChannelOffset < ${p}; inChannelOffset++) {
      int input_channel = group_id * ${p} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${a[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${a[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${o.dilations[0]}, wHOff * ${o.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${n[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${n[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${h}
    ${u.output} = vec4(value, .0, .0, .0);
  }
`;return{...i,output:{dims:r,type:t[0].type,textureType:0},shaderSource:y,hasMain:!0}},Fm=(e,t,i)=>{let o=Dm(t.length>2,i.cacheKey);return{...o,get:()=>Lm(e,t,o,i)}},Cm=(e,t,i)=>e.run(Fm(e,t,i),t),$m=(e,t)=>{let i=e.kernelShape.slice();if(e.kernelShape.length===0)for(let f=2;f<t[1].dims.length;++f)i.push(t[1].dims[f]);let o=e.pads.slice(),c=e.outputShape.slice(),n=t[0].dims;Pm(n,i,e.dilations,e.autoPad,o,e.strides,e.outputPadding,c);let a=Object.assign({},e);return Object.assign(a,{kernelShape:i,pads:o,outputShape:c,cacheKey:e.cacheKey}),a},cf=e=>{let t=e.attributes,i=Mr(t),o=t.getString("auto_pad","NOTSET"),c=t.getInts("dilations",[1,1]),n=t.getInt("group",1),a=t.getInts("kernel_shape",[]),f=t.getInts("output_padding",[0,0]),p=t.getInts("output_shape",[]),r=t.getInts("pads",[0,0,0,0]),u=t.getInts("strides",[1,1]);return ee({autoPad:o,dilations:c,group:n,kernelShape:a,outputPadding:f,outputShape:p,pads:r,strides:u,...i})},km=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4||e[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let i=e[0].dims[1],o=e[1].dims[0];if(i!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let c=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==c))throw new Error("invalid bias");let n=e[0].dims.length-2;if(t.dilations.length!==n)throw new Error(`dilations should be ${n}D`);if(t.strides.length!==n)throw new Error(`strides should be ${n}D`);if(t.pads.length!==n*2)throw new Error(`pads should be ${n*2}D`);if(t.outputPadding.length!==n)throw new Error(`output_padding should be ${n}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape");if(e[0].type!=="float32"||e[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(e.length===3&&e[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}}),df,Tr,hf,Bm,mf,Nm,Rm,Mm,ao=E(()=>{Ge(),fe(),ae(),df={name:"Transpose",inputNames:["A"],inputTypes:[0]},Tr=(e,t,i)=>(Mm(t),[e.run({...df,cacheHint:i.cacheKey,get:()=>Bm(e,t[0],i.perm)},t)]),hf=e=>ee({perm:e.attributes.getInts("perm",[])}),Bm=(e,t,i)=>{let o=t.dims;i=mf(o,i);let c=Nm(o,i),n=o.length,a=`
      ${Rm("perm",i,n)}
      float process(int indices[${n}]) {
        int a[${n}];
        perm(a, indices);
        return _A(a);
      }`;return{...df,output:{dims:c,type:t.type,textureType:0},shaderSource:a}},mf=(e,t)=>(t&&t.length!==e.length&&(t=[...e.keys()].reverse()),t),Nm=(e,t)=>(t=mf(e,t),U.sortBasedOnPerm(e,t)),Rm=(e,t,i)=>{let o=[];o.push(`void ${e}(out int a[${i}], int src[${i}]) {`);for(let c=0;c<i;++c)o.push(`	a[${t[c]}]=src[${c}];`);return o.push("	}"),o.join(`
`)},Mm=e=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("input should be float tensor")}}),bf,gf,Gm,yf=E(()=>{ao(),bf=(e,t,i)=>{Gm(t);let o=i.blocksize,c=o*o,n=i.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],a=i.mode==="DCR"?[t[0].dims[0],o,o,t[0].dims[1]/c,t[0].dims[2],t[0].dims[3]]:[t[0].dims[0],t[0].dims[1]/c,o,o,t[0].dims[2],t[0].dims[3]],f=e.reshapeUnpacked(t[0],a),p={perm:n,cacheKey:`${n}`},[r]=Tr(e,[f],p),u=[t[0].dims[0],t[0].dims[1]/c,t[0].dims[2]*o,t[0].dims[3]*o];return[e.reshapeUnpacked(r,u)]},gf=e=>{let t=e.attributes.getInt("blocksize");if(t<1)throw new Error(`blocksize must be >= 1, but got : ${t} for DepthToSpace`);let i=e.attributes.getString("mode","DCR");if(i!=="DCR"&&i!=="CRD")throw new Error(`unrecognized mode: ${i} for DepthToSpace`);return{mode:i,blocksize:t}},Gm=e=>{if(e.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${e.length}`);if(e[0].type==="string"||e[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),Tf,xf,Um,wf=E(()=>{fe(),Tf=(e,t,i)=>{Um(t,i);let o=U.flattenShape(t[0].dims,i);return[e.reshapeUnpacked(t[0],o)]},xf=e=>e.attributes.getInt("axis",1),Um=(e,t)=>{if(!e||e.length!==1)throw new Error("Flatten requires 1 input.");let i=e[0].dims.length;if(i===0)throw new Error("scalar tensor is not supported.");if(t<-i||t>i)throw new Error("Invalid axis");if(e[0].type==="string")throw new Error("string tensor is not supported.")}}),Jt,hn=E(()=>{Jt=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),vf,_f,zm,Vm,Wm,Hm,Of=E(()=>{Ge(),hn(),fe(),ae(),vf=(e,t,i)=>(Hm(t,i.axis),[e.run(Wm(e,t,i),t)]),_f=e=>ee({axis:e.attributes.getInt("axis",0)}),zm={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},Vm=(e,t,i,o)=>{let c=i[0].dims.slice(),n=i[1].dims.slice(),a=new Array(c.length+n.length-1);o=U.normalizeAxis(o,c.length);let f=[];for(let h=0;h<a.length;h++)h<o?(a[h]=c[h],f.push(`inputIdx[${h}] = outputIdx[${h}];`)):h<o+n.length?(a[h]=n[h-o],f.push(`indexDataIdx[${h-o}] = outputIdx[${h}];`)):(a[h]=c[h-n.length+1],f.push(`inputIdx[${h-n.length+1}] = outputIdx[${h}];`));let p=a.length||1,r=c.length,u=n.length||1,l=`
      float process(int outputIdx[${p}]) {
        int inputIdx[${r}];
        int indexDataIdx[${u}];
        indexDataIdx[0] = 0;
        ${f.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${o}] = idx < 0 ? idx + ${c[o]} : idx;
        return _A(inputIdx);
      }`;return{...t,output:{dims:a,type:i[0].type,textureType:0},shaderSource:l}},Wm=(e,t,i)=>{let o={...zm,cacheHint:i.cacheKey};return{...o,get:()=>Vm(e,o,t,i.axis)}},Hm=(e,t)=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.");let i=e[0].dims.length;if(i<1)throw new Error("Invalid input shape.");if(t<-i||t>i-1)throw new Error("Invalid axis.");if(Jt.indexOf(e[0].type)===-1)throw new Error("Invaid input type.");if(e[1].type!=="int32"&&e[1].type!=="int16")throw new Error("Invaid input type.")}}),ki,If,Sf,Af,qm,jm,Ym,Pf=E(()=>{Ge(),fe(),ae(),ki=(e,t,i)=>(Ym(t,i),[e.run(qm(t,i),t)]),If=(e,t)=>{let i=e.attributes.getInt("transA",0)!==0,o=e.attributes.getInt("transB",0)!==0,c=e.attributes.getFloat("alpha",1),n=e.attributes.getFloat("beta",1);return ee({transA:i,transB:o,alpha:c,beta:n,isOptionalC:t})},Sf=e=>If(e,!1),Af=e=>If(e,!0),qm=(e,t)=>{let i={name:"Gemm",inputNames:e.length===3?["A","B","C"]:["A","B"],inputTypes:e.length===3?[0,0,0]:[0,0],key:t.cacheKey};return{...i,get:()=>jm(i,e,t)}},jm=(e,t,i)=>{let o=t[0].dims.slice(),c=t[1].dims.slice(),[n,a]=Xn.getShapeOfGemmResult(o,i.transA,c,i.transB,t.length===3?t[2].dims:void 0),f=[n,a];if(!f)throw new Error("Can't use gemm on the given tensors");let p=o[o.length-1],r="";i.transA&&(p=o[0]),i.transA&&i.transB?r="value += _A_T(a) * _B_T(b);":i.transA&&!i.transB?r="value += _A_T(a) * _B(b);":!i.transA&&i.transB?r="value += _A(a) * _B_T(b);":!i.transA&&!i.transB&&(r="value += _A(a) * _B(b);");let u=f.length,l=t.length===3?`int c[${t[2].dims.length}];`:"",h=t.length===3?"bcastIndices_C(indices, c);":"",y=t.length===3?"value += beta * _C(c);":"",I=`
      float process(int indices[${u}]) {
          int a[${u}];
          int b[${u}];
          ${l}

          copyVec(indices, a);
          copyVec(indices, b);
          ${h}

          float value = 0.0;
          for (int k=0; k<${p}; ++k) {
              a[${u-1}] = k;
              b[${u-2}] = k;
              ${r}
          }

          value = value * alpha;
          ${y}
          return value;
      }`;return{...e,output:{dims:f,type:t[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:i.alpha},{name:"beta",type:"float",data:i.beta}],shaderSource:I}},Ym=(e,t)=>{if(!e)throw new Error("Input is missing");if(t.isOptionalC&&(e.length<2||e.length>3))throw new Error("Invaid input shape.");if(!t.isOptionalC&&e.length!==3)throw new Error("Gemm requires 3 inputs");if(e.length===3&&e[2].dims.length!==1&&e[2].dims.length!==2)throw new Error("Invalid input shape of C");if(e[0].type!=="float32"&&e[0].type!=="float64"||e[1].type!=="float32"&&e[1].type!=="float64"||e.length===3&&e[2].type!=="float32"&&e[2].type!=="float64")throw new Error("Invalid input type.");if(e[0].type!==e[1].type||e.length===3&&e[0].type!==e[2].type)throw new Error("Input types are mismatched")}}),Ef,Df,Xm,Km,Jm,Zm,Qm,Lf=E(()=>{Ge(),ae(),Ef=(e,t,i)=>(Qm(t),[e.run(Jm(e,t,i),t)]),Df=e=>{let t=e.attributes.getFloat("scale"),i=e.attributes.getFloats("bias");return ee({scale:t,bias:i})},Xm={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},Km=(e,t,i,o)=>{let c=i[0].dims.slice(),n=c.length,a=`
      ${Zm(o.bias.length)}
      float process(int indices[${n}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return{...t,output:{dims:c,type:i[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:o.bias.length,data:o.bias},{name:"scale",type:"float",data:o.scale}],shaderSource:a}},Jm=(e,t,i)=>{let o={...Xm,cacheHint:i.cacheKey};return{...o,get:()=>Km(e,o,t,i)}},Zm=e=>{let t=[`float getBias(float bias[${e}], int channel) {`];for(let i=0;i<e;++i)i===0?t.push(`	if (channel == ${i}) { return bias[${i}]; }`):i===e-1?t.push(`	else { return bias[${i}]; }`):t.push(`	else if (channel == ${i}) { return bias[${i}]; }`);return t.push("	}"),t.join(`
`)},Qm=e=>{if(!e||e.length!==1)throw new Error("ImageScaler requires 1 input.");if(e[0].dims.length!==4)throw new Error("Invalid input shape.");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type.")}}),Cf,$f,Ff,eb,tb,rb,nb,ob,ib,kf=E(()=>{xe(),ae(),Cf=(e,t,i)=>{ib(t);let o=e.run(tb(t[0]),t);return[e.run(ob(e,t[0],i,o.dims),[t[0],o,t[1],t[2]])]},$f=e=>e.attributes.getFloat("epsilon",1e-5),Ff={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},eb=(e,t)=>{let i=t.dims.slice(),o=i[1],c=i[2]*i[3],n=[i[0],o],a=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${i[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${i[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${c});
        temp = 0.0;
        for(int a2=0; a2<${i[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${i[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${c});

        return v;
      }`;return{...e,output:{dims:n,type:t.type,textureType:4},shaderSource:a}},tb=e=>({...Ff,get:()=>eb(Ff,e)}),rb={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},nb=(e,t,i,o,c)=>{let n=q(e.session.backend.glContext.version),[a,f]=e.calculateTextureWidthAndHeight(c,4),[p,r]=[a/4,f],u=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${p}, ${r});
        return ${n.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return{...t,output:{dims:i.dims,type:i.type,textureType:0},variables:[{name:"epsilon",type:"float",data:o}],shaderSource:u}},ob=(e,t,i,o)=>{let c={...rb,cacheHint:`${i}`};return{...c,get:()=>nb(e,c,t,i,o)}},ib=e=>{if(!e||e.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let t=e[0],i=e[1],o=e[2];if(t.dims.length<3||i.dims.length!==1||o.dims.length!==1)throw new Error("Invalid input shape.");if(i.dims[0]!==t.dims[1]||o.dims[0]!==t.dims[1])throw new Error("Input shapes are mismatched.");if(t.type!=="float32"&&t.type!=="float64"||i.type!=="float32"&&i.type!=="float64"||o.type!=="float32"&&o.type!=="float64")throw new Error("Invalid input type.");if(e[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function ab(e,t){let i=e[0].dims[1],o=e[0].dims.length,c=-Math.floor((t.size-1)/2),n=Math.ceil((t.size-1)/2),a=`float(${t.alpha}) / float(${t.size})`,f=`float(${t.bias})`,p=`float(${t.beta})`,r=`
    float process(int indices[${o}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${c}; i <= ${n}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${i}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${f} + ${a} * square_sum, ${p});
    }`;return{...Rf,cacheHint:t.cacheKey,output:{dims:e[0].dims,type:e[0].type,textureType:0},shaderSource:r}}function sb(e,t){return{...Rf,cacheHint:t.cacheKey,get:()=>ab(e,t)}}var Bf,Nf,Rf,ub,Mf=E(()=>{Ge(),ae(),Bf=(e,t,i)=>(ub(t),[e.run(sb(t,i),t)]),Nf=e=>{let t=e.attributes.getFloat("alpha",1e-4),i=e.attributes.getFloat("beta",.75),o=e.attributes.getFloat("bias",1),c=e.attributes.getInt("size");return ee({alpha:t,beta:i,bias:o,size:c})},Rf={name:"LRN",inputNames:["X"],inputTypes:[0]},ub=e=>{if(!e||e.length!==1)throw new Error("LRN requires 1 input.");if(e[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(e[0].type!=="float32")throw new Error("input should be float type")}}),lb,Bi,Gf,Uf,zf,fb,cb,pb,db,hb,mb,bb,gb,Vf=E(()=>{Ge(),fe(),xe(),ae(),lb={name:"Pad",inputNames:["A"],inputTypes:[0]},Bi=(e,t,i)=>(pb(t),[e.run({...lb,cacheHint:i.cacheKey,get:()=>cb(e,t[0],i)},t)]),Gf=e=>{let t=e.attributes.getString("mode","constant"),i=e.attributes.getFloat("value",0),o=e.attributes.getInts("pads");return ee({mode:t,value:i,pads:o})},Uf=(e,t,i)=>{db(t);let o=fb(e,t,i);return Bi(e,[t[0]],o)},zf=e=>e.attributes.getString("mode","constant"),fb=(e,t,i)=>{if(!e.session.isInitializer(t[1].dataId)||t.length>=3&&!e.session.isInitializer(t[2].dataId))throw new Error("dynamic pad attributes are not allowed");let o=Array.from(t[1].integerData),c=t.length>=3?t[2].floatData[0]:0;return ee({mode:i,pads:o,value:c})},cb=(e,t,i)=>{let o=U.padShape(t.dims.slice(),i.pads),c=o.length,n=`
      ${hb(e,t,i)}
      float process(int[${c}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:o,type:t.type,textureType:0},shaderSource:n}},pb=e=>{if(!e||e.length!==1)throw new Error("Pad requires 1 input");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type.")},db=e=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(e[1].type!=="int32")throw new Error("Invalid input type.");if(e.length>=3&&e[2].type==="string")throw new Error("Invalid input type.")},hb=(e,t,i)=>{let o=q(e.session.backend.glContext.version),[c,n]=e.calculateTextureWidthAndHeight(t.dims,0),a=U.computeStrides(t.dims);switch(i.mode){case"constant":return mb(o,t.dims,a,c,n,i.pads,i.value);case"reflect":return bb(o,t.dims,a,c,n,i.pads);case"edge":return gb(o,t.dims,a,c,n,i.pads);default:throw new Error("Invalid mode")}},mb=(e,t,i,o,c,n,a)=>{let f=t.length,p="";for(let r=f-1;r>=0;--r)p+=`
        k = m[${r}] - ${n[r]};
        if (k < 0)  return constant;
        if (k >= ${t[r]}) return constant;
        offset += k * ${i[r]};
        `;return`
      float padA(int m[${f}]) {
        const float constant = float(${a});
        int offset = 0;
        int k = 0;
        ${p}
        vec2 coords = offsetToCoords(offset, ${o}, ${c});
        float value = getColorAsFloat(${e.texture2D}(A, coords));
        return value;
      }
      `},bb=(e,t,i,o,c,n)=>{let a=t.length,f="";for(let p=a-1;p>=0;--p)f+=`
        k = m[${p}] - ${n[p]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(t[p]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${t[p]}) { k = _2n_1 - k; }
        }
        offset += k * ${i[p]};
        `;return`
      float padA(int m[${a}]) {
        int offset = 0;
        int k = 0;
        ${f}
        vec2 coords = offsetToCoords(offset, ${o}, ${c});
        float value = getColorAsFloat(${e.texture2D}(A, coords));
        return value;
      }
      `},gb=(e,t,i,o,c,n)=>{let a=t.length,f="";for(let p=a-1;p>=0;--p)f+=`
        k = m[${p}] - ${n[p]};
        if (k < 0)  k = 0;
        if (k >= ${t[p]}) k = ${t[p]-1};
        offset += k * ${i[p]};
      `;return`
      float padA(int m[${a}]) {
        int offset = 0;
        int k = 0;
        ${f}
        vec2 coords = offsetToCoords(offset, ${o}, ${c});
        float value = getColorAsFloat(${e.texture2D}(A, coords));
        return value;
      }
      `}}),Hf,qf,jf,Yf,Xf,Kf,Jf,Zf,Qf,yb,Wf,ec,uo,tc,so,Tb,rc=E(()=>{Ge(),fe(),ae(),Hf=(e,t,i)=>{uo(t);let o={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:i.cacheKey};return[e.run({...o,get:()=>jf(t,o,!1,i)},t)]},qf=e=>{let t=e.attributes.getString("auto_pad","NOTSET"),i=e.attributes.getInt("ceil_mode",0),o=e.attributes.getInt("count_include_pad",0)!==0,c=e.attributes.getInts("kernel_shape"),n=e.attributes.getInts("strides",[]),a=e.attributes.getInts("pads",[]);if(i!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return ee({autoPad:t,ceilMode:i,countIncludePad:o,kernelShape:c,strides:n,pads:a})},jf=(e,t,i,o)=>{let[c,n]=Qf(e,o,i),a=U.size(c.kernelShape),f="value += _X(x);",p="";c.countIncludePad?p+=`value /= float(${a});`:p+=`value /= float(${a} - pad);`;let r=`
        ${tc(e[0].dims,c,f,p,"0.0")}
      `;return{...t,output:{dims:n,type:e[0].type,textureType:0},shaderSource:r}},Yf=(e,t,i)=>{uo(t);let o={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${i.countIncludePad}`};return[e.run({...o,get:()=>jf(t,o,!0,i)},t)]},Xf=e=>{let t=e.attributes.getInt("count_include_pad",0)!==0;return ee({autoPad:"",ceilMode:0,countIncludePad:t,kernelShape:[],strides:[],pads:[]})},Kf=(e,t,i)=>{uo(t);let o={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:i.cacheKey};return[e.run({...o,get:()=>Zf(t,o,!1,i)},t)]},Jf=e=>{let t=e.attributes.getString("auto_pad","NOTSET"),i=e.attributes.getInt("ceil_mode",0),o=e.attributes.getInts("kernel_shape"),c=e.attributes.getInts("strides",[]),n=e.attributes.getInts("pads",[]),a=e.attributes.getInt("storage_order",0),f=e.attributes.getInts("dilations",[]);if(a!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(i!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return ee({autoPad:t,ceilMode:i,countIncludePad:!1,kernelShape:o,strides:c,pads:n,storageOrder:a,dilations:f})},Zf=(e,t,i,o)=>{let[c,n]=Qf(e,o,i),a=`
      value = max(_X(x), value);
    `,f="",p=`
      ${tc(e[0].dims,c,a,f,"-1e5")}
    `;return{...t,output:{dims:n,type:e[0].type,textureType:0},shaderSource:p}},Qf=(e,t,i)=>{let o=e[0].dims.slice(),c=Object.hasOwnProperty.call(t,"dilations"),n=t.kernelShape.slice(),a=t.strides.slice(),f=c?t.dilations.slice():[],p=t.pads.slice();dr.adjustPoolAttributes(i,o,n,a,f,p);let r=dr.computePoolOutputShape(i,o,a,f,n,p,t.autoPad),u=Object.assign({},t);return c?Object.assign(u,{kernelShape:n,strides:a,pads:p,dilations:f,cacheKey:t.cacheKey}):Object.assign(u,{kernelShape:n,strides:a,pads:p,cacheKey:t.cacheKey}),[u,r]},yb={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},Wf={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},ec=(e,t)=>(uo(t),[e.run({...Wf,get:()=>Zf(t,Wf,!0,yb)},t)]),uo=e=>{if(!e||e.length!==1)throw new Error("Pool ops requires 1 input.");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type.")},tc=(e,t,i,o,c)=>{let n=e.length;if(t.kernelShape.length<=2){let a=t.kernelShape[t.kernelShape.length-1],f=t.strides[t.strides.length-1],p=t.pads[t.pads.length/2-1],r=t.pads[t.pads.length-1],u=e[n-1],l="",h="",y="";if(p+r!==0?l=`
          for (int i = 0; i < ${a}; i++) {
            x[${n} - 1] = indices[${n} - 1] * ${f} - ${p} + i;
            if (x[${n} - 1] < 0 || x[${n} - 1] >= ${u}) {
              pad++;
              continue;
            }
            ${i}
          }`:l=`
          for (int i = 0; i < ${a}; i++) {
            x[${n} - 1] = indices[${n} - 1] * ${f} - ${p} + i;
            ${i}
          }`,t.kernelShape.length===2){let I=t.kernelShape[t.kernelShape.length-2],S=t.strides[t.strides.length-2],A=t.pads[t.pads.length/2-2],V=t.pads[t.pads.length-2],N=e[n-2];A+V!==0?h=`
            for (int j = 0; j < ${I}; j++) {
              x[${n} - 2] = indices[${n} - 2] * ${S} - ${A} + j;
              if (x[${n} - 2] < 0 || x[${n} - 2] >= ${N}) {
                pad+= ${a};
                continue;
              }
          `:h=`
            for (int j = 0; j < ${I}; j++) {
              x[${n} - 2] = indices[${n} - 2] * ${S} - ${A} + j;
            `,y=`
          }
        `}return`
        float process(int indices[${n}]) {
          int x[${n}];
          copyVec(indices, x);

          float value = ${c};
          int pad = 0;
          ${h}
          ${l}
          ${y}
          ${o}
          return value;
        }
      `}else{let a=U.size(t.kernelShape),f=U.computeStrides(t.kernelShape),p=f.length,r=t.pads.length,u=Tb(p),l=so(e,"inputDims"),h=so(t.pads,"pads"),y=so(f,"kernelStrides"),I=so(t.strides,"strides"),S=t.pads.reduce((V,N)=>V+N),A="";return S?A=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${i}
          }`:A=`
          }
          ${i}
        `,`
        ${u}
        float process(int indices[${n}]) {
          int x[${n}];
          copyVec(indices, x);
          int offset[${p}];
          int pads[${r}];
          int inputDims[${n}];
          int kernelStrides[${p}];
          int strides[${p}];
          ${h}
          ${l}
          ${I}
          ${y}

          float value = ${c};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${a}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${n} - ${p}; j < ${n}; j++) {
              x[j] = indices[j] * strides[j - ${n} + ${p}]
                + offset[j - ${n} + ${p}] - pads[j - 2];
              ${A}
          }
          ${o}

          return value;
        }
      `}},so=(e,t)=>{let i="";for(let o=0;o<e.length;o++)i+=`
      ${t}[${o}] = ${e[o]};
    `;return i},Tb=e=>`
  void offsetToIndices(int offset, int[${e}] strides, out int[${e}] indices) {
    if (${e} == 0) {
      return;
    }
    for (int i = 0; i < ${e} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${e} - 1] = offset;
  }`}),xr,Zt,xb,wb,nc,oc,ic,ac,sc,uc,lc,fc=E(()=>{Ge(),hn(),fe(),ae(),xr=(e,t,i,o,c)=>{wb(t);let n={name:o,inputNames:["A"],inputTypes:[0]};return[e.run({...n,cacheHint:i.cacheKey,get:()=>xb(e,t,i,o,c,n)},t)]},Zt=e=>{let t=e.attributes.getInts("axes",[]),i=e.attributes.getInt("keepdims",1)===1;return ee({axes:t,keepDims:i})},xb=(e,t,i,o,c,n)=>{let a=[],f=t[0].dims.length||1,p=[],r=U.normalizeAxes(i.axes,t[0].dims.length),u=c(t,r),l=u[1];for(let y=0;y<t[0].dims.length;y++)r.indexOf(y)>=0||r.length===0?(i.keepDims&&a.push(1),l=`
          for(int j${y} = 0; j${y} < ${t[0].dims[y]}; j${y}++) {
            inputIdx[${y}] = j${y};
            ${l}
          }`):(p.push(`inputIdx[${y}] = outputIdx[${a.length}];`),a.push(t[0].dims[y]));let h=`
      float process(int outputIdx[${a.length||1}]) {
        float value;                 // final result
        int inputIdx[${f}];      // addressing input data
        ${p.join(`
`)}
        ${u[0]}       // init ops for reduce max/min
        ${l}
        ${u[2]}       // final computation for reduce mean
        return value;
      }`;return{...n,output:{dims:a,type:t[0].type,textureType:0},shaderSource:h}},wb=e=>{if(!e||e.length!==1)throw new Error("Reduce op requires 1 input.");if(Jt.indexOf(e[0].type)===-1)throw new Error("Invalid input type.")},nc=(e,t,i)=>xr(e,t,i,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),oc=(e,t,i)=>xr(e,t,i,"ReduceMean",(o,c)=>{let n=1;for(let a=0;a<o[0].dims.length;a++)(c.indexOf(a)>=0||c.length===0)&&(n*=o[0].dims[a]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${n}.;`]}),ic=(e,t,i)=>xr(e,t,i,"ReduceMax",(o,c)=>{let n=[];for(let a=0;a<o[0].dims.length;a++)(c.indexOf(a)>=0||c.length===0)&&n.push(`inputIdx[${a}] = 0;`);return[`${n.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),ac=(e,t,i)=>xr(e,t,i,"ReduceMin",(o,c)=>{let n=[];for(let a=0;a<o[0].dims.length;a++)(c.indexOf(a)>=0||c.length===0)&&n.push(`inputIdx[${a}] = 0;`);return[`${n.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),sc=(e,t,i)=>xr(e,t,i,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),uc=(e,t,i)=>xr(e,t,i,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),lc=(e,t,i)=>xr(e,t,i,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),cc,pc=E(()=>{fe(),cc=(e,t)=>{let i=U.calculateReshapedDims(t[0].dims,t[1].integerData);return e.session.pack?[e.reshapePacked(t[0],i)]:[e.reshapeUnpacked(t[0],i)]}}),dc,Ni,hc,mc,mn,vb,Ri,lo,Mi=E(()=>{Ge(),xe(),ae(),dc={name:"Upsample",inputNames:["X"],inputTypes:[0]},Ni=(e,t,i)=>(Ri(t,i),[e.run({...dc,cacheHint:i.cacheKey,get:()=>vb(e,t,i)},t)]),hc=e=>mn(e,7),mc=e=>mn(e,9),mn=(e,t)=>{let i=t>=10,o=e.attributes.getString("mode","nearest");if(o!=="nearest"&&o!=="linear"&&(t<11||o!=="cubic"))throw new Error(`unrecognized mode: ${o}`);let c=[];t<9&&(c=e.attributes.getFloats("scales"),lo(c,o,i));let n=e.attributes.getFloat("extrapolation_value",0),a=t>10?e.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(a)===-1)throw new Error(`coordinate_transform_mode '${a}' is not supported`);let f=a==="tf_crop_and_resize",p=f,r=o==="nearest"&&t>=11?e.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(r)===-1)throw new Error(`nearest_mode '${r}' is not supported`);let u=e.attributes.getFloat("cubic_coeff_a",-.75),l=e.attributes.getInt("exclude_outside",0)!==0;if(l&&o!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let h=t<11?!0:o==="nearest"&&a==="asymmetric"&&r==="floor",y=0,I=0,S=0;return t>10?e.inputs.length>2?(y=1,I=2,S=3):(I=1,S=2):t===9&&(I=1),ee({opset:t,isResize:i,mode:o,scales:c,extrapolationValue:n,coordinateTransformMode:a,useExtrapolation:p,needRoiInput:f,nearestMode:r,cubicCoefficientA:u,excludeOutside:l,useNearest2xOptimization:h,roiInputIdx:y,scalesInputIdx:I,sizesInputIdx:S})},vb=(e,t,i)=>{let o=q(e.session.backend.glContext.version),[c,n]=e.calculateTextureWidthAndHeight(t[0].dims,0),a=t[0].dims.map((S,A)=>Math.floor(S*i.scales[A])),[f,p]=e.calculateTextureWidthAndHeight(a,0),r=a.length,u=new Array(r),l=new Array(r),h=`
      int output_pitches[${r}];
      int input_pitches[${r}];
      `;for(let S=r-1;S>=0;S--)u[S]=S===r-1?1:u[S+1]*a[S+1],l[S]=S===r-1?1:l[S+1]*t[0].dims[S+1],h+=`
        output_pitches[${S}] = ${u[S]};
        input_pitches[${S}] = ${l[S]};
        `;let y=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${c}, ${n});
        float value = getColorAsFloat(${o.texture2D}(X, coords));
        return value;
      }
      `,I=i.mode==="nearest"?`
    ${y}
    float process(int indices[${r}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${f}, ${p});

      ${h}

      int d, m;
      for (int dim = 0; dim < ${r}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:r===4?`
    ${y}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${f}, ${p});

      ${h}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${t[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${y}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${f}, ${p});

      ${h}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${t[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return{...dc,output:{dims:a,type:t[0].type,textureType:0},shaderSource:I,variables:[{name:"scales",type:"int",arrayLength:i.scales.length,data:i.scales.map(S=>Math.ceil(S))}]}},Ri=(e,t)=>{if(!e||t.opset<9&&e.length!==1||t.opset>=9&&t.opset<11&&e.length!==2||t.opset>=11&&e.length<2)throw new Error("invalid inputs.");if(t.scales.length>0&&e[0].dims.length!==t.scales.length)throw new Error("Invalid input shape.");if(e[0].type==="string")throw new Error("Invalid input tensor types.")},lo=(e,t,i)=>{if(i){for(let o of e)if(o<=0)throw new Error("Scale value should be greater than 0.")}else for(let o of e)if(o<1)throw new Error("Scale value should be greater than or equal to 1.");if((t==="linear"||t==="cubic")&&e.length!==2&&(e.length!==4||e[0]!==1||e[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${i?"Resize":"Upsample"} opeartor.`)}}),Gi,Ui,bc,gc,_b,Ob,Ib,Sb,yc=E(()=>{xe(),ae(),kt(),gr(),Mi(),Gi={name:"Resize",inputNames:["A"],inputTypes:[2]},Ui=(e,t,i)=>(Ri(t,i),[e.run({...Gi,cacheHint:i.cacheKey,get:()=>_b(e,t,i)},t)]),bc=e=>mn(e,10),gc=e=>mn(e,11),_b=(e,t,i)=>{let o=q(e.session.backend.glContext.version),[c,n]=Ob(t,i);if(c.every(N=>N===1)&&i.coordinateTransformMode!=="tf_crop_and_resize")return{...Gi,output:{dims:n,type:t[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${o.texture2D}(X, TexCoords);
                    ${o.output} = v;
                }`};let a=n.length;if(a<2)throw new Error(`output dimension should be at least 2, but got ${a}`);let f=n[a-2],p=n[a-1],r=t[0].dims;if(a!==r.length)throw new Error(`output dimension should match input ${r.length}, but got ${a}`);let u=r[a-2],l=r[a-1],h=c[a-2],y=c[a-1],I="";if(i.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${i.mode}'`);switch(i.coordinateTransformMode){case"asymmetric":I=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":I=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":I=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${p}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${f}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${p}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${f}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":I=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${p}.0 - 1.0, ${f}.0 - 1.0, ${p}.0 - 1.0,
                            ${f}.0 - 1.0);
                        vec4 original = vec4(${l}.0 - 1.0, ${u}.0 - 1.0, ${l}.0 - 1.0,
                            ${u}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${i.coordinateTransformMode}'`)}let S=Je(a),A=Bt(),V=`
            const vec2 inputWH = vec2(${u}.0, ${l}.0);
            const vec4 scaleWHWH = vec4(float(${h}), float(${y}), float(${h}), float(${y}));
            ${A}
            ${I}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${S} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${f-1};
                bool hasNextCol = rc.z < ${p-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${o.output} = vec4(newValue);
            }
        `;return{...Gi,output:{dims:n,type:t[0].type,textureType:2},hasMain:!0,shaderSource:V}},Ob=(e,t)=>{let i=e[0].dims,o=t.scales,c;if(o.length===0){let a=e[t.scalesInputIdx];if(a&&a.size!==0){if(e[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");o=Ib(a,t.mode,t.isResize)}else{let f=e[t.sizesInputIdx];if(!f||f.size===0)throw new Error("Either scales or sizes MUST be provided as input.");c=Array.from(f.integerData),o=Sb(c,i,t.mode,t.isResize)}}else if(e[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let n=c||i.map((a,f)=>Math.floor(a*o[f]));return[o,n]},Ib=(e,t,i)=>{let o=Array.from(e.floatData);return lo(o,t,i),o},Sb=(e,t,i,o)=>{let c=t.length,n=new Array(c);for(let a=0,f=c;a<f;a++)if(t[a]===0){if(e[a]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");n[a]=1}else n[a]=e[a]/t[a];return lo(n,i,o),n}}),Tc,Ab,xc=E(()=>{br(),Tc=(e,t)=>(Ab(t),[new Ce([t[0].dims.length],"int32",void 0,void 0,new Int32Array(t[0].dims))]),Ab=e=>{if(!e||e.length!==1)throw new Error("Shape requires 1 input.")}}),zi,wc,vc,_c,Pb,Oc,Eb,Db,Ic=E(()=>{Ge(),hn(),fe(),ae(),zi={name:"Slice",inputNames:["A"],inputTypes:[0]},wc=(e,t,i)=>(Pb(t),[e.run({...zi,cacheHint:i.cacheKey,get:()=>_c(e,t[0],i)},t)]),vc=e=>{let t=e.attributes.getInts("starts"),i=e.attributes.getInts("ends"),o=e.attributes.getInts("axes",[]);return ee({starts:t,ends:i,axes:o})},_c=(e,t,i)=>{let o=i.axes.length===0?t.dims.slice(0).map((u,l)=>l):i.axes,c=U.normalizeAxes(o,t.dims.length),n=i.starts.map((u,l)=>u>t.dims[c[l]]-1?t.dims[c[l]]:U.normalizeAxis(u,t.dims[c[l]])),a=i.ends.map((u,l)=>u>t.dims[c[l]]-1?t.dims[c[l]]:U.normalizeAxis(u,t.dims[c[l]])),f=t.dims.slice(),p=[];for(let u=0;u<c.length;u++)f[c[u]]=a[u]-n[u],n[u]>0&&p.push(`outputIdx[${c[u]}] += ${n[u]};`);let r=`
      float process(int outputIdx[${f.length}]) {
        ${p.join(`
      `)}
        return _A(outputIdx);
      }`;return{...zi,output:{dims:f,type:t.type,textureType:0},shaderSource:r}},Pb=e=>{if(!e||e.length!==1)throw new Error("Slice requires 1 input.");if(Jt.indexOf(e[0].type)===-1)throw new Error("Invalid input type.")},Oc=(e,t)=>{Db(t);let i=Eb(e,t);return[e.run({...zi,cacheHint:i.cacheKey,get:()=>_c(e,t[0],i)},[t[0]])]},Eb=(e,t)=>{if(!e.session.isInitializer(t[1].dataId)||!e.session.isInitializer(t[2].dataId)||t.length>=4&&!e.session.isInitializer(t[3].dataId)||t.length>=5&&!e.session.isInitializer(t[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(t.length>=5&&t[4].integerData.some(a=>a!==1))throw new Error("currently non-1 steps is not supported for Slice");let i=Array.from(t[1].integerData),o=Array.from(t[2].integerData),c=t.length>=4?Array.from(t[3].integerData):[],n=`${c};${i};${o}`;return{starts:i,ends:o,axes:c,cacheKey:n}},Db=e=>{if(!e||e.length<3||e.length>5)throw new Error("Invalid input number.");if(e[1].type!=="int32"||e[1].dims.length!==1)throw new Error("Invalid input type.");if(e[2].type!=="int32"||e[2].dims.length!==1)throw new Error("Invalid input type.");if(e.length>=4&&(e[3].type!=="int32"||e[3].dims.length!==1))throw new Error("Invalid input type.");if(e.length>=5&&(e[4].type!=="int32"||e[4].dims.length!==1))throw new Error("Invalid input type.")}}),Sc,Ac,Pc,Ec,Dc,Lc,Fc,Cc,Lb,Fb,Cb,$c,kc=E(()=>{Ge(),fe(),xe(),ae(),ao(),Sc={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Ac={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Pc={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},Ec=(e,t,i)=>{$c(t);let o=t[0].dims.slice(),c=U.normalizeAxis(i.axis,o.length),n=U.sizeToDimension(o,c),a=U.sizeFromDimension(o,c);return Cc(e,t,i,n,a)},Dc=e=>ee({axis:e.attributes.getInt("axis",1)}),Lc=e=>ee({axis:e.attributes.getInt("axis",-1)}),Fc=(e,t,i)=>{$c(t);let o=t[0].dims.slice(),c=U.normalizeAxis(i.axis,o.length),n=o.length,a=c!==n-1,f=[],p=[],r=[],u;a&&(p=Array.from({length:n}).map((I,S)=>S),p[c]=n-1,p[n-1]=c,p.map(I=>f.push(o[I])),u=ee({perm:p}),r=Tr(e,t,u));let l=a?U.sizeToDimension(f,n-1):U.sizeToDimension(o,n-1),h=a?U.sizeFromDimension(f,n-1):U.sizeFromDimension(o,n-1),y=Cc(e,a?r:t,i,l,h);return a?Tr(e,y,u):y},Cc=(e,t,i,o,c)=>{let n=Lb(e,t[0],o,c,[o]),a=e.run({...Sc,cacheHint:i.cacheKey,get:()=>n},t),f=Fb(e,t[0],o,c,n.output.dims,[o]),p=e.run({...Ac,cacheHint:i.cacheKey,get:()=>f},[t[0],a]),r=Cb(e,t[0],o,c,n.output.dims,f.output.dims);return[e.run({...Pc,cacheHint:i.cacheKey,get:()=>r},[t[0],a,p])]},Lb=(e,t,i,o,c)=>{let[n,a]=e.calculateTextureWidthAndHeight(t.dims,0),f=c.length;if(i<1||o<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(c.length!==1)throw new Error("Dimensionality of the output should be 1");if(c[0]!==i)throw new Error("Shape of the output should be equal to logical row count");let p=q(e.session.backend.glContext.version),r=`
      float process(int[${f}] indices) {
        int logical_row_start_offset = indices[0] * ${o};

        float max = getColorAsFloat(${p.texture2D}(A, offsetToCoords(logical_row_start_offset, ${n},
        ${a} )));
        for(int i=1; i<${o}; ++i)
        {
          float current = getColorAsFloat(${p.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${n}, ${a})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return{...Sc,output:{dims:c,type:t.type,textureType:0},shaderSource:r}},Fb=(e,t,i,o,c,n)=>{let[a,f]=e.calculateTextureWidthAndHeight(t.dims,0),p=n.length;if(i<1||o<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(n.length!==1)throw new Error("Dimensionality of the output should be 1");if(n[0]!==i)throw new Error("Shape of the output should be equal to logical row count");if(c.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(c[0]!==i)throw new Error("Shape of the intermediate results should be equal to logical row count");let r=q(e.session.backend.glContext.version),u=`
      float process(int[${p}] indices) {
        int logical_row_start_offset = indices[0] * ${o};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${o}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${r.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${a}, ${f}))) - max);
        }

        return norm_factor;
      }`;return{...Ac,output:{dims:n,type:t.type,textureType:0},shaderSource:u}},Cb=(e,t,i,o,c,n)=>{let[a,f]=e.calculateTextureWidthAndHeight(t.dims,0),p=t.dims.length;if(i<1||o<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(c.length!==1||n.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(c[0]!==i||n[0]!==i)throw new Error("Shape of the intermediate results should be equal to logical row count");let r=`
      float process(int[${p}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${a}, ${f});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${o};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return{...Pc,output:{dims:t.dims,type:t.type,textureType:0},shaderSource:r}},$c=e=>{if(!e||e.length!==1)throw new Error("Softmax requires 1 input.");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type")}}),Bc,Nc,Rc,$b,kb,Bb,Mc=E(()=>{Ge(),fe(),ae(),Bc={name:"Split",inputNames:["A"],inputTypes:[0]},Nc=(e,t,i)=>{Bb(t);let o=U.normalizeAxis(i.axis,t[0].dims.length),c=$b(e,t,o,i),n=[];for(let a=0;a<c;++a)n.push(e.run({...Bc,cacheHint:`${i.cacheKey};${a}`,get:()=>kb(e,t[0],i,o,a)},t));return n},Rc=e=>{let t=e.attributes.getInt("axis",0),i=e.attributes.getInts("split",[]),o=e.outputs.length;return ee({axis:t,split:i,numOutputs:o})},$b=(e,t,i,o)=>{let[,c]=un.splitShape(t[0].dims,i,o.split,o.numOutputs);return c.length},kb=(e,t,i,o,c)=>{let[n,a]=un.splitShape(t.dims,o,i.split,i.numOutputs),f=a[c],p=n[c],r=`
      float process(int indices[${p.length}]) {
        indices[${o}] += ${f};
        return _A(indices);
      }
    `;return{...Bc,cacheHint:`${i.cacheKey}:${c}`,output:{dims:p,type:t.type,textureType:0},shaderSource:r}},Bb=e=>{if(!e||e.length!==1)throw new Error("Split requires one input.");if(e[0].type!=="int8"&&e[0].type!=="uint8"&&e[0].type!=="int16"&&e[0].type!=="uint16"&&e[0].type!=="int32"&&e[0].type!=="uint32"&&e[0].type!=="float32"&&e[0].type!=="float64"&&e[0].type!=="bool")throw new Error("Invalid input type.")}}),Vi,Gc,Uc,Nb,Rb,zc=E(()=>{fe(),Vi=(e,t,i)=>{Nb(t);let o=U.squeezeShape(t[0].dims,i);return[e.reshapeUnpacked(t[0],o)]},Gc=(e,t)=>(Rb(t),Vi(e,[t[0]],Array.from(t[1].integerData))),Uc=e=>e.attributes.getInts("axes"),Nb=e=>{if(!e||e.length!==1)throw new Error("Squeeze requires 1 input.");if(e[0].type==="string")throw new Error("invalid input tensor types.")},Rb=e=>{if(!e||e.length!==2)throw new Error("Squeeze requires 2 inputs.");if(e[1].type!=="int32")throw new Error("Invalid input type.")}}),Vc,Mb,Gb,Wc=E(()=>{xe(),ae(),Vc=(e,t)=>{Gb(t);let i={name:"Sum",inputNames:t.map((o,c)=>`X${c}`),inputTypes:new Array(t.length).fill(0)};return[e.run({...i,get:()=>Mb(e,t,i)},t)]},Mb=(e,t,i)=>{let o=q(e.session.backend.glContext.version),c=t[0].dims.slice(),n=`
      void main() {
        vec4 result = ${t.map((a,f)=>`${o.texture2D}(X${f},TexCoords)`).join(" + ")};
        ${o.output} = result;
      }
    `;return{...i,output:{dims:c,type:t[0].type,textureType:0},hasMain:!0,shaderSource:n}},Gb=e=>{if(!e||e.length===0)throw new Error("Sum requires inputs.");let t=e[0].dims.length;for(let i=1;i<e.length;i++){if(t!==e[i].dims.length)throw new Error("Input shapes are mismatched.");for(let o=0;o<t;o++)if(e[0].dims[o]!==e[i].dims[o])throw new Error("Input shapes are not matched.")}if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type.");for(let i=1;i<e.length;i++)if(e[0].type!==e[i].type)throw new Error("Input types are not matched.")}}),Hc,Ub,zb,qc=E(()=>{hn(),ae(),Hc=(e,t)=>{zb(t);let i={name:"Tile",inputNames:["A"],inputTypes:[0]};return[e.run({...i,get:()=>Ub(e,t,i)},t)]},Ub=(e,t,i)=>{let o=t[0].dims.slice(),c=new Array(o.length),n=[];for(let p=0;p<o.length;p++)c[p]=o[p]*t[1].numberData[p],n.push(`inputIdx[${p}] = int(mod(float(outputIdx[${p}]), ${o[p]}.));`);let a=c.length,f=`
      float process(int outputIdx[${a}]) {
        int inputIdx[${a}];
        ${n.join(`
`)}
        return _A(inputIdx);
      }
    `;return{...i,output:{dims:c,type:t[0].type,textureType:0},shaderSource:f}},zb=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 input.");if(e[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(e[1].dims[0]!==e[0].dims.length)throw new Error("Invalid input shape.");if(Jt.indexOf(e[0].type)===-1)throw new Error("Invalid input type.");if(e[1].type!=="int32"&&e[1].type!=="int16")throw new Error("Invalid repeat type.")}}),Wi,jc,Yc,Vb,Wb,Xc=E(()=>{fe(),Wi=(e,t,i)=>{Vb(t);let o=U.unsqueezeShape(t[0].dims,i);return[e.reshapeUnpacked(t[0],o)]},jc=(e,t)=>(Wb(t),Wi(e,[t[0]],Array.from(t[1].integerData))),Yc=e=>e.attributes.getInts("axes"),Vb=e=>{if(!e||e.length!==1)throw new Error("Unsqueeze requires 1 input.");if(e[0].type==="string")throw new Error("invalid input tensor types.")},Wb=e=>{if(!e||e.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(e[1].type!=="int32")throw new Error("Invalid input type.")}}),Kc,Jc=E(()=>{al(),Tl(),vl(),Pl(),no(),pf(),yf(),wf(),Of(),Pf(),Lf(),kf(),Mf(),oo(),Vf(),rc(),fc(),pc(),yc(),xc(),Ic(),kc(),Mc(),zc(),Wc(),qc(),ao(),Ai(),Xc(),Mi(),Kc=[["Abs","","6+",El],["Acos","","7+",Dl],["Add","","7+",sl],["And","","7+",ul],["Asin","","7+",Ll],["Atan","","7+",Fl],["AveragePool","","7+",Hf,qf],["BatchNormalization","","7+",ol,il],["Cast","","6+",xl,wl],["Ceil","","6+",kl],["Clip","","6-10",Ii,Cl],["Clip","","11+",$l],["Concat","","4+",Il,Al],["Conv","","1+",Ci,$i],["ConvTranspose","","1+",ff,cf],["Cos","","7+",Bl],["Div","","7+",ll],["Dropout","","7+",Si],["DepthToSpace","","1+",bf,gf],["Equal","","7+",fl],["Elu","","6+",Nl,Rl],["Exp","","6+",Ml],["Flatten","","1+",Tf,xf],["Floor","","6+",Gl],["FusedConv","com.microsoft","1+",Ci,$i],["Gather","","1+",vf,_f],["Gemm","","7-10",ki,Sf],["Gemm","","11+",ki,Af],["GlobalAveragePool","","1+",Yf,Xf],["GlobalMaxPool","","1+",ec],["Greater","","7+",cl],["Identity","","1+",Si],["ImageScaler","","1+",Ef,Df],["InstanceNormalization","","6+",Cf,$f],["LeakyRelu","","6+",Ul,zl],["Less","","7+",pl],["LRN","","1+",Bf,Nf],["Log","","6+",Vl],["MatMul","","1+",rf,nf],["MaxPool","","1+",Kf,Jf],["Mul","","7+",dl],["Neg","","6+",Wl],["Not","","1+",Hl],["Or","","7+",hl],["Pad","","2-10",Bi,Gf],["Pad","","11+",Uf,zf],["Pow","","7+",ml],["PRelu","","7+",bl],["ReduceLogSum","","1+",uc,Zt],["ReduceMax","","1+",ic,Zt],["ReduceMean","","1+",oc,Zt],["ReduceMin","","1+",ac,Zt],["ReduceProd","","1+",sc,Zt],["ReduceSum","","1-12",nc,Zt],["ReduceSumSquare","","1+",lc,Zt],["Relu","","6+",ql],["Reshape","","5+",cc],["Resize","","10",Ui,bc],["Resize","","11+",Ui,gc],["Shape","","1+",Tc],["Sigmoid","","6+",jl],["Sin","","7+",Yl],["Slice","","10+",Oc],["Slice","","1-9",wc,vc],["Softmax","","1-12",Ec,Dc],["Softmax","","13+",Fc,Lc],["Split","","2-12",Nc,Rc],["Sqrt","","6+",Xl],["Squeeze","","1-12",Vi,Uc],["Squeeze","","13+",Gc],["Sub","","7+",gl],["Sum","","6+",Vc],["Tan","","7+",Kl],["Tanh","","6+",Jl],["Tile","","6+",Hc],["Transpose","","1+",Tr,hf],["Upsample","","7-8",Ni,hc],["Upsample","","9",Ni,mc],["Unsqueeze","","1-12",Wi,Yc],["Unsqueeze","","13+",jc],["Xor","","7+",yl]]});function Qc(e){let t={},i;for(;(i=Zc.exec(e))!==null;){let o=i[3].split(",").map(c=>{let n=c.trim().split(" ");return n&&n.length===2?{type:n[0],name:n[1]}:null}).filter(c=>c!==null);t[i[2]]={params:o,body:i[4]}}for(let o in t){let c=Hb.replace("__FUNC__",o),n=new RegExp(c,"gm");for(;(i=n.exec(e))!==null;){let a=i[1],f=i[2],p=i[3].split(","),r=a?`${a} ${f};`:"",u=t[o].body,l="";t[o].params.forEach((y,I)=>{y&&(l+=`${y.type} ${y.name} = ${p[I]};
`)}),u=`${l}
 ${u}`,u=u.replace("return",`${f} = `);let h=`
      ${r}
      {
        ${u}
      }
      `;e=e.replace(i[0],h)}}return e=e.replace(Zc,""),e}var Zc,Hb,ep=E(()=>{Zc=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,Hb="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function Ur(e,t){let i=[],o=[];for(let c=0;c<e.length;++c)e[c]!==1&&(i.push(e[c]),o.push(c));return{newShape:i,keptDims:o}}function Yb(e){if(e.length===0)return 1;let t=e[0];for(let i=1;i<e.length;i++)t*=e[i];return t}function tp(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}var fo,Hi=E(()=>{at(),fe(),fo=class{constructor(e){this.maxTextureSize=e}computeTextureWH(e,t){let i=this.computeTexture(e,t);return t&&t.isPacked&&(i[0]/=2,i[1]/=2),t&&t.reverseWH?[i[1],i[0]]:i}computeTexture(e,t){let i=t&&t.isPacked;if(e.length===0)return i?[2,2]:[1,1];let o=this.maxTextureSize;if(t&&t.breakAxis!==void 0){let a=t.breakAxis>=e.length?1:e.slice(t.breakAxis).reduce((p,r)=>p*r),f=t.breakAxis<=0?1:e.slice(0,t.breakAxis).reduce((p,r)=>p*r);if(a>o||f>o)ce.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${e}, breakAxis:${t.breakAxis}`);else return[a,f]}let c=e.slice(0);i&&(o=o*2,c=c.map((a,f)=>f>=c.length-2?c[f]%2===0?c[f]:c[f]+1:c[f]),c.length===1&&(c=[2,c[0]])),c.length!==2&&(c=Ur(c).newShape);let n=Yb(c);return c.length<=1&&n<=o?[1,n]:c.length===2&&c[0]<=o&&c[1]<=o?c:c.length===3&&c[0]*c[1]<=o&&c[2]<=o?[c[0]*c[1],c[2]]:c.length===3&&c[0]<=o&&c[1]*c[2]<=o?[c[0],c[1]*c[2]]:c.length===4&&c[0]*c[1]*c[2]<=o&&c[3]<=o?[c[0]*c[1]*c[2],c[3]]:c.length===4&&c[0]<=o&&c[1]*c[2]*c[3]<=o?[c[0],c[1]*c[2]*c[3]]:i?tp(n/4).map(a=>a*2):tp(n)}}}),co,rp=E(()=>{fe(),Ht(),xe(),Hi(),kt(),co=class extends ft{constructor(e){super(e)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){let e="offsetToCoords";return{offsetToCoords:new R(`
      vec2 ${e}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let e="coordsToOffset";return{coordsToOffset:new R(`
      int ${e}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let e=this.context.outputTextureLayout;return e.isPacked?this.getPackedOutputSamplingSnippet(e):this.getUnpackedOutputSamplingSnippet(e)}getPackedOutputSamplingSnippet(e){let t=e.unpackedShape,i=[e.width,e.height],o={},c="getOutputCoords";switch(t.length){case 0:o[c]=this.getOutputScalarCoords();break;case 1:o[c]=this.getOutputPacked1DCoords(t,i);break;case 2:o[c]=this.getOutputPacked2DCoords(t,i);break;case 3:o[c]=this.getOutputPacked3DCoords(t,i);break;default:o[c]=this.getOutputPackedNDCoords(t,i)}let n=`
      void setOutput(vec4 val) {
        ${q(this.context.glContext.version).output} = val;
      }
    `,a="floatTextureSetRGBA";return o[a]=new R(n),o}getUnpackedOutputSamplingSnippet(e){let t=e.unpackedShape,i=[e.width,e.height],o={},c="getOutputCoords";switch(t.length){case 0:o[c]=this.getOutputScalarCoords();break;case 1:o[c]=this.getOutputUnpacked1DCoords(t,i);break;case 2:o[c]=this.getOutputUnpacked2DCoords(t,i);break;case 3:o[c]=this.getOutputUnpacked3DCoords(t,i);break;case 4:o[c]=this.getOutputUnpacked4DCoords(t,i);break;case 5:o[c]=this.getOutputUnpacked5DCoords(t,i);break;case 6:o[c]=this.getOutputUnpacked6DCoords(t,i);break;default:throw new Error(`Unsupported output dimensionality: ${t.length}`)}let n=`
        void setOutput(float val) {
          ${q(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,a="floatTextureSetR";return o[a]=new R(n),o}getOutputScalarCoords(){return new R(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(e,t){let i=t,o="";return i[0]===1?(o=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${i[1]}.0);
          }
        `,new R(o)):i[1]===1?(o=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${i[0]}.0);
          }
        `,new R(o)):(o=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${i[0]}, ${i[1]}));
          return 2 * (resTexRC.y * ${i[0]} + resTexRC.x);
        }
      `,new R(o))}getOutputPacked2DCoords(e,t){let i="";if(pr.arraysEqual(e,t))return i=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${t[0]}, ${t[1]}));
        }
      `,new R(i);let o=t,c=Math.ceil(e[1]/2);return i=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${o[0]}, ${o[1]}));

          int index = resTexRC.y * ${o[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${c}) * 2;
          int c = 2 * (index / ${c});

          return ivec2(r, c);
        }
      `,new R(i)}getOutputPacked3DCoords(e,t){let i=[t[0],t[1]],o=Math.ceil(e[2]/2),c=o*Math.ceil(e[1]/2),n=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${i[0]}, ${i[1]}));
          int index = resTexRC.y * ${i[0]} + resTexRC.x;

          int b = index / ${c};
          index -= b * ${c};

          // reverse r and c order for packed texture
          int r = imod(index, ${o}) * 2;
          int c = 2 * (index / ${o});

          return ivec3(b, r, c);
        }
      `;return new R(n)}getOutputPackedNDCoords(e,t){let i=[t[0],t[1]],o=Math.ceil(e[e.length-1]/2),c=o*Math.ceil(e[e.length-2]/2),n=c,a="",f="b, r, c";for(let r=2;r<e.length-1;r++)n*=e[e.length-r-1],a=`
      int b${r} = index / ${n};
      index -= b${r} * ${n};
    `+a,f=`b${r}, `+f;let p=`
      ivec${e.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${i[0]}, ${i[1]}));
        int index = resTexRC.y * ${i[0]} + resTexRC.x;

        ${a}

        int b = index / ${c};
        index -= b * ${c};

        // reverse r and c order for packed texture
        int r = imod(index, ${o}) * 2;
        int c = 2 * (index / ${o});

        return ivec${e.length}(${f});
      }
    `;return new R(p)}getOutputUnpacked1DCoords(e,t){let i=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          return resTexRC.y * ${t[0]} + resTexRC.x;
        }
      `;return new R(i)}getOutputUnpacked2DCoords(e,t){let i=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          int r = index / ${e[1]};
          int c = index - r * ${e[1]};
          return ivec2(r, c);
        }
      `;return new R(i)}getOutputUnpacked3DCoords(e,t){let i="",o=e.length,c=null;o<2&&(c=[]),c=new Array(o-1),c[o-2]=e[o-1];for(let f=o-3;f>=0;--f)c[f]=c[f+1]*e[f+1];let n=["r","c","d"],a=c.map((f,p)=>{let r=`int ${n[p]} = index / ${f}`,u=p===c.length-1?`int ${n[p+1]} = index - ${n[p]} * ${f}`:`index -= ${n[p]} * ${f}`;return`${r}; ${u};`}).join("");return i=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          ${a}
          return ivec3(r, c, d);
        }
      `,new R(i)}getOutputUnpacked4DCoords(e,t){let i="",o=e.length,c=null;o<2&&(c=[]),c=new Array(o-1),c[o-2]=e[o-1];for(let f=o-3;f>=0;--f)c[f]=c[f+1]*e[f+1];let n=["r","c","d","d2"],a=c.map((f,p)=>{let r=`int ${n[p]} = index / ${f}`,u=p===c.length-1?`int ${n[p+1]} = index - ${n[p]} * ${f}`:`index -= ${n[p]} * ${f}`;return`${r}; ${u};`}).join("");return i=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          ${a}
          return ivec4(r, c, d, d2);
        }
      `,new R(i)}getOutputUnpacked5DCoords(e,t){let i="",o=e.length,c=null;o<2&&(c=[]),c=new Array(o-1),c[o-2]=e[o-1];for(let f=o-3;f>=0;--f)c[f]=c[f+1]*e[f+1];let n=["r","c","d","d2","d3"],a=c.map((f,p)=>{let r=`int ${n[p]} = index / ${f}`,u=p===c.length-1?`int ${n[p+1]} = index - ${n[p]} * ${f}`:`index -= ${n[p]} * ${f}`;return`${r}; ${u};`}).join("");return i=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          ${a}
          return ivec5(r, c, d, d2, d3);
        }
      `,new R(i)}getOutputUnpacked6DCoords(e,t){let i="",o=e.length,c=null;o<2&&(c=[]),c=new Array(o-1),c[o-2]=e[o-1];for(let f=o-3;f>=0;--f)c[f]=c[f+1]*e[f+1];let n=["r","c","d","d2","d3","d4"],a=c.map((f,p)=>{let r=`int ${n[p]} = index / ${f}`,u=p===c.length-1?`int ${n[p+1]} = index - ${n[p]} * ${f}`:`index -= ${n[p]} * ${f}`;return`${r}; ${u};`}).join("");return i=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${t[0]}, ${t[1]}));
         int index = resTexRC.y * ${t[0]} + resTexRC.x;
         ${a}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new R(i)}getCommonUtilFuncs(){let e={},t="uvFromFlat";e[t]=new R(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),t="packedUVfrom1D",e[t]=new R(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),t="packedUVfrom2D",e[t]=new R(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),t="packedUVfrom3D",e[t]=new R(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),t="sampleTexture";let i=q(this.context.glContext.version);return e[t]=new R(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${i.texture2D}(textureSampler, uv).r;
        }`),e}getInputsSamplingSnippets(){let e={},t=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((i,o)=>{let c=this.context.inputTextureLayouts[o],n=Kn(i);c.isPacked?e[n]=this.getPackedSamplerFromInput(n,i,c):e[n]=this.getUnpackedSamplerFromInput(n,i,c);let a=zu(i);c.unpackedShape.length<=t.unpackedShape.length&&(c.isPacked?e[a]=this.getPackedSamplerAtOutputCoords(a,c,t,i):e[a]=this.getUnpackedSamplerAtOutputCoords(a,c,t,i))}),e}getPackedSamplerAtOutputCoords(e,t,i,o){let c=t.unpackedShape,n=i.unpackedShape,a=Kn(o),f=c.length,p=n.length,r=Ke.getBroadcastDims(c,n),u=Je(p),l=p-f,h,y=Ot();f===0?h="":p<2&&r.length>=1?h="coords = 0;":h=r.map(te=>`coords.${y[te+l]} = 0;`).join(`
`);let I="";p<2&&f>0?I="coords":I=c.map((te,ve)=>`coords.${y[ve+l]}`).join(", ");let S="return outputValue;",A=U.size(c)===1,V=U.size(n)===1;if(f===1&&!A&&!V)S=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(A&&!V)p===1?S=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:S=`
          return vec4(outputValue.x);
        `;else if(r.length){let te=f-2,ve=f-1;r.indexOf(te)>-1&&r.indexOf(ve)>-1?S="return vec4(outputValue.x);":r.indexOf(te)>-1?S="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":r.indexOf(ve)>-1&&(S="return vec4(outputValue.xx, outputValue.zz);")}let N=`
        int lastDim = coords.${y[p-1]};
        coords.${y[p-1]} = coords.${y[p-2]};
        coords.${y[p-2]} = lastDim;
      `,B=`
      vec4 ${e}() {
        ${u} coords = getOutputCoords();
        ${N}
        ${h}
        vec4 outputValue = ${a}(${I});
        ${S}
      }
    `;return new R(B,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(e,t,i,o){let c=[i.width,i.height],n=[t.width,t.height],a=t.unpackedShape.length,f=i.unpackedShape.length,p=t.unpackedShape,r=i.unpackedShape,u=Kn(o);if(a===f&&pr.arraysEqual(n,c)){let N=`
          float ${e}() {
            return sampleTexture(${o}, TexCoords);
          }
        `;return new R(N,["coordinates.sampleTexture"])}let l=Je(f),h=Ke.getBroadcastDims(p,r),y=f-a,I,S=Ot();a===0?I="":f<2&&h.length>=1?I="coords = 0;":I=h.map(N=>`coords.${S[N+y]} = 0;`).join(`
`);let A="";f<2&&a>0?A="coords":A=t.unpackedShape.map((N,B)=>`coords.${S[B+y]}`).join(", ");let V=`
        float ${e}() {
          ${l} coords = getOutputCoords();
          ${I}
          return ${u}(${A});
        }
      `;return new R(V,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(e,t,i){switch(i.unpackedShape.length){case 0:return this.getPackedSamplerScalar(e,t);case 1:return this.getPackedSampler1D(e,t,i);case 2:return this.getPackedSampler2D(e,t,i);case 3:return this.getPackedSampler3D(e,t,i);default:return this.getPackedSamplerND(e,t,i)}}getUnpackedSamplerFromInput(e,t,i){let o=i.unpackedShape;switch(o.length){case 0:return this.getUnpackedSamplerScalar(e,t,i);case 1:return this.getUnpackedSampler1D(e,t,i);case 2:return this.getUnpackedSampler2D(e,t,i);case 3:return this.getUnpackedSampler3D(e,t,i);case 4:return this.getUnpackedSampler4D(e,t,i);case 5:return this.getUnpackedSampler5D(e,t,i);case 6:return this.getUnpackedSampler6D(e,t,i);default:throw new Error(`Unsupported dimension ${o.length}-D`)}}getPackedSamplerScalar(e,t){let i=q(this.context.glContext.version),o=`
          vec4 ${e}() {
            return ${i.texture2D}(${t}, halfCR);
          }
        `;return new R(o)}getPackedSampler1D(e,t,i){let o=[i.width,i.height],c=[o[1],o[0]],n=q(this.context.glContext.version),a=`vec4 ${e}(int index) {
      vec2 uv = packedUVfrom1D(
      ${c[0]}, ${c[1]}, index);
      return ${n.texture2D}(${t}, uv);
    }`;return new R(a,["coordinates.packedUVfrom1D"])}getPackedSampler2D(e,t,i){let o=i.unpackedShape,c=[i.width,i.height],n=q(this.context.glContext.version),a=c[0],f=c[1];if(c!=null&&pr.arraysEqual(o,c)){let l=`vec4 ${e}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${a}.0);
        return ${n.texture2D}(${t}, uv);
      }`;return new R(l)}let p=c,r=Math.ceil(o[1]/2),u=`vec4 ${e}(int row, int col) {
      vec2 uv = packedUVfrom2D(${p[1]}, ${p[0]}, ${r}, row, col);
      return ${n.texture2D}(${t}, uv);
    }`;return new R(u,["coordinates.packedUVfrom2D"])}getPackedSampler3D(e,t,i){let o=i.unpackedShape,c=[i.width,i.height],n=[c[0],c[1]],a=q(this.context.glContext.version);if(o[0]===1){let h=o.slice(1),y=[1,2],I=Br(o,h),S=["b","row","col"],A=JSON.parse(JSON.stringify(i));A.unpackedShape=I;let V=this.getPackedSamplerFromInput(e,t,A),N=`${V.routineBody}
      vec4 ${e}(int b, int row, int col) {
        return ${e}(${Nr(S,y)});
      } `;return new R(N,V.dependencies)}let f=n[0],p=n[1],r=Math.ceil(o[2]/2),u=r*Math.ceil(o[1]/2),l=`vec4 ${e}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${p}, ${f}, ${u}, ${r}, b, row, col);
      return ${a.texture2D}(${t}, uv);}`;return new R(l,["coordinates.packedUVfrom3D"])}getPackedSamplerND(e,t,i){let o=i.unpackedShape,c=o.length,n=[i.width,i.height],a=q(this.context.glContext.version),f=[n[0],n[1]],p=f[1],r=f[0],u=Math.ceil(o[c-1]/2),l=u*Math.ceil(o[c-2]/2),h="int b, int row, int col",y=`b * ${l} + (row / 2) * ${u} + (col / 2)`;for(let S=2;S<c-1;S++)h=`int b${S}, `+h,l*=o[c-S-1],y=`b${S} * ${l} + `+y;let I=`vec4 ${e}(${h}) {
      int index = ${y};
      int texR = index / ${r};
      int texC = index - texR * ${r};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}, ${p});
      return ${a.texture2D}(${t}, uv);
    }`;return new R(I)}getUnpackedSamplerScalar(e,t,i){let[o,c]=[i.width,i.height];if(o===1&&c===1){let a=`
          float ${e}() {
            return sampleTexture(${t}, halfCR);
          }
        `;return new R(a,["coordinates.sampleTexture"])}let n=`
        float ${e}() {
          int offset_${t} = coordsToOffset(TexCoords, ${o}, ${c});
          vec2 uv = uvFromFlat(${o}, ${c}, offset_${t});
          return sampleTexture(${t}, uv);
        }
      `;return new R(n,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(e,t,i){let o=i.width,c=i.height;if(c===1&&o===1){let a=`
        float ${e}(int index) {
          return sampleTexture(${t}, halfCR);
        }
      `;return new R(a,["coordinates.sampleTexture"])}if(c===1){let a=`
          float ${e}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${o}.0, 0.5);
            return sampleTexture(${t}, uv);
          }
        `;return new R(a,["coordinates.sampleTexture"])}if(o===1){let a=`
          float ${e}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${c}.0);
            return sampleTexture(${t}, uv);
          }
        `;return new R(a,["coordinates.sampleTexture"])}let n=`
        float ${e}(int index) {
          vec2 uv = uvFromFlat(${o}, ${c}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new R(n,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(e,t,i){let o=i.unpackedShape,c=[i.height,i.width];if(c!=null&&pr.arraysEqual(o,c)){let l=c[1],h=c[0],y=`
          float ${e}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${l}.0, ${h}.0);
            return sampleTexture(${t}, uv);
          }
        `;return new R(y,["coordinates.sampleTexture"])}let{newShape:n,keptDims:a}=Ur(o),f=n;if(f.length<o.length){let l=Br(o,f),h=JSON.parse(JSON.stringify(i));h.unpackedShape=l;let y=["col","row"],I=`
          ${this.getUnpackedSamplerFromInput(e,t,h).routineBody}
          float ${e}(int row, int col) {
            return ${e}(${Nr(y,a)});
          }
        `;return new R(I,["coordinates.sampleTexture"])}let p=c[1],r=c[0];if(r===1){let l=`
          float ${e}(int row, int col) {
            int offset_${t} = coordsToOffset(TexCoords, ${p}, ${r});
            float index = dot(vec3(row, col, offset_${t}), vec3(${o[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${p}.0);
            return sampleTexture(${t}, uv);
          }
        `;return new R(l,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(p===1){let l=`
          float ${e}(int row, int col) {
            int offset_${t} = coordsToOffset(TexCoords, ${p}, ${r});
            float index = dot(vec3(row, col, offset_${t}), vec3(${o[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${r}.0, 0.5);
            return sampleTexture(${t}, uv);
          }
        `;return new R(l,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let u=`
        float ${e}(int row, int col) {
          int index = col * ${o[1]} + row;
          vec2 uv = uvFromFlat(${p}, ${r}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new R(u,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(e,t,i){let o=i.unpackedShape,c=o[1]*o[2],n=o[2],{newShape:a,keptDims:f}=Ur(o),p=a;if(p.length<o.length){let h=Br(o,p),y=["batch","col","row"],I=JSON.parse(JSON.stringify(i));I.unpackedShape=h;let S=this.getUnpackedSamplerFromInput(e,t,I),A=f.reverse(),V=`
          ${S.routineBody}
          float ${e}(int batch, int row, int col) {
            return ${e}(${Nr(y,A)});
          }
        `;return new R(V,S.dependencies)}let r=i.width,u=i.height,l=`
          float ${e}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${c} + col * ${n} + row;
            vec2 uv = uvFromFlat(${r}, ${u}, index);
            return sampleTexture(${t}, uv);
          }
      `;return new R(l,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(e,t,i){let o=i.unpackedShape,c=o[3],n=o[2]*c,a=o[1]*n,f=i.width,p=i.height,r=`
        float ${e}(int row, int col, int depth, int depth2) {
          int index = row * ${a} + col * ${n} +
              depth2 * ${c} + depth;
          vec2 uv = uvFromFlat(${f}, ${p}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new R(r,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(e,t,i){let o=i.unpackedShape,c=o[4],n=o[3]*c,a=o[2]*n,f=o[1]*a,{newShape:p,keptDims:r}=Ur(o);if(p.length<o.length){let y=Br(o,p),I=["row","col","depth","depth2","depth3"],S=JSON.parse(JSON.stringify(i));S.unpackedShape=y;let A=`
          ${this.getUnpackedSamplerFromInput(e,t,S).routineBody}
          float ${e}(int row, int col, int depth, int depth2, int depth3) {
            return ${e}(${Nr(I,r)});
          }
        `;return new R(A,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let u=i.width,l=i.height,h=`
        float ${e}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${f} + col * ${a} + depth * ${n} +
          depth3 * ${c} + depth2;
          vec2 uv = uvFromFlat(${u}, ${l}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new R(h,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(e,t,i){let o=i.unpackedShape,c=o[5],n=o[4]*c,a=o[3]*n,f=o[2]*a,p=o[1]*f,{newShape:r,keptDims:u}=Ur(o);if(r.length<o.length){let I=Br(o,r),S=["row","col","depth","depth2","depth3","depth4"],A=JSON.parse(JSON.stringify(i));A.unpackedShape=I;let V=`
            ${this.getUnpackedSamplerFromInput(e,t,A).routineBody}
            float ${e}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${e}(${Nr(S,u)});
            }
          `;return new R(V,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let l=i.width,h=i.height,y=`
          float ${e}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${p} + col * ${f} + depth * ${a} +
            depth2 * ${n} + depth3 * ${c} + depth4;
            vec2 uv = uvFromFlat(${l}, ${h}, index);
            return sampleTexture(${t}, uv);
          }
        `;return new R(y,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let e=this.context.outputTextureLayout,t=e.shape.length,i=e.strides,o=e.width,c=e.height,n=[];for(let f=0;f<t-1;++f)n.push(`
        c[${f}] = offset / ${i[f]};`),n.push(`
        offset -= c[${f}] * ${i[f]};`);n.push(`
        c[${t-1}] = offset;`);let a=`
      void toVec(vec2 texCoords, out int c[${t}]) {
        int offset = coordsToOffset(texCoords, ${o}, ${c});
        ${n.join("")}
      }
      void toVec(int offset, out int c[${t}]) {
        ${n.join("")}
      }
    `;return{toVec:new R(a,["coordinates.coordsToOffset"])}}valueFrom(){let e={};return this.context.programInfo.inputNames.forEach((t,i)=>{let o=this.context.inputTextureLayouts[i],c=(o.unpackedShape.length>0?o.unpackedShape:o.shape).length,n=`_${t}`;e[n]=new R(this.getValueFromSingle(t,c,o.width,o.height,!1),[`shapeUtils.indicesToOffset${n}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),n=n+"_T",e[n]=new R(this.getValueFromSingle(t,c,o.width,o.height,!0),[`shapeUtils.indicesToOffset${n}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),e}getValueFromSingle(e,t,i,o,c){let n=`_${e}`;c&&(n=n+"_T");let a=q(this.context.glContext.version);return`
        float ${n}(int m[${t}]) {
          int offset = indicesToOffset${n}(m);
          vec2 coords = offsetToCoords(offset, ${i}, ${o});
          float value = getColorAsFloat(${a.texture2D}(${e}, coords));
          return value;
        }
        `}getPackedValueFrom(e,t,i,o,c){let n=`_${e}_Pack`;c&&(n=n+"_T");let a=q(this.context.glContext.version);return`
        vec4 ${n}(int m[${t}]) {
          int offset = indicesToOffset_${e}(m);
          vec2 coords = offsetToCoords(offset, ${i}, ${o});
          return ${a.texture2D}(${e}, coords);
        }
        `}}}),po,np=E(()=>{Ht(),po=class X0 extends ft{constructor(t){super(t)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new R(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new R(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let t=X0.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new R(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${t}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let t=X0.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new R(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${t}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let t=new ArrayBuffer(4),i=new Uint32Array(t),o=new Uint8Array(t);if(i[0]=3735928559,o[0]===239)return!0;if(o[0]===222)return!1;throw new Error("unknown endianness")}}}),ho,op=E(()=>{Ht(),xe(),ho=class extends ft{constructor(e){super(e)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let e=q(this.context.glContext.version);return{setFragColor:new R(`
        void setFragColor(float value) {
            ${e.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new R(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}}),mo,ip=E(()=>{Ht(),mo=class Lg extends ft{constructor(t){super(t)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let t=this.context.outputTextureLayout.shape.length,i={};return this.context.programInfo.inputNames.forEach((o,c)=>{let n=this.context.inputTextureLayouts[c].unpackedShape;if(n.length<=t){let a=n.length,f=t-a,p=`bcastIndices_${o}`,r="";for(let l=0;l<a;++l)r+=`
          realIndices[${l}] = int( mod(float(bcastedIndices[${f+l}]), ${n[l]}.0) );
          `;let u=`
        void ${p} (int bcastedIndices[${t}], out int realIndices[${a}]) {
          ${r}
        }
        `;i[p]=new R(u)}}),i}bcastMatmulIndex(){let t=this.context.outputTextureLayout.shape.length,i={};return this.context.programInfo.inputNames.forEach((o,c)=>{let n=this.context.inputTextureLayouts[c].shape;if(!(n.length<2||n.length>t)){let a=n.length,f=t-a,p=`bcastMatmulIndices_${o}`,r="";for(let l=0;l<a-2;++l)r+=`
          realIndices[${l}] = int( mod(float(bcastedIndices[${f+l}]), ${n[l]}.0) );
          `;let u=`
        void ${p}(int bcastedIndices[${t}], out int realIndices[${a}]) {
          ${r}
          realIndices[${a-1}] = bcastedIndices[${t-1}];
          realIndices[${a-2}] = bcastedIndices[${t-2}];
        }
        `;i[p]=new R(u)}}),i}indicesToOffset(){let t={};return this.context.programInfo.inputNames.forEach((i,o)=>{let c=this.context.inputTextureLayouts[o].shape,n=this.context.inputTextureLayouts[o].strides,a=c.length,f=`indicesToOffset_${i}`;t[f]=new R(Lg.indexToOffsetSingle(f,a,n)),f=`indicesToOffset_${i}_T`,t[f]=new R(Lg.indexToOffsetSingle(f,a,n.slice().reverse()))}),t}static indexToOffsetSingle(t,i,o){let c="";for(let n=i-1;n>=0;--n)c+=`
        offset += indices[${n}] * ${o[n]};
        `;return`
      int ${t}(int indices[${i}]) {
        int offset = 0;
        ${c}
        return offset;
      }
      `}offsetToIndices(){let t={};return this.context.programInfo.inputNames.forEach((i,o)=>{let c=this.context.inputTextureLayouts[o].shape,n=this.context.inputTextureLayouts[o].strides,a=c.length,f=`offsetToIndices_${i}`;t[f]=new R(Lg.offsetToIndicesSingle(f,a,n)),f=`offsetToIndices_${i}_T`,t[f]=new R(Lg.offsetToIndicesSingle(f,a,n.slice().reverse()))}),t}static offsetToIndicesSingle(t,i,o){let c=[];for(let n=0;n<i-1;++n)c.push(`
      indices[${n}] = offset / ${o[n]};`),c.push(`
        offset -= indices[${n}] * ${o[n]};`);return c.push(`
      indices[${i-1}] = offset;`),`
      void ${t}(int offset, out int indices[${i}]) {
        ${c.join("")}
      }
      `}incrementIndices(){let t={};return this.context.programInfo.inputNames.forEach((i,o)=>{let c=this.context.inputTextureLayouts[o].shape,n=c.length,a=`incrementIndices_${i}`,f="";for(let r=0;r<n;++r)f+=`
        shape[${r}] = ${c[r]};`;let p=`
        void ${a}(int axis, out int indices[${n}]) {
          int shape[${n}];
          ${f};
          for(int i = ${n} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;t[a]=new R(p)}),t}}}),bo,ap=E(()=>{Ht(),bo=class extends ft{constructor(e){super(e)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let e=this.context.outputTextureLayout.shape.length,t={add:"+=",sub:"-=",mul:"*=",div:"/="},i={};for(let o in t){let c=`${o}Vec`,n="";for(let f=0;f<e;++f)n+=`
          dest[${f}] ${t[o]} src[${f}];
          `;let a=`
        void ${c}(int src[${e}], out int dest[${e}]) {
          ${n}
        }
        `;i[c]=new R(a)}return i}copyVec(){let e=this.context.outputTextureLayout.shape.length,t="";for(let o=0;o<e;++o)t+=`
        dest[${o}] = src[${o}];
        `;let i=`
      void copyVec(int src[${e}], out int dest[${e}]) {
        ${t}
      }
      `;return{copyVec:new R(i)}}setVecItem(){let e=this.context.outputTextureLayout.shape.length,t=`
        if(index < 0)
            index =${e} + index;
        if (index == 0)
            m[0] = value;
        `;for(let o=1;o<e-1;++o)t+=`
        else if (index == ${o})
            m[${o}] = value;
            `;t+=`
        else
            m[${e-1}] = value;
        `;let i=`
      void setVecItem(out int m[${e}], int index, int value) {
        ${t}
      }
        `;return{setVecItem:new R(i)}}getVecItem(){let e=this.context.outputTextureLayout.shape.length,t=`
        if(index < 0)
            index = ${e} + index;
        if (index == 0)
            return m[0];
      `;for(let o=1;o<e-1;++o)t+=`
        else if (index == ${o})
            return m[${o}];
      `;t+=`
        else
            return m[${e-1}];
        `;let i=`
      int getVecItem(int m[${e}], int index) {
        ${t}
      }
    `;return{getVecItem:new R(i)}}}}),qi,sp=E(()=>{rp(),np(),op(),ip(),ap(),qi={encoding:po,fragcolor:ho,vec:bo,shapeUtils:mo,coordinates:co}}),go,up=E(()=>{Ht(),ep(),sp(),xe(),go=class{constructor(e,t,i,o){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new eo(e,t,i,o),Object.keys(qi).forEach(n=>{let a=new qi[n](this.context);this.libs[n]=a});let c=this.glslLibRoutineDependencyGraph;for(let n in this.libs){let a=this.libs[n].getFunctions();for(let f in a){let p=n+"."+f,r;c[p]?(r=c[p],r.routineBody=a[f].routineBody):(r=new dn(p,a[f].routineBody),c[p]=r);let u=a[f].dependencies;if(u)for(let l=0;l<u.length;++l)if(c[u[l]])r.addDependency(c[u[l]]);else{let h=new dn(u[l]);c[u[l]]=h,r.addDependency(h)}}}}preprocess(){let e=this.context.programInfo,t=e.shaderSource;return this.context.programInfo.hasMain||(t=`${t}
      ${Uu(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),t=Qc(t),`${Gu(this.context.glContext.version)}
    ${this.getUniforms(e.inputNames,e.variables)}
    ${this.getImports(t)}
    ${t}`}getImports(e){let t=this.selectGlslLibRoutinesToBeIncluded(e);if(t.length===0)return"";let i="";for(let o=0;o<t.length;++o)if(t[o].routineBody)i+=t[o].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${t[o].name}`);return i}selectGlslLibRoutinesToBeIncluded(e){let t=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(i=>{let o=i.split(".")[1];e.indexOf(o)!==-1&&t.push(this.glslLibRoutineDependencyGraph[i])}),to.returnOrderedNodes(t)}getUniforms(e,t){let i=[];if(e)for(let o of e)i.push(`uniform sampler2D ${o};`);if(t)for(let o of t)i.push(`uniform ${o.type} ${o.name}${o.arrayLength?`[${o.arrayLength}]`:""};`);return i.join(`
`)}}}),yo,lp=E(()=>{Tt(),at(),up(),xe(),yo=class{constructor(e,t,i){this.profiler=e,this.glContext=t,this.textureLayoutStrategy=i,this.repo=new Map,this.attributesBound=!1}getArtifact(e){return this.repo.get(e)}setArtifact(e,t){this.repo.set(e,t)}run(e,t,i){this.profiler.event("op",`ProgramManager.run ${e.programInfo.name??"unknown kernel"}`,()=>{let o=this.glContext.gl,c=e.program;o.useProgram(c);try{this.bindOutput(i),this.attributesBound||this.bindAttributes(e.attribLocations),this.bindUniforms(e.uniformLocations,e.programInfo.variables??[],t)}catch(n){throw ce.error("ProgramManager",e.programInfo.shaderSource),n}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(e=>this.glContext.deleteProgram(e.program))}build(e,t,i){return this.profiler.event("backend","ProgramManager.build",()=>{let o=new go(this.glContext,e,t,i),c=o.preprocess(),n=this.compile(c);return{programInfo:e,program:n,uniformLocations:this.getUniformLocations(n,o.context.programInfo.inputNames,o.context.programInfo.variables),attribLocations:this.getAttribLocations(n)}})}compile(e){if(!this.vertexShader){ce.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let o=Mu(this.glContext.version);this.vertexShader=this.glContext.compileShader(o,this.glContext.gl.VERTEX_SHADER)}Z.debug&&ce.verbose("ProrgramManager",`FragShader:
${e}
`);let t=this.glContext.compileShader(e,this.glContext.gl.FRAGMENT_SHADER),i=this.glContext.createProgram(this.vertexShader,t);return this.glContext.deleteShader(t),i}bindOutput(e){let t=e.width,i=e.height;ce.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${t}/${i}, shape=${e.shape}, type=${e.tensor.type}`),this.glContext.attachFramebuffer(e.texture,t,i)}bindAttributes(e){let t=e.position,i=e.textureCoord;this.glContext.setVertexAttributes(t,i),this.attributesBound=!0}bindUniforms(e,t,i){var n;let o=this.glContext.gl,c=0;for(let{name:a,type:f,location:p,arrayLength:r}of e){let u=(n=t.find(l=>l.name===a))==null?void 0:n.data;if(f!=="sampler2D"&&!u)throw new Error(`variable '${a}' does not have data defined in program info`);switch(f){case"sampler2D":this.bindTexture(i[c],p,c),c++;break;case"float":r?o.uniform1fv(p,u):o.uniform1f(p,u);break;case"int":r?o.uniform1iv(p,u):o.uniform1i(p,u);break;default:throw new Error(`Uniform not implemented: ${f}`)}}}bindTexture(e,t,i){this.glContext.bindTextureToUniform(e.texture,i,t)}getAttribLocations(e){return{position:this.getAttribLocation(e,"position"),textureCoord:this.getAttribLocation(e,"textureCoord")}}getUniformLocations(e,t,i){let o=[];if(t)for(let c of t)o.push({name:c,type:"sampler2D",location:this.getUniformLocation(e,c)});if(i)for(let c of i)o.push({...c,location:this.getUniformLocation(e,c.name)});return o}getUniformLocation(e,t){let i=this.glContext.gl.getUniformLocation(e,t);if(i===null)throw new Error(`Uniform ${t} not found.`);return i}getAttribLocation(e,t){return this.glContext.gl.getAttribLocation(e,t)}}}),To,fp=E(()=>{at(),cn(),To=class{constructor(e,t,i,o){this.glContext=e,this.layoutStrategy=t,this.profiler=i,this.config=o,this.pendingRead=new Map,o.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(e,t,i,o){let c=this.toEncoderType(e),n=this.glContext.getEncoder(c,t.channels||1,o);if(t.isPacked&&o===1)throw new Error("not implemented");let a=t.width,f=t.height,p,r;if(this.config.reuseTextures){p=`${a}x${f}_${n.format}_${n.internalFormat}_${n.textureType}`,r=this.inUseTextures.get(p),r||(r=[],this.inUseTextures.set(p,r));let l=this.idleTextures.get(p);if(l&&l.length>0){let h=l.pop();return r.push(h),o===1&&this.glContext.updateTexture(h,a,f,n,this.toTextureData(e,i)),h}}ce.verbose("TextureManager",`Creating new texture of size ${t.width}x${t.height}`);let u=this.glContext.allocateTexture(a,f,n,this.toTextureData(e,i));return this.config.reuseTextures&&(r.push(u),this.textureLookup.set(u,p)),u}readTexture(e,t,i){return i||(i=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let o=e.shape.reduce((n,a)=>n*a)*i,c=this.glContext.readTexture(e.texture,e.width,e.height,o,this.toEncoderType(t),i);return this.toTensorData(t,c)})}async readTextureAsync(e,t,i){let o=e.tensor.dataId;if(i||(i=1),this.pendingRead.has(o)){let c=this.pendingRead.get(o);return new Promise(n=>c==null?void 0:c.push(n))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(o,[]);let c=e.shape.reduce((p,r)=>p*r)*i;await this.glContext.createAndWaitForFence();let n=this.glContext.readTexture(e.texture,e.width,e.height,c,this.toEncoderType(t),i),a=this.toTensorData(t,n),f=this.pendingRead.get(o);return this.pendingRead.delete(o),f==null||f.forEach(p=>p(a)),a})}readUint8TextureAsFloat(e){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let t=e.shape.reduce((o,c)=>o*c),i=this.glContext.readTexture(e.texture,e.width,e.height,t*4,"byte",4);return new Float32Array(i.buffer,i.byteOffset,t)})}releaseTexture(e,t){let i;if(this.config.reuseTextures&&(i=this.textureLookup.get(e.texture),i)){t&&this.textureLookup.delete(i);let o=this.inUseTextures.get(i);if(o){let c=o.indexOf(e.texture);if(c!==-1){o.splice(c,1);let n=this.idleTextures.get(i);n||(n=[],this.idleTextures.set(i,n)),n.push(e.texture)}}}(!i||t)&&(ce.verbose("TextureManager",`Deleting texture of size ${e.width}x${e.height}`),this.glContext.deleteTexture(e.texture))}toTensorData(e,t){switch(e){case"int16":return t instanceof Int16Array?t:Int16Array.from(t);case"int32":return t instanceof Int32Array?t:Int32Array.from(t);case"int8":return t instanceof Int8Array?t:Int8Array.from(t);case"uint16":return t instanceof Uint16Array?t:Uint16Array.from(t);case"uint32":return t instanceof Uint32Array?t:Uint32Array.from(t);case"uint8":case"bool":return t instanceof Uint8Array?t:Uint8Array.from(t);case"float32":return t instanceof Float32Array?t:Float32Array.from(t);case"float64":return t instanceof Float64Array?t:Float64Array.from(t);default:throw new Error(`TensorData type ${e} is not supported`)}}toTextureData(e,t){if(t)return t instanceof Float32Array?t:new Float32Array(t)}toEncoderType(e){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),xo,cp=E(()=>{at(),Is(),rl(),Jc(),lp(),Hi(),fp(),xo=class{constructor(e,t){this.backend=e,this.context=t,this.layoutStrategy=new fo(e.glContext.maxTextureSize),this.programManager=new yo(this.context.profiler,e.glContext,this.layoutStrategy),this.textureManager=new To(e.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:e.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=e.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Qn(this)}onGraphInitialized(e){let t=e.getValues().filter(i=>i.from===-1&&i.tensor).map(i=>i.tensor.dataId);this.initializers=new Set(t)}isInitializer(e){return this.initializers?this.initializers.has(e):!1}addInitializer(e){this.initializers.add(e)}getTextureData(e,t){return t?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e)}setTextureData(e,t,i=!1){ce.verbose("WebGLSessionHandler","Storing Texture data in cache"),i?this.packedTextureDataCache.set(e,t):this.unpackedTextureDataCache.set(e,t)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(e=>this.textureManager.releaseTexture(e,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(e=>this.textureManager.releaseTexture(e,!0)),this.unpackedTextureDataCache=new Map}resolve(e,t,i){let o=Os(e,t,Kc);return{impl:o.opImpl,context:o.opInit?o.opInit(e,i):e}}}});function Xb(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}var bn,pp=E(()=>{Tt(),cn(),cn(),kt(),bn=class{constructor(e,t){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=e,this.version=t,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(e,t,i,o){let c=this.gl,n=c.createTexture();c.bindTexture(c.TEXTURE_2D,n),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);let a=o?i.encode(o,e*t):null;return c.texImage2D(c.TEXTURE_2D,0,i.internalFormat,e,t,0,i.format,i.textureType,a),this.checkError(),n}updateTexture(e,t,i,o,c){let n=this.gl;n.bindTexture(n.TEXTURE_2D,e);let a=o.encode(c,t*i);n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,i,o.format,o.textureType,a),this.checkError()}attachFramebuffer(e,t,i){let o=this.gl;o.bindTexture(o.TEXTURE_2D,e),o.bindFramebuffer(o.FRAMEBUFFER,this.framebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e,0),this.checkError(),o.viewport(0,0,t,i),o.scissor(0,0,t,i)}readTexture(e,t,i,o,c,n){let a=this.gl;n||(n=1),this.frameBufferBound||this.attachFramebuffer(e,t,i);let f=this.getEncoder(c,n),p=f.allocate(t*i);return a.bindTexture(a.TEXTURE_2D,e),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e,0),a.readPixels(0,0,t,i,a.RGBA,f.textureType,p),this.checkError(),f.decode(p,o)}isFramebufferReady(){return!0}getActiveTexture(){let e=this.gl;return`TEXTURE${e.getParameter(this.gl.ACTIVE_TEXTURE)-e.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(e,t){let i=this.gl;i.vertexAttribPointer(e,3,i.FLOAT,!1,20,0),i.enableVertexAttribArray(e),t!==-1&&(i.vertexAttribPointer(t,2,i.FLOAT,!1,20,12),i.enableVertexAttribArray(t)),this.checkError()}createProgram(e,t){let i=this.gl,o=i.createProgram();return i.attachShader(o,e),i.attachShader(o,t),i.linkProgram(o),o}compileShader(e,t){let i=this.gl,o=i.createShader(t);if(!o)throw new Error(`createShader() returned null with type ${t}`);if(i.shaderSource(o,e),i.compileShader(o),i.getShaderParameter(o,i.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${i.getShaderInfoLog(o)}
Shader source:
${e}`);return o}deleteShader(e){this.gl.deleteShader(e)}bindTextureToUniform(e,t,i){let o=this.gl;o.activeTexture(o.TEXTURE0+t),this.checkError(),o.bindTexture(o.TEXTURE_2D,e),this.checkError(),o.uniform1i(i,t),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Z.debug){let e=this.gl,t=e.getError(),i="";switch(t){case e.NO_ERROR:return;case e.INVALID_ENUM:i="INVALID_ENUM";break;case e.INVALID_VALUE:i="INVALID_VALUE";break;case e.INVALID_OPERATION:i="INVALID_OPERATION";break;case e.INVALID_FRAMEBUFFER_OPERATION:i="INVALID_FRAMEBUFFER_OPERATION";break;case e.OUT_OF_MEMORY:i="OUT_OF_MEMORY";break;case e.CONTEXT_LOST_WEBGL:i="CONTEXT_LOST_WEBGL";break;default:i=`Unknown WebGL Error: ${t.toString(16)}`}throw new Error(i)}}deleteTexture(e){this.gl.deleteTexture(e)}deleteProgram(e){this.gl.deleteProgram(e)}getEncoder(e,t,i=0){if(this.version===2)return new Jn(this.gl,t);switch(e){case"float":return i===1||this.isRenderFloat32Supported?new fn(this.gl,t):new fn(this.gl,t,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Zn(this.gl,t);default:throw new Error(`Invalid dataType: ${e}`)}}clearActiveTextures(){let e=this.gl;for(let t=0;t<this.maxTextureImageUnits;++t)e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(this.framebuffer),e.bindBuffer(e.ARRAY_BUFFER,null),e.deleteBuffer(this.vertexbuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let e=this.gl,t=e.createBuffer();if(!t)throw new Error("createBuffer() returned null");let i=this.createDefaultGeometry();return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),this.checkError(),t}createFramebuffer(){let e=this.gl.createFramebuffer();if(!e)throw new Error("createFramebuffer returned null");return e}queryVitalParameters(){let e=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let e=this.gl,t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);let i=this.version===2?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,i,1,1,0,e.RGBA,e.FLOAT,null);let o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);let c=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(t),e.deleteFramebuffer(o),c}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let e=this.gl,t,i,o,c,n;try{t=e.createTexture(),i=e.createFramebuffer(),e.bindTexture(e.TEXTURE_2D,t);let a=this.version===2?e.RGBA32F:e.RGBA;return e.texImage2D(e.TEXTURE_2D,0,a,1,1,0,e.RGBA,e.FLOAT,null),e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),e.enable(e.BLEND),o=e.createShader(e.VERTEX_SHADER),!o||(e.shaderSource(o,"void main(){}"),e.compileShader(o),c=e.createShader(e.FRAGMENT_SHADER),!c)||(e.shaderSource(c,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),e.compileShader(c),n=e.createProgram(),!n)?!1:(e.attachShader(n,o),e.attachShader(n,c),e.linkProgram(n),e.useProgram(n),e.drawArrays(e.POINTS,0,1),e.getError()===e.NO_ERROR)}finally{e.disable(e.BLEND),n&&e.deleteProgram(n),o&&e.deleteShader(o),c&&e.deleteShader(c),i&&(e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(i)),t&&(e.bindTexture(e.TEXTURE_2D,null),e.deleteTexture(t))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let e=this.gl,t=this.disjointTimerQueryWebgl2Extension,i=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,i),i}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let e=this.gl,t=this.disjointTimerQueryWebgl2Extension;e.endQuery(t.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(e){let t=!1,i=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let o=this.gl,c=this.disjointTimerQueryWebgl2Extension;t=o.getQueryParameter(e,o.QUERY_RESULT_AVAILABLE),i=o.getParameter(c.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return t&&!i}getTimerResult(e){let t=0;if(this.version===2){let i=this.gl;t=i.getQueryParameter(e,i.QUERY_RESULT),i.deleteQuery(e)}else throw new Error("WebGL1 profiling currently not supported");return t/1e6}async waitForQueryAndGetTime(e){return await gi(()=>this.isTimerResultAvailable(e)),this.getTimerResult(e)}async createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,i=e,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),o===null?t=()=>!0:t=()=>{let c=i.clientWaitSync(o,0,0);return c===i.ALREADY_SIGNALED||c===i.CONDITION_SATISFIED},{query:o,isFencePassed:t}}async pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){let e=Xb(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=e;++t){let{resolveFn:i}=this.itemsToPoll[t];i()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}async addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)&&await gi(()=>(this.pollItems(),this.itemsToPoll.length===0))}}});function ji(e){let t;if((!e||e==="webgl2")&&"webgl2"in zr?t=zr.webgl2:(!e||e==="webgl")&&"webgl"in zr&&(t=zr.webgl),!t)try{let o=Jb();t=dp(o,e)}catch{let o=Kb();t=dp(o,e)}e=e||t.version===1?"webgl":"webgl2";let i=t.gl;return zr[e]=t,i.isContextLost()?(delete zr[e],ji(e)):(i.disable(i.DEPTH_TEST),i.disable(i.STENCIL_TEST),i.disable(i.BLEND),i.disable(i.DITHER),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SAMPLE_COVERAGE),i.enable(i.SCISSOR_TEST),i.enable(i.CULL_FACE),i.cullFace(i.BACK),t)}function dp(e,t){let i={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},o,c=i;if((!t||t==="webgl2")&&(o=e.getContext("webgl2",c),o))try{return new bn(o,2)}catch(n){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${n}`)}if((!t||t==="webgl")&&(o=e.getContext("webgl",c)||e.getContext("experimental-webgl",c),o))try{return new bn(o,1)}catch(n){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${n}`)}throw new Error("WebGL is not supported")}function Kb(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let e=document.createElement("canvas");return e.width=1,e.height=1,e}function Jb(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var zr,hp=E(()=>{at(),pp(),zr={}}),wo,mp=E(()=>{Tt(),at(),cp(),hp(),wo=class{get contextId(){return Z.webgl.contextId}set contextId(e){Z.webgl.contextId=e}get matmulMaxBatchSize(){return Z.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(e){Z.webgl.matmulMaxBatchSize=e}get textureCacheMode(){return Z.webgl.textureCacheMode}set textureCacheMode(e){Z.webgl.textureCacheMode=e}get pack(){return Z.webgl.pack}set pack(e){Z.webgl.pack=e}get async(){return Z.webgl.async}set async(e){Z.webgl.async=e}initialize(){try{return this.glContext=ji(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),ce.setWithEnv(Z),Z.webgl.context||Object.defineProperty(Z.webgl,"context",{value:this.glContext.gl}),ce.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(e){return ce.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${e}`),!1}}createSessionHandler(e){return new xo(this,e)}dispose(){this.glContext.dispose()}}});async function Yi(e){if(e){let t=typeof e=="string"?[e]:e;for(let i of t){let o=bp.get(i);if(o)return o;let c=await Qb(i);if(c)return c}}else return Yi(["webgl"]);throw new Error("no available backend to use")}async function Qb(e){let t=Zb;if(typeof t[e]<"u"&&eg(t[e])){let i=t[e],o=i.initialize();if(typeof o=="object"&&"then"in o&&(o=await o),o)return bp.set(e,i),i}}function eg(e){let t=e;return"initialize"in t&&typeof t.initialize=="function"&&"createSessionHandler"in t&&typeof t.createSessionHandler=="function"&&"dispose"in t&&typeof t.dispose=="function"}var bp,Zb,gp=E(()=>{mp(),bp=new Map,Zb={webgl:new wo}}),Xi,vo,yp=E(()=>{at(),Xi=class{constructor(e,t){this.op=e,this.node=t}},vo=class{constructor(e,t,i){this.graph=e,this.profiler=i,this.initialize(t)}initialize(e){this.profiler.event("session","ExecutionPlan.initialize",()=>{let t=this.graph.getNodes();if(t.length!==e.length)throw new Error("The size of nodes and OPs do not match.");this._ops=e.map((i,o)=>new Xi(i,t[o])),this.reset(),this._starter=[],this._ops.forEach((i,o)=>{let c=!0;for(let n of i.node.inputs)if(!this._values[n]&&this.graph.getInputIndices().indexOf(n)===-1){c=!1;break}c&&this._starter.push(o)})})}reset(){this._values=this.graph.getValues().map(e=>e.tensor)}async execute(e,t){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let i=e.createInferenceHandler(),o=this.graph.getInputIndices();if(t.length!==o.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${t.length} expected: ${o.length}`);t.forEach((r,u)=>{let l=o[u];this._values[l]=r});let c=this._starter.slice(0),n=this.graph.getValues(),a=this.graph.getNodes(),f=0;for(;f<c.length;){let r=c[f++],u=this._ops[r],l=u.node.inputs.map(S=>this._values[S]);if(l.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${u.node}`);let h=l;ce.verbose("ExecPlan",`Runing op:${u.node.name} (${h.map((S,A)=>`'${u.node.inputs[A]}': ${S.type}[${S.dims.join(",")}]`).join(", ")})`);let y=await this.profiler.event("node",u.node.name,async()=>u.op.impl(i,h,u.op.context));if(y.length!==u.node.outputs.length)throw new Error("the size of output does not match model definition.");y.forEach((S,A)=>{let V=u.node.outputs[A];if(this._values[V])throw new Error(`output [${V}] already has value: op:${u.node.name}`);this._values[V]=S});let I=new Set;y.forEach((S,A)=>{let V=u.node.outputs[A];for(let N of n[V].to){let B=a[N],te=!0;for(let ve of B.inputs)if(!this._values[ve]){te=!1;break}te&&I.add(N)}}),c.push(...I)}let p=[];for(let r=0;r<this.graph.getOutputIndices().length;r++){let u=this.graph.getOutputIndices()[r],l=this._values[u];if(l===void 0)throw new Error(`required output [${u}] does not have value`);u===0?await l.getData():l.data,p.push(l)}return ce.verbose("ExecPlan","disposing of inferenceHandler"),i.dispose(),p})}}}),oe,dt,gn,Tp=E(()=>{nn(),oe=Er($r()),br(),fe(),dt=W.experimental.fbs,gn=class Mg{constructor(t){if(this._attributes=new Map,t!=null){for(let i of t)i instanceof oe.onnx.AttributeProto?this._attributes.set(i.name,[Mg.getValue(i),Mg.getType(i)]):i instanceof dt.Attribute&&this._attributes.set(i.name(),[Mg.getValue(i),Mg.getType(i)]);if(this._attributes.size<t.length)throw new Error("duplicated attribute names")}}set(t,i,o){this._attributes.set(t,[o,i])}delete(t){this._attributes.delete(t)}getFloat(t,i){return this.get(t,"float",i)}getInt(t,i){return this.get(t,"int",i)}getString(t,i){return this.get(t,"string",i)}getTensor(t,i){return this.get(t,"tensor",i)}getFloats(t,i){return this.get(t,"floats",i)}getInts(t,i){return this.get(t,"ints",i)}getStrings(t,i){return this.get(t,"strings",i)}getTensors(t,i){return this.get(t,"tensors",i)}get(t,i,o){let c=this._attributes.get(t);if(c===void 0){if(o!==void 0)return o;throw new Error(`required attribute not found: ${t}`)}if(c[1]!==i)throw new Error(`type mismatch: expected ${i} but got ${c[1]}`);return c[0]}static getType(t){let i=t instanceof oe.onnx.AttributeProto?t.type:t.type();switch(i){case oe.onnx.AttributeProto.AttributeType.FLOAT:return"float";case oe.onnx.AttributeProto.AttributeType.INT:return"int";case oe.onnx.AttributeProto.AttributeType.STRING:return"string";case oe.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case oe.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case oe.onnx.AttributeProto.AttributeType.INTS:return"ints";case oe.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case oe.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${oe.onnx.AttributeProto.AttributeType[i]}`)}}static getValue(t){let i=t instanceof oe.onnx.AttributeProto?t.type:t.type();if(i===oe.onnx.AttributeProto.AttributeType.GRAPH||i===oe.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let o=this.getValueNoCheck(t);if(i===oe.onnx.AttributeProto.AttributeType.INT&&nt.isLong(o))return nt.longToNumber(o);if(i===oe.onnx.AttributeProto.AttributeType.INTS){let c=o,n=new Array(c.length);for(let a=0;a<c.length;a++){let f=c[a];n[a]=nt.longToNumber(f)}return n}if(i===oe.onnx.AttributeProto.AttributeType.TENSOR)return t instanceof oe.onnx.AttributeProto?Ce.fromProto(o):Ce.fromOrtTensor(o);if(i===oe.onnx.AttributeProto.AttributeType.TENSORS){if(t instanceof oe.onnx.AttributeProto)return o.map(c=>Ce.fromProto(c));if(t instanceof dt.Attribute)return o.map(c=>Ce.fromOrtTensor(c))}return i===oe.onnx.AttributeProto.AttributeType.STRING&&t instanceof oe.onnx.AttributeProto?ln(o):i===oe.onnx.AttributeProto.AttributeType.STRINGS&&t instanceof oe.onnx.AttributeProto?o.map(ln):o}static getValueNoCheck(t){return t instanceof oe.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(t):this.getValueNoCheckFromOrtFormat(t)}static getValueNoCheckFromOnnxFormat(t){switch(t.type){case oe.onnx.AttributeProto.AttributeType.FLOAT:return t.f;case oe.onnx.AttributeProto.AttributeType.INT:return t.i;case oe.onnx.AttributeProto.AttributeType.STRING:return t.s;case oe.onnx.AttributeProto.AttributeType.TENSOR:return t.t;case oe.onnx.AttributeProto.AttributeType.GRAPH:return t.g;case oe.onnx.AttributeProto.AttributeType.FLOATS:return t.floats;case oe.onnx.AttributeProto.AttributeType.INTS:return t.ints;case oe.onnx.AttributeProto.AttributeType.STRINGS:return t.strings;case oe.onnx.AttributeProto.AttributeType.TENSORS:return t.tensors;case oe.onnx.AttributeProto.AttributeType.GRAPHS:return t.graphs;default:throw new Error(`unsupported attribute type: ${oe.onnx.AttributeProto.AttributeType[t.type]}`)}}static getValueNoCheckFromOrtFormat(t){switch(t.type()){case dt.AttributeType.FLOAT:return t.f();case dt.AttributeType.INT:return t.i();case dt.AttributeType.STRING:return t.s();case dt.AttributeType.TENSOR:return t.t();case dt.AttributeType.GRAPH:return t.g();case dt.AttributeType.FLOATS:return t.floatsArray();case dt.AttributeType.INTS:{let i=[];for(let o=0;o<t.intsLength();o++)i.push(t.ints(o));return i}case dt.AttributeType.STRINGS:{let i=[];for(let o=0;o<t.stringsLength();o++)i.push(t.strings(o));return i}case dt.AttributeType.TENSORS:{let i=[];for(let o=0;o<t.tensorsLength();o++)i.push(t.tensors(o));return i}default:throw new Error(`unsupported attribute type: ${dt.AttributeType[t.type()]}`)}}}}),Ji,_o,Zi,Rt,Oo,Ki,xp=E(()=>{Tp(),nn(),Ji=Er($r()),br(),fe(),_o=W.experimental.fbs,Zi={from:(e,t)=>new Ki(e,t)},Rt=class{constructor(e){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,e&&(this.type=Ve.tensorValueTypeFromProto(e.type.tensorType))}get from(){return this._from}get to(){return this._to}},Oo=class{constructor(e,t){e instanceof Ji.onnx.NodeProto?(this.name=e.name,this.opType=e.opType,this.attributes=new gn(e.attribute)):e instanceof _o.Node&&(this.name=t??e.name(),this.opType=e.opType(),this.attributes=new gn(Ve.tensorAttributesFromORTFormat(e))),this.inputs=[],this.outputs=[],this.executeNode=!0}},Ki=class{constructor(e,t){if(!e)throw new TypeError("graph is empty");this.buildGraph(e),this.transformGraph(t),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(e){if(e instanceof Ji.onnx.GraphProto)this.buildGraphFromOnnxFormat(e);else if(e instanceof _o.Graph)this.buildGraphFromOrtFormat(e);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(e){let t=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let i=new Map;if(!e.input)throw new Error("missing information in graph: input");let o=[];for(let c of e.input){if(t.has(c.name))throw new Error(`duplicated input name: ${c.name}`);let n=this._allData.push(new Rt(c))-1;t.set(c.name,n),o.push(c.name)}if(!e.initializer)throw new Error("missing information in graph: initializer");for(let c of e.initializer){let n=t.get(c.name);if(n===void 0){let a=new Rt;a.type={shape:{dims:Ve.tensorDimsFromProto(c.dims)},tensorType:Ve.tensorDataTypeFromProto(c.dataType)},n=this._allData.push(a)-1,t.set(c.name,n)}this._allData[n]._from=-1,this._allData[n].tensor=Ce.fromProto(c)}for(let c=0;c<this._allData.length;c++)this._allData[c].tensor||(this._allInputIndices.push(c),this._allInputNames.push(o[c]));if(!e.output)throw new Error("missing information in graph: output");for(let c of e.output){if(t.has(c.name))throw new Error(`duplicated output name: ${c.name}`);let n=this._allData.push(new Rt(c))-1;t.set(c.name,n),this._allOutputIndices.push(n),this._allOutputNames.push(c.name)}if(!e.node)throw new Error("missing information in graph: node");for(let c of e.node){if(!c.name)for(let a=0;;a++){let f=`unnamed_${c.opType}_${a}`;if(!i.has(f)){c.name=f;break}}if(i.has(c.name))throw new Error(`duplicated node name: ${c.name}`);let n=this._nodes.push(new Oo(c))-1;i.set(c.name,n)}for(let c=0;c<this._nodes.length;c++){let n=this._nodes[c],a=e.node[c];if(!a.output)throw new Error(`missing output for node: ${a.name}`);for(let f of a.output){let p=t.get(f);if(typeof p>"u"&&(p=this._allData.push(new Rt)-1,t.set(f,p)),n.outputs.push(p),this._allData[p]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${p}`);if(this._allData[p]._from=c,a.opType==="Constant"){if(!a.attribute||a.attribute.length!==1||!a.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!a.output||a.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");n.outputs.pop(),n.executeNode=!1,this._allData[p]._from=-1,this._allData[p].tensor=Ce.fromProto(a.attribute[0].t)}}}for(let c=0;c<this._nodes.length;c++){let n=this._nodes[c],a=e.node[c];if(!a.input)throw new Error(`missing input for node: ${a.name}`);for(let f of a.input){let p=t.get(f);if(typeof p>"u"){if(f===""&&(a.input.length===3||a.input.length===4)&&a.opType==="Resize")continue;throw new Error(`unrecognized input '${f}' for node: ${a.name}`)}n.inputs.push(p),this._allData[p]._to.push(c)}}return!0}buildGraphFromOrtFormat(e){var c,n,a;let t=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let i=new Map,o=[];for(let f=0;f<e.inputsLength();f++){let p=e.inputs(f);if(t.has(p))throw new Error(`duplicated input name: ${p}`);for(let r=0;r<e.nodeArgsLength();r++)if(((c=e.nodeArgs(r))==null?void 0:c.name())===p){let u=new Rt;if(((a=(n=e.nodeArgs(r))==null?void 0:n.type())==null?void 0:a.valueType())!==_o.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let l=e.nodeArgs(r).type().value(new _o.TensorTypeAndShape),h=Ve.tensorDataTypeFromProto(l.elemType()),y=l.shape(),I=[];for(let A=0;A<y.dimLength();A++)I.push(nt.longToNumber(y.dim(A).value().dimValue()));u.type={shape:{dims:I},tensorType:h};let S=this._allData.push(u)-1;t.set(p,S),o.push(p)}}for(let f=0;f<e.initializersLength();f++){let p=e.initializers(f),r=t.get(p.name());if(r===void 0){let u=new Rt,l=Ve.tensorDimsFromORTFormat(p),h=Ve.tensorDataTypeFromProto(p.dataType());u.type={shape:{dims:l},tensorType:h},r=this._allData.push(u)-1,t.set(p.name(),r)}this._allData[r]._from=-1,this._allData[r].tensor=Ce.fromOrtTensor(p)}for(let f=0;f<this._allData.length;f++)this._allData[f].tensor||(this._allInputIndices.push(f),this._allInputNames.push(o[f]));for(let f=0;f<e.outputsLength();f++){let p=e.outputs(f);if(t.has(p))throw new Error(`duplicated output name: ${p}`);let r=this._allData.push(new Rt)-1;t.set(p,r),this._allOutputIndices.push(r),this._allOutputNames.push(p)}if(!e.nodes)throw new Error("missing information in graph: node");for(let f=0;f<e.nodesLength();f++){let p=e.nodes(f),r=p.name();if(!r)for(let l=0;r=`unnamed_${p.opType()}_${l}`,!!i.has(r);l++);if(i.has(r))throw new Error(`duplicated node name: ${r}`);let u=this._nodes.push(new Oo(p,r))-1;i.set(r,u)}for(let f=0;f<this._nodes.length;f++){let p=this._nodes[f],r=e.nodes(f);if(r==null)throw new Error(`No node exists at index ${f}`);if((r==null?void 0:r.outputsLength())===0)throw new Error(`missing output for node: ${r.name}`);for(let u=0;u<(r==null?void 0:r.outputsLength());u++){let l=r==null?void 0:r.outputs(u),h=t.get(l);if(typeof h>"u"&&(h=this._allData.push(new Rt)-1,t.set(l,h)),p.outputs.push(h),this._allData[h]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${h}`);if(this._allData[h]._from=f,r.opType()==="Constant"){if(r.attributesLength()!==1||!r.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(r.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");p.outputs.pop(),p.executeNode=!1,this._allData[h]._from=-1,this._allData[h].tensor=Ce.fromOrtTensor(r.attributes(0).t())}}}for(let f=0;f<this._nodes.length;f++){let p=this._nodes[f],r=e.nodes(f);if(r.inputsLength()===0)throw new Error(`missing input for node: ${r.name}`);for(let u=0;u<r.inputsLength();u++){let l=r.inputs(u),h=t.get(l);if(typeof h>"u")throw new Error(`unrecognized input '${l}' for node: ${r.name()}`);p.inputs.push(h),this._allData[h]._to.push(f)}}}checkIsAcyclic(){let e=new Set;this._allInputIndices.forEach(o=>{this._allData[o]._to.forEach(c=>{e.add(c)})});let t=Array.from(e),i=new Array(this._nodes.length).fill("white");for(;t.length>0;){let o=t.pop();i[o]==="gray"?i[o]="black":(t.push(o),i[o]="gray",this._nodes[o].outputs.forEach(c=>{let n=this._allData[c];if(typeof n.tensor<"u")throw new Error("node outputs should not be initialized");if(n._from!==o)throw new Error("from property of the Value object doesn't match index of Node being processed");n._to.forEach(a=>{if(i[a]==="gray")throw new Error("model graph is cyclic");i[a]==="white"&&t.push(a)})}))}}transformGraph(e){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),e&&e.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let e=0,t=new Array(this._nodes.length,0),i=0;for(let o=0;o<this._nodes.length;o++)t[o]=i,this._nodes[o].executeNode?(i!==o&&(this._nodes[i]=this._nodes[o]),i++):this._nodes[o].outputs.forEach(c=>{this._allData[c]._from=-2});this._nodes.splice(i,this._nodes.length-i);for(let o=0;o<this._allData.length;o++){let c=this._allData[o];c._from!==void 0&&c._from!==-1&&c._from!==-2&&(c._from=t[c._from]);for(let n=0;n<c._to.length;n++)if(c._to[n]>=0)c._to[n]=t[c._to[n]];else throw new Error("Trying to update a removed node")}e=0;for(let o=0;o<this._allData.length;o++){if(this._allData[o].from===-2&&this._allOutputIndices.indexOf(o+e)===-1){e++,this._allData.splice(o,1),o--;continue}if(e>0){let c=-1;this._allData[o].from!==void 0&&this._allData[o].from!==-1?(c=this._nodes[this._allData[o].from].outputs.indexOf(o+e),c!==-1&&(this._nodes[this._allData[o].from].outputs[c]=o)):(c=this._allInputIndices.indexOf(o+e),c!==-1&&(this._allInputIndices[c]=o)),this._allData[o].to.forEach(n=>{c=this._nodes[n].inputs.indexOf(o+e),c!==-1&&(this._nodes[n].inputs[c]=o)}),this._allData[o].to.length===0&&(c=this._allOutputIndices.indexOf(o+e),c!==-1&&(this._allOutputIndices[c]=o))}}}deleteNode(e){let t=this._nodes[e];if(t.outputs.length>1){for(let a=1;a<t.outputs.length;a++)if(this._allData[t.outputs[a]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}t.executeNode=!1;let i=t.inputs[0],o=t.outputs[0],c=this._allData[o].to;for(let a=0;a<t.inputs.length;a++){let f=this._allData[t.inputs[a]].to.indexOf(e);if(f===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[t.inputs[a]].to.splice(f,1)}this._allData[o]._to=[];let n=this._allOutputIndices.indexOf(o);if(n!==-1&&(this._allOutputIndices[n]=i),c&&c.length>0)for(let a of c){let f=this._nodes[a].inputs.indexOf(o);if(f===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[a].inputs[f]=i,this._allData[i].to.push(a)}}removeAllDropoutNodes(){let e=0;for(let t of this._nodes){if(t.opType==="Dropout"){if(t.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(t.outputs.length!==1&&t.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(t.outputs.length===2&&this._allData[t.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(e)}e++}}removeAllIdentityNodes(){let e=0;for(let t of this._nodes)t.opType==="Identity"&&this.deleteNode(e),e++}isActivation(e){switch(e.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let e of this._nodes)if(e.opType==="Conv"){let t=this._allData[e.outputs[0]]._to;if(t.length===1&&this.isActivation(this._nodes[t[0]])){let i=this._nodes[t[0]];if(i.opType==="Clip")if(i.inputs.length===1)try{e.attributes.set("activation_params","floats",[i.attributes.getFloat("min"),i.attributes.getFloat("max")])}catch{e.attributes.set("activation_params","floats",[hr,mr])}else if(i.inputs.length>=3&&this._allData[i.inputs[1]].tensor!==void 0&&this._allData[i.inputs[2]].tensor!==void 0)e.attributes.set("activation_params","floats",[this._allData[i.inputs[1]].tensor.floatData[0],this._allData[i.inputs[2]].tensor.floatData[0]]);else continue;e.attributes.set("activation","string",i.opType),this.deleteNode(t[0])}}}}}),wp,tg,Io,vp=E(()=>{Wn(),xp(),nn(),wp=Er($r()),fe(),tg=W.experimental.fbs,Io=class{constructor(){}load(e,t,i){if(!i)try{this.loadFromOnnxFormat(e,t);return}catch(o){if(i!==void 0)throw o}this.loadFromOrtFormat(e,t)}loadFromOnnxFormat(e,t){let i=wp.onnx.ModelProto.decode(e);if(nt.longToNumber(i.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=i.opsetImport.map(o=>({domain:o.domain,version:nt.longToNumber(o.version)})),this._graph=Zi.from(i.graph,t)}loadFromOrtFormat(e,t){let i=new O.ByteBuffer(e),o=tg.InferenceSession.getRootAsInferenceSession(i).model();if(nt.longToNumber(o.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let c=0;c<o.opsetImportLength();c++){let n=o.opsetImport(c);this._opsets.push({domain:n==null?void 0:n.domain(),version:nt.longToNumber(n.version())})}this._graph=Zi.from(o.graph(),t)}get graph(){return this._graph}get opsets(){return this._opsets}}}),So,_p=E(()=>{gp(),yp(),at(),vp(),So=class{constructor(e={}){this._initialized=!1,this.backendHint=e.backendHint,this.profiler=zn.create(e.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(e,t,i){await this.profiler.event("session","Session.loadModel",async()=>{let o=await Yi(this.backendHint);if(this.sessionHandler=o.createSessionHandler(this.context),this._model=new Io,typeof e=="string"){let c=e.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let n=await(void 0)(e);this.initialize(n,c)}else{let n=await(await fetch(e)).arrayBuffer();this.initialize(new Uint8Array(n),c)}}else if(ArrayBuffer.isView(e))this.initialize(e);else{let c=new Uint8Array(e,t||0,i||e.byteLength);this.initialize(c)}})}initialize(e,t){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let i=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(e,i,t),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new vo(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(e){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let t=this.normalizeAndValidateInputs(e),i=await this._executionPlan.execute(this.sessionHandler,t);return this.createOutput(i)})}normalizeAndValidateInputs(e){let t=this._model.graph.getInputNames();if(Array.isArray(e)){if(e.length!==t.length)throw new Error(`incorrect input array length: expected ${t.length} but got ${e.length}`)}else{if(e.size!==t.length)throw new Error(`incorrect input map size: expected ${t.length} but got ${e.size}`);let i=new Array(e.size),o=0;for(let c=0;c<t.length;++c){let n=e.get(t[c]);if(!n)throw new Error(`missing input tensor for: '${name}'`);i[o++]=n}e=i}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let i=this._model.graph.getInputIndices(),o=this._model.graph.getValues(),c=new Array(i.length);for(let n=0;n<i.length;++n){let a=o[i[n]];c[n]=a.type.shape.dims,this.context.graphInputTypes.push(a.type.tensorType),this.context.graphInputDims.push(e[n].dims)}this.validateInputTensorDims(c,e,!0)}else this.validateInputTensorDims(this.context.graphInputDims,e,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,e),e}validateInputTensorTypes(e,t){for(let i=0;i<t.length;i++){let o=e[i],c=t[i].type;if(o!==c)throw new Error(`input tensor[${i}] check failed: expected type '${o}' but got ${c}`)}}validateInputTensorDims(e,t,i){for(let o=0;o<t.length;o++){let c=e[o],n=t[o].dims;if(!this.compareTensorDims(c,n,i))throw new Error(`input tensor[${o}] check failed: expected shape '[${c.join(",")}]' but got [${n.join(",")}]`)}}compareTensorDims(e,t,i){if(e.length!==t.length)return!1;for(let o=0;o<e.length;++o)if(e[o]!==t[o]&&(!i||e[o]!==0))return!1;return!0}createOutput(e){let t=this._model.graph.getOutputNames();if(e.length!==t.length)throw new Error("expected number of outputs do not match number of generated outputs");let i=new Map;for(let o=0;o<t.length;++o)i.set(t[o],e[o]);return i}initializeOps(e){let t=e.getNodes();this._ops=new Array(t.length);for(let i=0;i<t.length;i++)this._ops[i]=this.sessionHandler.resolve(t[i],this._model.opsets,e)}}}),Ao,Op=E(()=>{Tt(),br(),Ao=class{constructor(e){this.session=e,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(e,t,i){let o=new Map;for(let a in e)if(Object.hasOwnProperty.call(e,a)){let f=e[a];o.set(a,new Ce(f.dims,f.type,void 0,void 0,f.data))}let c=await this.session.run(o),n={};return c.forEach((a,f)=>{n[f]=new Re(a.type,a.data,a.dims)}),n}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),Ip={};Pr(Ip,{onnxjsBackend:()=>ng});var Qi,ng,Sp=E(()=>{_p(),Op(),Qi=class{async init(){}async createInferenceSessionHandler(e,t){let i=new So(t);return typeof e=="string"?await i.loadModel(e):await i.loadModel(e),new Ao(i)}},ng=new Qi}),ea={};Pr(ea,{createReadStream:()=>Ap,readFile:()=>og,readFileSync:()=>ig});var og,ig,Ap,ta=E(()=>{og=void 0,ig=void 0,Ap=void 0}),ra={};Pr(ra,{join:()=>ag});var ag,na=E(()=>{ag=void 0}),Dp=me((e,t)=>{var i=(()=>{var o=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(o=o||__filename),function(c={}){var n=c,a,f;n.ready=new Promise((T,k)=>{a=T,f=k});var p=Object.assign({},n),r="./this.program",u=typeof window=="object",l=typeof importScripts=="function",h=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",y="",I,S,A;if(h){var V=(ta(),or(ea)),N=(na(),or(ra));y=l?N.dirname(y)+"/":__dirname+"/",I=(T,k)=>(T=er(T)?new URL(T):N.normalize(T),V.readFileSync(T,k?void 0:"utf8")),A=T=>(T=I(T,!0),T.buffer||(T=new Uint8Array(T)),T),S=(T,k,L,Y=!0)=>{T=er(T)?new URL(T):N.normalize(T),V.readFile(T,Y?void 0:"utf8",(de,Se)=>{de?L(de):k(Y?Se.buffer:Se)})},!n.thisProgram&&1<process.argv.length&&(r=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),n.inspect=()=>"[Emscripten Module object]"}else(u||l)&&(l?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),o&&(y=o),y.indexOf("blob:")!==0?y=y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):y="",I=T=>{var k=new XMLHttpRequest;return k.open("GET",T,!1),k.send(null),k.responseText},l&&(A=T=>{var k=new XMLHttpRequest;return k.open("GET",T,!1),k.responseType="arraybuffer",k.send(null),new Uint8Array(k.response)}),S=(T,k,L)=>{var Y=new XMLHttpRequest;Y.open("GET",T,!0),Y.responseType="arraybuffer",Y.onload=()=>{Y.status==200||Y.status==0&&Y.response?k(Y.response):L()},Y.onerror=L,Y.send(null)});var B=console.log.bind(console),te=console.error.bind(console);Object.assign(n,p),p=null,typeof WebAssembly!="object"&&Ut("no native wasm support detected");var ve,St=!1,Ye,et,pe,rt,Vo;function _t(){var T=ve.buffer;n.HEAP8=Ye=new Int8Array(T),n.HEAP16=new Int16Array(T),n.HEAPU8=et=new Uint8Array(T),n.HEAPU16=new Uint16Array(T),n.HEAP32=pe=new Int32Array(T),n.HEAPU32=rt=new Uint32Array(T),n.HEAPF32=new Float32Array(T),n.HEAPF64=Vo=new Float64Array(T)}var $t=[],We=[],Ze=[],Ue=0,Dt=null;function Ut(T){throw T="Aborted("+T+")",te(T),St=!0,T=new WebAssembly.RuntimeError(T+". Build with -sASSERTIONS for more info."),f(T),T}var cr=T=>T.startsWith("data:application/octet-stream;base64,"),er=T=>T.startsWith("file://"),gt;if(gt="ort-wasm.wasm",!cr(gt)){var fr=gt;gt=n.locateFile?n.locateFile(fr,y):y+fr}function mt(T){if(A)return A(T);throw"both async and sync fetching of the wasm failed"}function Kr(T){if(u||l){if(typeof fetch=="function"&&!er(T))return fetch(T,{credentials:"same-origin"}).then(k=>{if(!k.ok)throw"failed to load wasm binary file at '"+T+"'";return k.arrayBuffer()}).catch(()=>mt(T));if(S)return new Promise((k,L)=>{S(T,Y=>k(new Uint8Array(Y)),L)})}return Promise.resolve().then(()=>mt(T))}function Sr(T,k,L){return Kr(T).then(Y=>WebAssembly.instantiate(Y,k)).then(Y=>Y).then(L,Y=>{te(`failed to asynchronously prepare wasm: ${Y}`),Ut(Y)})}function sn(T,k){var L=gt;return typeof WebAssembly.instantiateStreaming!="function"||cr(L)||er(L)||h||typeof fetch!="function"?Sr(L,T,k):fetch(L,{credentials:"same-origin"}).then(Y=>WebAssembly.instantiateStreaming(Y,T).then(k,function(de){return te(`wasm streaming compile failed: ${de}`),te("falling back to ArrayBuffer instantiation"),Sr(L,T,k)}))}var nr,Ar={920016:(T,k,L,Y)=>{if(typeof n>"u"||!n.za)return 1;if(T=qn(T>>>0),T.startsWith("./")&&(T=T.substring(2)),T=n.za.get(T),!T)return 2;if(k>>>=0,L>>>=0,k+L>T.byteLength)return 3;try{return et.set(T.subarray(k,k+L),Y>>>0>>>0),0}catch{return 4}}};function Gt(T){this.xa=T-24,this.Ha=function(k){rt[this.xa+4>>>2>>>0]=k},this.Ga=function(k){rt[this.xa+8>>>2>>>0]=k},this.Aa=function(k,L){this.Fa(),this.Ha(k),this.Ga(L)},this.Fa=function(){rt[this.xa+16>>>2>>>0]=0}}var Ct=0,Ft=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Cr=(T,k,L)=>{k>>>=0;var Y=k+L;for(L=k;T[L]&&!(L>=Y);)++L;if(16<L-k&&T.buffer&&Ft)return Ft.decode(T.subarray(k,L));for(Y="";k<L;){var de=T[k++];if(de&128){var Se=T[k++]&63;if((de&224)==192)Y+=String.fromCharCode((de&31)<<6|Se);else{var He=T[k++]&63;de=(de&240)==224?(de&15)<<12|Se<<6|He:(de&7)<<18|Se<<12|He<<6|T[k++]&63,65536>de?Y+=String.fromCharCode(de):(de-=65536,Y+=String.fromCharCode(55296|de>>10,56320|de&1023))}}else Y+=String.fromCharCode(de)}return Y},qn=(T,k)=>(T>>>=0)?Cr(et,T,k):"",qt=T=>{for(var k=0,L=0;L<T.length;++L){var Y=T.charCodeAt(L);127>=Y?k++:2047>=Y?k+=2:55296<=Y&&57343>=Y?(k+=4,++L):k+=3}return k},vn=(T,k,L,Y)=>{if(L>>>=0,!(0<Y))return 0;var de=L;Y=L+Y-1;for(var Se=0;Se<T.length;++Se){var He=T.charCodeAt(Se);if(55296<=He&&57343>=He){var Kt=T.charCodeAt(++Se);He=65536+((He&1023)<<10)|Kt&1023}if(127>=He){if(L>=Y)break;k[L++>>>0]=He}else{if(2047>=He){if(L+1>=Y)break;k[L++>>>0]=192|He>>6}else{if(65535>=He){if(L+2>=Y)break;k[L++>>>0]=224|He>>12}else{if(L+3>=Y)break;k[L++>>>0]=240|He>>18,k[L++>>>0]=128|He>>12&63}k[L++>>>0]=128|He>>6&63}k[L++>>>0]=128|He&63}}return k[L>>>0]=0,L-de},Wo=T=>T%4===0&&(T%100!==0||T%400===0),In=[0,31,60,91,121,152,182,213,244,274,305,335],La=[0,31,59,90,120,151,181,212,243,273,304,334],mu=T=>{var k=qt(T)+1,L=ya(k);return L&&vn(T,et,L,k),L},Qr=[],jr={},Yn=()=>{if(!si){var T={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:r||"./this.program"},k;for(k in jr)jr[k]===void 0?delete T[k]:T[k]=jr[k];var L=[];for(k in T)L.push(`${k}=${T[k]}`);si=L}return si},si,yu=[null,[],[]],En=[31,29,31,30,31,30,31,31,30,31,30,31],qs=[31,28,31,30,31,30,31,31,30,31,30,31];function ga(T){var k=Array(qt(T)+1);return vn(T,k,0,k.length),k}function Sn(T,k,L,Y){function de(H,yt,At){for(H=typeof H=="number"?H.toString():H||"";H.length<yt;)H=At[0]+H;return H}function Se(H,yt){return de(H,yt,"0")}function He(H,yt){function At(Ys){return 0>Ys?-1:0<Ys?1:0}var ui;return(ui=At(H.getFullYear()-yt.getFullYear()))===0&&(ui=At(H.getMonth()-yt.getMonth()))===0&&(ui=At(H.getDate()-yt.getDate())),ui}function Kt(H){switch(H.getDay()){case 0:return new Date(H.getFullYear()-1,11,29);case 1:return H;case 2:return new Date(H.getFullYear(),0,3);case 3:return new Date(H.getFullYear(),0,2);case 4:return new Date(H.getFullYear(),0,1);case 5:return new Date(H.getFullYear()-1,11,31);case 6:return new Date(H.getFullYear()-1,11,30)}}function Xr(H){var yt=H.ta;for(H=new Date(new Date(H.ua+1900,0,1).getTime());0<yt;){var At=H.getMonth(),ui=(Wo(H.getFullYear())?En:qs)[At];if(yt>ui-H.getDate())yt-=ui-H.getDate()+1,H.setDate(1),11>At?H.setMonth(At+1):(H.setMonth(0),H.setFullYear(H.getFullYear()+1));else{H.setDate(H.getDate()+yt);break}}return At=new Date(H.getFullYear()+1,0,4),yt=Kt(new Date(H.getFullYear(),0,4)),At=Kt(At),0>=He(yt,H)?0>=He(At,H)?H.getFullYear()+1:H.getFullYear():H.getFullYear()-1}T>>>=0,k>>>=0,L>>>=0,Y>>>=0;var vr=rt[Y+40>>>2>>>0];Y={Da:pe[Y>>>2>>>0],Ca:pe[Y+4>>>2>>>0],va:pe[Y+8>>>2>>>0],ya:pe[Y+12>>>2>>>0],wa:pe[Y+16>>>2>>>0],ua:pe[Y+20>>>2>>>0],oa:pe[Y+24>>>2>>>0],ta:pe[Y+28>>>2>>>0],Ia:pe[Y+32>>>2>>>0],Ba:pe[Y+36>>>2>>>0],Ea:vr?qn(vr):""},L=qn(L),vr={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var _r in vr)L=L.replace(new RegExp(_r,"g"),vr[_r]);var Ea="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Xs="January February March April May June July August September October November December".split(" ");vr={"%a":H=>Ea[H.oa].substring(0,3),"%A":H=>Ea[H.oa],"%b":H=>Xs[H.wa].substring(0,3),"%B":H=>Xs[H.wa],"%C":H=>Se((H.ua+1900)/100|0,2),"%d":H=>Se(H.ya,2),"%e":H=>de(H.ya,2," "),"%g":H=>Xr(H).toString().substring(2),"%G":H=>Xr(H),"%H":H=>Se(H.va,2),"%I":H=>(H=H.va,H==0?H=12:12<H&&(H-=12),Se(H,2)),"%j":H=>{for(var yt=0,At=0;At<=H.wa-1;yt+=(Wo(H.ua+1900)?En:qs)[At++]);return Se(H.ya+yt,3)},"%m":H=>Se(H.wa+1,2),"%M":H=>Se(H.Ca,2),"%n":()=>`
`,"%p":H=>0<=H.va&&12>H.va?"AM":"PM","%S":H=>Se(H.Da,2),"%t":()=>"	","%u":H=>H.oa||7,"%U":H=>Se(Math.floor((H.ta+7-H.oa)/7),2),"%V":H=>{var yt=Math.floor((H.ta+7-(H.oa+6)%7)/7);if(2>=(H.oa+371-H.ta-2)%7&&yt++,yt)yt==53&&(At=(H.oa+371-H.ta)%7,At==4||At==3&&Wo(H.ua)||(yt=1));else{yt=52;var At=(H.oa+7-H.ta-1)%7;(At==4||At==5&&Wo(H.ua%400-1))&&yt++}return Se(yt,2)},"%w":H=>H.oa,"%W":H=>Se(Math.floor((H.ta+7-(H.oa+6)%7)/7),2),"%y":H=>(H.ua+1900).toString().substring(2),"%Y":H=>H.ua+1900,"%z":H=>{H=H.Ba;var yt=0<=H;return H=Math.abs(H)/60,(yt?"+":"-")+("0000"+(H/60*100+H%60)).slice(-4)},"%Z":H=>H.Ea,"%%":()=>"%"},L=L.replace(/%%/g,"\0\0");for(_r in vr)L.includes(_r)&&(L=L.replace(new RegExp(_r,"g"),vr[_r](Y)));return L=L.replace(/\0\0/g,"%"),_r=ga(L),_r.length>k?0:(Ye.set(_r,T>>>0),_r.length-1)}var Ks={a:function(T,k,L){throw T>>>=0,new Gt(T).Aa(k>>>0,L>>>0),Ct=T,Ct},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(T,k,L){T=k+2097152>>>0<4194305-!!T?(T>>>0)+4294967296*k:NaN,L>>>=0,T=new Date(1e3*T),pe[L>>>2>>>0]=T.getUTCSeconds(),pe[L+4>>>2>>>0]=T.getUTCMinutes(),pe[L+8>>>2>>>0]=T.getUTCHours(),pe[L+12>>>2>>>0]=T.getUTCDate(),pe[L+16>>>2>>>0]=T.getUTCMonth(),pe[L+20>>>2>>>0]=T.getUTCFullYear()-1900,pe[L+24>>>2>>>0]=T.getUTCDay(),pe[L+28>>>2>>>0]=(T.getTime()-Date.UTC(T.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(T,k,L){T=k+2097152>>>0<4194305-!!T?(T>>>0)+4294967296*k:NaN,L>>>=0,T=new Date(1e3*T),pe[L>>>2>>>0]=T.getSeconds(),pe[L+4>>>2>>>0]=T.getMinutes(),pe[L+8>>>2>>>0]=T.getHours(),pe[L+12>>>2>>>0]=T.getDate(),pe[L+16>>>2>>>0]=T.getMonth(),pe[L+20>>>2>>>0]=T.getFullYear()-1900,pe[L+24>>>2>>>0]=T.getDay(),pe[L+28>>>2>>>0]=(Wo(T.getFullYear())?In:La)[T.getMonth()]+T.getDate()-1|0,pe[L+36>>>2>>>0]=-(60*T.getTimezoneOffset()),k=new Date(T.getFullYear(),6,1).getTimezoneOffset();var Y=new Date(T.getFullYear(),0,1).getTimezoneOffset();pe[L+32>>>2>>>0]=(k!=Y&&T.getTimezoneOffset()==Math.min(Y,k))|0},p:function(T){T>>>=0;var k=new Date(pe[T+20>>>2>>>0]+1900,pe[T+16>>>2>>>0],pe[T+12>>>2>>>0],pe[T+8>>>2>>>0],pe[T+4>>>2>>>0],pe[T>>>2>>>0],0),L=pe[T+32>>>2>>>0],Y=k.getTimezoneOffset(),de=new Date(k.getFullYear(),6,1).getTimezoneOffset(),Se=new Date(k.getFullYear(),0,1).getTimezoneOffset(),He=Math.min(Se,de);return 0>L?pe[T+32>>>2>>>0]=+(de!=Se&&He==Y):0<L!=(He==Y)&&(de=Math.max(Se,de),k.setTime(k.getTime()+6e4*((0<L?He:de)-Y))),pe[T+24>>>2>>>0]=k.getDay(),pe[T+28>>>2>>>0]=(Wo(k.getFullYear())?In:La)[k.getMonth()]+k.getDate()-1|0,pe[T>>>2>>>0]=k.getSeconds(),pe[T+4>>>2>>>0]=k.getMinutes(),pe[T+8>>>2>>>0]=k.getHours(),pe[T+12>>>2>>>0]=k.getDate(),pe[T+16>>>2>>>0]=k.getMonth(),pe[T+20>>>2>>>0]=k.getYear(),T=k.getTime(),isNaN(T)?(pe[xa()>>>2>>>0]=61,T=-1):T/=1e3,Ma((nr=T,1<=+Math.abs(nr)?0<nr?+Math.floor(nr/4294967296)>>>0:~~+Math.ceil((nr-+(~~nr>>>0))/4294967296)>>>0:0)),T>>>0},l:function(){return-52},m:function(){},t:function(T,k,L){function Y(Xr){return(Xr=Xr.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Xr[1]:"GMT"}L>>>=0;var de=new Date().getFullYear(),Se=new Date(de,0,1),He=new Date(de,6,1);de=Se.getTimezoneOffset();var Kt=He.getTimezoneOffset();rt[T>>>0>>>2>>>0]=60*Math.max(de,Kt),pe[k>>>0>>>2>>>0]=+(de!=Kt),T=Y(Se),k=Y(He),T=mu(T),k=mu(k),Kt<de?(rt[L>>>2>>>0]=T,rt[L+4>>>2>>>0]=k):(rt[L>>>2>>>0]=k,rt[L+4>>>2>>>0]=T)},d:()=>{Ut("")},B:function(T,k,L){T>>>=0,k>>>=0,L>>>=0,Qr.length=0;for(var Y;Y=et[k++>>>0];){var de=Y!=105;de&=Y!=112,L+=de&&L%8?4:0,Qr.push(Y==112?rt[L>>>2>>>0]:Y==105?pe[L>>>2>>>0]:Vo[L>>>3>>>0]),L+=de?8:4}return Ar[T].apply(null,Qr)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(T,k,L){return k>>>=0,et.copyWithin(T>>>0>>>0,k>>>0,k+(L>>>0)>>>0)},s:function(T){T>>>=0;var k=et.length;if(4294901760<T)return!1;for(var L=1;4>=L;L*=2){var Y=k*(1+.2/L);Y=Math.min(Y,T+100663296);var de=Math;Y=Math.max(T,Y);e:{de=(de.min.call(de,4294901760,Y+(65536-Y%65536)%65536)-ve.buffer.byteLength+65535)/65536;try{ve.grow(de),_t();var Se=1;break e}catch{}Se=void 0}if(Se)return!0}return!1},C:function(T,k){T>>>=0,k>>>=0;var L=0;return Yn().forEach((Y,de)=>{var Se=k+L;for(de=rt[T+4*de>>>2>>>0]=Se,Se=0;Se<Y.length;++Se)Ye[de++>>>0>>>0]=Y.charCodeAt(Se);Ye[de>>>0>>>0]=0,L+=Y.length+1}),0},D:function(T,k){T>>>=0,k>>>=0;var L=Yn();rt[T>>>2>>>0]=L.length;var Y=0;return L.forEach(de=>Y+=de.length+1),rt[k>>>2>>>0]=Y,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(T,k,L,Y){k>>>=0,L>>>=0,Y>>>=0;for(var de=0,Se=0;Se<L;Se++){var He=rt[k>>>2>>>0],Kt=rt[k+4>>>2>>>0];k+=8;for(var Xr=0;Xr<Kt;Xr++){var vr=et[He+Xr>>>0],_r=yu[T];vr===0||vr===10?((T===1?B:te)(Cr(_r,0)),_r.length=0):_r.push(vr)}de+=Kt}return rt[Y>>>2>>>0]=de,0},r:Sn,c:function(T,k,L,Y){return Sn(T>>>0,k>>>0,L>>>0,Y>>>0)}},he=function(){function T(L){return he=L.exports,he=ba(),ve=he.K,_t(),We.unshift(he.L),Ue--,Ue==0&&Dt&&(L=Dt,Dt=null,L()),he}var k={a:Ks};if(Ue++,n.instantiateWasm)try{return n.instantiateWasm(k,T)}catch(L){te(`Module.instantiateWasm callback failed with error: ${L}`),f(L)}return sn(k,function(L){T(L.instance)}).catch(f),{}}();n._OrtInit=(T,k)=>(n._OrtInit=he.M)(T,k),n._OrtGetLastError=(T,k)=>(n._OrtGetLastError=he.N)(T,k),n._OrtCreateSessionOptions=(T,k,L,Y,de,Se,He,Kt,Xr,vr)=>(n._OrtCreateSessionOptions=he.O)(T,k,L,Y,de,Se,He,Kt,Xr,vr),n._OrtAppendExecutionProvider=(T,k)=>(n._OrtAppendExecutionProvider=he.P)(T,k),n._OrtAddFreeDimensionOverride=(T,k,L)=>(n._OrtAddFreeDimensionOverride=he.Q)(T,k,L),n._OrtAddSessionConfigEntry=(T,k,L)=>(n._OrtAddSessionConfigEntry=he.R)(T,k,L),n._OrtReleaseSessionOptions=T=>(n._OrtReleaseSessionOptions=he.S)(T),n._OrtCreateSession=(T,k,L)=>(n._OrtCreateSession=he.T)(T,k,L),n._OrtReleaseSession=T=>(n._OrtReleaseSession=he.U)(T),n._OrtGetInputOutputCount=(T,k,L)=>(n._OrtGetInputOutputCount=he.V)(T,k,L),n._OrtGetInputName=(T,k)=>(n._OrtGetInputName=he.W)(T,k),n._OrtGetOutputName=(T,k)=>(n._OrtGetOutputName=he.X)(T,k),n._OrtFree=T=>(n._OrtFree=he.Y)(T),n._OrtCreateTensor=(T,k,L,Y,de,Se)=>(n._OrtCreateTensor=he.Z)(T,k,L,Y,de,Se),n._OrtGetTensorData=(T,k,L,Y,de)=>(n._OrtGetTensorData=he._)(T,k,L,Y,de),n._OrtReleaseTensor=T=>(n._OrtReleaseTensor=he.$)(T),n._OrtCreateRunOptions=(T,k,L,Y)=>(n._OrtCreateRunOptions=he.aa)(T,k,L,Y),n._OrtAddRunConfigEntry=(T,k,L)=>(n._OrtAddRunConfigEntry=he.ba)(T,k,L),n._OrtReleaseRunOptions=T=>(n._OrtReleaseRunOptions=he.ca)(T),n._OrtCreateBinding=T=>(n._OrtCreateBinding=he.da)(T),n._OrtBindInput=(T,k,L)=>(n._OrtBindInput=he.ea)(T,k,L),n._OrtBindOutput=(T,k,L,Y)=>(n._OrtBindOutput=he.fa)(T,k,L,Y),n._OrtClearBoundOutputs=T=>(n._OrtClearBoundOutputs=he.ga)(T),n._OrtReleaseBinding=T=>(n._OrtReleaseBinding=he.ha)(T),n._OrtRunWithBinding=(T,k,L,Y,de)=>(n._OrtRunWithBinding=he.ia)(T,k,L,Y,de),n._OrtRun=(T,k,L,Y,de,Se,He,Kt)=>(n._OrtRun=he.ja)(T,k,L,Y,de,Se,He,Kt),n._OrtEndProfiling=T=>(n._OrtEndProfiling=he.ka)(T);var xa=()=>(xa=he.la)(),ya=n._malloc=T=>(ya=n._malloc=he.ma)(T);n._free=T=>(n._free=he.na)(T);var Ma=T=>(Ma=he.pa)(T),Ta=()=>(Ta=he.qa)(),Ua=T=>(Ua=he.ra)(T),Ee=T=>(Ee=he.sa)(T);function ba(){var T=he;T=Object.assign({},T);var k=Y=>()=>Y()>>>0,L=Y=>de=>Y(de)>>>0;return T.la=k(T.la),T.ma=L(T.ma),T.qa=k(T.qa),T.sa=L(T.sa),T}n.stackAlloc=Ee,n.stackSave=Ta,n.stackRestore=Ua,n.UTF8ToString=qn,n.stringToUTF8=(T,k,L)=>vn(T,et,k,L),n.lengthBytesUTF8=qt;var Oa;Dt=function T(){Oa||Ia(),Oa||(Dt=T)};function Ia(){if(!(0<Ue)){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;){var T=n.preRun.shift();$t.unshift(T)}for(;0<$t.length;)$t.shift()(n);if(!(0<Ue||Oa||(Oa=!0,n.calledRun=!0,St))){for(;0<We.length;)We.shift()(n);for(a(n);0<Ze.length;)Ze.shift()(n)}}}return Ia(),c.ready}})();typeof e=="object"&&typeof t=="object"?t.exports=i:typeof define=="function"&&define.amd&&define([],()=>i)}),Lp=me(()=>{}),Fp=me(()=>{}),Cp={};Pr(Cp,{cpus:()=>sg});var sg,$p=E(()=>{sg=void 0}),Np=me((e,t)=>{var i=(()=>{var o=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(o=o||__filename),function(c={}){function n(){return Ze.buffer!=cr.buffer&&Kr(),cr}function a(){return Ze.buffer!=cr.buffer&&Kr(),er}function f(){return Ze.buffer!=cr.buffer&&Kr(),gt}function p(){return Ze.buffer!=cr.buffer&&Kr(),fr}function r(){return Ze.buffer!=cr.buffer&&Kr(),mt}var u=c,l,h;u.ready=new Promise((b,x)=>{l=b,h=x});var y=Object.assign({},u),I="./this.program",S=(b,x)=>{throw x},A=typeof window=="object",V=typeof importScripts=="function",N=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",B=u.ENVIRONMENT_IS_PTHREAD||!1,te="";function ve(b){return u.locateFile?u.locateFile(b,te):te+b}var St,Ye,et;if(N){var pe=(ta(),or(ea)),rt=(na(),or(ra));te=V?rt.dirname(te)+"/":__dirname+"/",St=(x,D)=>(x=qt(x)?new URL(x):rt.normalize(x),pe.readFileSync(x,D?void 0:"utf8")),et=x=>(x=St(x,!0),x.buffer||(x=new Uint8Array(x)),x),Ye=(x,D,j,ie=!0)=>{x=qt(x)?new URL(x):rt.normalize(x),pe.readFile(x,ie?void 0:"utf8",(se,we)=>{se?j(se):D(ie?we.buffer:we)})},!u.thisProgram&&1<process.argv.length&&(I=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),S=(x,D)=>{throw process.exitCode=x,D},u.inspect=()=>"[Emscripten Module object]";let b;try{b=Lp()}catch(x){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),x}global.Worker=b.Worker}else(A||V)&&(V?te=self.location.href:typeof document<"u"&&document.currentScript&&(te=document.currentScript.src),typeof o<"u"&&o&&(te=o),te.indexOf("blob:")!==0?te=te.substr(0,te.replace(/[?#].*/,"").lastIndexOf("/")+1):te="",N||(St=b=>{var x=new XMLHttpRequest;return x.open("GET",b,!1),x.send(null),x.responseText},V&&(et=b=>{var x=new XMLHttpRequest;return x.open("GET",b,!1),x.responseType="arraybuffer",x.send(null),new Uint8Array(x.response)}),Ye=(b,x,D)=>{var j=new XMLHttpRequest;j.open("GET",b,!0),j.responseType="arraybuffer",j.onload=()=>{j.status==200||j.status==0&&j.response?x(j.response):D()},j.onerror=D,j.send(null)}));N&&typeof performance>"u"&&(global.performance=Fp().performance);var Vo=console.log.bind(console),_t=console.error.bind(console);N&&(Vo=(...b)=>pe.writeSync(1,b.join(" ")+`
`),_t=(...b)=>pe.writeSync(2,b.join(" ")+`
`));var $t=Vo,We=_t;Object.assign(u,y),y=null,typeof WebAssembly!="object"&&Cr("no native wasm support detected");var Ze,Ue,Dt=!1,Ut,cr,er,gt,fr,mt;function Kr(){var b=Ze.buffer;u.HEAP8=cr=new Int8Array(b),u.HEAP16=new Int16Array(b),u.HEAPU8=er=new Uint8Array(b),u.HEAPU16=new Uint16Array(b),u.HEAP32=gt=new Int32Array(b),u.HEAPU32=fr=new Uint32Array(b),u.HEAPF32=new Float32Array(b),u.HEAPF64=mt=new Float64Array(b)}var Sr=16777216;if(B)Ze=u.wasmMemory;else if(u.wasmMemory)Ze=u.wasmMemory;else if(Ze=new WebAssembly.Memory({initial:Sr/65536,maximum:65536,shared:!0}),!(Ze.buffer instanceof SharedArrayBuffer))throw We("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),N&&We("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Kr(),Sr=Ze.buffer.byteLength;var sn=[],nr=[],Ar=[],Gt=0,Ct=null;function Ft(){if(Gt--,Gt==0&&Ct){var b=Ct;Ct=null,b()}}function Cr(b){throw b="Aborted("+b+")",We(b),Dt=!0,Ut=1,b=new WebAssembly.RuntimeError(b+". Build with -sASSERTIONS for more info."),h(b),b}var qn=b=>b.startsWith("data:application/octet-stream;base64,"),qt=b=>b.startsWith("file://"),vn;vn="ort-wasm-threaded.wasm",qn(vn)||(vn=ve(vn));function Wo(b){if(et)return et(b);throw"both async and sync fetching of the wasm failed"}function In(b){if(A||V){if(typeof fetch=="function"&&!qt(b))return fetch(b,{credentials:"same-origin"}).then(x=>{if(!x.ok)throw"failed to load wasm binary file at '"+b+"'";return x.arrayBuffer()}).catch(()=>Wo(b));if(Ye)return new Promise((x,D)=>{Ye(b,j=>x(new Uint8Array(j)),D)})}return Promise.resolve().then(()=>Wo(b))}function La(b,x,D){return In(b).then(j=>WebAssembly.instantiate(j,x)).then(j=>j).then(D,j=>{We(`failed to asynchronously prepare wasm: ${j}`),Cr(j)})}function mu(b,x){var D=vn;return typeof WebAssembly.instantiateStreaming!="function"||qn(D)||qt(D)||N||typeof fetch!="function"?La(D,b,x):fetch(D,{credentials:"same-origin"}).then(j=>WebAssembly.instantiateStreaming(j,b).then(x,function(ie){return We(`wasm streaming compile failed: ${ie}`),We("falling back to ArrayBuffer instantiation"),La(D,b,x)}))}var Qr,jr={921388:(b,x,D,j)=>{if(typeof u>"u"||!u.cb)return 1;if(b=Sn(b>>>0),b.startsWith("./")&&(b=b.substring(2)),b=u.cb.get(b),!b)return 2;if(x>>>=0,D>>>=0,j>>>=0,x+D>b.byteLength)return 3;try{return a().set(b.subarray(x,x+D),j>>>0),0}catch{return 4}}};function Yn(b){this.name="ExitStatus",this.message=`Program terminated with exit(${b})`,this.status=b}var si=b=>{b.terminate(),b.onmessage=()=>{}},yu=b=>{Ee.Pa.length==0&&(Ta(),Ee.Ya(Ee.Pa[0]));var x=Ee.Pa.pop();if(!x)return 6;Ee.Qa.push(x),Ee.Ma[b.Oa]=x,x.Oa=b.Oa;var D={cmd:"run",start_routine:b.kb,arg:b.hb,pthread_ptr:b.Oa};return N&&x.unref(),x.postMessage(D,b.qb),0},En=0,qs=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ga=(b,x,D)=>{x>>>=0;var j=x+D;for(D=x;b[D]&&!(D>=j);)++D;if(16<D-x&&b.buffer&&qs)return qs.decode(b.buffer instanceof SharedArrayBuffer?b.slice(x,D):b.subarray(x,D));for(j="";x<D;){var ie=b[x++];if(ie&128){var se=b[x++]&63;if((ie&224)==192)j+=String.fromCharCode((ie&31)<<6|se);else{var we=b[x++]&63;ie=(ie&240)==224?(ie&15)<<12|se<<6|we:(ie&7)<<18|se<<12|we<<6|b[x++]&63,65536>ie?j+=String.fromCharCode(ie):(ie-=65536,j+=String.fromCharCode(55296|ie>>10,56320|ie&1023))}}else j+=String.fromCharCode(ie)}return j},Sn=(b,x)=>(b>>>=0)?ga(a(),b,x):"",Ks=b=>{var x=Eu();return b=b(),nu(x),b};function he(b,x){var D=arguments.length-2,j=arguments;return Ks(()=>{for(var ie=uh(8*D),se=ie>>>3,we=0;we<D;we++){var Lt=j[2+we];r()[se+we>>>0]=Lt}return _u(b,D,ie,x)})}function xa(b){var x;if(B)return he(0,1,b);Ut=b,0<En||(Ee.lb(),(x=u.onExit)==null||x.call(u,b),Dt=!0),S(b,new Yn(b))}var ya=b=>{if(Ut=b,B)throw Oa(b),"unwind";xa(b)};function Ma(){for(var b=u.numThreads;b--;)Ta();sn.unshift(()=>{Gt++,Ua(()=>Ft())})}function Ta(){var b=ve("ort-wasm-threaded.worker.js");b=new Worker(b),Ee.Pa.push(b)}function Ua(b){B?b():Promise.all(Ee.Pa.map(Ee.Ya)).then(b)}var Ee={Pa:[],Qa:[],bb:[],Ma:{},Wa(){B?(Ee.receiveObjectTransfer=Ee.jb,Ee.threadInitTLS=Ee.ab,Ee.setExitStatus=Ee.$a):Ma()},$a:b=>Ut=b,tb:["$terminateWorker"],lb:()=>{for(var b of Ee.Qa)si(b);for(b of Ee.Pa)si(b);Ee.Pa=[],Ee.Qa=[],Ee.Ma=[]},Za:b=>{var x=b.Oa;delete Ee.Ma[x],Ee.Pa.push(b),Ee.Qa.splice(Ee.Qa.indexOf(b),1),b.Oa=0,Bp(x)},jb(){},ab(){Ee.bb.forEach(b=>b())},Ya:b=>new Promise(x=>{b.onmessage=se=>{se=se.data;var we=se.cmd;if(se.targetThread&&se.targetThread!=wu()){var Lt=Ee.Ma[se.targetThread];Lt?Lt.postMessage(se,se.transferList):We(`Internal error! Worker sent a message "${we}" to target pthread ${se.targetThread}, but that thread no longer exists!`)}else we==="checkMailbox"?Qs():we==="spawnThread"?yu(se):we==="cleanupThread"?Ee.Za(Ee.Ma[se.thread]):we==="killThread"?(se=se.thread,we=Ee.Ma[se],delete Ee.Ma[se],si(we),Bp(se),Ee.Qa.splice(Ee.Qa.indexOf(we),1),we.Oa=0):we==="cancelThread"?Ee.Ma[se.thread].postMessage({cmd:"cancel"}):we==="loaded"?(b.loaded=!0,N&&!b.Oa&&b.unref(),x(b)):we==="alert"?alert(`Thread ${se.threadId}: ${se.text}`):se.target==="setimmediate"?b.postMessage(se):we==="callHandler"?u[se.handler](...se.args):we&&We(`worker sent an unknown command ${we}`)},b.onerror=se=>{throw We(`worker sent an error! ${se.filename}:${se.lineno}: ${se.message}`),se},N&&(b.on("message",se=>b.onmessage({data:se})),b.on("error",se=>b.onerror(se)));var D=[],j=["onExit"],ie;for(ie of j)u.hasOwnProperty(ie)&&D.push(ie);b.postMessage({cmd:"load",handlers:D,urlOrBlob:u.mainScriptUrlOrBlob||o,wasmMemory:Ze,wasmModule:Ue})})};u.PThread=Ee;var ba=b=>{for(;0<b.length;)b.shift()(u)};u.establishStackSpace=()=>{var b=wu(),x=p()[b+52>>>2>>>0];b=p()[b+56>>>2>>>0],Sa(x,x-b),nu(x)};function Oa(b){if(B)return he(1,0,b);ya(b)}var Ia=[],T;u.invokeEntryPoint=(b,x)=>{var D=Ia[b];D||(b>=Ia.length&&(Ia.length=b+1),Ia[b]=D=T.get(b)),b=D(x),0<En?Ee.$a(b):xu(b)};function k(b){this.Va=b-24,this.gb=function(x){p()[this.Va+4>>>2>>>0]=x},this.fb=function(x){p()[this.Va+8>>>2>>>0]=x},this.Wa=function(x,D){this.eb(),this.gb(x),this.fb(D)},this.eb=function(){p()[this.Va+16>>>2>>>0]=0}}var L=0;function Y(b,x,D,j){return B?he(2,1,b,x,D,j):de(b,x,D,j)}function de(b,x,D,j){if(b>>>=0,x>>>=0,D>>>=0,j>>>=0,typeof SharedArrayBuffer>"u")return We("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var ie=[];return B&&ie.length===0?Y(b,x,D,j):(b={kb:D,Oa:b,hb:j,qb:ie},B?(b.sb="spawnThread",postMessage(b,ie),0):yu(b))}function Se(b,x,D){return B?he(3,1,b,x,D):0}function He(b,x){if(B)return he(4,1,b,x)}var Kt=b=>{for(var x=0,D=0;D<b.length;++D){var j=b.charCodeAt(D);127>=j?x++:2047>=j?x+=2:55296<=j&&57343>=j?(x+=4,++D):x+=3}return x},Xr=(b,x,D,j)=>{if(D>>>=0,!(0<j))return 0;var ie=D;j=D+j-1;for(var se=0;se<b.length;++se){var we=b.charCodeAt(se);if(55296<=we&&57343>=we){var Lt=b.charCodeAt(++se);we=65536+((we&1023)<<10)|Lt&1023}if(127>=we){if(D>=j)break;x[D++>>>0]=we}else{if(2047>=we){if(D+1>=j)break;x[D++>>>0]=192|we>>6}else{if(65535>=we){if(D+2>=j)break;x[D++>>>0]=224|we>>12}else{if(D+3>=j)break;x[D++>>>0]=240|we>>18,x[D++>>>0]=128|we>>12&63}x[D++>>>0]=128|we>>6&63}x[D++>>>0]=128|we&63}}return x[D>>>0]=0,D-ie},vr=(b,x,D)=>Xr(b,a(),x,D);function _r(b,x){if(B)return he(5,1,b,x)}function Ea(b,x,D){if(B)return he(6,1,b,x,D)}function Xs(b,x,D){return B?he(7,1,b,x,D):0}function H(b,x){if(B)return he(8,1,b,x)}function yt(b,x,D){if(B)return he(9,1,b,x,D)}function At(b,x,D,j){if(B)return he(10,1,b,x,D,j)}function ui(b,x,D,j){if(B)return he(11,1,b,x,D,j)}function Ys(b,x,D,j){if(B)return he(12,1,b,x,D,j)}function Ug(b){if(B)return he(13,1,b)}function Bg(b,x){if(B)return he(14,1,b,x)}function jg(b,x,D){if(B)return he(15,1,b,x,D)}function Ud(b){b>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(f(),b>>>2,b).value.then(Qs),b+=128,Atomics.store(f(),b>>>2,1))}u.__emscripten_thread_mailbox_await=Ud;var Qs=()=>{var b=wu();if(b&&(Ud(b),b=Tu,!Dt))try{if(b(),!(0<En))try{B?xu(Ut):ya(Ut)}catch(x){x instanceof Yn||x=="unwind"||S(1,x)}}catch(x){x instanceof Yn||x=="unwind"||S(1,x)}};u.checkMailbox=Qs;var Bd=[],Ba=b=>b%4===0&&(b%100!==0||b%400===0),Zg=[0,31,60,91,121,152,182,213,244,274,305,335],zg=[0,31,59,90,120,151,181,212,243,273,304,334];function Vg(b,x,D,j,ie,se,we,Lt){return B?he(16,1,b,x,D,j,ie,se,we,Lt):-52}function Wg(b,x,D,j,ie,se,we){if(B)return he(17,1,b,x,D,j,ie,se,we)}var tu=b=>{var x=Kt(b)+1,D=Pp(x);return D&&vr(b,D,x),D},zd=[],za={},Gg=()=>{if(!Vd){var b={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:I||"./this.program"},x;for(x in za)za[x]===void 0?delete b[x]:b[x]=za[x];var D=[];for(x in b)D.push(`${x}=${b[x]}`);Vd=D}return Vd},Vd;function Hg(b,x){if(B)return he(18,1,b,x);b>>>=0,x>>>=0;var D=0;return Gg().forEach((j,ie)=>{var se=x+D;for(ie=p()[b+4*ie>>>2>>>0]=se,se=0;se<j.length;++se)n()[ie++>>>0>>>0]=j.charCodeAt(se);n()[ie>>>0>>>0]=0,D+=j.length+1}),0}function Wd(b,x){if(B)return he(19,1,b,x);b>>>=0,x>>>=0;var D=Gg();p()[b>>>2>>>0]=D.length;var j=0;return D.forEach(ie=>j+=ie.length+1),p()[x>>>2>>>0]=j,0}function Gd(b){return B?he(20,1,b):52}function Hd(b,x,D,j){return B?he(21,1,b,x,D,j):52}function qg(b,x,D,j,ie){return B?he(22,1,b,x,D,j,ie):70}var zy=[null,[],[]];function Kg(b,x,D,j){if(B)return he(23,1,b,x,D,j);x>>>=0,D>>>=0,j>>>=0;for(var ie=0,se=0;se<D;se++){var we=p()[x>>>2>>>0],Lt=p()[x+4>>>2>>>0];x+=8;for(var ci=0;ci<Lt;ci++){var Yt=a()[we+ci>>>0],en=zy[b];Yt===0||Yt===10?((b===1?$t:We)(ga(en,0)),en.length=0):en.push(Yt)}ie+=Lt}return p()[j>>>2>>>0]=ie,0}var Xg=[31,29,31,30,31,30,31,31,30,31,30,31],qd=[31,28,31,30,31,30,31,31,30,31,30,31];function Yg(b){var x=Array(Kt(b)+1);return Xr(b,x,0,x.length),x}var Jg=(b,x)=>{n().set(b,x>>>0)};function bu(b,x,D,j){function ie(X,It,Ne){for(X=typeof X=="number"?X.toString():X||"";X.length<It;)X=Ne[0]+X;return X}function se(X,It){return ie(X,It,"0")}function we(X,It){function Ne(ry){return 0>ry?-1:0<ry?1:0}var lt;return(lt=Ne(X.getFullYear()-It.getFullYear()))===0&&(lt=Ne(X.getMonth()-It.getMonth()))===0&&(lt=Ne(X.getDate()-It.getDate())),lt}function Lt(X){switch(X.getDay()){case 0:return new Date(X.getFullYear()-1,11,29);case 1:return X;case 2:return new Date(X.getFullYear(),0,3);case 3:return new Date(X.getFullYear(),0,2);case 4:return new Date(X.getFullYear(),0,1);case 5:return new Date(X.getFullYear()-1,11,31);case 6:return new Date(X.getFullYear()-1,11,30)}}function ci(X){var It=X.Ra;for(X=new Date(new Date(X.Sa+1900,0,1).getTime());0<It;){var Ne=X.getMonth(),lt=(Ba(X.getFullYear())?Xg:qd)[Ne];if(It>lt-X.getDate())It-=lt-X.getDate()+1,X.setDate(1),11>Ne?X.setMonth(Ne+1):(X.setMonth(0),X.setFullYear(X.getFullYear()+1));else{X.setDate(X.getDate()+It);break}}return Ne=new Date(X.getFullYear()+1,0,4),It=Lt(new Date(X.getFullYear(),0,4)),Ne=Lt(Ne),0>=we(It,X)?0>=we(Ne,X)?X.getFullYear()+1:X.getFullYear():X.getFullYear()-1}b>>>=0,x>>>=0,D>>>=0,j>>>=0;var Yt=p()[j+40>>>2>>>0];j={ob:f()[j>>>2>>>0],nb:f()[j+4>>>2>>>0],Ta:f()[j+8>>>2>>>0],Xa:f()[j+12>>>2>>>0],Ua:f()[j+16>>>2>>>0],Sa:f()[j+20>>>2>>>0],Na:f()[j+24>>>2>>>0],Ra:f()[j+28>>>2>>>0],ub:f()[j+32>>>2>>>0],mb:f()[j+36>>>2>>>0],pb:Yt?Sn(Yt):""},D=Sn(D),Yt={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var en in Yt)D=D.replace(new RegExp(en,"g"),Yt[en]);var ey="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ty="January February March April May June July August September October November December".split(" ");Yt={"%a":X=>ey[X.Na].substring(0,3),"%A":X=>ey[X.Na],"%b":X=>ty[X.Ua].substring(0,3),"%B":X=>ty[X.Ua],"%C":X=>se((X.Sa+1900)/100|0,2),"%d":X=>se(X.Xa,2),"%e":X=>ie(X.Xa,2," "),"%g":X=>ci(X).toString().substring(2),"%G":X=>ci(X),"%H":X=>se(X.Ta,2),"%I":X=>(X=X.Ta,X==0?X=12:12<X&&(X-=12),se(X,2)),"%j":X=>{for(var It=0,Ne=0;Ne<=X.Ua-1;It+=(Ba(X.Sa+1900)?Xg:qd)[Ne++]);return se(X.Xa+It,3)},"%m":X=>se(X.Ua+1,2),"%M":X=>se(X.nb,2),"%n":()=>`
`,"%p":X=>0<=X.Ta&&12>X.Ta?"AM":"PM","%S":X=>se(X.ob,2),"%t":()=>"	","%u":X=>X.Na||7,"%U":X=>se(Math.floor((X.Ra+7-X.Na)/7),2),"%V":X=>{var It=Math.floor((X.Ra+7-(X.Na+6)%7)/7);if(2>=(X.Na+371-X.Ra-2)%7&&It++,It)It==53&&(Ne=(X.Na+371-X.Ra)%7,Ne==4||Ne==3&&Ba(X.Sa)||(It=1));else{It=52;var Ne=(X.Na+7-X.Ra-1)%7;(Ne==4||Ne==5&&Ba(X.Sa%400-1))&&It++}return se(It,2)},"%w":X=>X.Na,"%W":X=>se(Math.floor((X.Ra+7-(X.Na+6)%7)/7),2),"%y":X=>(X.Sa+1900).toString().substring(2),"%Y":X=>X.Sa+1900,"%z":X=>{X=X.mb;var It=0<=X;return X=Math.abs(X)/60,(It?"+":"-")+("0000"+(X/60*100+X%60)).slice(-4)},"%Z":X=>X.pb,"%%":()=>"%"},D=D.replace(/%%/g,"\0\0");for(en in Yt)D.includes(en)&&(D=D.replace(new RegExp(en,"g"),Yt[en](j)));return D=D.replace(/\0\0/g,"%"),en=Yg(D),en.length>x?0:(Jg(en,b),en.length-1)}Ee.Wa();var Vy=[xa,Oa,Y,Se,He,_r,Ea,Xs,H,yt,At,ui,Ys,Ug,Bg,jg,Vg,Wg,Hg,Wd,Gd,Hd,qg,Kg],Qg={b:function(b,x,D){throw b>>>=0,new k(b).Wa(x>>>0,D>>>0),L=b,L},L:function(b){kp(b>>>0,!V,1,!A,131072,!1),Ee.ab()},j:function(b){b>>>=0,B?postMessage({cmd:"cleanupThread",thread:b}):Ee.Za(Ee.Ma[b])},H:de,h:Se,S:He,D:_r,F:Ea,T:Xs,Q:H,J:yt,P:At,n:ui,E:Ys,B:Ug,R:Bg,C:jg,p:()=>1,z:function(b,x){b>>>=0,b==x>>>0?setTimeout(()=>Qs()):B?postMessage({targetThread:b,cmd:"checkMailbox"}):(b=Ee.Ma[b])&&b.postMessage({cmd:"checkMailbox"})},I:function(b,x,D,j){x>>>=0,Bd.length=D,j=j>>>0>>>3;for(var ie=0;ie<D;ie++)Bd[ie]=r()[j+ie>>>0];return b=0>b?jr[-b-1]:Vy[b],Ee.ib=x,x=b.apply(null,Bd),Ee.ib=0,x},K:Ud,o:function(b){N&&Ee.Ma[b>>>0].ref()},s:function(b,x,D){b=x+2097152>>>0<4194305-!!b?(b>>>0)+4294967296*x:NaN,D>>>=0,b=new Date(1e3*b),f()[D>>>2>>>0]=b.getUTCSeconds(),f()[D+4>>>2>>>0]=b.getUTCMinutes(),f()[D+8>>>2>>>0]=b.getUTCHours(),f()[D+12>>>2>>>0]=b.getUTCDate(),f()[D+16>>>2>>>0]=b.getUTCMonth(),f()[D+20>>>2>>>0]=b.getUTCFullYear()-1900,f()[D+24>>>2>>>0]=b.getUTCDay(),b=(b.getTime()-Date.UTC(b.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[D+28>>>2>>>0]=b},t:function(b,x,D){b=x+2097152>>>0<4194305-!!b?(b>>>0)+4294967296*x:NaN,D>>>=0,b=new Date(1e3*b),f()[D>>>2>>>0]=b.getSeconds(),f()[D+4>>>2>>>0]=b.getMinutes(),f()[D+8>>>2>>>0]=b.getHours(),f()[D+12>>>2>>>0]=b.getDate(),f()[D+16>>>2>>>0]=b.getMonth(),f()[D+20>>>2>>>0]=b.getFullYear()-1900,f()[D+24>>>2>>>0]=b.getDay(),x=(Ba(b.getFullYear())?Zg:zg)[b.getMonth()]+b.getDate()-1|0,f()[D+28>>>2>>>0]=x,f()[D+36>>>2>>>0]=-(60*b.getTimezoneOffset()),x=new Date(b.getFullYear(),6,1).getTimezoneOffset();var j=new Date(b.getFullYear(),0,1).getTimezoneOffset();b=(x!=j&&b.getTimezoneOffset()==Math.min(j,x))|0,f()[D+32>>>2>>>0]=b},u:function(b){b>>>=0;var x=new Date(f()[b+20>>>2>>>0]+1900,f()[b+16>>>2>>>0],f()[b+12>>>2>>>0],f()[b+8>>>2>>>0],f()[b+4>>>2>>>0],f()[b>>>2>>>0],0),D=f()[b+32>>>2>>>0],j=x.getTimezoneOffset(),ie=new Date(x.getFullYear(),6,1).getTimezoneOffset(),se=new Date(x.getFullYear(),0,1).getTimezoneOffset(),we=Math.min(se,ie);return 0>D?f()[b+32>>>2>>>0]=+(ie!=se&&we==j):0<D!=(we==j)&&(ie=Math.max(se,ie),x.setTime(x.getTime()+6e4*((0<D?we:ie)-j))),f()[b+24>>>2>>>0]=x.getDay(),D=(Ba(x.getFullYear())?Zg:zg)[x.getMonth()]+x.getDate()-1|0,f()[b+28>>>2>>>0]=D,f()[b>>>2>>>0]=x.getSeconds(),f()[b+4>>>2>>>0]=x.getMinutes(),f()[b+8>>>2>>>0]=x.getHours(),f()[b+12>>>2>>>0]=x.getDate(),f()[b+16>>>2>>>0]=x.getMonth(),f()[b+20>>>2>>>0]=x.getYear(),b=x.getTime(),isNaN(b)?(f()[Ep()>>>2>>>0]=61,b=-1):b/=1e3,Iu((Qr=b,1<=+Math.abs(Qr)?0<Qr?+Math.floor(Qr/4294967296)>>>0:~~+Math.ceil((Qr-+(~~Qr>>>0))/4294967296)>>>0:0)),b>>>0},q:Vg,r:Wg,y:function(b,x,D){function j(Yt){return(Yt=Yt.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Yt[1]:"GMT"}b>>>=0,x>>>=0,D>>>=0;var ie=new Date().getFullYear(),se=new Date(ie,0,1),we=new Date(ie,6,1);ie=se.getTimezoneOffset();var Lt=we.getTimezoneOffset(),ci=Math.max(ie,Lt);p()[b>>>2>>>0]=60*ci,f()[x>>>2>>>0]=+(ie!=Lt),b=j(se),x=j(we),b=tu(b),x=tu(x),Lt<ie?(p()[D>>>2>>>0]=b,p()[D+4>>>2>>>0]=x):(p()[D>>>2>>>0]=x,p()[D+4>>>2>>>0]=b)},c:()=>{Cr("")},O:function(b,x,D){b>>>=0,x>>>=0,D>>>=0,zd.length=0;for(var j;j=a()[x++>>>0];){var ie=j!=105;ie&=j!=112,D+=ie&&D%8?4:0,zd.push(j==112?p()[D>>>2>>>0]:j==105?f()[D>>>2>>>0]:r()[D>>>3>>>0]),D+=ie?8:4}return jr[b].apply(null,zd)},k:()=>{},i:()=>Date.now(),U:()=>{throw En+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>N?($p(),or(Cp)).cpus().length:navigator.hardwareConcurrency,x:function(b){b>>>=0;var x=a().length;if(b<=x||4294901760<b)return!1;for(var D=1;4>=D;D*=2){var j=x*(1+.2/D);j=Math.min(j,b+100663296);var ie=Math;j=Math.max(b,j);e:{ie=(ie.min.call(ie,4294901760,j+(65536-j%65536)%65536)-Ze.buffer.byteLength+65535)/65536;try{Ze.grow(ie),Kr();var se=1;break e}catch{}se=void 0}if(se)return!0}return!1},M:Hg,N:Wd,G:ya,g:Gd,m:Hd,v:qg,l:Kg,a:Ze||u.wasmMemory,w:bu,d:function(b,x,D,j){return bu(b>>>0,x>>>0,D>>>0,j>>>0)}},Ie=function(){function b(D,j){return Ie=D.exports,Ie=om(),Ee.bb.push(Ie.za),T=Ie.Aa,nr.unshift(Ie.V),Ue=j,Ft(),Ie}var x={a:Qg};if(Gt++,u.instantiateWasm)try{return u.instantiateWasm(x,b)}catch(D){We(`Module.instantiateWasm callback failed with error: ${D}`),h(D)}return mu(x,function(D){b(D.instance,D.module)}).catch(h),{}}();u._OrtInit=(b,x)=>(u._OrtInit=Ie.W)(b,x),u._OrtGetLastError=(b,x)=>(u._OrtGetLastError=Ie.X)(b,x),u._OrtCreateSessionOptions=(b,x,D,j,ie,se,we,Lt,ci,Yt)=>(u._OrtCreateSessionOptions=Ie.Y)(b,x,D,j,ie,se,we,Lt,ci,Yt),u._OrtAppendExecutionProvider=(b,x)=>(u._OrtAppendExecutionProvider=Ie.Z)(b,x),u._OrtAddFreeDimensionOverride=(b,x,D)=>(u._OrtAddFreeDimensionOverride=Ie._)(b,x,D),u._OrtAddSessionConfigEntry=(b,x,D)=>(u._OrtAddSessionConfigEntry=Ie.$)(b,x,D),u._OrtReleaseSessionOptions=b=>(u._OrtReleaseSessionOptions=Ie.aa)(b),u._OrtCreateSession=(b,x,D)=>(u._OrtCreateSession=Ie.ba)(b,x,D),u._OrtReleaseSession=b=>(u._OrtReleaseSession=Ie.ca)(b),u._OrtGetInputOutputCount=(b,x,D)=>(u._OrtGetInputOutputCount=Ie.da)(b,x,D),u._OrtGetInputName=(b,x)=>(u._OrtGetInputName=Ie.ea)(b,x),u._OrtGetOutputName=(b,x)=>(u._OrtGetOutputName=Ie.fa)(b,x),u._OrtFree=b=>(u._OrtFree=Ie.ga)(b),u._OrtCreateTensor=(b,x,D,j,ie,se)=>(u._OrtCreateTensor=Ie.ha)(b,x,D,j,ie,se),u._OrtGetTensorData=(b,x,D,j,ie)=>(u._OrtGetTensorData=Ie.ia)(b,x,D,j,ie),u._OrtReleaseTensor=b=>(u._OrtReleaseTensor=Ie.ja)(b),u._OrtCreateRunOptions=(b,x,D,j)=>(u._OrtCreateRunOptions=Ie.ka)(b,x,D,j),u._OrtAddRunConfigEntry=(b,x,D)=>(u._OrtAddRunConfigEntry=Ie.la)(b,x,D),u._OrtReleaseRunOptions=b=>(u._OrtReleaseRunOptions=Ie.ma)(b),u._OrtCreateBinding=b=>(u._OrtCreateBinding=Ie.na)(b),u._OrtBindInput=(b,x,D)=>(u._OrtBindInput=Ie.oa)(b,x,D),u._OrtBindOutput=(b,x,D,j)=>(u._OrtBindOutput=Ie.pa)(b,x,D,j),u._OrtClearBoundOutputs=b=>(u._OrtClearBoundOutputs=Ie.qa)(b),u._OrtReleaseBinding=b=>(u._OrtReleaseBinding=Ie.ra)(b),u._OrtRunWithBinding=(b,x,D,j,ie)=>(u._OrtRunWithBinding=Ie.sa)(b,x,D,j,ie),u._OrtRun=(b,x,D,j,ie,se,we,Lt)=>(u._OrtRun=Ie.ta)(b,x,D,j,ie,se,we,Lt),u._OrtEndProfiling=b=>(u._OrtEndProfiling=Ie.ua)(b);var Ep=()=>(Ep=Ie.va)(),wu=u._pthread_self=()=>(wu=u._pthread_self=Ie.wa)(),Pp=u._malloc=b=>(Pp=u._malloc=Ie.xa)(b);u._free=b=>(u._free=Ie.ya)(b),u.__emscripten_tls_init=()=>(u.__emscripten_tls_init=Ie.za)();var kp=u.__emscripten_thread_init=(b,x,D,j,ie,se)=>(kp=u.__emscripten_thread_init=Ie.Ba)(b,x,D,j,ie,se);u.__emscripten_thread_crashed=()=>(u.__emscripten_thread_crashed=Ie.Ca)();var _u=(b,x,D,j)=>(_u=Ie.Da)(b,x,D,j),Bp=b=>(Bp=Ie.Ea)(b),xu=u.__emscripten_thread_exit=b=>(xu=u.__emscripten_thread_exit=Ie.Fa)(b),Tu=()=>(Tu=Ie.Ga)(),Iu=b=>(Iu=Ie.Ha)(b),Sa=(b,x)=>(Sa=Ie.Ia)(b,x),Eu=()=>(Eu=Ie.Ja)(),nu=b=>(nu=Ie.Ka)(b),uh=b=>(uh=Ie.La)(b);function om(){var b=Ie;b=Object.assign({},b);var x=j=>()=>j()>>>0,D=j=>ie=>j(ie)>>>0;return b.va=x(b.va),b.wa=x(b.wa),b.xa=D(b.xa),b.emscripten_main_runtime_thread_id=x(b.emscripten_main_runtime_thread_id),b.Ja=x(b.Ja),b.La=D(b.La),b}u.wasmMemory=Ze,u.stackAlloc=uh,u.stackSave=Eu,u.stackRestore=nu,u.keepRuntimeAlive=()=>0<En,u.UTF8ToString=Sn,u.stringToUTF8=vr,u.lengthBytesUTF8=Kt,u.ExitStatus=Yn,u.PThread=Ee;var iu;Ct=function b(){iu||ph(),iu||(Ct=b)};function ph(){if(!(0<Gt))if(B)l(u),B||ba(nr),startWorker(u);else{if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)sn.unshift(u.preRun.shift());ba(sn),0<Gt||iu||(iu=!0,u.calledRun=!0,Dt||(B||ba(nr),l(u),B||ba(Ar)))}}return ph(),c.ready}})();typeof e=="object"&&typeof t=="object"?t.exports=i:typeof define=="function"&&define.amd&&define([],()=>i)}),Rp=me((e,t)=>{t.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\n'}),Gp,lg,aa,sa,Po,Mp,fg,cg,pg,Up,Le,Vr=E(()=>{Gp=Dp(),lg=Np(),sa=!1,Po=!1,Mp=!1,fg=e=>{if(e===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},cg=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},pg=(e,t)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Up=async e=>{if(sa)return Promise.resolve();if(Po)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Mp)throw new Error("previous call to 'initializeWebAssembly()' failed.");Po=!0;let t=e.initTimeout,i=e.numThreads,o=e.simd,c=fg(i),n=o&&cg(),a=e.wasmPaths,f=typeof a=="string"?a:void 0,p=pg(n,c),r=typeof a=="object"?a[p]:void 0,u=!1,l=[];if(t>0&&l.push(new Promise(h=>{setTimeout(()=>{u=!0,h()},t)})),l.push(new Promise((h,y)=>{let I=c?lg:Gp,S={locateFile:(A,V)=>c&&A.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Rp()],{type:"text/javascript"})):A.endsWith(".wasm")?r||(f??V)+p:V+A};if(c)if(S.numThreads=i,typeof Blob>"u")S.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let A=`var ortWasmThreaded=${I.toString()};`;S.mainScriptUrlOrBlob=new Blob([A],{type:"text/javascript"})}I(S).then(A=>{Po=!1,sa=!0,aa=A,h()},A=>{Po=!1,Mp=!0,y(A)})})),await Promise.race(l),u)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},Le=()=>{if(sa&&aa)return aa;throw new Error("WebAssembly is not initialized yet.")}}),_e,yn,Oe,Eo=E(()=>{Vr(),_e=(e,t)=>{let i=Le(),o=i.lengthBytesUTF8(e)+1,c=i._malloc(o);return i.stringToUTF8(e,c,o),t.push(c),c},yn=(e,t,i,o)=>{if(typeof e=="object"&&e!==null){if(i.has(e))throw new Error("Circular reference in options");i.add(e)}Object.entries(e).forEach(([c,n])=>{let a=t?t+c:c;if(typeof n=="object")yn(n,a+".",i,o);else if(typeof n=="string"||typeof n=="number")o(a,n.toString());else if(typeof n=="boolean")o(a,n?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof n}`)})},Oe=e=>{let t=Le(),i=t.stackSave();try{let o=t.stackAlloc(8);t._OrtGetLastError(o,o+4);let c=t.HEAP32[o/4],n=t.HEAPU32[o/4+1],a=n?t.UTF8ToString(n):"";throw new Error(`${e} ERROR_CODE: ${c}, ERROR_MESSAGE: ${a}`)}finally{t.stackRestore(i)}}}),zp,Vp=E(()=>{Vr(),Eo(),zp=e=>{let t=Le(),i=0,o=[],c=e||{};try{if((e==null?void 0:e.logSeverityLevel)===void 0)c.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if((e==null?void 0:e.logVerbosityLevel)===void 0)c.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);(e==null?void 0:e.terminate)===void 0&&(c.terminate=!1);let n=0;return(e==null?void 0:e.tag)!==void 0&&(n=_e(e.tag,o)),i=t._OrtCreateRunOptions(c.logSeverityLevel,c.logVerbosityLevel,!!c.terminate,n),i===0&&Oe("Can't create run options."),(e==null?void 0:e.extra)!==void 0&&yn(e.extra,"",new WeakSet,(a,f)=>{let p=_e(a,o),r=_e(f,o);t._OrtAddRunConfigEntry(i,p,r)!==0&&Oe(`Can't set a run config entry: ${a} - ${f}.`)}),[i,o]}catch(n){throw i!==0&&t._OrtReleaseRunOptions(i),o.forEach(a=>t._free(a)),n}}}),dg,hg,mg,bg,Wp,Hp=E(()=>{Vr(),Eo(),dg=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},hg=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},mg=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(i=>(typeof i=="string"?i:i.name)==="webgpu")&&(e.enableMemPattern=!1)},bg=(e,t,i)=>{for(let o of t){let c=typeof o=="string"?o:o.name;switch(c){case"webnn":if(c="WEBNN",typeof o!="string"){let a=o;if(a!=null&&a.deviceType){let f=_e("deviceType",i),p=_e(a.deviceType,i);Le()._OrtAddSessionConfigEntry(e,f,p)!==0&&Oe(`Can't set a session config entry: 'deviceType' - ${a.deviceType}.`)}if(a!=null&&a.numThreads){let f=a.numThreads;(typeof f!="number"||!Number.isInteger(f)||f<0)&&(f=0);let p=_e("numThreads",i),r=_e(f.toString(),i);Le()._OrtAddSessionConfigEntry(e,p,r)!==0&&Oe(`Can't set a session config entry: 'numThreads' - ${a.numThreads}.`)}if(a!=null&&a.powerPreference){let f=_e("powerPreference",i),p=_e(a.powerPreference,i);Le()._OrtAddSessionConfigEntry(e,f,p)!==0&&Oe(`Can't set a session config entry: 'powerPreference' - ${a.powerPreference}.`)}}break;case"webgpu":if(c="JS",typeof o!="string"){let a=o;if(a!=null&&a.preferredLayout){if(a.preferredLayout!=="NCHW"&&a.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${a.preferredLayout}`);let f=_e("preferredLayout",i),p=_e(a.preferredLayout,i);Le()._OrtAddSessionConfigEntry(e,f,p)!==0&&Oe(`Can't set a session config entry: 'preferredLayout' - ${a.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${c}`)}let n=_e(c,i);Le()._OrtAppendExecutionProvider(e,n)!==0&&Oe(`Can't append execution provider: ${c}.`)}},Wp=e=>{let t=Le(),i=0,o=[],c=e||{};mg(c);try{let n=dg(c.graphOptimizationLevel??"all"),a=hg(c.executionMode??"sequential"),f=typeof c.logId=="string"?_e(c.logId,o):0,p=c.logSeverityLevel??2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);let r=c.logVerbosityLevel??0;if(!Number.isInteger(r)||r<0||r>4)throw new Error(`log verbosity level is not valid: ${r}`);let u=typeof c.optimizedModelFilePath=="string"?_e(c.optimizedModelFilePath,o):0;if(i=t._OrtCreateSessionOptions(n,!!c.enableCpuMemArena,!!c.enableMemPattern,a,!!c.enableProfiling,0,f,p,r,u),i===0&&Oe("Can't create session options."),c.executionProviders&&bg(i,c.executionProviders,o),c.enableGraphCapture!==void 0){if(typeof c.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${c.enableGraphCapture}`);let l=_e("enableGraphCapture",o),h=_e(c.enableGraphCapture.toString(),o);t._OrtAddSessionConfigEntry(i,l,h)!==0&&Oe(`Can't set a session config entry: 'enableGraphCapture' - ${c.enableGraphCapture}.`)}if(c.freeDimensionOverrides)for(let[l,h]of Object.entries(c.freeDimensionOverrides)){if(typeof l!="string")throw new Error(`free dimension override name must be a string: ${l}`);if(typeof h!="number"||!Number.isInteger(h)||h<0)throw new Error(`free dimension override value must be a non-negative integer: ${h}`);let y=_e(l,o);t._OrtAddFreeDimensionOverride(i,y,h)!==0&&Oe(`Can't set a free dimension override: ${l} - ${h}.`)}return c.extra!==void 0&&yn(c.extra,"",new WeakSet,(l,h)=>{let y=_e(l,o),I=_e(h,o);t._OrtAddSessionConfigEntry(i,y,I)!==0&&Oe(`Can't set a session config entry: ${l} - ${h}.`)}),[i,o]}catch(n){throw i!==0&&t._OrtReleaseSessionOptions(i),o.forEach(a=>t._free(a)),n}}}),ua,qp,la,jp,Yp,Do,Xp,fa=E(()=>{ua=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},qp=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},la=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],jp=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},Yp=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},Do=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool",Xp=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${e}`)}}}),Tn,ca=E(()=>{Tn=async e=>{if(typeof e=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(e))}catch(t){if(t.code==="ERR_FS_FILE_TOO_LARGE"){let i=(void 0)(e),o=[];for await(let c of i)o.push(c);return new Uint8Array(Buffer.concat(o))}throw t}else{let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let i=t.headers.get("Content-Length"),o=i?parseInt(i,10):0;if(o<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let c=t.body.getReader(),n;try{n=new ArrayBuffer(o)}catch(f){if(f instanceof RangeError){let p=Math.ceil(o/65536);n=new WebAssembly.Memory({initial:p,maximum:p}).buffer}else throw f}let a=0;for(;;){let{done:f,value:p}=await c.read();if(f)break;let r=p.byteLength;new Uint8Array(n,a,r).set(p),a+=r}return new Uint8Array(n,0,o)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)}}),gg,Jp,Zp,Wr,yg,pa,Qp,ed,Kp,td,rd,nd,od=E(()=>{Vp(),Hp(),fa(),Vr(),Eo(),ca(),gg=(e,t)=>{Le()._OrtInit(e,t)!==0&&Oe("Can't initialize onnxruntime.")},Jp=async e=>{gg(e.wasm.numThreads,Yp(e.logLevel))},Zp=async(e,t)=>{},Wr=new Map,yg=e=>{let t=Le(),i=t.stackSave();try{let o=t.stackAlloc(8);return t._OrtGetInputOutputCount(e,o,o+4)!==0&&Oe("Can't get session input/output count."),[t.HEAP32[o/4],t.HEAP32[o/4+1]]}finally{t.stackRestore(i)}},pa=e=>{let t=Le(),i=t._malloc(e.byteLength);if(i===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,i),[i,e.byteLength]},Qp=async(e,t)=>{var u;let i,o,c=Le();Array.isArray(e)?[i,o]=e:e.buffer===c.HEAPU8.buffer?[i,o]=[e.byteOffset,e.byteLength]:[i,o]=pa(e);let n=0,a=0,f=[],p=[],r=[];try{if([a,f]=Wp(t),(t==null?void 0:t.externalData)&&c.mountExternalData){let N=[];for(let B of t.externalData){let te=typeof B=="string"?B:B.path;N.push(Tn(typeof B=="string"?B:B.data).then(ve=>{c.mountExternalData(te,ve)}))}await Promise.all(N)}n=await c._OrtCreateSession(i,o,a),n===0&&Oe("Can't create a session.");let[l,h]=yg(n),y=!!(t!=null&&t.enableGraphCapture),I=[],S=[],A=[];for(let N=0;N<l;N++){let B=c._OrtGetInputName(n,N);B===0&&Oe("Can't get an input name."),p.push(B),I.push(c.UTF8ToString(B))}for(let N=0;N<h;N++){let B=c._OrtGetOutputName(n,N);B===0&&Oe("Can't get an output name."),r.push(B);let te=c.UTF8ToString(B);S.push(te)}return Wr.set(n,[n,p,r,null,y,!1]),[n,I,S]}catch(l){throw p.forEach(h=>c._OrtFree(h)),r.forEach(h=>c._OrtFree(h)),n!==0&&c._OrtReleaseSession(n),l}finally{c._free(i),a!==0&&c._OrtReleaseSessionOptions(a),f.forEach(l=>c._free(l)),(u=c.unmountExternalData)==null||u.call(c)}},ed=e=>{var p;let t=Le(),i=Wr.get(e);if(!i)throw new Error(`cannot release session. invalid session id: ${e}`);let[o,c,n,a,f]=i;a&&(f&&t._OrtClearBoundOutputs(a.handle),t._OrtReleaseBinding(a.handle)),(p=t.jsepOnReleaseSession)==null||p.call(t,e),c.forEach(r=>t._OrtFree(r)),n.forEach(r=>t._OrtFree(r)),t._OrtReleaseSession(o),Wr.delete(e)},Kp=(e,t,i,o,c,n=!1)=>{if(!e){t.push(0);return}let a=Le(),f=e[0],p=e[1],r=e[3],u,l;if(f==="string"&&r==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(n&&r!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${c} when enableGraphCapture is true.`);if(r==="gpu-buffer"){let I=e[2].gpuBuffer,S=la(ua(f));l=p.reduce((V,N)=>V*N,1)*S;let A=a.jsepRegisterBuffer;if(!A)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');u=A(o,c,I,l)}else{let I=e[2];if(Array.isArray(I)){l=4*I.length,u=a._malloc(l),i.push(u);let S=u/4;for(let A=0;A<I.length;A++){if(typeof I[A]!="string")throw new TypeError(`tensor data at index ${A} is not a string`);a.HEAPU32[S++]=_e(I[A],i)}}else l=I.byteLength,u=a._malloc(l),i.push(u),a.HEAPU8.set(new Uint8Array(I.buffer,I.byteOffset,l),u)}let h=a.stackSave(),y=a.stackAlloc(4*p.length);try{let I=y/4;p.forEach(A=>a.HEAP32[I++]=A);let S=a._OrtCreateTensor(ua(f),u,l,y,p.length,Xp(r));S===0&&Oe(`Can't create tensor for input/output. session=${o}, index=${c}.`),t.push(S)}finally{a.stackRestore(h)}},td=async(e,t,i,o,c,n)=>{var pe;let a=Le(),f=Wr.get(e);if(!f)throw new Error(`cannot run inference. invalid session id: ${e}`);let p=f[0],r=f[1],u=f[2],l=f[3],h=f[4];f[5];let y=t.length,I=o.length,S=0,A=[],V=[],N=[],B=[],te=a.stackSave(),ve=a.stackAlloc(y*4),St=a.stackAlloc(y*4),Ye=a.stackAlloc(I*4),et=a.stackAlloc(I*4);try{[S,A]=zp(n);for(let Ue=0;Ue<y;Ue++)Kp(i[Ue],V,B,e,t[Ue],h);for(let Ue=0;Ue<I;Ue++)Kp(c[Ue],N,B,e,y+o[Ue],h);let rt=ve/4,Vo=St/4,_t=Ye/4,$t=et/4;for(let Ue=0;Ue<y;Ue++)a.HEAPU32[rt++]=V[Ue],a.HEAPU32[Vo++]=r[t[Ue]];for(let Ue=0;Ue<I;Ue++)a.HEAPU32[_t++]=N[Ue],a.HEAPU32[$t++]=u[o[Ue]];(pe=a.jsepOnRunStart)==null||pe.call(a,p);let We;We=await a._OrtRun(p,St,ve,y,et,I,Ye,S),We!==0&&Oe("failed to call OrtRun().");let Ze=[];for(let Ue=0;Ue<I;Ue++){let Dt=a.HEAPU32[Ye/4+Ue];if(Dt===N[Ue]){Ze.push(c[Ue]);continue}let Ut=a.stackSave(),cr=a.stackAlloc(4*4),er=!1,gt,fr=0;try{a._OrtGetTensorData(Dt,cr,cr+4,cr+8,cr+12)!==0&&Oe(`Can't access output tensor data on index ${Ue}.`);let mt=cr/4,Kr=a.HEAPU32[mt++];fr=a.HEAPU32[mt++];let Sr=a.HEAPU32[mt++],sn=a.HEAPU32[mt++],nr=[];for(let Ct=0;Ct<sn;Ct++)nr.push(a.HEAPU32[Sr/4+Ct]);a._OrtFree(Sr);let Ar=nr.reduce((Ct,Ft)=>Ct*Ft,1);gt=qp(Kr);let Gt=l==null?void 0:l.outputPreferredLocations[o[Ue]];if(gt==="string"){if(Gt==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Ct=[],Ft=fr/4;for(let Cr=0;Cr<Ar;Cr++){let qn=a.HEAPU32[Ft++],qt=Cr===Ar-1?void 0:a.HEAPU32[Ft]-qn;Ct.push(a.UTF8ToString(qn,qt))}Ze.push([gt,nr,Ct,"cpu"])}else if(Gt==="gpu-buffer"&&Ar>0){let Ct=a.jsepGetBuffer;if(!Ct)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let Ft=Ct(fr),Cr=la(Kr);if(Cr===void 0||!Do(gt))throw new Error(`Unsupported data type: ${gt}`);er=!0,Ze.push([gt,nr,{gpuBuffer:Ft,download:a.jsepCreateDownloader(Ft,Ar*Cr,gt),dispose:()=>{a._OrtReleaseTensor(Dt)}},"gpu-buffer"])}else{let Ct=jp(gt),Ft=new Ct(Ar);new Uint8Array(Ft.buffer,Ft.byteOffset,Ft.byteLength).set(a.HEAPU8.subarray(fr,fr+Ft.byteLength)),Ze.push([gt,nr,Ft,"cpu"])}}finally{a.stackRestore(Ut),gt==="string"&&fr&&a._free(fr),er||a._OrtReleaseTensor(Dt)}}return l&&!h&&(a._OrtClearBoundOutputs(l.handle),Wr.set(e,[p,r,u,l,h,!1])),Ze}finally{a.stackRestore(te),V.forEach(rt=>a._OrtReleaseTensor(rt)),N.forEach(rt=>a._OrtReleaseTensor(rt)),B.forEach(rt=>a._free(rt)),S!==0&&a._OrtReleaseRunOptions(S),A.forEach(rt=>a._free(rt))}},rd=e=>{let t=Le(),i=Wr.get(e);if(!i)throw new Error("invalid session id");let o=i[0],c=t._OrtEndProfiling(o);c===0&&Oe("Can't get an profile file name."),t._OrtFree(c)},nd=e=>{let t=[];for(let i of e){let o=i[2];!Array.isArray(o)&&"buffer"in o&&t.push(o.buffer)}return t}}),id=me((e,t)=>{t.exports='/*!\n * ONNX Runtime Web v1.17.3\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var Et=Object.defineProperty;var Jr=Object.getOwnPropertyDescriptor;var Xr=Object.getOwnPropertyNames;var Qr=Object.prototype.hasOwnProperty;var St=(u,c)=>()=>(u&&(c=u(u=0)),c);var tt=(u,c)=>()=>(c||u((c={exports:{}}).exports,c),c.exports),At=(u,c)=>{for(var a in c)Et(u,a,{get:c[a],enumerable:!0})},Zr=(u,c,a,h)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of Xr(c))!Qr.call(u,f)&&f!==a&&Et(u,f,{get:()=>c[f],enumerable:!(h=Jr(c,f))||h.enumerable});return u};var rt=u=>Zr(Et({},"__esModule",{value:!0}),u);var Tt={};At(Tt,{createReadStream:()=>dr,readFile:()=>Kr,readFileSync:()=>en});var Kr,en,dr,Mt=St(()=>{Kr=void 0,en=void 0,dr=void 0});var Ct={};At(Ct,{join:()=>tn});var tn,Dt=St(()=>{tn=void 0});var gr=tt((mr,Ft)=>{"use strict";var pr=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(c={}){var a=c,h,f;a.ready=new Promise((r,o)=>{h=r,f=o});var w=Object.assign({},a),g="./this.program",i=typeof window=="object",E=typeof importScripts=="function",P=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",U="",D,x,K;if(P){var R=(Mt(),rt(Tt)),I=(Dt(),rt(Ct));U=E?I.dirname(U)+"/":__dirname+"/",D=(r,o)=>(r=ve(r)?new URL(r):I.normalize(r),R.readFileSync(r,o?void 0:"utf8")),K=r=>(r=D(r,!0),r.buffer||(r=new Uint8Array(r)),r),x=(r,o,s,m=!0)=>{r=ve(r)?new URL(r):I.normalize(r),R.readFile(r,m?void 0:"utf8",(O,A)=>{O?s(O):o(m?A.buffer:A)})},!a.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(i||E)&&(E?U=self.location.href:typeof document<"u"&&document.currentScript&&(U=document.currentScript.src),u&&(U=u),U.indexOf("blob:")!==0?U=U.substr(0,U.replace(/[?#].*/,"").lastIndexOf("/")+1):U="",D=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.send(null),o.responseText},E&&(K=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),x=(r,o,s)=>{var m=new XMLHttpRequest;m.open("GET",r,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):s()},m.onerror=s,m.send(null)});var v=console.log.bind(console),k=console.error.bind(console);Object.assign(a,w),w=null,typeof WebAssembly!="object"&&F("no native wasm support detected");var W,H=!1,se,ee,S,j,Ce;function Ue(){var r=W.buffer;a.HEAP8=se=new Int8Array(r),a.HEAP16=new Int16Array(r),a.HEAPU8=ee=new Uint8Array(r),a.HEAPU16=new Uint16Array(r),a.HEAP32=S=new Int32Array(r),a.HEAPU32=j=new Uint32Array(r),a.HEAPF32=new Float32Array(r),a.HEAPF64=Ce=new Float64Array(r)}var ce=[],ne=[],Q=[],Oe=0,he=null,ae=null;function F(r){throw r="Aborted("+r+")",k(r),H=!0,r=new WebAssembly.RuntimeError(r+". Build with -sASSERTIONS for more info."),f(r),r}var ye=r=>r.startsWith("data:application/octet-stream;base64,"),ve=r=>r.startsWith("file://"),fe;if(fe="ort-wasm.wasm",!ye(fe)){var _e=fe;fe=a.locateFile?a.locateFile(_e,U):U+_e}function Y(r){if(K)return K(r);throw"both async and sync fetching of the wasm failed"}function pe(r){if(i||E){if(typeof fetch=="function"&&!ve(r))return fetch(r,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at \'"+r+"\'";return o.arrayBuffer()}).catch(()=>Y(r));if(x)return new Promise((o,s)=>{x(r,m=>o(new Uint8Array(m)),s)})}return Promise.resolve().then(()=>Y(r))}function Ie(r,o,s){return pe(r).then(m=>WebAssembly.instantiate(m,o)).then(m=>m).then(s,m=>{k(`failed to asynchronously prepare wasm: ${m}`),F(m)})}function Ee(r,o){var s=fe;return typeof WebAssembly.instantiateStreaming!="function"||ye(s)||ve(s)||P||typeof fetch!="function"?Ie(s,r,o):fetch(s,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,r).then(o,function(O){return k(`wasm streaming compile failed: ${O}`),k("falling back to ArrayBuffer instantiation"),Ie(s,r,o)}))}var be,we={920016:(r,o,s,m)=>{if(typeof a>"u"||!a.za)return 1;if(r=z(r>>>0),r.startsWith("./")&&(r=r.substring(2)),r=a.za.get(r),!r)return 2;if(o>>>=0,s>>>=0,o+s>r.byteLength)return 3;try{return ee.set(r.subarray(o,o+s),m>>>0>>>0),0}catch{return 4}}};function Le(r){this.xa=r-24,this.Ha=function(o){j[this.xa+4>>>2>>>0]=o},this.Ga=function(o){j[this.xa+8>>>2>>>0]=o},this.Aa=function(o,s){this.Fa(),this.Ha(o),this.Ga(s)},this.Fa=function(){j[this.xa+16>>>2>>>0]=0}}var me=0,Se=0,De=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,te=(r,o,s)=>{o>>>=0;var m=o+s;for(s=o;r[s]&&!(s>=m);)++s;if(16<s-o&&r.buffer&&De)return De.decode(r.subarray(o,s));for(m="";o<s;){var O=r[o++];if(O&128){var A=r[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|A);else{var L=r[o++]&63;O=(O&240)==224?(O&15)<<12|A<<6|L:(O&7)<<18|A<<12|L<<6|r[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},z=(r,o)=>(r>>>=0)?te(ee,r,o):"",le=r=>{for(var o=0,s=0;s<r.length;++s){var m=r.charCodeAt(s);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++s):o+=3}return o},Fe=(r,o,s,m)=>{if(s>>>=0,!(0<m))return 0;var O=s;m=s+m-1;for(var A=0;A<r.length;++A){var L=r.charCodeAt(A);if(55296<=L&&57343>=L){var re=r.charCodeAt(++A);L=65536+((L&1023)<<10)|re&1023}if(127>=L){if(s>=m)break;o[s++>>>0]=L}else{if(2047>=L){if(s+1>=m)break;o[s++>>>0]=192|L>>6}else{if(65535>=L){if(s+2>=m)break;o[s++>>>0]=224|L>>12}else{if(s+3>=m)break;o[s++>>>0]=240|L>>18,o[s++>>>0]=128|L>>12&63}o[s++>>>0]=128|L>>6&63}o[s++>>>0]=128|L&63}}return o[s>>>0]=0,s-O},Ae=r=>r%4===0&&(r%100!==0||r%400===0),qe=[0,31,60,91,121,152,182,213,244,274,305,335],at=[0,31,59,90,120,151,181,212,243,273,304,334],xe=r=>{var o=le(r)+1,s=st(o);return s&&Fe(r,ee,s,o),s},Ne=[],Re={},He=()=>{if(!Ge){var r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"},o;for(o in Re)Re[o]===void 0?delete r[o]:r[o]=Re[o];var s=[];for(o in r)s.push(`${o}=${r[o]}`);Ge=s}return Ge},Ge,Be=[null,[],[]],Ve=[31,29,31,30,31,30,31,31,30,31,30,31],Je=[31,28,31,30,31,30,31,31,30,31,30,31];function $e(r){var o=Array(le(r)+1);return Fe(r,o,0,o.length),o}function ot(r,o,s,m){function O(d,B,$){for(d=typeof d=="number"?d.toString():d||"";d.length<B;)d=$[0]+d;return d}function A(d,B){return O(d,B,"0")}function L(d,B){function $(et){return 0>et?-1:0<et?1:0}var Te;return(Te=$(d.getFullYear()-B.getFullYear()))===0&&(Te=$(d.getMonth()-B.getMonth()))===0&&(Te=$(d.getDate()-B.getDate())),Te}function re(d){switch(d.getDay()){case 0:return new Date(d.getFullYear()-1,11,29);case 1:return d;case 2:return new Date(d.getFullYear(),0,3);case 3:return new Date(d.getFullYear(),0,2);case 4:return new Date(d.getFullYear(),0,1);case 5:return new Date(d.getFullYear()-1,11,31);case 6:return new Date(d.getFullYear()-1,11,30)}}function de(d){var B=d.ta;for(d=new Date(new Date(d.ua+1900,0,1).getTime());0<B;){var $=d.getMonth(),Te=(Ae(d.getFullYear())?Ve:Je)[$];if(B>Te-d.getDate())B-=Te-d.getDate()+1,d.setDate(1),11>$?d.setMonth($+1):(d.setMonth(0),d.setFullYear(d.getFullYear()+1));else{d.setDate(d.getDate()+B);break}}return $=new Date(d.getFullYear()+1,0,4),B=re(new Date(d.getFullYear(),0,4)),$=re($),0>=L(B,d)?0>=L($,d)?d.getFullYear()+1:d.getFullYear():d.getFullYear()-1}r>>>=0,o>>>=0,s>>>=0,m>>>=0;var ie=j[m+40>>>2>>>0];m={Da:S[m>>>2>>>0],Ca:S[m+4>>>2>>>0],va:S[m+8>>>2>>>0],ya:S[m+12>>>2>>>0],wa:S[m+16>>>2>>>0],ua:S[m+20>>>2>>>0],oa:S[m+24>>>2>>>0],ta:S[m+28>>>2>>>0],Ia:S[m+32>>>2>>>0],Ba:S[m+36>>>2>>>0],Ea:ie?z(ie):""},s=z(s),ie={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ue in ie)s=s.replace(new RegExp(ue,"g"),ie[ue]);var Ze="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ke="January February March April May June July August September October November December".split(" ");ie={"%a":d=>Ze[d.oa].substring(0,3),"%A":d=>Ze[d.oa],"%b":d=>Ke[d.wa].substring(0,3),"%B":d=>Ke[d.wa],"%C":d=>A((d.ua+1900)/100|0,2),"%d":d=>A(d.ya,2),"%e":d=>O(d.ya,2," "),"%g":d=>de(d).toString().substring(2),"%G":d=>de(d),"%H":d=>A(d.va,2),"%I":d=>(d=d.va,d==0?d=12:12<d&&(d-=12),A(d,2)),"%j":d=>{for(var B=0,$=0;$<=d.wa-1;B+=(Ae(d.ua+1900)?Ve:Je)[$++]);return A(d.ya+B,3)},"%m":d=>A(d.wa+1,2),"%M":d=>A(d.Ca,2),"%n":()=>`\n`,"%p":d=>0<=d.va&&12>d.va?"AM":"PM","%S":d=>A(d.Da,2),"%t":()=>"	","%u":d=>d.oa||7,"%U":d=>A(Math.floor((d.ta+7-d.oa)/7),2),"%V":d=>{var B=Math.floor((d.ta+7-(d.oa+6)%7)/7);if(2>=(d.oa+371-d.ta-2)%7&&B++,B)B==53&&($=(d.oa+371-d.ta)%7,$==4||$==3&&Ae(d.ua)||(B=1));else{B=52;var $=(d.oa+7-d.ta-1)%7;($==4||$==5&&Ae(d.ua%400-1))&&B++}return A(B,2)},"%w":d=>d.oa,"%W":d=>A(Math.floor((d.ta+7-(d.oa+6)%7)/7),2),"%y":d=>(d.ua+1900).toString().substring(2),"%Y":d=>d.ua+1900,"%z":d=>{d=d.Ba;var B=0<=d;return d=Math.abs(d)/60,(B?"+":"-")+("0000"+(d/60*100+d%60)).slice(-4)},"%Z":d=>d.Ea,"%%":()=>"%"},s=s.replace(/%%/g,"\\0\\0");for(ue in ie)s.includes(ue)&&(s=s.replace(new RegExp(ue,"g"),ie[ue](m)));return s=s.replace(/\\0\\0/g,"%"),ue=$e(s),ue.length>o?0:(se.set(ue,r>>>0),ue.length-1)}var G={a:function(r,o,s){throw r>>>=0,new Le(r).Aa(o>>>0,s>>>0),me=r,Se++,me},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(r,o,s){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,s>>>=0,r=new Date(1e3*r),S[s>>>2>>>0]=r.getUTCSeconds(),S[s+4>>>2>>>0]=r.getUTCMinutes(),S[s+8>>>2>>>0]=r.getUTCHours(),S[s+12>>>2>>>0]=r.getUTCDate(),S[s+16>>>2>>>0]=r.getUTCMonth(),S[s+20>>>2>>>0]=r.getUTCFullYear()-1900,S[s+24>>>2>>>0]=r.getUTCDay(),S[s+28>>>2>>>0]=(r.getTime()-Date.UTC(r.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(r,o,s){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,s>>>=0,r=new Date(1e3*r),S[s>>>2>>>0]=r.getSeconds(),S[s+4>>>2>>>0]=r.getMinutes(),S[s+8>>>2>>>0]=r.getHours(),S[s+12>>>2>>>0]=r.getDate(),S[s+16>>>2>>>0]=r.getMonth(),S[s+20>>>2>>>0]=r.getFullYear()-1900,S[s+24>>>2>>>0]=r.getDay(),S[s+28>>>2>>>0]=(Ae(r.getFullYear())?qe:at)[r.getMonth()]+r.getDate()-1|0,S[s+36>>>2>>>0]=-(60*r.getTimezoneOffset()),o=new Date(r.getFullYear(),6,1).getTimezoneOffset();var m=new Date(r.getFullYear(),0,1).getTimezoneOffset();S[s+32>>>2>>>0]=(o!=m&&r.getTimezoneOffset()==Math.min(m,o))|0},p:function(r){r>>>=0;var o=new Date(S[r+20>>>2>>>0]+1900,S[r+16>>>2>>>0],S[r+12>>>2>>>0],S[r+8>>>2>>>0],S[r+4>>>2>>>0],S[r>>>2>>>0],0),s=S[r+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),A=new Date(o.getFullYear(),0,1).getTimezoneOffset(),L=Math.min(A,O);return 0>s?S[r+32>>>2>>>0]=+(O!=A&&L==m):0<s!=(L==m)&&(O=Math.max(A,O),o.setTime(o.getTime()+6e4*((0<s?L:O)-m))),S[r+24>>>2>>>0]=o.getDay(),S[r+28>>>2>>>0]=(Ae(o.getFullYear())?qe:at)[o.getMonth()]+o.getDate()-1|0,S[r>>>2>>>0]=o.getSeconds(),S[r+4>>>2>>>0]=o.getMinutes(),S[r+8>>>2>>>0]=o.getHours(),S[r+12>>>2>>>0]=o.getDate(),S[r+16>>>2>>>0]=o.getMonth(),S[r+20>>>2>>>0]=o.getYear(),r=o.getTime(),isNaN(r)?(S[je()>>>2>>>0]=61,r=-1):r/=1e3,Xe((be=r,1<=+Math.abs(be)?0<be?+Math.floor(be/4294967296)>>>0:~~+Math.ceil((be-+(~~be>>>0))/4294967296)>>>0:0)),r>>>0},l:function(){return-52},m:function(){},t:function(r,o,s){function m(de){return(de=de.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?de[1]:"GMT"}s>>>=0;var O=new Date().getFullYear(),A=new Date(O,0,1),L=new Date(O,6,1);O=A.getTimezoneOffset();var re=L.getTimezoneOffset();j[r>>>0>>>2>>>0]=60*Math.max(O,re),S[o>>>0>>>2>>>0]=+(O!=re),r=m(A),o=m(L),r=xe(r),o=xe(o),re<O?(j[s>>>2>>>0]=r,j[s+4>>>2>>>0]=o):(j[s>>>2>>>0]=o,j[s+4>>>2>>>0]=r)},d:()=>{F("")},B:function(r,o,s){r>>>=0,o>>>=0,s>>>=0,Ne.length=0;for(var m;m=ee[o++>>>0];){var O=m!=105;O&=m!=112,s+=O&&s%8?4:0,Ne.push(m==112?j[s>>>2>>>0]:m==105?S[s>>>2>>>0]:Ce[s>>>3>>>0]),s+=O?8:4}return we[r].apply(null,Ne)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(r,o,s){return o>>>=0,ee.copyWithin(r>>>0>>>0,o>>>0,o+(s>>>0)>>>0)},s:function(r){r>>>=0;var o=ee.length;if(4294901760<r)return!1;for(var s=1;4>=s;s*=2){var m=o*(1+.2/s);m=Math.min(m,r+100663296);var O=Math;m=Math.max(r,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-W.buffer.byteLength+65535)/65536;try{W.grow(O),Ue();var A=1;break e}catch{}A=void 0}if(A)return!0}return!1},C:function(r,o){r>>>=0,o>>>=0;var s=0;return He().forEach((m,O)=>{var A=o+s;for(O=j[r+4*O>>>2>>>0]=A,A=0;A<m.length;++A)se[O++>>>0>>>0]=m.charCodeAt(A);se[O>>>0>>>0]=0,s+=m.length+1}),0},D:function(r,o){r>>>=0,o>>>=0;var s=He();j[r>>>2>>>0]=s.length;var m=0;return s.forEach(O=>m+=O.length+1),j[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(r,o,s,m){o>>>=0,s>>>=0,m>>>=0;for(var O=0,A=0;A<s;A++){var L=j[o>>>2>>>0],re=j[o+4>>>2>>>0];o+=8;for(var de=0;de<re;de++){var ie=ee[L+de>>>0],ue=Be[r];ie===0||ie===10?((r===1?v:k)(te(ue,0)),ue.length=0):ue.push(ie)}O+=re}return j[m>>>2>>>0]=O,0},r:ot,c:function(r,o,s,m){return ot(r>>>0,o>>>0,s>>>0,m>>>0)}},C=function(){function r(s){return C=s.exports,C=ut(),W=C.K,Ue(),ne.unshift(C.L),Oe--,Oe==0&&(he!==null&&(clearInterval(he),he=null),ae&&(s=ae,ae=null,s())),C}var o={a:G};if(Oe++,a.instantiateWasm)try{return a.instantiateWasm(o,r)}catch(s){k(`Module.instantiateWasm callback failed with error: ${s}`),f(s)}return Ee(o,function(s){r(s.instance)}).catch(f),{}}();a._OrtInit=(r,o)=>(a._OrtInit=C.M)(r,o),a._OrtGetLastError=(r,o)=>(a._OrtGetLastError=C.N)(r,o),a._OrtCreateSessionOptions=(r,o,s,m,O,A,L,re,de,ie)=>(a._OrtCreateSessionOptions=C.O)(r,o,s,m,O,A,L,re,de,ie),a._OrtAppendExecutionProvider=(r,o)=>(a._OrtAppendExecutionProvider=C.P)(r,o),a._OrtAddFreeDimensionOverride=(r,o,s)=>(a._OrtAddFreeDimensionOverride=C.Q)(r,o,s),a._OrtAddSessionConfigEntry=(r,o,s)=>(a._OrtAddSessionConfigEntry=C.R)(r,o,s),a._OrtReleaseSessionOptions=r=>(a._OrtReleaseSessionOptions=C.S)(r),a._OrtCreateSession=(r,o,s)=>(a._OrtCreateSession=C.T)(r,o,s),a._OrtReleaseSession=r=>(a._OrtReleaseSession=C.U)(r),a._OrtGetInputOutputCount=(r,o,s)=>(a._OrtGetInputOutputCount=C.V)(r,o,s),a._OrtGetInputName=(r,o)=>(a._OrtGetInputName=C.W)(r,o),a._OrtGetOutputName=(r,o)=>(a._OrtGetOutputName=C.X)(r,o),a._OrtFree=r=>(a._OrtFree=C.Y)(r),a._OrtCreateTensor=(r,o,s,m,O,A)=>(a._OrtCreateTensor=C.Z)(r,o,s,m,O,A),a._OrtGetTensorData=(r,o,s,m,O)=>(a._OrtGetTensorData=C._)(r,o,s,m,O),a._OrtReleaseTensor=r=>(a._OrtReleaseTensor=C.$)(r),a._OrtCreateRunOptions=(r,o,s,m)=>(a._OrtCreateRunOptions=C.aa)(r,o,s,m),a._OrtAddRunConfigEntry=(r,o,s)=>(a._OrtAddRunConfigEntry=C.ba)(r,o,s),a._OrtReleaseRunOptions=r=>(a._OrtReleaseRunOptions=C.ca)(r),a._OrtCreateBinding=r=>(a._OrtCreateBinding=C.da)(r),a._OrtBindInput=(r,o,s)=>(a._OrtBindInput=C.ea)(r,o,s),a._OrtBindOutput=(r,o,s,m)=>(a._OrtBindOutput=C.fa)(r,o,s,m),a._OrtClearBoundOutputs=r=>(a._OrtClearBoundOutputs=C.ga)(r),a._OrtReleaseBinding=r=>(a._OrtReleaseBinding=C.ha)(r),a._OrtRunWithBinding=(r,o,s,m,O)=>(a._OrtRunWithBinding=C.ia)(r,o,s,m,O),a._OrtRun=(r,o,s,m,O,A,L,re)=>(a._OrtRun=C.ja)(r,o,s,m,O,A,L,re),a._OrtEndProfiling=r=>(a._OrtEndProfiling=C.ka)(r);var je=()=>(je=C.la)(),st=a._malloc=r=>(st=a._malloc=C.ma)(r);a._free=r=>(a._free=C.na)(r);var Xe=r=>(Xe=C.pa)(r),it=()=>(it=C.qa)(),M=r=>(M=C.ra)(r),ke=r=>(ke=C.sa)(r);function ut(){var r=C;r=Object.assign({},r);var o=m=>()=>m()>>>0,s=m=>O=>m(O)>>>0;return r.la=o(r.la),r.ma=s(r.ma),r.qa=o(r.qa),r.sa=s(r.sa),r}a.stackAlloc=ke,a.stackSave=it,a.stackRestore=M,a.UTF8ToString=z,a.stringToUTF8=(r,o,s)=>Fe(r,ee,o,s),a.lengthBytesUTF8=le;var Pe;ae=function r(){Pe||Qe(),Pe||(ae=r)};function Qe(){if(!(0<Oe)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var r=a.preRun.shift();ce.unshift(r)}for(;0<ce.length;)ce.shift()(a);if(!(0<Oe||Pe||(Pe=!0,a.calledRun=!0,H))){for(;0<ne.length;)ne.shift()(a);for(h(a);0<Q.length;)Q.shift()(a)}}}return Qe(),c.ready}})();typeof mr=="object"&&typeof Ft=="object"?Ft.exports=pr:typeof define=="function"&&define.amd&&define([],()=>pr)});var hr=tt(()=>{});var yr=tt(()=>{});var br={};At(br,{cpus:()=>rn});var rn,wr=St(()=>{rn=void 0});var _r=tt((vr,xt)=>{"use strict";var Or=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(c={}){function a(){return Q.buffer!=F.buffer&&Y(),F}function h(){return Q.buffer!=F.buffer&&Y(),ye}function f(){return Q.buffer!=F.buffer&&Y(),ve}function w(){return Q.buffer!=F.buffer&&Y(),fe}function g(){return Q.buffer!=F.buffer&&Y(),_e}var i=c,E,P;i.ready=new Promise((e,t)=>{E=e,P=t});var U=Object.assign({},i),D="./this.program",x=(e,t)=>{throw t},K=typeof window=="object",R=typeof importScripts=="function",I=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",v=i.ENVIRONMENT_IS_PTHREAD||!1,k="";function W(e){return i.locateFile?i.locateFile(e,k):k+e}var H,se,ee;if(I){var S=(Mt(),rt(Tt)),j=(Dt(),rt(Ct));k=R?j.dirname(k)+"/":__dirname+"/",H=(t,n)=>(t=z(t)?new URL(t):j.normalize(t),S.readFileSync(t,n?void 0:"utf8")),ee=t=>(t=H(t,!0),t.buffer||(t=new Uint8Array(t)),t),se=(t,n,l,y=!0)=>{t=z(t)?new URL(t):j.normalize(t),S.readFile(t,y?void 0:"utf8",(b,_)=>{b?l(b):n(y?_.buffer:_)})},!i.thisProgram&&1<process.argv.length&&(D=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),x=(t,n)=>{throw process.exitCode=t,n},i.inspect=()=>"[Emscripten Module object]";let e;try{e=hr()}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}global.Worker=e.Worker}else(K||R)&&(R?k=self.location.href:typeof document<"u"&&document.currentScript&&(k=document.currentScript.src),typeof u<"u"&&u&&(k=u),k.indexOf("blob:")!==0?k=k.substr(0,k.replace(/[?#].*/,"").lastIndexOf("/")+1):k="",I||(H=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},R&&(ee=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),se=(e,t,n)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?t(l.response):n()},l.onerror=n,l.send(null)}));I&&typeof performance>"u"&&(global.performance=yr().performance);var Ce=console.log.bind(console),Ue=console.error.bind(console);I&&(Ce=(...e)=>S.writeSync(1,e.join(" ")+`\n`),Ue=(...e)=>S.writeSync(2,e.join(" ")+`\n`));var ce=Ce,ne=Ue;Object.assign(i,U),U=null,typeof WebAssembly!="object"&&De("no native wasm support detected");var Q,Oe,he=!1,ae,F,ye,ve,fe,_e;function Y(){var e=Q.buffer;i.HEAP8=F=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAPU8=ye=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=ve=new Int32Array(e),i.HEAPU32=fe=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=_e=new Float64Array(e)}var pe=16777216;if(v)Q=i.wasmMemory;else if(i.wasmMemory)Q=i.wasmMemory;else if(Q=new WebAssembly.Memory({initial:pe/65536,maximum:65536,shared:!0}),!(Q.buffer instanceof SharedArrayBuffer))throw ne("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),I&&ne("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Y(),pe=Q.buffer.byteLength;var Ie=[],Ee=[],be=[],we=0,Le=null,me=null;function Se(){if(we--,we==0&&(Le!==null&&(clearInterval(Le),Le=null),me)){var e=me;me=null,e()}}function De(e){throw e="Aborted("+e+")",ne(e),he=!0,ae=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),P(e),e}var te=e=>e.startsWith("data:application/octet-stream;base64,"),z=e=>e.startsWith("file://"),le;le="ort-wasm-threaded.wasm",te(le)||(le=W(le));function Fe(e){if(ee)return ee(e);throw"both async and sync fetching of the wasm failed"}function Ae(e){if(K||R){if(typeof fetch=="function"&&!z(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()}).catch(()=>Fe(e));if(se)return new Promise((t,n)=>{se(e,l=>t(new Uint8Array(l)),n)})}return Promise.resolve().then(()=>Fe(e))}function qe(e,t,n){return Ae(e).then(l=>WebAssembly.instantiate(l,t)).then(l=>l).then(n,l=>{ne(`failed to asynchronously prepare wasm: ${l}`),De(l)})}function at(e,t){var n=le;return typeof WebAssembly.instantiateStreaming!="function"||te(n)||z(n)||I||typeof fetch!="function"?qe(n,e,t):fetch(n,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(t,function(y){return ne(`wasm streaming compile failed: ${y}`),ne("falling back to ArrayBuffer instantiation"),qe(n,e,t)}))}var xe,Ne={921388:(e,t,n,l)=>{if(typeof i>"u"||!i.cb)return 1;if(e=$e(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=i.cb.get(e),!e)return 2;if(t>>>=0,n>>>=0,l>>>=0,t+n>e.byteLength)return 3;try{return h().set(e.subarray(t,t+n),l>>>0),0}catch{return 4}}};function Re(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var He=e=>{e.terminate(),e.onmessage=()=>{}},Ge=e=>{M.Pa.length==0&&(Xe(),M.Ya(M.Pa[0]));var t=M.Pa.pop();if(!t)return 6;M.Qa.push(t),M.Ma[e.Oa]=t,t.Oa=e.Oa;var n={cmd:"run",start_routine:e.kb,arg:e.hb,pthread_ptr:e.Oa};return I&&t.unref(),t.postMessage(n,e.qb),0},Be=0,Ve=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Je=(e,t,n)=>{t>>>=0;var l=t+n;for(n=t;e[n]&&!(n>=l);)++n;if(16<n-t&&e.buffer&&Ve)return Ve.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,n):e.subarray(t,n));for(l="";t<n;){var y=e[t++];if(y&128){var b=e[t++]&63;if((y&224)==192)l+=String.fromCharCode((y&31)<<6|b);else{var _=e[t++]&63;y=(y&240)==224?(y&15)<<12|b<<6|_:(y&7)<<18|b<<12|_<<6|e[t++]&63,65536>y?l+=String.fromCharCode(y):(y-=65536,l+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else l+=String.fromCharCode(y)}return l},$e=(e,t)=>(e>>>=0)?Je(h(),e,t):"",ot=e=>{var t=vt();return e=e(),ct(t),e};function G(e,t){var n=arguments.length-2,l=arguments;return ot(()=>{for(var y=_t(8*n),b=y>>>3,_=0;_<n;_++){var J=l[2+_];g()[b+_>>>0]=J}return ar(e,n,y,t)})}function C(e){if(v)return G(0,1,e);ae=e,0<Be||(M.lb(),i.onExit?.(e),he=!0),x(e,new Re(e))}var je=e=>{if(ae=e,v)throw ut(e),"unwind";C(e)};function st(){for(var e=i.numThreads;e--;)Xe();Ie.unshift(()=>{we++,it(()=>Se())})}function Xe(){var e=W("ort-wasm-threaded.worker.js");e=new Worker(e),M.Pa.push(e)}function it(e){v?e():Promise.all(M.Pa.map(M.Ya)).then(e)}var M={Pa:[],Qa:[],bb:[],Ma:{},Wa(){v?(M.receiveObjectTransfer=M.jb,M.threadInitTLS=M.ab,M.setExitStatus=M.$a):st()},$a:e=>ae=e,tb:["$terminateWorker"],lb:()=>{for(var e of M.Qa)He(e);for(e of M.Pa)He(e);M.Pa=[],M.Qa=[],M.Ma=[]},Za:e=>{var t=e.Oa;delete M.Ma[t],M.Pa.push(e),M.Qa.splice(M.Qa.indexOf(e),1),e.Oa=0,wt(t)},jb(){},ab(){M.bb.forEach(e=>e())},Ya:e=>new Promise(t=>{e.onmessage=b=>{b=b.data;var _=b.cmd;if(b.targetThread&&b.targetThread!=lt()){var J=M.Ma[b.targetThread];J?J.postMessage(b,b.transferList):ne(`Internal error! Worker sent a message "${_}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else _==="checkMailbox"?ft():_==="spawnThread"?Ge(b):_==="cleanupThread"?M.Za(M.Ma[b.thread]):_==="killThread"?(b=b.thread,_=M.Ma[b],delete M.Ma[b],He(_),wt(b),M.Qa.splice(M.Qa.indexOf(_),1),_.Oa=0):_==="cancelThread"?M.Ma[b.thread].postMessage({cmd:"cancel"}):_==="loaded"?(e.loaded=!0,I&&!e.Oa&&e.unref(),t(e)):_==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):_==="callHandler"?i[b.handler](...b.args):_&&ne(`worker sent an unknown command ${_}`)},e.onerror=b=>{throw ne(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},I&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],l=["onExit"],y;for(y of l)i.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:i.mainScriptUrlOrBlob||u,wasmMemory:Q,wasmModule:Oe})})};i.PThread=M;var ke=e=>{for(;0<e.length;)e.shift()(i)};i.establishStackSpace=()=>{var e=lt(),t=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],ir(t,t-e),ct(t)};function ut(e){if(v)return G(1,0,e);je(e)}var Pe=[],Qe;i.invokeEntryPoint=(e,t)=>{var n=Pe[e];n||(e>=Pe.length&&(Pe.length=e+1),Pe[e]=n=Qe.get(e)),e=n(t),0<Be?M.$a(e):Ot(e)};function r(e){this.Va=e-24,this.gb=function(t){w()[this.Va+4>>>2>>>0]=t},this.fb=function(t){w()[this.Va+8>>>2>>>0]=t},this.Wa=function(t,n){this.eb(),this.gb(t),this.fb(n)},this.eb=function(){w()[this.Va+16>>>2>>>0]=0}}var o=0,s=0;function m(e,t,n,l){return v?G(2,1,e,t,n,l):O(e,t,n,l)}function O(e,t,n,l){if(e>>>=0,t>>>=0,n>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return ne("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return v&&y.length===0?m(e,t,n,l):(e={kb:n,Oa:e,hb:l,qb:y},v?(e.sb="spawnThread",postMessage(e,y),0):Ge(e))}function A(e,t,n){return v?G(3,1,e,t,n):0}function L(e,t){if(v)return G(4,1,e,t)}var re=e=>{for(var t=0,n=0;n<e.length;++n){var l=e.charCodeAt(n);127>=l?t++:2047>=l?t+=2:55296<=l&&57343>=l?(t+=4,++n):t+=3}return t},de=(e,t,n,l)=>{if(n>>>=0,!(0<l))return 0;var y=n;l=n+l-1;for(var b=0;b<e.length;++b){var _=e.charCodeAt(b);if(55296<=_&&57343>=_){var J=e.charCodeAt(++b);_=65536+((_&1023)<<10)|J&1023}if(127>=_){if(n>=l)break;t[n++>>>0]=_}else{if(2047>=_){if(n+1>=l)break;t[n++>>>0]=192|_>>6}else{if(65535>=_){if(n+2>=l)break;t[n++>>>0]=224|_>>12}else{if(n+3>=l)break;t[n++>>>0]=240|_>>18,t[n++>>>0]=128|_>>12&63}t[n++>>>0]=128|_>>6&63}t[n++>>>0]=128|_&63}}return t[n>>>0]=0,n-y},ie=(e,t,n)=>de(e,h(),t,n);function ue(e,t){if(v)return G(5,1,e,t)}function Ze(e,t,n){if(v)return G(6,1,e,t,n)}function Ke(e,t,n){return v?G(7,1,e,t,n):0}function d(e,t){if(v)return G(8,1,e,t)}function B(e,t,n){if(v)return G(9,1,e,t,n)}function $(e,t,n,l){if(v)return G(10,1,e,t,n,l)}function Te(e,t,n,l){if(v)return G(11,1,e,t,n,l)}function et(e,t,n,l){if(v)return G(12,1,e,t,n,l)}function Bt(e){if(v)return G(13,1,e)}function kt(e,t){if(v)return G(14,1,e,t)}function Wt(e,t,n){if(v)return G(15,1,e,t,n)}function mt(e){e>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(f(),e>>>2,e).value.then(ft),e+=128,Atomics.store(f(),e>>>2,1))}i.__emscripten_thread_mailbox_await=mt;var ft=()=>{var e=lt();if(e&&(mt(e),e=or,!he))try{if(e(),!(0<Be))try{v?Ot(ae):je(ae)}catch(t){t instanceof Re||t=="unwind"||x(1,t)}}catch(t){t instanceof Re||t=="unwind"||x(1,t)}};i.checkMailbox=ft;var gt=[],Ye=e=>e%4===0&&(e%100!==0||e%400===0),Nt=[0,31,60,91,121,152,182,213,244,274,305,335],Ht=[0,31,59,90,120,151,181,212,243,273,304,334];function Gt(e,t,n,l,y,b,_,J){return v?G(16,1,e,t,n,l,y,b,_,J):-52}function $t(e,t,n,l,y,b,_){if(v)return G(17,1,e,t,n,l,y,b,_)}var jt=e=>{var t=re(e)+1,n=rr(t);return n&&ie(e,n,t),n},ht=[],yt={},Yt=()=>{if(!bt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:D||"./this.program"},t;for(t in yt)yt[t]===void 0?delete e[t]:e[t]=yt[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);bt=n}return bt},bt;function zt(e,t){if(v)return G(18,1,e,t);e>>>=0,t>>>=0;var n=0;return Yt().forEach((l,y)=>{var b=t+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<l.length;++b)a()[y++>>>0>>>0]=l.charCodeAt(b);a()[y>>>0>>>0]=0,n+=l.length+1}),0}function qt(e,t){if(v)return G(19,1,e,t);e>>>=0,t>>>=0;var n=Yt();w()[e>>>2>>>0]=n.length;var l=0;return n.forEach(y=>l+=y.length+1),w()[t>>>2>>>0]=l,0}function Vt(e){return v?G(20,1,e):52}function Jt(e,t,n,l){return v?G(21,1,e,t,n,l):52}function Xt(e,t,n,l,y){return v?G(22,1,e,t,n,l,y):70}var $r=[null,[],[]];function Qt(e,t,n,l){if(v)return G(23,1,e,t,n,l);t>>>=0,n>>>=0,l>>>=0;for(var y=0,b=0;b<n;b++){var _=w()[t>>>2>>>0],J=w()[t+4>>>2>>>0];t+=8;for(var Me=0;Me<J;Me++){var oe=h()[_+Me>>>0],ge=$r[e];oe===0||oe===10?((e===1?ce:ne)(Je(ge,0)),ge.length=0):ge.push(oe)}y+=J}return w()[l>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function jr(e){var t=Array(re(e)+1);return de(e,t,0,t.length),t}var Yr=(e,t)=>{a().set(e,t>>>0)};function er(e,t,n,l){function y(p,N,X){for(p=typeof p=="number"?p.toString():p||"";p.length<N;)p=X[0]+p;return p}function b(p,N){return y(p,N,"0")}function _(p,N){function X(cr){return 0>cr?-1:0<cr?1:0}var We;return(We=X(p.getFullYear()-N.getFullYear()))===0&&(We=X(p.getMonth()-N.getMonth()))===0&&(We=X(p.getDate()-N.getDate())),We}function J(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Me(p){var N=p.Ra;for(p=new Date(new Date(p.Sa+1900,0,1).getTime());0<N;){var X=p.getMonth(),We=(Ye(p.getFullYear())?Zt:Kt)[X];if(N>We-p.getDate())N-=We-p.getDate()+1,p.setDate(1),11>X?p.setMonth(X+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+N);break}}return X=new Date(p.getFullYear()+1,0,4),N=J(new Date(p.getFullYear(),0,4)),X=J(X),0>=_(N,p)?0>=_(X,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,t>>>=0,n>>>=0,l>>>=0;var oe=w()[l+40>>>2>>>0];l={ob:f()[l>>>2>>>0],nb:f()[l+4>>>2>>>0],Ta:f()[l+8>>>2>>>0],Xa:f()[l+12>>>2>>>0],Ua:f()[l+16>>>2>>>0],Sa:f()[l+20>>>2>>>0],Na:f()[l+24>>>2>>>0],Ra:f()[l+28>>>2>>>0],ub:f()[l+32>>>2>>>0],mb:f()[l+36>>>2>>>0],pb:oe?$e(oe):""},n=$e(n),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ge in oe)n=n.replace(new RegExp(ge,"g"),oe[ge]);var fr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),lr="January February March April May June July August September October November December".split(" ");oe={"%a":p=>fr[p.Na].substring(0,3),"%A":p=>fr[p.Na],"%b":p=>lr[p.Ua].substring(0,3),"%B":p=>lr[p.Ua],"%C":p=>b((p.Sa+1900)/100|0,2),"%d":p=>b(p.Xa,2),"%e":p=>y(p.Xa,2," "),"%g":p=>Me(p).toString().substring(2),"%G":p=>Me(p),"%H":p=>b(p.Ta,2),"%I":p=>(p=p.Ta,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var N=0,X=0;X<=p.Ua-1;N+=(Ye(p.Sa+1900)?Zt:Kt)[X++]);return b(p.Xa+N,3)},"%m":p=>b(p.Ua+1,2),"%M":p=>b(p.nb,2),"%n":()=>`\n`,"%p":p=>0<=p.Ta&&12>p.Ta?"AM":"PM","%S":p=>b(p.ob,2),"%t":()=>"	","%u":p=>p.Na||7,"%U":p=>b(Math.floor((p.Ra+7-p.Na)/7),2),"%V":p=>{var N=Math.floor((p.Ra+7-(p.Na+6)%7)/7);if(2>=(p.Na+371-p.Ra-2)%7&&N++,N)N==53&&(X=(p.Na+371-p.Ra)%7,X==4||X==3&&Ye(p.Sa)||(N=1));else{N=52;var X=(p.Na+7-p.Ra-1)%7;(X==4||X==5&&Ye(p.Sa%400-1))&&N++}return b(N,2)},"%w":p=>p.Na,"%W":p=>b(Math.floor((p.Ra+7-(p.Na+6)%7)/7),2),"%y":p=>(p.Sa+1900).toString().substring(2),"%Y":p=>p.Sa+1900,"%z":p=>{p=p.mb;var N=0<=p;return p=Math.abs(p)/60,(N?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.pb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(ge in oe)n.includes(ge)&&(n=n.replace(new RegExp(ge,"g"),oe[ge](l)));return n=n.replace(/\\0\\0/g,"%"),ge=jr(n),ge.length>t?0:(Yr(ge,e),ge.length-1)}M.Wa();var zr=[C,ut,m,A,L,ue,Ze,Ke,d,B,$,Te,et,Bt,kt,Wt,Gt,$t,zt,qt,Vt,Jt,Xt,Qt],qr={b:function(e,t,n){throw e>>>=0,new r(e).Wa(t>>>0,n>>>0),o=e,s++,o},L:function(e){nr(e>>>0,!R,1,!K,131072,!1),M.ab()},j:function(e){e>>>=0,v?postMessage({cmd:"cleanupThread",thread:e}):M.Za(M.Ma[e])},H:O,h:A,S:L,D:ue,F:Ze,T:Ke,Q:d,J:B,P:$,n:Te,E:et,B:Bt,R:kt,C:Wt,p:()=>1,z:function(e,t){e>>>=0,e==t>>>0?setTimeout(()=>ft()):v?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.Ma[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,t,n,l){t>>>=0,gt.length=n,l=l>>>0>>>3;for(var y=0;y<n;y++)gt[y]=g()[l+y>>>0];return e=0>e?Ne[-e-1]:zr[e],M.ib=t,t=e.apply(null,gt),M.ib=0,t},K:mt,o:function(e){I&&M.Ma[e>>>0].ref()},s:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getUTCSeconds(),f()[n+4>>>2>>>0]=e.getUTCMinutes(),f()[n+8>>>2>>>0]=e.getUTCHours(),f()[n+12>>>2>>>0]=e.getUTCDate(),f()[n+16>>>2>>>0]=e.getUTCMonth(),f()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,f()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[n+28>>>2>>>0]=e},t:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getSeconds(),f()[n+4>>>2>>>0]=e.getMinutes(),f()[n+8>>>2>>>0]=e.getHours(),f()[n+12>>>2>>>0]=e.getDate(),f()[n+16>>>2>>>0]=e.getMonth(),f()[n+20>>>2>>>0]=e.getFullYear()-1900,f()[n+24>>>2>>>0]=e.getDay(),t=(Ye(e.getFullYear())?Nt:Ht)[e.getMonth()]+e.getDate()-1|0,f()[n+28>>>2>>>0]=t,f()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var l=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(t!=l&&e.getTimezoneOffset()==Math.min(l,t))|0,f()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var t=new Date(f()[e+20>>>2>>>0]+1900,f()[e+16>>>2>>>0],f()[e+12>>>2>>>0],f()[e+8>>>2>>>0],f()[e+4>>>2>>>0],f()[e>>>2>>>0],0),n=f()[e+32>>>2>>>0],l=t.getTimezoneOffset(),y=new Date(t.getFullYear(),6,1).getTimezoneOffset(),b=new Date(t.getFullYear(),0,1).getTimezoneOffset(),_=Math.min(b,y);return 0>n?f()[e+32>>>2>>>0]=+(y!=b&&_==l):0<n!=(_==l)&&(y=Math.max(b,y),t.setTime(t.getTime()+6e4*((0<n?_:y)-l))),f()[e+24>>>2>>>0]=t.getDay(),n=(Ye(t.getFullYear())?Nt:Ht)[t.getMonth()]+t.getDate()-1|0,f()[e+28>>>2>>>0]=n,f()[e>>>2>>>0]=t.getSeconds(),f()[e+4>>>2>>>0]=t.getMinutes(),f()[e+8>>>2>>>0]=t.getHours(),f()[e+12>>>2>>>0]=t.getDate(),f()[e+16>>>2>>>0]=t.getMonth(),f()[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),isNaN(e)?(f()[tr()>>>2>>>0]=61,e=-1):e/=1e3,sr((xe=e,1<=+Math.abs(xe)?0<xe?+Math.floor(xe/4294967296)>>>0:~~+Math.ceil((xe-+(~~xe>>>0))/4294967296)>>>0:0)),e>>>0},q:Gt,r:$t,y:function(e,t,n){function l(oe){return(oe=oe.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?oe[1]:"GMT"}e>>>=0,t>>>=0,n>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),_=new Date(y,6,1);y=b.getTimezoneOffset();var J=_.getTimezoneOffset(),Me=Math.max(y,J);w()[e>>>2>>>0]=60*Me,f()[t>>>2>>>0]=+(y!=J),e=l(b),t=l(_),e=jt(e),t=jt(t),J<y?(w()[n>>>2>>>0]=e,w()[n+4>>>2>>>0]=t):(w()[n>>>2>>>0]=t,w()[n+4>>>2>>>0]=e)},c:()=>{De("")},O:function(e,t,n){e>>>=0,t>>>=0,n>>>=0,ht.length=0;for(var l;l=h()[t++>>>0];){var y=l!=105;y&=l!=112,n+=y&&n%8?4:0,ht.push(l==112?w()[n>>>2>>>0]:l==105?f()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ne[e].apply(null,ht)},k:()=>{},i:()=>Date.now(),U:()=>{throw Be+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>I?(wr(),rt(br)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var t=h().length;if(e<=t||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var l=t*(1+.2/n);l=Math.min(l,e+100663296);var y=Math;l=Math.max(e,l);e:{y=(y.min.call(y,4294901760,l+(65536-l%65536)%65536)-Q.buffer.byteLength+65535)/65536;try{Q.grow(y),Y();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:je,g:Vt,m:Jt,v:Xt,l:Qt,a:Q||i.wasmMemory,w:er,d:function(e,t,n,l){return er(e>>>0,t>>>0,n>>>0,l>>>0)}},T=function(){function e(n,l){return T=n.exports,T=Vr(),M.bb.push(T.za),Qe=T.Aa,Ee.unshift(T.V),Oe=l,Se(),T}var t={a:qr};if(we++,i.instantiateWasm)try{return i.instantiateWasm(t,e)}catch(n){ne(`Module.instantiateWasm callback failed with error: ${n}`),P(n)}return at(t,function(n){e(n.instance,n.module)}).catch(P),{}}();i._OrtInit=(e,t)=>(i._OrtInit=T.W)(e,t),i._OrtGetLastError=(e,t)=>(i._OrtGetLastError=T.X)(e,t),i._OrtCreateSessionOptions=(e,t,n,l,y,b,_,J,Me,oe)=>(i._OrtCreateSessionOptions=T.Y)(e,t,n,l,y,b,_,J,Me,oe),i._OrtAppendExecutionProvider=(e,t)=>(i._OrtAppendExecutionProvider=T.Z)(e,t),i._OrtAddFreeDimensionOverride=(e,t,n)=>(i._OrtAddFreeDimensionOverride=T._)(e,t,n),i._OrtAddSessionConfigEntry=(e,t,n)=>(i._OrtAddSessionConfigEntry=T.$)(e,t,n),i._OrtReleaseSessionOptions=e=>(i._OrtReleaseSessionOptions=T.aa)(e),i._OrtCreateSession=(e,t,n)=>(i._OrtCreateSession=T.ba)(e,t,n),i._OrtReleaseSession=e=>(i._OrtReleaseSession=T.ca)(e),i._OrtGetInputOutputCount=(e,t,n)=>(i._OrtGetInputOutputCount=T.da)(e,t,n),i._OrtGetInputName=(e,t)=>(i._OrtGetInputName=T.ea)(e,t),i._OrtGetOutputName=(e,t)=>(i._OrtGetOutputName=T.fa)(e,t),i._OrtFree=e=>(i._OrtFree=T.ga)(e),i._OrtCreateTensor=(e,t,n,l,y,b)=>(i._OrtCreateTensor=T.ha)(e,t,n,l,y,b),i._OrtGetTensorData=(e,t,n,l,y)=>(i._OrtGetTensorData=T.ia)(e,t,n,l,y),i._OrtReleaseTensor=e=>(i._OrtReleaseTensor=T.ja)(e),i._OrtCreateRunOptions=(e,t,n,l)=>(i._OrtCreateRunOptions=T.ka)(e,t,n,l),i._OrtAddRunConfigEntry=(e,t,n)=>(i._OrtAddRunConfigEntry=T.la)(e,t,n),i._OrtReleaseRunOptions=e=>(i._OrtReleaseRunOptions=T.ma)(e),i._OrtCreateBinding=e=>(i._OrtCreateBinding=T.na)(e),i._OrtBindInput=(e,t,n)=>(i._OrtBindInput=T.oa)(e,t,n),i._OrtBindOutput=(e,t,n,l)=>(i._OrtBindOutput=T.pa)(e,t,n,l),i._OrtClearBoundOutputs=e=>(i._OrtClearBoundOutputs=T.qa)(e),i._OrtReleaseBinding=e=>(i._OrtReleaseBinding=T.ra)(e),i._OrtRunWithBinding=(e,t,n,l,y)=>(i._OrtRunWithBinding=T.sa)(e,t,n,l,y),i._OrtRun=(e,t,n,l,y,b,_,J)=>(i._OrtRun=T.ta)(e,t,n,l,y,b,_,J),i._OrtEndProfiling=e=>(i._OrtEndProfiling=T.ua)(e);var tr=()=>(tr=T.va)(),lt=i._pthread_self=()=>(lt=i._pthread_self=T.wa)(),rr=i._malloc=e=>(rr=i._malloc=T.xa)(e);i._free=e=>(i._free=T.ya)(e),i.__emscripten_tls_init=()=>(i.__emscripten_tls_init=T.za)();var nr=i.__emscripten_thread_init=(e,t,n,l,y,b)=>(nr=i.__emscripten_thread_init=T.Ba)(e,t,n,l,y,b);i.__emscripten_thread_crashed=()=>(i.__emscripten_thread_crashed=T.Ca)();var ar=(e,t,n,l)=>(ar=T.Da)(e,t,n,l),wt=e=>(wt=T.Ea)(e),Ot=i.__emscripten_thread_exit=e=>(Ot=i.__emscripten_thread_exit=T.Fa)(e),or=()=>(or=T.Ga)(),sr=e=>(sr=T.Ha)(e),ir=(e,t)=>(ir=T.Ia)(e,t),vt=()=>(vt=T.Ja)(),ct=e=>(ct=T.Ka)(e),_t=e=>(_t=T.La)(e);function Vr(){var e=T;e=Object.assign({},e);var t=l=>()=>l()>>>0,n=l=>y=>l(y)>>>0;return e.va=t(e.va),e.wa=t(e.wa),e.xa=n(e.xa),e.emscripten_main_runtime_thread_id=t(e.emscripten_main_runtime_thread_id),e.Ja=t(e.Ja),e.La=n(e.La),e}i.wasmMemory=Q,i.stackAlloc=_t,i.stackSave=vt,i.stackRestore=ct,i.keepRuntimeAlive=()=>0<Be,i.UTF8ToString=$e,i.stringToUTF8=ie,i.lengthBytesUTF8=re,i.ExitStatus=Re,i.PThread=M;var dt;me=function e(){dt||ur(),dt||(me=e)};function ur(){if(!(0<we))if(v)E(i),v||ke(Ee),startWorker(i);else{if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Ie.unshift(i.preRun.shift());ke(Ie),0<we||dt||(dt=!0,i.calledRun=!0,he||(v||ke(Ee),E(i),v||ke(be)))}}return ur(),c.ready}})();typeof vr=="object"&&typeof xt=="object"?xt.exports=Or:typeof define=="function"&&define.amd&&define([],()=>Or)});var Er=tt((On,nn)=>{nn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\\n\'});var Ar;Ar=gr();var an=_r(),Pt,Ut=!1,pt=!1,Sr=!1,on=u=>{if(u===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+u+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+u+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},sn=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},un=(u,c)=>u?c?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":c?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Tr=async u=>{if(Ut)return Promise.resolve();if(pt)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Sr)throw new Error("previous call to \'initializeWebAssembly()\' failed.");pt=!0;let c=u.initTimeout,a=u.numThreads,h=u.simd,f=on(a),w=h&&sn(),g=u.wasmPaths,i=typeof g=="string"?g:void 0,E=un(w,f),P=typeof g=="object"?g[E]:void 0,U=!1,D=[];if(c>0&&D.push(new Promise(x=>{setTimeout(()=>{U=!0,x()},c)})),D.push(new Promise((x,K)=>{let R=f?an:Ar,I={locateFile:(v,k)=>f&&v.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Er()],{type:"text/javascript"})):v.endsWith(".wasm")?P||(i??k)+E:k+v};if(f)if(I.numThreads=a,typeof Blob>"u")I.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let v=`var ortWasmThreaded=${R.toString()};`;I.mainScriptUrlOrBlob=new Blob([v],{type:"text/javascript"})}R(I).then(v=>{pt=!1,Ut=!0,Pt=v,x()},v=>{pt=!1,Sr=!0,K(v)})})),await Promise.race(D),U)throw new Error(`WebAssembly backend initializing failed due to timeout: ${c}ms`)},Z=()=>{if(Ut&&Pt)return Pt;throw new Error("WebAssembly is not initialized yet.")};var q=(u,c)=>{let a=Z(),h=a.lengthBytesUTF8(u)+1,f=a._malloc(h);return a.stringToUTF8(u,f,h),c.push(f),f},nt=(u,c,a,h)=>{if(typeof u=="object"&&u!==null){if(a.has(u))throw new Error("Circular reference in options");a.add(u)}Object.entries(u).forEach(([f,w])=>{let g=c?c+f:f;if(typeof w=="object")nt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},V=u=>{let c=Z(),a=c.stackSave();try{let h=c.stackAlloc(8);c._OrtGetLastError(h,h+4);let f=c.HEAP32[h/4],w=c.HEAPU32[h/4+1],g=w?c.UTF8ToString(w):"";throw new Error(`${u} ERROR_CODE: ${f}, ERROR_MESSAGE: ${g}`)}finally{c.stackRestore(a)}};var Mr=u=>{let c=Z(),a=0,h=[],f=u||{};try{if(u?.logSeverityLevel===void 0)f.logSeverityLevel=2;else if(typeof u.logSeverityLevel!="number"||!Number.isInteger(u.logSeverityLevel)||u.logSeverityLevel<0||u.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${u.logSeverityLevel}`);if(u?.logVerbosityLevel===void 0)f.logVerbosityLevel=0;else if(typeof u.logVerbosityLevel!="number"||!Number.isInteger(u.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${u.logVerbosityLevel}`);u?.terminate===void 0&&(f.terminate=!1);let w=0;return u?.tag!==void 0&&(w=q(u.tag,h)),a=c._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,w),a===0&&V("Can\'t create run options."),u?.extra!==void 0&&nt(u.extra,"",new WeakSet,(g,i)=>{let E=q(g,h),P=q(i,h);c._OrtAddRunConfigEntry(a,E,P)!==0&&V(`Can\'t set a run config entry: ${g} - ${i}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseRunOptions(a),h.forEach(g=>c._free(g)),w}};var fn=u=>{switch(u){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${u}`)}},ln=u=>{switch(u){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${u}`)}},cn=u=>{u.extra||(u.extra={}),u.extra.session||(u.extra.session={});let c=u.extra.session;c.use_ort_model_bytes_directly||(c.use_ort_model_bytes_directly="1"),u.executionProviders&&u.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(u.enableMemPattern=!1)},dn=(u,c,a)=>{for(let h of c){let f=typeof h=="string"?h:h.name;switch(f){case"webnn":if(f="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let i=q("deviceType",a),E=q(g.deviceType,a);Z()._OrtAddSessionConfigEntry(u,i,E)!==0&&V(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let i=g.numThreads;(typeof i!="number"||!Number.isInteger(i)||i<0)&&(i=0);let E=q("numThreads",a),P=q(i.toString(),a);Z()._OrtAddSessionConfigEntry(u,E,P)!==0&&V(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let i=q("powerPreference",a),E=q(g.powerPreference,a);Z()._OrtAddSessionConfigEntry(u,i,E)!==0&&V(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let i=q("preferredLayout",a),E=q(g.preferredLayout,a);Z()._OrtAddSessionConfigEntry(u,i,E)!==0&&V(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let w=q(f,a);Z()._OrtAppendExecutionProvider(u,w)!==0&&V(`Can\'t append execution provider: ${f}.`)}},Cr=u=>{let c=Z(),a=0,h=[],f=u||{};cn(f);try{let w=fn(f.graphOptimizationLevel??"all"),g=ln(f.executionMode??"sequential"),i=typeof f.logId=="string"?q(f.logId,h):0,E=f.logSeverityLevel??2;if(!Number.isInteger(E)||E<0||E>4)throw new Error(`log serverity level is not valid: ${E}`);let P=f.logVerbosityLevel??0;if(!Number.isInteger(P)||P<0||P>4)throw new Error(`log verbosity level is not valid: ${P}`);let U=typeof f.optimizedModelFilePath=="string"?q(f.optimizedModelFilePath,h):0;if(a=c._OrtCreateSessionOptions(w,!!f.enableCpuMemArena,!!f.enableMemPattern,g,!!f.enableProfiling,0,i,E,P,U),a===0&&V("Can\'t create session options."),f.executionProviders&&dn(a,f.executionProviders,h),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let D=q("enableGraphCapture",h),x=q(f.enableGraphCapture.toString(),h);c._OrtAddSessionConfigEntry(a,D,x)!==0&&V(`Can\'t set a session config entry: \'enableGraphCapture\' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[D,x]of Object.entries(f.freeDimensionOverrides)){if(typeof D!="string")throw new Error(`free dimension override name must be a string: ${D}`);if(typeof x!="number"||!Number.isInteger(x)||x<0)throw new Error(`free dimension override value must be a non-negative integer: ${x}`);let K=q(D,h);c._OrtAddFreeDimensionOverride(a,K,x)!==0&&V(`Can\'t set a free dimension override: ${D} - ${x}.`)}return f.extra!==void 0&&nt(f.extra,"",new WeakSet,(D,x)=>{let K=q(D,h),R=q(x,h);c._OrtAddSessionConfigEntry(a,K,R)!==0&&V(`Can\'t set a session config entry: ${D} - ${x}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseSessionOptions(a),h.forEach(g=>c._free(g)),w}};var Rt=u=>{switch(u){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${u}`)}},Dr=u=>{switch(u){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${u}`)}},It=u=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][u],Fr=u=>{switch(u){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${u}`)}},xr=u=>{switch(u){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${u}`)}},Pr=u=>u==="float32"||u==="float16"||u==="int32"||u==="int64"||u==="uint32"||u==="uint8"||u==="bool",Ur=u=>{switch(u){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${u}`)}};var Rr=async u=>{if(typeof u=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(u))}catch(c){if(c.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(u),h=[];for await(let f of a)h.push(f);return new Uint8Array(Buffer.concat(h))}throw c}else{let c=await fetch(u);if(!c.ok)throw new Error(`failed to load external data file: ${u}`);let a=c.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await c.arrayBuffer());{if(!c.body)throw new Error(`failed to load external data file: ${u}, no response body.`);let f=c.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(i){if(i instanceof RangeError){let E=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:E,maximum:E}).buffer}else throw i}let g=0;for(;;){let{done:i,value:E}=await f.read();if(i)break;let P=E.byteLength;new Uint8Array(w,g,P).set(E),g+=P}return new Uint8Array(w,0,h)}}else return u instanceof Blob?new Uint8Array(await u.arrayBuffer()):u instanceof Uint8Array?u:new Uint8Array(u)};var pn=(u,c)=>{Z()._OrtInit(u,c)!==0&&V("Can\'t initialize onnxruntime.")},Lr=async u=>{pn(u.wasm.numThreads,xr(u.logLevel))},Br=async(u,c)=>{},ze=new Map,mn=u=>{let c=Z(),a=c.stackSave();try{let h=c.stackAlloc(8);return c._OrtGetInputOutputCount(u,h,h+4)!==0&&V("Can\'t get session input/output count."),[c.HEAP32[h/4],c.HEAP32[h/4+1]]}finally{c.stackRestore(a)}},Lt=u=>{let c=Z(),a=c._malloc(u.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${u.byteLength}.`);return c.HEAPU8.set(u,a),[a,u.byteLength]},kr=async(u,c)=>{let a,h,f=Z();Array.isArray(u)?[a,h]=u:u.buffer===f.HEAPU8.buffer?[a,h]=[u.byteOffset,u.byteLength]:[a,h]=Lt(u);let w=0,g=0,i=0,E=[],P=[],U=[];try{if([g,E]=Cr(c),c?.externalData&&f.mountExternalData){let W=[];for(let H of c.externalData){let se=typeof H=="string"?H:H.path;W.push(Rr(typeof H=="string"?H:H.data).then(ee=>{f.mountExternalData(se,ee)}))}await Promise.all(W)}w=await f._OrtCreateSession(a,h,g),w===0&&V("Can\'t create a session.");let[D,x]=mn(w),K=!!c?.enableGraphCapture,R=[],I=[],v=[];for(let W=0;W<D;W++){let H=f._OrtGetInputName(w,W);H===0&&V("Can\'t get an input name."),P.push(H),R.push(f.UTF8ToString(H))}for(let W=0;W<x;W++){let H=f._OrtGetOutputName(w,W);H===0&&V("Can\'t get an output name."),U.push(H);let se=f.UTF8ToString(H);I.push(se)}let k=null;return ze.set(w,[w,P,U,k,K,!1]),[w,R,I]}catch(D){throw P.forEach(x=>f._OrtFree(x)),U.forEach(x=>f._OrtFree(x)),i!==0&&f._OrtReleaseBinding(i),w!==0&&f._OrtReleaseSession(w),D}finally{f._free(a),g!==0&&f._OrtReleaseSessionOptions(g),E.forEach(D=>f._free(D)),f.unmountExternalData?.()}},Wr=u=>{let c=Z(),a=ze.get(u);if(!a)throw new Error(`cannot release session. invalid session id: ${u}`);let[h,f,w,g,i]=a;g&&(i&&c._OrtClearBoundOutputs(g.handle),c._OrtReleaseBinding(g.handle)),c.jsepOnReleaseSession?.(u),f.forEach(E=>c._OrtFree(E)),w.forEach(E=>c._OrtFree(E)),c._OrtReleaseSession(h),ze.delete(u)},Ir=(u,c,a,h,f,w=!1)=>{if(!u){c.push(0);return}let g=Z(),i=u[0],E=u[1],P=u[3],U,D;if(i==="string"&&P==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(w&&P!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(P==="gpu-buffer"){let R=u[2].gpuBuffer,I=It(Rt(i));D=E.reduce((k,W)=>k*W,1)*I;let v=g.jsepRegisterBuffer;if(!v)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');U=v(h,f,R,D)}else{let R=u[2];if(Array.isArray(R)){D=4*R.length,U=g._malloc(D),a.push(U);let I=U/4;for(let v=0;v<R.length;v++){if(typeof R[v]!="string")throw new TypeError(`tensor data at index ${v} is not a string`);g.HEAPU32[I++]=q(R[v],a)}}else D=R.byteLength,U=g._malloc(D),a.push(U),g.HEAPU8.set(new Uint8Array(R.buffer,R.byteOffset,D),U)}let x=g.stackSave(),K=g.stackAlloc(4*E.length);try{let R=K/4;E.forEach(v=>g.HEAP32[R++]=v);let I=g._OrtCreateTensor(Rt(i),U,D,K,E.length,Ur(P));I===0&&V(`Can\'t create tensor for input/output. session=${h}, index=${f}.`),c.push(I)}finally{g.stackRestore(x)}},Nr=async(u,c,a,h,f,w)=>{let g=Z(),i=ze.get(u);if(!i)throw new Error(`cannot run inference. invalid session id: ${u}`);let E=i[0],P=i[1],U=i[2],D=i[3],x=i[4],K=i[5],R=c.length,I=h.length,v=0,k=[],W=[],H=[],se=[],ee=g.stackSave(),S=g.stackAlloc(R*4),j=g.stackAlloc(R*4),Ce=g.stackAlloc(I*4),Ue=g.stackAlloc(I*4);try{[v,k]=Mr(w);for(let F=0;F<R;F++)Ir(a[F],W,se,u,c[F],x);for(let F=0;F<I;F++)Ir(f[F],H,se,u,R+h[F],x);let ce=S/4,ne=j/4,Q=Ce/4,Oe=Ue/4;for(let F=0;F<R;F++)g.HEAPU32[ce++]=W[F],g.HEAPU32[ne++]=P[c[F]];for(let F=0;F<I;F++)g.HEAPU32[Q++]=H[F],g.HEAPU32[Oe++]=U[h[F]];g.jsepOnRunStart?.(E);let he;he=await g._OrtRun(E,j,S,R,Ue,I,Ce,v),he!==0&&V("failed to call OrtRun().");let ae=[];for(let F=0;F<I;F++){let ye=g.HEAPU32[Ce/4+F];if(ye===H[F]){ae.push(f[F]);continue}let ve=g.stackSave(),fe=g.stackAlloc(4*4),_e=!1,Y,pe=0;try{g._OrtGetTensorData(ye,fe,fe+4,fe+8,fe+12)!==0&&V(`Can\'t access output tensor data on index ${F}.`);let Ee=fe/4,be=g.HEAPU32[Ee++];pe=g.HEAPU32[Ee++];let we=g.HEAPU32[Ee++],Le=g.HEAPU32[Ee++],me=[];for(let te=0;te<Le;te++)me.push(g.HEAPU32[we/4+te]);g._OrtFree(we);let Se=me.reduce((te,z)=>te*z,1);Y=Dr(be);let De=D?.outputPreferredLocations[h[F]];if(Y==="string"){if(De==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let te=[],z=pe/4;for(let le=0;le<Se;le++){let Fe=g.HEAPU32[z++],Ae=le===Se-1?void 0:g.HEAPU32[z]-Fe;te.push(g.UTF8ToString(Fe,Ae))}ae.push([Y,me,te,"cpu"])}else if(De==="gpu-buffer"&&Se>0){let te=g.jsepGetBuffer;if(!te)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let z=te(pe),le=It(be);if(le===void 0||!Pr(Y))throw new Error(`Unsupported data type: ${Y}`);_e=!0,ae.push([Y,me,{gpuBuffer:z,download:g.jsepCreateDownloader(z,Se*le,Y),dispose:()=>{g._OrtReleaseTensor(ye)}},"gpu-buffer"])}else{let te=Fr(Y),z=new te(Se);new Uint8Array(z.buffer,z.byteOffset,z.byteLength).set(g.HEAPU8.subarray(pe,pe+z.byteLength)),ae.push([Y,me,z,"cpu"])}}finally{g.stackRestore(ve),Y==="string"&&pe&&g._free(pe),_e||g._OrtReleaseTensor(ye)}}return D&&!x&&(g._OrtClearBoundOutputs(D.handle),ze.set(u,[E,P,U,D,x,!1])),ae}finally{g.stackRestore(ee),W.forEach(ce=>g._OrtReleaseTensor(ce)),H.forEach(ce=>g._OrtReleaseTensor(ce)),se.forEach(ce=>g._free(ce)),v!==0&&g._OrtReleaseRunOptions(v),k.forEach(ce=>g._free(ce))}},Hr=u=>{let c=Z(),a=ze.get(u);if(!a)throw new Error("invalid session id");let h=a[0],f=c._OrtEndProfiling(h);f===0&&V("Can\'t get an profile file name."),c._OrtFree(f)},Gr=u=>{let c=[];for(let a of u){let h=a[2];!Array.isArray(h)&&"buffer"in h&&c.push(h.buffer)}return c};self.onmessage=u=>{let{type:c,in:a}=u.data;try{switch(c){case"init-wasm":Tr(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:c})},h=>{postMessage({type:c,err:h})})},h=>{postMessage({type:c,err:h})});break;case"init-ep":{let{epName:h,env:f}=a;Br(f,h).then(()=>{postMessage({type:c})},w=>{postMessage({type:c,err:w})});break}case"copy-from":{let{buffer:h}=a,f=Lt(h);postMessage({type:c,out:f});break}case"create":{let{model:h,options:f}=a;kr(h,f).then(w=>{postMessage({type:c,out:w})},w=>{postMessage({type:c,err:w})});break}case"release":Wr(a),postMessage({type:c});break;case"run":{let{sessionId:h,inputIndices:f,inputs:w,outputIndices:g,options:i}=a;Nr(h,f,w,g,new Array(g.length).fill(null),i).then(E=>{E.some(P=>P[3]!=="cpu")?postMessage({type:c,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:c,out:E},Gr([...w,...E]))},E=>{postMessage({type:c,err:E})});break}case"end-profiling":Hr(a),postMessage({type:c});break;default:}}catch(h){postMessage({type:c,err:h})}};})();\n'}),wr,ht,xn,Fo,Co,da,ha,Hr,qr,wg,Lo,ad,sd,ud,ld,fd,cd,pd,ma=E(()=>{var e;Tt(),od(),Vr(),wr=()=>!!Z.wasm.proxy&&typeof document<"u",xn=!1,Fo=!1,Co=!1,ha=new Map,Hr=(t,i)=>{let o=ha.get(t);o?o.push(i):ha.set(t,[i])},qr=()=>{if(xn||!Fo||Co||!ht)throw new Error("worker not ready")},wg=t=>{switch(t.data.type){case"init-wasm":xn=!1,t.data.err?(Co=!0,da[1](t.data.err)):(Fo=!0,da[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let i=ha.get(t.data.type);t.data.err?i.shift()[1](t.data.err):i.shift()[0](t.data.out);break}}},Lo=typeof document<"u"?(e=document==null?void 0:document.currentScript)==null?void 0:e.src:void 0,ad=async()=>{if(!Fo){if(xn)throw new Error("multiple calls to 'initWasm()' detected.");if(Co)throw new Error("previous call to 'initWasm()' failed.");if(xn=!0,wr())return Z.wasm.wasmPaths===void 0&&Lo&&Lo.indexOf("blob:")!==0&&(Z.wasm.wasmPaths=Lo.substr(0,+Lo.lastIndexOf("/")+1)),new Promise((t,i)=>{ht==null||ht.terminate();let o=URL.createObjectURL(new Blob([id()],{type:"text/javascript"}));ht=new Worker(o,{name:"ort-wasm-proxy-worker"}),ht.onerror=n=>i(n),ht.onmessage=wg,URL.revokeObjectURL(o),da=[t,i];let c={type:"init-wasm",in:Z};ht.postMessage(c)});try{await Up(Z.wasm),await Jp(Z),Fo=!0}catch(t){throw Co=!0,t}finally{xn=!1}}},sd=async t=>{if(wr())return qr(),new Promise((i,o)=>{Hr("init-ep",[i,o]);let c={type:"init-ep",in:{epName:t,env:Z}};ht.postMessage(c)});await Zp(Z,t)},ud=async t=>wr()?(qr(),new Promise((i,o)=>{Hr("copy-from",[i,o]);let c={type:"copy-from",in:{buffer:t}};ht.postMessage(c,[t.buffer])})):pa(t),ld=async(t,i)=>{if(wr()){if(i!=null&&i.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return qr(),new Promise((o,c)=>{Hr("create",[o,c]);let n={type:"create",in:{model:t,options:{...i}}},a=[];t instanceof Uint8Array&&a.push(t.buffer),ht.postMessage(n,a)})}else return Qp(t,i)},fd=async t=>{if(wr())return qr(),new Promise((i,o)=>{Hr("release",[i,o]);let c={type:"release",in:t};ht.postMessage(c)});ed(t)},cd=async(t,i,o,c,n,a)=>{if(wr()){if(o.some(f=>f[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(n.some(f=>f))throw new Error("pre-allocated output tensor is not supported for proxy.");return qr(),new Promise((f,p)=>{Hr("run",[f,p]);let r=o,u={type:"run",in:{sessionId:t,inputIndices:i,inputs:r,outputIndices:c,options:a}};ht.postMessage(u,nd(r))})}else return td(t,i,o,c,n,a)},pd=async t=>{if(wr())return qr(),new Promise((i,o)=>{Hr("end-profiling",[i,o]);let c={type:"end-profiling",in:t};ht.postMessage(c)});rd(t)}}),dd,vg,$o,hd=E(()=>{Tt(),ma(),fa(),ca(),dd=(e,t)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${e.location} for ${t()}`)}},vg=e=>{switch(e[3]){case"cpu":return new Re(e[0],e[2],e[1]);case"gpu-buffer":{let t=e[0];if(!Do(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:i,download:o,dispose:c}=e[2];return Re.fromGpuBuffer(i,{dataType:t,dims:e[1],download:o,dispose:c})}default:throw new Error(`invalid data location: ${e[3]}`)}},$o=class{async fetchModelAndCopyToWasmMemory(e){return ud(await Tn(e))}async loadModel(e,t){sr();let i;typeof e=="string"?typeof process<"u"&&process.versions&&process.versions.node?i=await Tn(e):i=await this.fetchModelAndCopyToWasmMemory(e):i=e,[this.sessionId,this.inputNames,this.outputNames]=await ld(i,t),ur()}async dispose(){return fd(this.sessionId)}async run(e,t,i){sr();let o=[],c=[];Object.entries(e).forEach(l=>{let h=l[0],y=l[1],I=this.inputNames.indexOf(h);if(I===-1)throw new Error(`invalid input '${h}'`);o.push(y),c.push(I)});let n=[],a=[];Object.entries(t).forEach(l=>{let h=l[0],y=l[1],I=this.outputNames.indexOf(h);if(I===-1)throw new Error(`invalid output '${h}'`);n.push(y),a.push(I)});let f=o.map((l,h)=>dd(l,()=>`input "${this.inputNames[c[h]]}"`)),p=n.map((l,h)=>l?dd(l,()=>`output "${this.outputNames[a[h]]}"`):null),r=await cd(this.sessionId,c,f,a,p,i),u={};for(let l=0;l<r.length;l++)u[this.outputNames[a[l]]]=n[l]??vg(r[l]);return ur(),u}startProfiling(){}endProfiling(){pd(this.sessionId)}}}),_g,ko,md=E(()=>{Tt(),ma(),hd(),_g=()=>{if((typeof Z.wasm.initTimeout!="number"||Z.wasm.initTimeout<0)&&(Z.wasm.initTimeout=0),typeof Z.wasm.simd!="boolean"&&(Z.wasm.simd=!0),typeof Z.wasm.proxy!="boolean"&&(Z.wasm.proxy=!1),typeof Z.wasm.trace!="boolean"&&(Z.wasm.trace=!1),typeof Z.wasm.numThreads!="number"||!Number.isInteger(Z.wasm.numThreads)||Z.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(Z.wasm.numThreads=1);let e=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;Z.wasm.numThreads=Math.min(4,Math.ceil((e||1)/2))}},ko=class{async init(e){_g(),await ad(),await sd(e)}async createInferenceSessionHandler(e,t){let i=new $o;return await i.loadModel(e,t),Promise.resolve(i)}}}),bd={};Pr(bd,{wasmBackend:()=>Og});var Og,gd=E(()=>{md(),Og=new ko});Tt(),Tt(),Tt();var ws="1.17.3";{let e=(Sp(),or(Ip)).onnxjsBackend;Dr("webgl",e,-10)}{let e=(gd(),or(bd)).wasmBackend;Dr("cpu",e,10),Dr("wasm",e,10)}Object.defineProperty(Z.versions,"web",{value:ws,enumerable:!0});/*! Bundled license information:

	long/index.js:
	  (**
	   * @license
	   * Copyright 2009 The Closure Library Authors
	   * Copyright 2020 Daniel Wirtz / The long.js Authors.
	   *
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   *     http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   *
	   * SPDX-License-Identifier: Apache-2.0
	   *)
	*/var util;(function(e){e.assertEqual=c=>c;function t(c){}e.assertIs=t;function i(c){throw new Error}e.assertNever=i,e.arrayToEnum=c=>{const n={};for(const a of c)n[a]=a;return n},e.getValidEnumValues=c=>{const n=e.objectKeys(c).filter(f=>typeof c[c[f]]!="number"),a={};for(const f of n)a[f]=c[f];return e.objectValues(a)},e.objectValues=c=>e.objectKeys(c).map(function(n){return c[n]}),e.objectKeys=typeof Object.keys=="function"?c=>Object.keys(c):c=>{const n=[];for(const a in c)Object.prototype.hasOwnProperty.call(c,a)&&n.push(a);return n},e.find=(c,n)=>{for(const a of c)if(n(a))return a},e.isInteger=typeof Number.isInteger=="function"?c=>Number.isInteger(c):c=>typeof c=="number"&&isFinite(c)&&Math.floor(c)===c;function o(c,n=" | "){return c.map(a=>typeof a=="string"?`'${a}'`:a).join(n)}e.joinValues=o,e.jsonStringifyReplacer=(c,n)=>typeof n=="bigint"?n.toString():n})(util||(util={}));var objectUtil;(function(e){e.mergeShapes=(t,i)=>({...t,...i})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=e=>{switch(typeof e){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(e)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(e)?ZodParsedType.array:e===null?ZodParsedType.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&e instanceof Map?ZodParsedType.map:typeof Set<"u"&&e instanceof Set?ZodParsedType.set:typeof Date<"u"&&e instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(t){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};const i=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,i):this.__proto__=i,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const i=t||function(n){return n.message},o={_errors:[]},c=n=>{for(const a of n.issues)if(a.code==="invalid_union")a.unionErrors.map(c);else if(a.code==="invalid_return_type")c(a.returnTypeError);else if(a.code==="invalid_arguments")c(a.argumentsError);else if(a.path.length===0)o._errors.push(i(a));else{let f=o,p=0;for(;p<a.path.length;){const r=a.path[p];p===a.path.length-1?(f[r]=f[r]||{_errors:[]},f[r]._errors.push(i(a))):f[r]=f[r]||{_errors:[]},f=f[r],p++}}};return c(this),o}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=i=>i.message){const i={},o=[];for(const c of this.issues)c.path.length>0?(i[c.path[0]]=i[c.path[0]]||[],i[c.path[0]].push(t(c))):o.push(t(c));return{formErrors:o,fieldErrors:i}}get formErrors(){return this.flatten()}}ZodError.create=e=>new ZodError(e);const errorMap=(e,t)=>{let i;switch(e.code){case ZodIssueCode.invalid_type:e.received===ZodParsedType.undefined?i="Required":i=`Expected ${e.expected}, received ${e.received}`;break;case ZodIssueCode.invalid_literal:i=`Invalid literal value, expected ${JSON.stringify(e.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:i=`Unrecognized key(s) in object: ${util.joinValues(e.keys,", ")}`;break;case ZodIssueCode.invalid_union:i="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:i=`Invalid discriminator value. Expected ${util.joinValues(e.options)}`;break;case ZodIssueCode.invalid_enum_value:i=`Invalid enum value. Expected ${util.joinValues(e.options)}, received '${e.received}'`;break;case ZodIssueCode.invalid_arguments:i="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:i="Invalid function return type";break;case ZodIssueCode.invalid_date:i="Invalid date";break;case ZodIssueCode.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(i=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(i=`${i} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?i=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?i=`Invalid input: must end with "${e.validation.endsWith}"`:util.assertNever(e.validation):e.validation!=="regex"?i=`Invalid ${e.validation}`:i="Invalid";break;case ZodIssueCode.too_small:e.type==="array"?i=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?i=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?i=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?i=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:i="Invalid input";break;case ZodIssueCode.too_big:e.type==="array"?i=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?i=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?i=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?i=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?i=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:i="Invalid input";break;case ZodIssueCode.custom:i="Invalid input";break;case ZodIssueCode.invalid_intersection_types:i="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:i=`Number must be a multiple of ${e.multipleOf}`;break;case ZodIssueCode.not_finite:i="Number must be finite";break;default:i=t.defaultError,util.assertNever(e)}return{message:i}};let overrideErrorMap=errorMap;function setErrorMap(e){overrideErrorMap=e}function getErrorMap(){return overrideErrorMap}const makeIssue=e=>{const{data:t,path:i,errorMaps:o,issueData:c}=e,n=[...i,...c.path||[]],a={...c,path:n};let f="";const p=o.filter(r=>!!r).slice().reverse();for(const r of p)f=r(a,{data:t,defaultError:f}).message;return{...c,path:n,message:c.message||f}},EMPTY_PATH=[];function addIssueToContext(e,t){const i=makeIssue({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,getErrorMap(),errorMap].filter(o=>!!o)});e.common.issues.push(i)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,i){const o=[];for(const c of i){if(c.status==="aborted")return INVALID;c.status==="dirty"&&t.dirty(),o.push(c.value)}return{status:t.value,value:o}}static async mergeObjectAsync(t,i){const o=[];for(const c of i)o.push({key:await c.key,value:await c.value});return ParseStatus.mergeObjectSync(t,o)}static mergeObjectSync(t,i){const o={};for(const c of i){const{key:n,value:a}=c;if(n.status==="aborted"||a.status==="aborted")return INVALID;n.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),(typeof a.value<"u"||c.alwaysSet)&&(o[n.value]=a.value)}return{status:t.value,value:o}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=e=>({status:"dirty",value:e}),OK=e=>({status:"valid",value:e}),isAborted=e=>e.status==="aborted",isDirty=e=>e.status==="dirty",isValid=e=>e.status==="valid",isAsync=e=>typeof Promise<"u"&&e instanceof Promise;var errorUtil;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(t,i,o,c){this._cachedPath=[],this.parent=t,this.data=i,this._path=o,this._key=c}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(e,t)=>{if(isValid(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const i=new ZodError(e.common.issues);return this._error=i,this._error}}};function processCreateParams(e){if(!e)return{};const{errorMap:t,invalid_type_error:i,required_error:o,description:c}=e;if(t&&(i||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:c}:{errorMap:(a,f)=>a.code!=="invalid_type"?{message:f.defaultError}:typeof f.data>"u"?{message:o??f.defaultError}:{message:i??f.defaultError},description:c}}class ZodType{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return getParsedType(t.data)}_getOrReturnCtx(t,i){return i||{common:t.parent.common,data:t.data,parsedType:getParsedType(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ParseStatus,ctx:{common:t.parent.common,data:t.data,parsedType:getParsedType(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const i=this._parse(t);if(isAsync(i))throw new Error("Synchronous parse encountered promise.");return i}_parseAsync(t){const i=this._parse(t);return Promise.resolve(i)}parse(t,i){const o=this.safeParse(t,i);if(o.success)return o.data;throw o.error}safeParse(t,i){var o;const c={common:{issues:[],async:(o=i==null?void 0:i.async)!==null&&o!==void 0?o:!1,contextualErrorMap:i==null?void 0:i.errorMap},path:(i==null?void 0:i.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:getParsedType(t)},n=this._parseSync({data:t,path:c.path,parent:c});return handleResult(c,n)}async parseAsync(t,i){const o=await this.safeParseAsync(t,i);if(o.success)return o.data;throw o.error}async safeParseAsync(t,i){const o={common:{issues:[],contextualErrorMap:i==null?void 0:i.errorMap,async:!0},path:(i==null?void 0:i.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:getParsedType(t)},c=this._parse({data:t,path:o.path,parent:o}),n=await(isAsync(c)?c:Promise.resolve(c));return handleResult(o,n)}refine(t,i){const o=c=>typeof i=="string"||typeof i>"u"?{message:i}:typeof i=="function"?i(c):i;return this._refinement((c,n)=>{const a=t(c),f=()=>n.addIssue({code:ZodIssueCode.custom,...o(c)});return typeof Promise<"u"&&a instanceof Promise?a.then(p=>p?!0:(f(),!1)):a?!0:(f(),!1)})}refinement(t,i){return this._refinement((o,c)=>t(o)?!0:(c.addIssue(typeof i=="function"?i(o,c):i),!1))}_refinement(t){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(t){return ZodUnion.create([this,t],this._def)}and(t){return ZodIntersection.create(this,t,this._def)}transform(t){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const i=typeof t=="function"?t:()=>t;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:i,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(t){const i=typeof t=="function"?t:()=>t;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:i,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(t){const i=this.constructor;return new i({...this._def,description:t})}pipe(t){return ZodPipeline.create(this,t)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[a-z][a-z0-9]*$/,ulidRegex=/[0-9A-HJKMNP-TV-Z]{26}/,uuidRegex=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,emailRegex=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,emojiRegex=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u"),ipv4Regex=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,datetimeRegex=e=>e.precision?e.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):e.precision===0?e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function isValidIP(e,t){return!!((t==="v4"||!t)&&ipv4Regex.test(e)||(t==="v6"||!t)&&ipv6Regex.test(e))}class ZodString extends ZodType{constructor(){super(...arguments),this._regex=(t,i,o)=>this.refinement(c=>t.test(c),{validation:i,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(o)}),this.nonempty=t=>this.min(1,errorUtil.errToObj(t)),this.trim=()=>new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ZodParsedType.string){const n=this._getOrReturnCtx(t);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:n.parsedType}),INVALID}const o=new ParseStatus;let c;for(const n of this._def.checks)if(n.kind==="min")t.data.length<n.value&&(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{code:ZodIssueCode.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),o.dirty());else if(n.kind==="max")t.data.length>n.value&&(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{code:ZodIssueCode.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),o.dirty());else if(n.kind==="length"){const a=t.data.length>n.value,f=t.data.length<n.value;(a||f)&&(c=this._getOrReturnCtx(t,c),a?addIssueToContext(c,{code:ZodIssueCode.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):f&&addIssueToContext(c,{code:ZodIssueCode.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),o.dirty())}else if(n.kind==="email")emailRegex.test(t.data)||(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{validation:"email",code:ZodIssueCode.invalid_string,message:n.message}),o.dirty());else if(n.kind==="emoji")emojiRegex.test(t.data)||(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{validation:"emoji",code:ZodIssueCode.invalid_string,message:n.message}),o.dirty());else if(n.kind==="uuid")uuidRegex.test(t.data)||(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{validation:"uuid",code:ZodIssueCode.invalid_string,message:n.message}),o.dirty());else if(n.kind==="cuid")cuidRegex.test(t.data)||(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{validation:"cuid",code:ZodIssueCode.invalid_string,message:n.message}),o.dirty());else if(n.kind==="cuid2")cuid2Regex.test(t.data)||(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:n.message}),o.dirty());else if(n.kind==="ulid")ulidRegex.test(t.data)||(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{validation:"ulid",code:ZodIssueCode.invalid_string,message:n.message}),o.dirty());else if(n.kind==="url")try{new URL(t.data)}catch{c=this._getOrReturnCtx(t,c),addIssueToContext(c,{validation:"url",code:ZodIssueCode.invalid_string,message:n.message}),o.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(t.data)||(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{validation:"regex",code:ZodIssueCode.invalid_string,message:n.message}),o.dirty())):n.kind==="trim"?t.data=t.data.trim():n.kind==="includes"?t.data.includes(n.value,n.position)||(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{code:ZodIssueCode.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),o.dirty()):n.kind==="toLowerCase"?t.data=t.data.toLowerCase():n.kind==="toUpperCase"?t.data=t.data.toUpperCase():n.kind==="startsWith"?t.data.startsWith(n.value)||(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{code:ZodIssueCode.invalid_string,validation:{startsWith:n.value},message:n.message}),o.dirty()):n.kind==="endsWith"?t.data.endsWith(n.value)||(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{code:ZodIssueCode.invalid_string,validation:{endsWith:n.value},message:n.message}),o.dirty()):n.kind==="datetime"?datetimeRegex(n).test(t.data)||(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{code:ZodIssueCode.invalid_string,validation:"datetime",message:n.message}),o.dirty()):n.kind==="ip"?isValidIP(t.data,n.version)||(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{validation:"ip",code:ZodIssueCode.invalid_string,message:n.message}),o.dirty()):util.assertNever(n);return{status:o.value,value:t.data}}_addCheck(t){return new ZodString({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...errorUtil.errToObj(t)})}url(t){return this._addCheck({kind:"url",...errorUtil.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...errorUtil.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...errorUtil.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...errorUtil.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...errorUtil.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...errorUtil.errToObj(t)})}datetime(t){var i;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(i=t==null?void 0:t.offset)!==null&&i!==void 0?i:!1,...errorUtil.errToObj(t==null?void 0:t.message)})}regex(t,i){return this._addCheck({kind:"regex",regex:t,...errorUtil.errToObj(i)})}includes(t,i){return this._addCheck({kind:"includes",value:t,position:i==null?void 0:i.position,...errorUtil.errToObj(i==null?void 0:i.message)})}startsWith(t,i){return this._addCheck({kind:"startsWith",value:t,...errorUtil.errToObj(i)})}endsWith(t,i){return this._addCheck({kind:"endsWith",value:t,...errorUtil.errToObj(i)})}min(t,i){return this._addCheck({kind:"min",value:t,...errorUtil.errToObj(i)})}max(t,i){return this._addCheck({kind:"max",value:t,...errorUtil.errToObj(i)})}length(t,i){return this._addCheck({kind:"length",value:t,...errorUtil.errToObj(i)})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get minLength(){let t=null;for(const i of this._def.checks)i.kind==="min"&&(t===null||i.value>t)&&(t=i.value);return t}get maxLength(){let t=null;for(const i of this._def.checks)i.kind==="max"&&(t===null||i.value<t)&&(t=i.value);return t}}ZodString.create=e=>{var t;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...processCreateParams(e)})};function floatSafeRemainder(e,t){const i=(e.toString().split(".")[1]||"").length,o=(t.toString().split(".")[1]||"").length,c=i>o?i:o,n=parseInt(e.toFixed(c).replace(".","")),a=parseInt(t.toFixed(c).replace(".",""));return n%a/Math.pow(10,c)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ZodParsedType.number){const n=this._getOrReturnCtx(t);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:n.parsedType}),INVALID}let o;const c=new ParseStatus;for(const n of this._def.checks)n.kind==="int"?util.isInteger(t.data)||(o=this._getOrReturnCtx(t,o),addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:n.message}),c.dirty()):n.kind==="min"?(n.inclusive?t.data<n.value:t.data<=n.value)&&(o=this._getOrReturnCtx(t,o),addIssueToContext(o,{code:ZodIssueCode.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),c.dirty()):n.kind==="max"?(n.inclusive?t.data>n.value:t.data>=n.value)&&(o=this._getOrReturnCtx(t,o),addIssueToContext(o,{code:ZodIssueCode.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),c.dirty()):n.kind==="multipleOf"?floatSafeRemainder(t.data,n.value)!==0&&(o=this._getOrReturnCtx(t,o),addIssueToContext(o,{code:ZodIssueCode.not_multiple_of,multipleOf:n.value,message:n.message}),c.dirty()):n.kind==="finite"?Number.isFinite(t.data)||(o=this._getOrReturnCtx(t,o),addIssueToContext(o,{code:ZodIssueCode.not_finite,message:n.message}),c.dirty()):util.assertNever(n);return{status:c.value,value:t.data}}gte(t,i){return this.setLimit("min",t,!0,errorUtil.toString(i))}gt(t,i){return this.setLimit("min",t,!1,errorUtil.toString(i))}lte(t,i){return this.setLimit("max",t,!0,errorUtil.toString(i))}lt(t,i){return this.setLimit("max",t,!1,errorUtil.toString(i))}setLimit(t,i,o,c){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:t,value:i,inclusive:o,message:errorUtil.toString(c)}]})}_addCheck(t){return new ZodNumber({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:errorUtil.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(t)})}multipleOf(t,i){return this._addCheck({kind:"multipleOf",value:t,message:errorUtil.toString(i)})}finite(t){return this._addCheck({kind:"finite",message:errorUtil.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(t)})}get minValue(){let t=null;for(const i of this._def.checks)i.kind==="min"&&(t===null||i.value>t)&&(t=i.value);return t}get maxValue(){let t=null;for(const i of this._def.checks)i.kind==="max"&&(t===null||i.value<t)&&(t=i.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&util.isInteger(t.value))}get isFinite(){let t=null,i=null;for(const o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(i===null||o.value>i)&&(i=o.value):o.kind==="max"&&(t===null||o.value<t)&&(t=o.value)}return Number.isFinite(i)&&Number.isFinite(t)}}ZodNumber.create=e=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...processCreateParams(e)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==ZodParsedType.bigint){const n=this._getOrReturnCtx(t);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:n.parsedType}),INVALID}let o;const c=new ParseStatus;for(const n of this._def.checks)n.kind==="min"?(n.inclusive?t.data<n.value:t.data<=n.value)&&(o=this._getOrReturnCtx(t,o),addIssueToContext(o,{code:ZodIssueCode.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),c.dirty()):n.kind==="max"?(n.inclusive?t.data>n.value:t.data>=n.value)&&(o=this._getOrReturnCtx(t,o),addIssueToContext(o,{code:ZodIssueCode.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),c.dirty()):n.kind==="multipleOf"?t.data%n.value!==BigInt(0)&&(o=this._getOrReturnCtx(t,o),addIssueToContext(o,{code:ZodIssueCode.not_multiple_of,multipleOf:n.value,message:n.message}),c.dirty()):util.assertNever(n);return{status:c.value,value:t.data}}gte(t,i){return this.setLimit("min",t,!0,errorUtil.toString(i))}gt(t,i){return this.setLimit("min",t,!1,errorUtil.toString(i))}lte(t,i){return this.setLimit("max",t,!0,errorUtil.toString(i))}lt(t,i){return this.setLimit("max",t,!1,errorUtil.toString(i))}setLimit(t,i,o,c){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:t,value:i,inclusive:o,message:errorUtil.toString(c)}]})}_addCheck(t){return new ZodBigInt({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(t)})}multipleOf(t,i){return this._addCheck({kind:"multipleOf",value:t,message:errorUtil.toString(i)})}get minValue(){let t=null;for(const i of this._def.checks)i.kind==="min"&&(t===null||i.value>t)&&(t=i.value);return t}get maxValue(){let t=null;for(const i of this._def.checks)i.kind==="max"&&(t===null||i.value<t)&&(t=i.value);return t}}ZodBigInt.create=e=>{var t;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...processCreateParams(e)})};class ZodBoolean extends ZodType{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ZodParsedType.boolean){const o=this._getOrReturnCtx(t);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:o.parsedType}),INVALID}return OK(t.data)}}ZodBoolean.create=e=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...processCreateParams(e)});class ZodDate extends ZodType{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ZodParsedType.date){const n=this._getOrReturnCtx(t);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:n.parsedType}),INVALID}if(isNaN(t.data.getTime())){const n=this._getOrReturnCtx(t);return addIssueToContext(n,{code:ZodIssueCode.invalid_date}),INVALID}const o=new ParseStatus;let c;for(const n of this._def.checks)n.kind==="min"?t.data.getTime()<n.value&&(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{code:ZodIssueCode.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),o.dirty()):n.kind==="max"?t.data.getTime()>n.value&&(c=this._getOrReturnCtx(t,c),addIssueToContext(c,{code:ZodIssueCode.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),o.dirty()):util.assertNever(n);return{status:o.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ZodDate({...this._def,checks:[...this._def.checks,t]})}min(t,i){return this._addCheck({kind:"min",value:t.getTime(),message:errorUtil.toString(i)})}max(t,i){return this._addCheck({kind:"max",value:t.getTime(),message:errorUtil.toString(i)})}get minDate(){let t=null;for(const i of this._def.checks)i.kind==="min"&&(t===null||i.value>t)&&(t=i.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const i of this._def.checks)i.kind==="max"&&(t===null||i.value<t)&&(t=i.value);return t!=null?new Date(t):null}}ZodDate.create=e=>new ZodDate({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(e)});class ZodSymbol extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.symbol){const o=this._getOrReturnCtx(t);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:o.parsedType}),INVALID}return OK(t.data)}}ZodSymbol.create=e=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(e)});class ZodUndefined extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.undefined){const o=this._getOrReturnCtx(t);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:o.parsedType}),INVALID}return OK(t.data)}}ZodUndefined.create=e=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(e)});class ZodNull extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.null){const o=this._getOrReturnCtx(t);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:o.parsedType}),INVALID}return OK(t.data)}}ZodNull.create=e=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(e)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(t){return OK(t.data)}}ZodAny.create=e=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(e)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(t){return OK(t.data)}}ZodUnknown.create=e=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(e)});class ZodNever extends ZodType{_parse(t){const i=this._getOrReturnCtx(t);return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:i.parsedType}),INVALID}}ZodNever.create=e=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(e)});class ZodVoid extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.undefined){const o=this._getOrReturnCtx(t);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:o.parsedType}),INVALID}return OK(t.data)}}ZodVoid.create=e=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(e)});class ZodArray extends ZodType{_parse(t){const{ctx:i,status:o}=this._processInputParams(t),c=this._def;if(i.parsedType!==ZodParsedType.array)return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:i.parsedType}),INVALID;if(c.exactLength!==null){const a=i.data.length>c.exactLength.value,f=i.data.length<c.exactLength.value;(a||f)&&(addIssueToContext(i,{code:a?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:f?c.exactLength.value:void 0,maximum:a?c.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:c.exactLength.message}),o.dirty())}if(c.minLength!==null&&i.data.length<c.minLength.value&&(addIssueToContext(i,{code:ZodIssueCode.too_small,minimum:c.minLength.value,type:"array",inclusive:!0,exact:!1,message:c.minLength.message}),o.dirty()),c.maxLength!==null&&i.data.length>c.maxLength.value&&(addIssueToContext(i,{code:ZodIssueCode.too_big,maximum:c.maxLength.value,type:"array",inclusive:!0,exact:!1,message:c.maxLength.message}),o.dirty()),i.common.async)return Promise.all([...i.data].map((a,f)=>c.type._parseAsync(new ParseInputLazyPath(i,a,i.path,f)))).then(a=>ParseStatus.mergeArray(o,a));const n=[...i.data].map((a,f)=>c.type._parseSync(new ParseInputLazyPath(i,a,i.path,f)));return ParseStatus.mergeArray(o,n)}get element(){return this._def.type}min(t,i){return new ZodArray({...this._def,minLength:{value:t,message:errorUtil.toString(i)}})}max(t,i){return new ZodArray({...this._def,maxLength:{value:t,message:errorUtil.toString(i)}})}length(t,i){return new ZodArray({...this._def,exactLength:{value:t,message:errorUtil.toString(i)}})}nonempty(t){return this.min(1,t)}}ZodArray.create=(e,t)=>new ZodArray({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(t)});function deepPartialify(e){if(e instanceof ZodObject){const t={};for(const i in e.shape){const o=e.shape[i];t[i]=ZodOptional.create(deepPartialify(o))}return new ZodObject({...e._def,shape:()=>t})}else return e instanceof ZodArray?new ZodArray({...e._def,type:deepPartialify(e.element)}):e instanceof ZodOptional?ZodOptional.create(deepPartialify(e.unwrap())):e instanceof ZodNullable?ZodNullable.create(deepPartialify(e.unwrap())):e instanceof ZodTuple?ZodTuple.create(e.items.map(t=>deepPartialify(t))):e}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),i=util.objectKeys(t);return this._cached={shape:t,keys:i}}_parse(t){if(this._getType(t)!==ZodParsedType.object){const r=this._getOrReturnCtx(t);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:r.parsedType}),INVALID}const{status:o,ctx:c}=this._processInputParams(t),{shape:n,keys:a}=this._getCached(),f=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const r in c.data)a.includes(r)||f.push(r);const p=[];for(const r of a){const u=n[r],l=c.data[r];p.push({key:{status:"valid",value:r},value:u._parse(new ParseInputLazyPath(c,l,c.path,r)),alwaysSet:r in c.data})}if(this._def.catchall instanceof ZodNever){const r=this._def.unknownKeys;if(r==="passthrough")for(const u of f)p.push({key:{status:"valid",value:u},value:{status:"valid",value:c.data[u]}});else if(r==="strict")f.length>0&&(addIssueToContext(c,{code:ZodIssueCode.unrecognized_keys,keys:f}),o.dirty());else if(r!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const r=this._def.catchall;for(const u of f){const l=c.data[u];p.push({key:{status:"valid",value:u},value:r._parse(new ParseInputLazyPath(c,l,c.path,u)),alwaysSet:u in c.data})}}return c.common.async?Promise.resolve().then(async()=>{const r=[];for(const u of p){const l=await u.key;r.push({key:l,value:await u.value,alwaysSet:u.alwaysSet})}return r}).then(r=>ParseStatus.mergeObjectSync(o,r)):ParseStatus.mergeObjectSync(o,p)}get shape(){return this._def.shape()}strict(t){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(i,o)=>{var c,n,a,f;const p=(a=(n=(c=this._def).errorMap)===null||n===void 0?void 0:n.call(c,i,o).message)!==null&&a!==void 0?a:o.defaultError;return i.code==="unrecognized_keys"?{message:(f=errorUtil.errToObj(t).message)!==null&&f!==void 0?f:p}:{message:p}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(t){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ZodObject({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(t,i){return this.augment({[t]:i})}catchall(t){return new ZodObject({...this._def,catchall:t})}pick(t){const i={};return util.objectKeys(t).forEach(o=>{t[o]&&this.shape[o]&&(i[o]=this.shape[o])}),new ZodObject({...this._def,shape:()=>i})}omit(t){const i={};return util.objectKeys(this.shape).forEach(o=>{t[o]||(i[o]=this.shape[o])}),new ZodObject({...this._def,shape:()=>i})}deepPartial(){return deepPartialify(this)}partial(t){const i={};return util.objectKeys(this.shape).forEach(o=>{const c=this.shape[o];t&&!t[o]?i[o]=c:i[o]=c.optional()}),new ZodObject({...this._def,shape:()=>i})}required(t){const i={};return util.objectKeys(this.shape).forEach(o=>{if(t&&!t[o])i[o]=this.shape[o];else{let n=this.shape[o];for(;n instanceof ZodOptional;)n=n._def.innerType;i[o]=n}}),new ZodObject({...this._def,shape:()=>i})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)}),ZodObject.strictCreate=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)}),ZodObject.lazycreate=(e,t)=>new ZodObject({shape:e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)});class ZodUnion extends ZodType{_parse(t){const{ctx:i}=this._processInputParams(t),o=this._def.options;function c(n){for(const f of n)if(f.result.status==="valid")return f.result;for(const f of n)if(f.result.status==="dirty")return i.common.issues.push(...f.ctx.common.issues),f.result;const a=n.map(f=>new ZodError(f.ctx.common.issues));return addIssueToContext(i,{code:ZodIssueCode.invalid_union,unionErrors:a}),INVALID}if(i.common.async)return Promise.all(o.map(async n=>{const a={...i,common:{...i.common,issues:[]},parent:null};return{result:await n._parseAsync({data:i.data,path:i.path,parent:a}),ctx:a}})).then(c);{let n;const a=[];for(const p of o){const r={...i,common:{...i.common,issues:[]},parent:null},u=p._parseSync({data:i.data,path:i.path,parent:r});if(u.status==="valid")return u;u.status==="dirty"&&!n&&(n={result:u,ctx:r}),r.common.issues.length&&a.push(r.common.issues)}if(n)return i.common.issues.push(...n.ctx.common.issues),n.result;const f=a.map(p=>new ZodError(p));return addIssueToContext(i,{code:ZodIssueCode.invalid_union,unionErrors:f}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(e,t)=>new ZodUnion({options:e,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(t)});const getDiscriminator=e=>e instanceof ZodLazy?getDiscriminator(e.schema):e instanceof ZodEffects?getDiscriminator(e.innerType()):e instanceof ZodLiteral?[e.value]:e instanceof ZodEnum?e.options:e instanceof ZodNativeEnum?Object.keys(e.enum):e instanceof ZodDefault?getDiscriminator(e._def.innerType):e instanceof ZodUndefined?[void 0]:e instanceof ZodNull?[null]:null;class ZodDiscriminatedUnion extends ZodType{_parse(t){const{ctx:i}=this._processInputParams(t);if(i.parsedType!==ZodParsedType.object)return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:i.parsedType}),INVALID;const o=this.discriminator,c=i.data[o],n=this.optionsMap.get(c);return n?i.common.async?n._parseAsync({data:i.data,path:i.path,parent:i}):n._parseSync({data:i.data,path:i.path,parent:i}):(addIssueToContext(i,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,i,o){const c=new Map;for(const n of i){const a=getDiscriminator(n.shape[t]);if(!a)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const f of a){if(c.has(f))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(f)}`);c.set(f,n)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:t,options:i,optionsMap:c,...processCreateParams(o)})}}function mergeValues(e,t){const i=getParsedType(e),o=getParsedType(t);if(e===t)return{valid:!0,data:e};if(i===ZodParsedType.object&&o===ZodParsedType.object){const c=util.objectKeys(t),n=util.objectKeys(e).filter(f=>c.indexOf(f)!==-1),a={...e,...t};for(const f of n){const p=mergeValues(e[f],t[f]);if(!p.valid)return{valid:!1};a[f]=p.data}return{valid:!0,data:a}}else if(i===ZodParsedType.array&&o===ZodParsedType.array){if(e.length!==t.length)return{valid:!1};const c=[];for(let n=0;n<e.length;n++){const a=e[n],f=t[n],p=mergeValues(a,f);if(!p.valid)return{valid:!1};c.push(p.data)}return{valid:!0,data:c}}else return i===ZodParsedType.date&&o===ZodParsedType.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class ZodIntersection extends ZodType{_parse(t){const{status:i,ctx:o}=this._processInputParams(t),c=(n,a)=>{if(isAborted(n)||isAborted(a))return INVALID;const f=mergeValues(n.value,a.value);return f.valid?((isDirty(n)||isDirty(a))&&i.dirty(),{status:i.value,value:f.data}):(addIssueToContext(o,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([n,a])=>c(n,a)):c(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}}ZodIntersection.create=(e,t,i)=>new ZodIntersection({left:e,right:t,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(i)});class ZodTuple extends ZodType{_parse(t){const{status:i,ctx:o}=this._processInputParams(t);if(o.parsedType!==ZodParsedType.array)return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:o.parsedType}),INVALID;if(o.data.length<this._def.items.length)return addIssueToContext(o,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&o.data.length>this._def.items.length&&(addIssueToContext(o,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),i.dirty());const n=[...o.data].map((a,f)=>{const p=this._def.items[f]||this._def.rest;return p?p._parse(new ParseInputLazyPath(o,a,o.path,f)):null}).filter(a=>!!a);return o.common.async?Promise.all(n).then(a=>ParseStatus.mergeArray(i,a)):ParseStatus.mergeArray(i,n)}get items(){return this._def.items}rest(t){return new ZodTuple({...this._def,rest:t})}}ZodTuple.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:e,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(t)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:i,ctx:o}=this._processInputParams(t);if(o.parsedType!==ZodParsedType.object)return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:o.parsedType}),INVALID;const c=[],n=this._def.keyType,a=this._def.valueType;for(const f in o.data)c.push({key:n._parse(new ParseInputLazyPath(o,f,o.path,f)),value:a._parse(new ParseInputLazyPath(o,o.data[f],o.path,f))});return o.common.async?ParseStatus.mergeObjectAsync(i,c):ParseStatus.mergeObjectSync(i,c)}get element(){return this._def.valueType}static create(t,i,o){return i instanceof ZodType?new ZodRecord({keyType:t,valueType:i,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(o)}):new ZodRecord({keyType:ZodString.create(),valueType:t,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(i)})}}class ZodMap extends ZodType{_parse(t){const{status:i,ctx:o}=this._processInputParams(t);if(o.parsedType!==ZodParsedType.map)return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:o.parsedType}),INVALID;const c=this._def.keyType,n=this._def.valueType,a=[...o.data.entries()].map(([f,p],r)=>({key:c._parse(new ParseInputLazyPath(o,f,o.path,[r,"key"])),value:n._parse(new ParseInputLazyPath(o,p,o.path,[r,"value"]))}));if(o.common.async){const f=new Map;return Promise.resolve().then(async()=>{for(const p of a){const r=await p.key,u=await p.value;if(r.status==="aborted"||u.status==="aborted")return INVALID;(r.status==="dirty"||u.status==="dirty")&&i.dirty(),f.set(r.value,u.value)}return{status:i.value,value:f}})}else{const f=new Map;for(const p of a){const r=p.key,u=p.value;if(r.status==="aborted"||u.status==="aborted")return INVALID;(r.status==="dirty"||u.status==="dirty")&&i.dirty(),f.set(r.value,u.value)}return{status:i.value,value:f}}}}ZodMap.create=(e,t,i)=>new ZodMap({valueType:t,keyType:e,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(i)});class ZodSet extends ZodType{_parse(t){const{status:i,ctx:o}=this._processInputParams(t);if(o.parsedType!==ZodParsedType.set)return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:o.parsedType}),INVALID;const c=this._def;c.minSize!==null&&o.data.size<c.minSize.value&&(addIssueToContext(o,{code:ZodIssueCode.too_small,minimum:c.minSize.value,type:"set",inclusive:!0,exact:!1,message:c.minSize.message}),i.dirty()),c.maxSize!==null&&o.data.size>c.maxSize.value&&(addIssueToContext(o,{code:ZodIssueCode.too_big,maximum:c.maxSize.value,type:"set",inclusive:!0,exact:!1,message:c.maxSize.message}),i.dirty());const n=this._def.valueType;function a(p){const r=new Set;for(const u of p){if(u.status==="aborted")return INVALID;u.status==="dirty"&&i.dirty(),r.add(u.value)}return{status:i.value,value:r}}const f=[...o.data.values()].map((p,r)=>n._parse(new ParseInputLazyPath(o,p,o.path,r)));return o.common.async?Promise.all(f).then(p=>a(p)):a(f)}min(t,i){return new ZodSet({...this._def,minSize:{value:t,message:errorUtil.toString(i)}})}max(t,i){return new ZodSet({...this._def,maxSize:{value:t,message:errorUtil.toString(i)}})}size(t,i){return this.min(t,i).max(t,i)}nonempty(t){return this.min(1,t)}}ZodSet.create=(e,t)=>new ZodSet({valueType:e,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(t)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:i}=this._processInputParams(t);if(i.parsedType!==ZodParsedType.function)return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:i.parsedType}),INVALID;function o(f,p){return makeIssue({data:f,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,getErrorMap(),errorMap].filter(r=>!!r),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:p}})}function c(f,p){return makeIssue({data:f,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,getErrorMap(),errorMap].filter(r=>!!r),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:p}})}const n={errorMap:i.common.contextualErrorMap},a=i.data;return this._def.returns instanceof ZodPromise?OK(async(...f)=>{const p=new ZodError([]),r=await this._def.args.parseAsync(f,n).catch(h=>{throw p.addIssue(o(f,h)),p}),u=await a(...r);return await this._def.returns._def.type.parseAsync(u,n).catch(h=>{throw p.addIssue(c(u,h)),p})}):OK((...f)=>{const p=this._def.args.safeParse(f,n);if(!p.success)throw new ZodError([o(f,p.error)]);const r=a(...p.data),u=this._def.returns.safeParse(r,n);if(!u.success)throw new ZodError([c(r,u.error)]);return u.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new ZodFunction({...this._def,args:ZodTuple.create(t).rest(ZodUnknown.create())})}returns(t){return new ZodFunction({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,i,o){return new ZodFunction({args:t||ZodTuple.create([]).rest(ZodUnknown.create()),returns:i||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(o)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(t){const{ctx:i}=this._processInputParams(t);return this._def.getter()._parse({data:i.data,path:i.path,parent:i})}}ZodLazy.create=(e,t)=>new ZodLazy({getter:e,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(t)});class ZodLiteral extends ZodType{_parse(t){if(t.data!==this._def.value){const i=this._getOrReturnCtx(t);return addIssueToContext(i,{received:i.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:t.data}}get value(){return this._def.value}}ZodLiteral.create=(e,t)=>new ZodLiteral({value:e,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(t)});function createZodEnum(e,t){return new ZodEnum({values:e,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(t)})}class ZodEnum extends ZodType{_parse(t){if(typeof t.data!="string"){const i=this._getOrReturnCtx(t),o=this._def.values;return addIssueToContext(i,{expected:util.joinValues(o),received:i.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._def.values.indexOf(t.data)===-1){const i=this._getOrReturnCtx(t),o=this._def.values;return addIssueToContext(i,{received:i.data,code:ZodIssueCode.invalid_enum_value,options:o}),INVALID}return OK(t.data)}get options(){return this._def.values}get enum(){const t={};for(const i of this._def.values)t[i]=i;return t}get Values(){const t={};for(const i of this._def.values)t[i]=i;return t}get Enum(){const t={};for(const i of this._def.values)t[i]=i;return t}extract(t){return ZodEnum.create(t)}exclude(t){return ZodEnum.create(this.options.filter(i=>!t.includes(i)))}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(t){const i=util.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(t);if(o.parsedType!==ZodParsedType.string&&o.parsedType!==ZodParsedType.number){const c=util.objectValues(i);return addIssueToContext(o,{expected:util.joinValues(c),received:o.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(i.indexOf(t.data)===-1){const c=util.objectValues(i);return addIssueToContext(o,{received:o.data,code:ZodIssueCode.invalid_enum_value,options:c}),INVALID}return OK(t.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(e,t)=>new ZodNativeEnum({values:e,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(t)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(t){const{ctx:i}=this._processInputParams(t);if(i.parsedType!==ZodParsedType.promise&&i.common.async===!1)return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:i.parsedType}),INVALID;const o=i.parsedType===ZodParsedType.promise?i.data:Promise.resolve(i.data);return OK(o.then(c=>this._def.type.parseAsync(c,{path:i.path,errorMap:i.common.contextualErrorMap})))}}ZodPromise.create=(e,t)=>new ZodPromise({type:e,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(t)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:i,ctx:o}=this._processInputParams(t),c=this._def.effect||null;if(c.type==="preprocess"){const a=c.transform(o.data);return o.common.async?Promise.resolve(a).then(f=>this._def.schema._parseAsync({data:f,path:o.path,parent:o})):this._def.schema._parseSync({data:a,path:o.path,parent:o})}const n={addIssue:a=>{addIssueToContext(o,a),a.fatal?i.abort():i.dirty()},get path(){return o.path}};if(n.addIssue=n.addIssue.bind(n),c.type==="refinement"){const a=f=>{const p=c.refinement(f,n);if(o.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return f};if(o.common.async===!1){const f=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return f.status==="aborted"?INVALID:(f.status==="dirty"&&i.dirty(),a(f.value),{status:i.value,value:f.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(f=>f.status==="aborted"?INVALID:(f.status==="dirty"&&i.dirty(),a(f.value).then(()=>({status:i.value,value:f.value}))))}if(c.type==="transform")if(o.common.async===!1){const a=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!isValid(a))return a;const f=c.transform(a.value,n);if(f instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:i.value,value:f}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(a=>isValid(a)?Promise.resolve(c.transform(a.value,n)).then(f=>({status:i.value,value:f})):a);util.assertNever(c)}}ZodEffects.create=(e,t,i)=>new ZodEffects({schema:e,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:t,...processCreateParams(i)}),ZodEffects.createWithPreprocess=(e,t,i)=>new ZodEffects({schema:t,effect:{type:"preprocess",transform:e},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(i)});class ZodOptional extends ZodType{_parse(t){return this._getType(t)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ZodOptional.create=(e,t)=>new ZodOptional({innerType:e,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(t)});class ZodNullable extends ZodType{_parse(t){return this._getType(t)===ZodParsedType.null?OK(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ZodNullable.create=(e,t)=>new ZodNullable({innerType:e,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(t)});class ZodDefault extends ZodType{_parse(t){const{ctx:i}=this._processInputParams(t);let o=i.data;return i.parsedType===ZodParsedType.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:i.path,parent:i})}removeDefault(){return this._def.innerType}}ZodDefault.create=(e,t)=>new ZodDefault({innerType:e,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...processCreateParams(t)});class ZodCatch extends ZodType{_parse(t){const{ctx:i}=this._processInputParams(t),o={...i,common:{...i.common,issues:[]}},c=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return isAsync(c)?c.then(n=>({status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new ZodError(o.common.issues)},input:o.data})})):{status:"valid",value:c.status==="valid"?c.value:this._def.catchValue({get error(){return new ZodError(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(e,t)=>new ZodCatch({innerType:e,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...processCreateParams(t)});class ZodNaN extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.nan){const o=this._getOrReturnCtx(t);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:o.parsedType}),INVALID}return{status:"valid",value:t.data}}}ZodNaN.create=e=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(e)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(t){const{ctx:i}=this._processInputParams(t),o=i.data;return this._def.type._parse({data:o,path:i.path,parent:i})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(t){const{status:i,ctx:o}=this._processInputParams(t);if(o.common.async)return(async()=>{const n=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return n.status==="aborted"?INVALID:n.status==="dirty"?(i.dirty(),DIRTY(n.value)):this._def.out._parseAsync({data:n.value,path:o.path,parent:o})})();{const c=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return c.status==="aborted"?INVALID:c.status==="dirty"?(i.dirty(),{status:"dirty",value:c.value}):this._def.out._parseSync({data:c.value,path:o.path,parent:o})}}static create(t,i){return new ZodPipeline({in:t,out:i,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}const custom=(e,t={},i)=>e?ZodAny.create().superRefine((o,c)=>{var n,a;if(!e(o)){const f=typeof t=="function"?t(o):typeof t=="string"?{message:t}:t,p=(a=(n=f.fatal)!==null&&n!==void 0?n:i)!==null&&a!==void 0?a:!0,r=typeof f=="string"?{message:f}:f;c.addIssue({code:"custom",...r,fatal:p})}}):ZodAny.create(),late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(e,t={message:`Input not instance of ${e.name}`})=>custom(i=>i instanceof e,t),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:e=>ZodString.create({...e,coerce:!0}),number:e=>ZodNumber.create({...e,coerce:!0}),boolean:e=>ZodBoolean.create({...e,coerce:!0}),bigint:e=>ZodBigInt.create({...e,coerce:!0}),date:e=>ZodDate.create({...e,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError});async function imageDecode(e){const t=MimeType.fromString(e.type);switch(t.type){case"image/x-alpha8":{const i=parseInt(t.params.width),o=parseInt(t.params.height);return ndarray5(new Uint8Array(await e.arrayBuffer()),[o,i,1])}case"image/x-rgba8":{const i=parseInt(t.params.width),o=parseInt(t.params.height);return ndarray5(new Uint8Array(await e.arrayBuffer()),[o,i,4])}case"application/octet-stream":case"image/png":case"image/jpeg":case"image/webp":{const i=await createImageBitmap(e),o=imageBitmapToImageData(i);return ndarray5(new Uint8Array(o.data),[o.height,o.width,4])}default:throw new Error(`Invalid format: ${t.type} with params: ${t.params}`)}}async function imageEncode(e,t=.8,i="image/png"){const[o,c,n]=e.shape;switch(i){case"image/x-alpha8":case"image/x-rgba8":{const p=MimeType.create(i,{width:c.toString(),height:o.toString()});return new Blob([e.data],{type:p.toString()})}case"image/png":case"image/jpeg":case"image/webp":{const p=new ImageData(new Uint8ClampedArray(e.data),c,o);var a=createCanvas(p.width,p.height),f=a.getContext("2d");return f.putImageData(p,0,0),a.convertToBlob({quality:t,type:i})}default:throw new Error(`Invalid format: ${i}`)}}var MimeType=class Y0{constructor(t,i){q0(this,"type","application/octet-stream");q0(this,"params",{});this.type=t,this.params=i}toString(){const t=[];for(const i in this.params){const o=this.params[i];t.push(`${i}=${o}`)}return[this.type,...t].join(";")}static create(t,i){return new Y0(t,i)}isIdentical(t){return this.type===t.type&&this.params===t.params}isEqual(t){return this.type===t.type}static fromString(t){const[i,...o]=t.split(";"),c={};for(const n of o){const[a,f]=n.split("=");c[a.trim()]=f.trim()}return new Y0(i,c)}};function isAbsoluteURI(e){return new RegExp("^(?:[a-z+]+:)?//","i").test(e)}function ensureAbsoluteURI(e,t){return isAbsoluteURI(e)?e:new URL(e,t).href}function imageBitmapToImageData(e){var t=createCanvas(e.width,e.height),i=t.getContext("2d");return i.drawImage(e,0,0),i.getImageData(0,0,t.width,t.height)}function tensorResizeBilinear(e,t,i){const[o,c,n]=e.shape,a=c/t,f=o/i,p=ndarray5(new Uint8Array(n*t*i),[i,t,n]);for(let r=0;r<i;r++)for(let u=0;u<t;u++){const l=u*a,h=r*f,y=Math.max(Math.floor(l),0),I=Math.min(Math.ceil(l),c-1),S=Math.max(Math.floor(h),0),A=Math.min(Math.ceil(h),o-1),V=l-y,N=h-S;for(let B=0;B<n;B++){const te=e.get(S,y,B),ve=e.get(S,I,B),St=e.get(A,y,B),Ye=e.get(A,I,B),et=(1-V)*(1-N)*te+V*(1-N)*ve+(1-V)*N*St+V*N*Ye;p.set(r,u,B,Math.round(et))}}return p}function tensorHWCtoBCHW(e,t=[128,128,128],i=[256,256,256]){var o=e.data;const[c,n,a]=e.shape,f=c*n,p=new Float32Array(3*f);for(let r=0,u=0;r<o.length;r+=4,u+=1)p[u]=(o[r]-t[0])/i[0],p[u+f]=(o[r+1]-t[1])/i[1],p[u+f+f]=(o[r+2]-t[2])/i[2];return ndarray5(p,[1,3,c,n])}async function imageSourceToImageData(e,t){return typeof e=="string"&&(e=ensureAbsoluteURI(e,t.publicPath),e=new URL(e)),e instanceof URL&&(e=await(await fetch(e,{})).blob()),(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e=new Blob([e])),e instanceof Blob&&(e=await imageDecode(e)),e}function convertFloat32ToUint8(e){const t=new Uint8Array(e.data.length);for(let i=0;i<e.data.length;i++)t[i]=e.data[i]*255;return ndarray5(t,e.shape)}function createCanvas(e,t){let i;if(typeof OffscreenCanvas<"u"?i=new OffscreenCanvas(e,t):i=document.createElement("canvas"),!i)throw new Error("Canvas nor OffscreenCanvas are available in the current context.");return i}async function loadAsUrl(e,t){return URL.createObjectURL(await loadAsBlob(e,t))}async function loadAsBlob(e,t){const i=new URL("resources.json",t.publicPath),o=await fetch(i);if(!o.ok)throw new Error("Resource metadata not found. Ensure that the config.publicPath is configured correctly.");const n=(await o.json())[e];if(!n)throw new Error(`Resource ${e} not found. Ensure that the config.publicPath is configured correctly.`);const a=n.chunks;let f=0;const p=a.map(async l=>{const h=l.offsets[1]-l.offsets[0],y=t.publicPath?new URL(l.hash,t.publicPath).toString():l.hash,S=await(await fetch(y,t.fetchArgs)).blob();if(h!==S.size)throw new Error(`Failed to fetch ${e} with size ${h} but got ${S.size}`);return t.progress&&(f+=h,t.progress(`fetch:${e}`,f,n.size)),S}),r=await Promise.all(p),u=new Blob(r,{type:n.mime});if(u.size!==n.size)throw new Error(`Failed to fetch ${e} with size ${n.size} but got ${u.size}`);return u}var simd=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),threads=()=>(async e=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));async function createOnnxSession(e,t){const i={simd:await simd(),threads:await threads(),numThreads:navigator.hardwareConcurrency??4,webgpu:navigator.gpu!==void 0};t.debug&&(console.debug("Capabilities:",i),Z.debug=!0,Z.logLevel="verbose"),Z.wasm.numThreads=i.numThreads,Z.wasm.simd=i.simd,Z.wasm.proxy=t.proxyToWorker,Z.wasm.wasmPaths={"ort-wasm-simd-threaded.wasm":i.simd&&i.threads?await loadAsUrl("/onnxruntime-web/ort-wasm-simd-threaded.wasm",t):void 0,"ort-wasm-simd.wasm":i.simd&&!i.threads?await loadAsUrl("/onnxruntime-web/ort-wasm-simd.wasm",t):void 0,"ort-wasm-threaded.wasm":!i.simd&&i.threads?await loadAsUrl("/onnxruntime-web/ort-wasm-threaded.wasm",t):void 0,"ort-wasm.wasm":!i.simd&&!i.threads?await loadAsUrl("/onnxruntime-web/ort-wasm.wasm",t):void 0},t.debug&&console.debug("ort.env.wasm:",Z.wasm);const o={executionProviders:["wasm"],graphOptimizationLevel:"all",executionMode:"parallel",enableCpuMemArena:!0};return await Dd.create(e,o).catch(n=>{throw new Error(`Failed to create session: ${n}. Please check if the publicPath is set correctly.`)})}async function runOnnxSession(e,t,i){const o={};for(const[a,f]of t)o[a]=new Re("float32",new Float32Array(f.data),f.shape);const c=await e.run(o,{}),n=[];for(const a of i){const f=c[a],p=f.dims,r=f.data,u=ndarray5(r,p);n.push(u)}return n}var package_default={name:"@imgly/background-removal",version:"1.4.5"},ConfigSchema=z.object({publicPath:z.string().optional().describe("The public path to the wasm files and the onnx model.").default("https://staticimgly.com/@imgly/background-removal-data/${PACKAGE_VERSION}/dist/").transform(e=>e.replace("${PACKAGE_NAME}",package_default.name).replace("${PACKAGE_VERSION}",package_default.version)),debug:z.boolean().default(!1).describe("Whether to enable debug logging."),proxyToWorker:z.boolean().default(!0).describe("Whether to proxy inference to a web worker."),fetchArgs:z.any().default({}).describe("Arguments to pass to fetch when loading the model."),progress:z.function().args(z.string(),z.number(),z.number()).returns(z.void()).describe("Progress callback.").optional(),model:z.enum(["small","medium"]).default("medium"),output:z.object({format:z.enum(["image/png","image/jpeg","image/webp","image/x-rgba8","image/x-alpha8"]).default("image/png"),quality:z.number().default(.8)}).default({})}).default({});function validateConfig(e){const t=ConfigSchema.parse(e??{});return t.debug&&console.log("Config:",t),t.debug&&!t.progress&&(t.progress=t.progress??((i,o,c)=>{console.debug(`Downloading ${i}: ${o} of ${c}`)}),crossOriginIsolated||console.debug("Cross-Origin-Isolated is not enabled. Performance will be degraded. Please see  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer.")),t}async function initInference(e){e=validateConfig(e),e.debug&&console.debug("Loading model...");const t=e.model,o=await(await loadAsBlob(`/models/${t}`,e)).arrayBuffer(),c=await createOnnxSession(o,e);return{config:e,session:c}}async function runInference(e,t,i){t.progress&&t.progress("compute:inference",0,1);const o=1024,[c,n,a]=e.shape;let f=tensorResizeBilinear(e,o,o);const p=tensorHWCtoBCHW(f),r=await runOnnxSession(i,[["input",p]],["output"]);let u=ndarray5(r[0].data,[o,o,1]),l=convertFloat32ToUint8(u);return l=tensorResizeBilinear(l,n,c),t.progress&&t.progress("compute:inference",1,1),l}var init=lodashExports.memoize(initInference,e=>JSON.stringify(e));async function removeBackground(e,t){const{config:i,session:o}=await init(t),c=await imageSourceToImageData(e,i),[n,a,f]=c.shape,p=await runInference(c,i,o),r=n*a,u=c;for(let h=0;h<r;h+=1)u.data[4*h+3]=p.data[h];return await imageEncode(u,i.output.quality,i.output.format)}const PUBLIC_PATH=new URL("/imgly/",self.location.href).toString();let currentCache=null;self.onmessage=async e=>{if(e.data.type==="preload"){console.log("[StampWorker] Preloading models...");try{await fetch(PUBLIC_PATH+"model.json")}catch{}return}const t=e.data,{file:i,colorHex:o}=t,c=typeof t.jobId=="number"?t.jobId:0,n=a=>{self.postMessage({jobId:c,...a})};console.log("[StampWorker] Iniciando processamento de:",i.name,o);try{console.log("[StampWorker] Testando acesso à CDN...");const a=await fetch(PUBLIC_PATH+"resources.json",{mode:"cors"});console.log("[StampWorker] CDN Status:",a.status,a.statusText)}catch(a){console.error("[StampWorker] Falha crítica de conexão com a CDN:",a)}try{n({type:"progress",value:5,status:"Otimizando imagem..."});const a=await createImageBitmap(i),p=Math.min(1,1024/Math.max(a.width,a.height));let r=i;if(p<1){const _t=Math.round(a.width*p),$t=Math.round(a.height*p),We=new OffscreenCanvas(_t,$t),Ze=We.getContext("2d");Ze&&(Ze.drawImage(a,0,0,_t,$t),r=await We.convertToBlob({type:"image/jpeg",quality:.8}))}const u=`${i.name}-${i.size}`;let l;currentCache&&currentCache.id===u?(console.log("[StampWorker] Using cached background removal"),n({type:"progress",value:80,status:"Reaplicando cor..."}),l=currentCache.blob):(n({type:"progress",value:10,status:"Baixando IA e removendo fundo..."}),console.log("[StampWorker] Iniciando remoção de fundo com imgly..."),l=await removeBackground(r,{publicPath:PUBLIC_PATH,model:"medium",progress:(_t,$t,We)=>{let Ze=0;_t.includes("fetch")?Ze=Math.round($t/We*30):_t.includes("compute")&&(Ze=30+Math.round($t/We*50)),n({type:"progress",value:Ze,status:_t.includes("fetch")?"Baixando modelos...":"Processando IA..."})}}),currentCache={id:u,blob:l}),console.log("[StampWorker] Fundo removido, iniciando threshold..."),n({type:"progress",value:85,status:"Aplicando efeito carimbo..."});const h=await createImageBitmap(l),I=Math.min(1,1024/Math.max(h.width,h.height)),S=Math.round(h.width*I),A=Math.round(h.height*I),V=new OffscreenCanvas(S,A),N=V.getContext("2d");if(!N)throw new Error("Falha ao criar contexto 2D no Worker");N.drawImage(h,0,0,S,A);const B=N.getImageData(0,0,S,A),te=B.data,ve=parseInt(o.slice(1,3),16),St=parseInt(o.slice(3,5),16),Ye=parseInt(o.slice(5,7),16);let et=255,pe=0;for(let _t=0;_t<te.length;_t+=4){if(te[_t+3]<20)continue;const $t=.299*te[_t]+.587*te[_t+1]+.114*te[_t+2];$t<et&&(et=$t),$t>pe&&(pe=$t)}pe-et<20&&(et=Math.max(0,et-10),pe=Math.min(255,pe+10));for(let _t=0;_t<A;_t++)for(let $t=0;$t<S;$t++){const We=(_t*S+$t)*4,Ze=te[We+3];if(Ze<10)continue;const Ue=te[We],Dt=te[We+1],Ut=te[We+2];let er=(.299*Ue+.587*Dt+.114*Ut-et)/(pe-et);er=Math.max(0,Math.min(1,er));const gt=er*er*(3-2*er),fr=.35;let mt=0;if(gt>fr){const Gt=(gt-fr)/(1-fr);mt=Math.pow(Gt,.7)*255,Gt>.2&&(mt=Math.max(mt,100)),Gt>.5&&(mt=Math.max(mt,180)),Gt>.8&&(mt=Math.max(mt,240))}Ze<245&&Ze>60&&mt>0&&(mt=Math.min(255,mt*1.25));const Kr=Math.sin($t*12.9898+_t*78.233)*43758.5453,Sr=Math.sin($t*37.5+_t*127.1)*43758.5453,sn=(Kr-Math.floor(Kr)+(Sr-Math.floor(Sr)))/2,nr=sn*.15+.925;mt=mt*nr,mt>30&&mt<150&&sn<.15&&(mt=mt*.5),mt=Math.max(0,Math.min(255,mt));const Ar=Math.round(mt*(Ze/255));Ar<8?te[We+3]=0:(te[We]=ve,te[We+1]=St,te[We+2]=Ye,te[We+3]=Ar)}N.putImageData(B,0,0),n({type:"progress",value:90,status:"Finalizando..."});const rt=await V.convertToBlob({type:"image/png"}),Vo=new File([rt],"stamp_processed.png",{type:"image/png"});n({type:"complete",file:Vo})}catch(a){console.error(a),n({type:"error",message:"Falha ao processar imagem."})}}})();

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor--YHnU7YG.js","assets/react-kF-aRxYe.js","assets/radix-D4-CbPT3.js"])))=>i.map(i=>d[i]);
var nn=Object.defineProperty;var ln=(t,r,a)=>r in t?nn(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a;var He=(t,r,a)=>ln(t,typeof r!="symbol"?r+"":r,a);import{r as c,j as e,R as Qe}from"./react-kF-aRxYe.js";import{aU as Na,aV as cn,aW as dn,aX as mn,aY as un,f as xn,aZ as K,a_ as Ce,a$ as Ar,b0 as Ee,b1 as Je,b2 as Eo,b3 as Po,b4 as Qr,b5 as $a,b6 as $t,b7 as Mo,au as za,b8 as To,b9 as At,ba as bn,bb as pn}from"./vendor--YHnU7YG.js";import{u as be,a as Ae,b as Se,c as hn,Q as gn,d as fn}from"./tanstack-iTdlcIZ5.js";import{L as W,u as ht,a as ve,O as Ro,N as Io,b as lt,c as Ct,d as Lo,B as vn,R as yn,e as le}from"./router-CSYYBgtz.js";import{c as Fo,p as jn}from"./zustand-Bmu2yk5i.js";import{X as De,L as fe,C as Yr,B as Ze,S as Dr,G as Be,a as gt,H as rt,U as jt,b as Oe,c as pe,d as Re,e as Mt,f as Er,g as aa,M as Ua,h as Va,i as Pr,j as Ca,F as Dt,k as kr,l as qo,m as Te,n as wr,o as kn,p as Nr,q as wn,W as Nn,R as Bo,r as Cn,s as ua,I as ir,t as Sn,A as Et,u as Oo,P as Pt,v as tt,w as pt,E as Cr,x as Ot,y as _n,z as An,D as sa,J as Nt,K as Jr,N as Ge,O as Dn,Q as Ne,T as Ie,V as Sa,Y as En,Z as Pn,_ as Mn,$ as $o,a0 as Ye,a1 as $e,a2 as _a,a3 as Ka,a4 as ft,a5 as Ga,a6 as Tn,a7 as Rn,a8 as In,a9 as Aa,aa as oa,ab as Ha,ac as Wa,ad as ar,ae as Sr,af as Ln,ag as Fn,ah as zo,ai as zt,aj as Uo,ak as qn,al as Bn,am as Vo,an as On,ao as Xr,ap as $n,aq as Da,ar as zn,as as Un,at as ia,au as Qa,av as Vn,aw as Mr,ax as Kn,ay as Ya,az as Gn,aA as Tr,aB as Hn,aC as Bs,aD as Wn,aE as Qn,aF as Yn,aG as Jn,aH as Ko,aI as Xn,aJ as sr,aK as Ja,aL as Bt,aM as Zn,aN as Xa,aO as el,aP as tl,aQ as Ea,aR as Go,aS as Pa,aT as xa,aU as rl,aV as Zr,aW as al,aX as Za,aY as Ho,aZ as sl,a_ as ol,a$ as il,b0 as Ma,b1 as nl,b2 as ll,b3 as cl,b4 as Wo}from"./icons-CDR1cT6v.js";import{m as E,A as qe,L as wt,a as dl,b as It,c as ml,u as Os,d as ul}from"./motion-jqufgt2G.js";import{S as xl,b as Qo,c as Yo,d as bl,e as Jo,I as Xo,f as Zo,g as ei,h as ti,L as ri,i as ai,j as pl,k as hl,O as es,P as si,C as ts,a as gl,T as oi,D as ii,R as ni}from"./radix-D4-CbPT3.js";import{R as $s,L as fl,a as ba,C as vl,b as yl,X as jl,Y as zs,T as kl,c as wl,A as Nl}from"./charts-Er1wA-7U.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=a(l);fetch(l.href,o)}})();const Cl={loading:"Carregando...",save:"Salvar",cancel:"Cancelar",confirm:"Confirmar",delete:"Excluir",edit:"Editar",back:"Voltar",next:"Pr√≥ximo",previous:"Anterior",search:"Buscar",filter:"Filtrar",close:"Fechar",actions:"A√ß√µes",status:"Status",date:"Data",name:"Nome",email:"E-mail",phone:"Telefone",address:"Endere√ßo",description:"Descri√ß√£o",total:"Total",details:"Detalhes",all:"Todos",none:"Nenhum",yes:"Sim",no:"N√£o",or:"ou",and:"e",of:"de",error:"Erro",success:"Sucesso",warning:"Aviso",info:"Informa√ß√£o",retry:"Tentar novamente",reload:"Recarregar p√°gina",noResults:"Nenhum resultado encontrado",required:"Obrigat√≥rio",select:"Selecione..."},Sl={login:"Entrar",logout:"Sair",register:"Cadastrar",email:"E-mail",password:"Senha",confirmPassword:"Confirmar senha",forgotPassword:"Esqueci minha senha",rememberMe:"Lembrar de mim",loginTitle:"Acesse sua conta",registerTitle:"Crie sua conta",loginButton:"Entrar",registerButton:"Cadastrar",noAccount:"N√£o tem uma conta?",hasAccount:"J√° tem uma conta?",invalidCredentials:"E-mail ou senha inv√°lidos",logoutSuccess:"Voc√™ saiu da sua conta"},_l={dashboard:"Painel",deliveries:"Entregas",credits:"Cr√©ditos",settings:"Configura√ß√µes",notifications:"Notifica√ß√µes",help:"Ajuda",profile:"Perfil"},Al={auth:{login:{title:"Portal do Parceiro",subtitle:"Entre para gerenciar suas entregas",backToHome:"Voltar para Baby Book Pro",noAccount:"Ainda n√£o tem conta?",registerLink:"Cadastre-se gr√°tis",forgotPassword:"Esqueci minha senha",rememberMe:"Lembrar de mim",submit:"Entrar",submitting:"Entrando...",errors:{emailRequired:"Informe seu e-mail",passwordRequired:"Informe sua senha",notPartner:"Sua conta n√£o √© uma conta de parceiro. Entre em contato com o suporte.",invalid:"Email ou senha inv√°lidos"}},register:{title:"Criar Conta de Parceiro",step:"Passo {{current}} de {{total}} ‚Äî {{title}}",steps:{personal:"Dados Pessoais",contact:"Contato",security:"Seguran√ßa"},fields:{name:{label:"Seu Nome *",placeholder:"Como voc√™ gostaria de ser chamado",error:"Informe seu nome"},studio:{label:"Nome do Est√∫dio",placeholder:"Ex: Studio Encanto Fotografia",help:"Este nome aparecer√° para seus clientes no app"},email:{label:"E-mail *",help:"Usaremos este e-mail para login e comunica√ß√µes importantes",error:"Informe seu e-mail",invalid:"Informe um e-mail v√°lido"},whatsapp:{label:"WhatsApp",help:"Para suporte priorit√°rio e notifica√ß√µes r√°pidas"},password:{label:"Senha *",placeholder:"M√≠nimo 8 caracteres",error:"Crie uma senha",min:"A senha deve ter pelo menos 8 caracteres"},confirmPassword:{label:"Confirmar Senha *",placeholder:"Repita a senha",match:"Senhas conferem",mismatch:"As senhas n√£o conferem"},terms:{text:"Li e aceito os <1>Termos de Uso</1> e a <2>Pol√≠tica de Privacidade</2>",error:"Voc√™ precisa aceitar os termos de uso"}},actions:{back:"Voltar",continue:"Continuar",submit:"Criar Conta Gr√°tis",submitting:"Criando conta...",backToHome:"Voltar para Baby Book Pro"},links:{hasAccount:"J√° tem uma conta?",login:"Entrar"},benefits:{title:"Ao se cadastrar voc√™ ganha:",item1:"1 cr√©dito de boas-vindas",item2:"Acesso ao Portal do Parceiro",item3:"Suporte priorit√°rio"}}},dashboard:{title:"Painel do Parceiro",welcome:"Ol√°",welcomeMorning:"Bom dia",welcomeAfternoon:"Boa tarde",welcomeEvening:"Boa noite",welcomeNewUser:"Bem-vindo ao Baby Book!",stats:{totalDeliveries:"Total de Entregas",pendingDeliveries:"Entregas Pendentes",completedDeliveries:"Entregas Conclu√≠das",availableCredits:"Cr√©ditos Dispon√≠veis",reservedCredits:"Cr√©ditos Reservados"},recentDeliveries:"Entregas Recentes",noRecentDeliveries:"Nenhuma entrega recente",startFirstDelivery:"Comece sua primeira entrega",viewAllDeliveries:"Ver todas as entregas",tips:{pendingUpload:"Voc√™ tem fotos aguardando upload. Complete para enviar ao cliente!",readyDeliveries:"Entregas prontas! Gere o link/voucher para seus clientes resgatarem.",lowCredits:"Seu saldo est√° baixo. Garanta cr√©ditos para n√£o pausar entregas.",growth:"{{count}} clientes j√° resgataram suas fotos. Continue crescendo!",firstDelivery:"Crie sua primeira entrega e surpreenda seus clientes!",creditsInfo:"Dica: quando o cliente resgata, o cr√©dito √© consumido ou estornado automaticamente."}},deliveries:{title:"Entregas",newDelivery:"Nova Entrega",list:{title:"Entregas",backToPortal:"Voltar ao portal",empty:"Voc√™ ainda n√£o tem entregas",emptyDescription:"Crie sua primeira entrega para come√ßar",filters:{title:"Filtros",active:"Filtros ativos:",clearAll:"Limpar todos",searchPlaceholder:"Buscar por cliente ou t√≠tulo",status:"Status",voucher:"Voucher",redeemed:"Resgate",date:"Data",presets:{needsAction:"Precisa de a√ß√£o",withoutVoucher:"Sem voucher",redeemed:"Resgatadas"},options:{all:"Todos",with:"Com voucher",without:"Sem voucher",redeemed:"Resgatado",notRedeemed:"N√£o resgatado"}},table:{client:"Cliente",status:"Status",date:"Data",actions:"A√ß√µes"},total:"no total",archived:"arquivadas",deliveriesSuffix:"entregas"},status:{pending:"Pendente",processing:"Processando",ready:"Pronta",delivered:"Entregue",cancelled:"Cancelada",all:"Todas"},detail:{title:"Detalhes da Entrega",recipientInfo:"Informa√ß√µes do Destinat√°rio",deliveryInfo:"Informa√ß√µes da Entrega",mediaFiles:"Arquivos de M√≠dia",timeline:"Linha do Tempo"},create:{title:"Nova Entrega",step1:"Informa√ß√µes",step2:"Upload de M√≠dia",step3:"Revis√£o",recipientName:"Nome do Destinat√°rio",recipientEmail:"E-mail do Destinat√°rio",recipientPhone:"Telefone do Destinat√°rio",message:"Mensagem",uploadMedia:"Enviar M√≠dia",dragDrop:"Arraste e solte arquivos aqui",orClickToUpload:"ou clique para selecionar",supportedFormats:"Formatos suportados: JPG, PNG, MP4, PDF",review:"Revise os dados antes de confirmar",confirmDelivery:"Confirmar Entrega",deliveryCreated:"Entrega criada com sucesso!"},upload:{title:"Upload de M√≠dia",uploading:"Enviando...",uploaded:"Enviado",failed:"Falha no envio",retryFailed:"Reenviar falhas",retryAll:"Reenviar todos",removeFile:"Remover arquivo",progress:"{{current}} de {{total}} arquivos enviados"},archive:{action:"Arquivar",unarchive:"Desarquivar",success:"Entrega arquivada: {{title}}",unarchiveSuccess:"Entrega desarquivada: {{title}}",undo:"Desfazer"},actions:{copyLink:"Copiar link",copyId:"Copiar ID",copyVoucher:"Copiar voucher",generateVoucher:"Gerar voucher",generateLink:"Gerar link",open:"Abrir",details:"Ver detalhes",preview:"Pr√©via",close:"Fechar",linkCopied:"Link copiado",idCopied:"ID copiado",voucherCopied:"Voucher copiado",copyFailed:"N√£o foi poss√≠vel copiar"},sections:{client:"Cliente",files:"Arquivos",created:"Criada em",history:"Hist√≥rico",voucherCredit:"Voucher / Cr√©dito",quickActions:"A√ß√µes r√°pidas"},hints:{openDetailsToGenerate:"Dica: abra os detalhes para gerar o voucher.",keyboardShortcuts:"Dica: Esc fecha ‚Ä¢ ‚Üê/‚Üí navega."}},credits:{title:"Cr√©ditos",subtitle:"Escolha o pacote ideal para suas entregas",balance:"Saldo de Cr√©ditos",yourCredits:"Seus Cr√©ditos",available:"Dispon√≠vel",reserved:"Reservado",lowBalance:"Saldo baixo",ready_one:"cr√©dito pronto",ready_other:"cr√©ditos prontos",waitingRedemption:"aguardando resgate",availableTooltip:"Cr√©ditos dispon√≠veis para uso imediato em novas entregas",reservedTooltip:"Cr√©ditos reservados para entregas em andamento",history:"Hist√≥rico de Transa√ß√µes",noHistory:"Nenhuma transa√ß√£o encontrada",info:{consumed:"O cr√©dito √© consumido apenas quando o cliente resgata as fotos."},purchase:{buyCredits:"Comprar Cr√©ditos",selectPackage:"Selecione um pacote",mostPopular:"Mais Popular",vouchers:"vouchers",totalPix:"Total no PIX (√† vista)",totalCard:"Total no cart√£o (at√© {{installments}}x s/ juros)",perVoucher:"/voucher",savings:"economize {{value}}",paymentMethod:"Forma de pagamento",payWithPix:"Pagar via PIX",payWithCard:"Pagar com Cart√£o",totalToPay:"Total a pagar",orderSummary:"Resumo do Pedido",continue:"Continuar Compra",secureCheckout:"üîí Voc√™ ser√° redirecionado para o checkout seguro (Stripe) para completar o pagamento.",howItWorks:"Como funcionam os cr√©ditos?",savingsVsCard:"Economia de {{value}} vs cart√£o",installmentsInfo:"At√© {{count}}x de <bold>{{value}}</bold> sem juros",pixInfo:"üí° No PIX: {{value}} (economize {{savings}})",selectToContinue:"Selecione um pacote acima para continuar",processing:"Processando...",volumeDiscount:"Desconto por volume: {{value}}%",compare:{label:"Comparativo",pix:"PIX",card:"Cart√£o",onCard:"No cart√£o",onPix:"No PIX",installmentsDetails:"At√© {{count}}x de {{value}} sem juros. Acima disso, juros e total aparecem no checkout."},info:{reserved:"Ao gerar um voucher, 1 cr√©dito fica RESERVED (em tr√¢nsito)",consumed:"No resgate: novo Baby Book ‚Üí CONSUMED; beb√™ existente ‚Üí REFUNDED (estorno autom√°tico)",unique:"O voucher √© √∫nico por entrega e d√° acesso √†s fotos daquele ensaio",expiration:"Cr√©ditos n√£o expiram"}},transaction:{purchase:"Compra de cr√©ditos",usage:"Uso em entrega",refund:"Reembolso",bonus:"B√¥nus"}},settings:{title:"Configura√ß√µes",profile:{title:"Perfil",companyName:"Nome da Empresa",contactName:"Nome do Contato",email:"E-mail",phone:"Telefone",logo:"Logo",uploadLogo:"Enviar Logo",removeLogo:"Remover Logo"},preferences:{title:"Prefer√™ncias",language:"Idioma",theme:"Tema",themeLight:"Claro",themeDark:"Escuro",themeSystem:"Sistema",notifications:"Notifica√ß√µes",emailNotifications:"Notifica√ß√µes por e-mail",pushNotifications:"Notifica√ß√µes push"},security:{title:"Seguran√ßa",changePassword:"Alterar Senha",currentPassword:"Senha Atual",newPassword:"Nova Senha",confirmNewPassword:"Confirmar Nova Senha",twoFactor:"Autentica√ß√£o de dois fatores",logoutAll:"Sair de todos os dispositivos",logoutAllDesc:"Encerra todas as sess√µes ativas (ex.: celular, outros computadores).",logoutAllConfirm:"Deseja encerrar todas as sess√µes ativas? Voc√™ precisar√° logar novamente."}},upload:{title:"Adicionar Fotos",backToDelivery:"Voltar √† entrega",deliveryLabel:"Entrega",loading:"Carregando entrega...",notFound:"Entrega n√£o encontrada",backToDeliveries:"Voltar √†s entregas",finalizedTitle:"Entrega finalizada",finalizedDescription:"N√£o √© poss√≠vel adicionar fotos ap√≥s o voucher ser gerado.",viewDelivery:"Ver entrega",stats:{photosInDelivery:"Fotos na entrega",uploadedNow:"Enviadas agora"},zone:{dragDrop:"Arraste as fotos ou clique para selecionar",formats:"JPG, PNG, WEBP ‚Ä¢ At√© 20MB por arquivo",ariaLabel:"Selecionar fotos para upload"},list:{title:"Uploads",retry:"Tentar novamente",remove:"Remover",wait:"Aguarde...",finish:"Concluir",cancel:"Cancelar"}},details:{title:"Entrega",backToDeliveries:"Voltar √†s entregas",created:"Criada em",event:"Evento",description:"Descri√ß√£o",files:"Arquivos",add:"Adicionar",finalizedAdd:"Entrega finalizada (n√£o √© poss√≠vel adicionar)",noFiles:"Nenhum arquivo enviado ainda",sendFiles:"Enviar Arquivos",removeFile:"Remover arquivo",removeConfirm:"Remover?"},voucher:{label:"Voucher",ready:"Pronto",redeemedAt:"Resgatado em {{date}}",notRedeemed:"Ainda n√£o resgatado",explanation:"Quando gerar, voc√™ ter√° um cart√£o (QR Code) e um c√≥digo para enviar ao cliente.",explanationNoFiles:"Envie os arquivos desta entrega para liberar a gera√ß√£o do voucher.",openCard:"Abrir cart√£o",copy:"Copiar",copied:"Voucher copiado",copyFailed:"N√£o foi poss√≠vel copiar",generate:"Gerar voucher",unavailable:"Voucher indispon√≠vel",clipboardWarning:"Envie arquivos para liberar a gera√ß√£o do voucher",modal:{titleImport:"Gerar link de importa√ß√£o",titleVoucher:"Gerar Voucher",titleCard:"Cart√£o-Convite",descImport:"Este cliente <bold>j√° tem conta</bold> no Baby Book. Por isso, <bold>n√£o precisamos de voucher</bold>. Ao finalizar, geramos um <bold>link de importa√ß√£o</bold>: ‚Ä¢ se o cliente importar em um <bold>filho com acesso</bold>, n√£o h√° cobran√ßa; ‚Ä¢ se o cliente criar um <bold>novo Baby Book</bold>, ser√° consumido <bold>1 cr√©dito</bold>.",descVoucher:"Isso ir√° <bold>reservar 1 cr√©dito</bold> (em tr√¢nsito). No resgate: ‚Ä¢ se o cliente criar um <bold>novo Baby Book</bold>, o cr√©dito vira <bold>CONSUMED</bold>; ‚Ä¢ se o cliente vincular a um <bold>beb√™ existente</bold>, o cr√©dito vira <bold>REFUNDED</bold> (estorno autom√°tico). O voucher ser√° √∫nico para esta entrega.",beneficiary:"Nome do Benefici√°rio",beneficiaryPlaceholder:"Nome que aparecer√° no cart√£o",message:"Mensagem (opcional)",messagePlaceholder:"Uma mensagem especial para o cliente...",cancel:"Cancelar",finalize:"Finalizando...",generateLink:"Gerar Link",generateBtn:"Gerar Voucher"}},status:{draft:{label:"Rascunho",shortLabel:"Rascunho",hint:"Entrega criada, mas ainda n√£o enviada. Adicione os arquivos para continuar."},pending_upload:{label:"Aguardando upload",shortLabel:"Upload",hint:"Estamos esperando voc√™ enviar os arquivos desta entrega."},processing:{label:"Processando",shortLabel:"Proc.",hint:"Seus arquivos est√£o sendo preparados. Isso pode levar alguns minutos."},ready:{label:"Pronta",shortLabel:"Pronta",hint:"Entrega pronta para envio. Gere o voucher/link para seu cliente."},delivered:{label:"Entregue",shortLabel:"Entregue",hint:"Seu cliente j√° resgatou/importou a entrega."},failed:{label:"Falhou",shortLabel:"Erro",hint:"Houve um erro no processamento. Tente novamente ou contate o suporte com o ID da entrega."},archived:{label:"Arquivada",shortLabel:"Arq.",hint:"Entrega arquivada (oculta na lista ativa). Voc√™ pode desarquivar a qualquer momento."},active:"Ativas"},onboarding:{title:"Vamos come√ßar! üöÄ",subtitle:"Siga estes passos para entregar suas primeiras fotos",progress:{start:"Pronto para come√ßar?",continue:"Continue assim!",almost:"Quase l√°!",etapas:"{{current}}/{{total}} etapas"},steps:{profile:{title:"Personalize seu est√∫dio",description:"Seus clientes ver√£o seu nome e marca nas entregas"},credits:{title:"Adquira cr√©ditos",description:"Cada cr√©dito = 1 entrega com voucher exclusivo"},delivery:{title:"Envie sua primeira entrega",description:"Surpreenda um cliente com fotos incr√≠veis"},stats:{title:"Desbloqueie estat√≠sticas avan√ßadas",description:"Complete 5 entregas para ver insights do seu neg√≥cio"}}},tour:{welcome:{title:"Bem-vindo ao Portal do Parceiro!",description:"Este √© o seu painel principal. Aqui voc√™ acompanha entregas, cr√©ditos e estat√≠sticas do seu est√∫dio."},credits:{title:"Seus Cr√©ditos",description:"Cr√©ditos s√£o usados para gerar vouchers. Compre pacotes e envie fotos aos seus clientes."},stats:{title:"Estat√≠sticas",description:"Acompanhe o n√∫mero de entregas, vouchers gerados e resgates em tempo real."},deliveries:{title:"Entregas Recentes",description:"Veja suas √∫ltimas entregas e acompanhe o status de cada uma."},notifications:{title:"Notifica√ß√µes",description:"Fique por dentro de novos resgates e atualiza√ß√µes importantes."},settings:{title:"Menu do Usu√°rio",description:"Acesse configura√ß√µes, altere o tema e gerencie sua conta."}}},Dl={generic:"Algo deu errado. Tente novamente.",network:"Erro de conex√£o. Verifique sua internet.",notFound:"Recurso n√£o encontrado",unauthorized:"Voc√™ n√£o tem permiss√£o para acessar este recurso",sessionExpired:"Sua sess√£o expirou. Fa√ßa login novamente.",validation:"Por favor, corrija os erros no formul√°rio",serverError:"Erro no servidor. Tente novamente mais tarde.",offline:"Voc√™ est√° offline",offlineDescription:"Verifique sua conex√£o com a internet"},El={justNow:"Agora mesmo",minutesAgo:"h√° {{count}} minuto",minutesAgo_plural:"h√° {{count}} minutos",hoursAgo:"h√° {{count}} hora",hoursAgo_plural:"h√° {{count}} horas",daysAgo:"h√° {{count}} dia",daysAgo_plural:"h√° {{count}} dias",weeksAgo:"h√° {{count}} semana",weeksAgo_plural:"h√° {{count}} semanas"},Pl={title:"Seu Baby Book est√° seguro e atualizado.",storage:"Armazenamento",moments:"Momentos",recurrent:"Repeti√ß√µes"},Ml={dashboard:{title:"Jornada",errorTitle:"N√£o foi poss√≠vel carregar a jornada",errorDescription:"Ocorreu um problema ao buscar os dados do dashboard. Tente recarregar.",hud:{title:"Sua Jornada",suggestion:"Pr√≥xima sugest√£o",start:"Come√ßar",hint:"N√£o obrigat√≥rio. Voc√™ pode criar um momento livre a qualquer momento.",momentsTitle:"Seus Momentos"},templates:{descoberta:{title:"A Descoberta",description:"O primeiro momento especial"},"primeiro-sorriso":{title:"Primeiro Sorriso",description:"Aquele sorriso inesquec√≠vel"},"primeira-gargalhada":{title:"Primeira Gargalhada",description:"O som mais especial"}}},onboarding:{title:"Bem-vinda ao Baby Book!",subtitle:"Siga estes passos para completar o seu √°lbum",progress:{start:"Pronta para come√ßar?",continue:"Continue assim!",almost:"Quase l√°!"},steps:{profile:{title:"Complete o perfil do beb√™",description:"Adicione foto e detalhes importantes"},moment:{title:"Registre o primeiro momento",description:"Capture uma lembran√ßa especial hoje"},vault:{title:"Explore o Cofre",description:"Guarde documentos e exames com seguran√ßa"},family:{title:"Adicione um familiar",description:"Convide o outro papai ou mam√£e"}}},tour:{welcome:{title:"Bem-vinda ao Baby Book! üíñ",description:"Aqui √© onde a m√°gica acontece. Vamos te mostrar como organizar as mem√≥rias do seu beb√™."},timeline:{title:"Sua Linha do Tempo",description:"Todos os momentos registrados aparecem aqui, organizados por idade do beb√™."},bottomNav:{title:"Acesso R√°pido",description:"Navegue entre o di√°rio, sa√∫de, mensagens e o cofre de documentos."},userMenu:{title:"Perfil e Configura√ß√µes",description:"Aqui voc√™ troca de beb√™, convida familiares e acessa sua conta."}},guestbook:{title:"Livro de Visitas",description:"Mensagens e mem√≥rias dos amigos e fam√≠lia.",relationship:{mae:"M√£e",pai:"Pai",tio:"Tio",tia:"Tia",irmao_irma:"Irm√£o / Irm√£",avo:"Av√¥",avoa:"Av√≥",amigo:"Amigo(a)",madrasta:"Madrasta",padrasto:"Padrasto"},tabs:{approved:"Aprovadas",pending:"Pendentes"},list:{status:{published:"Publicada",pending:"Pendente de revis√£o"},actions:{approve:"Aprovar",reject:"Rejeitar"},forms:{relationshipLabel:"Grau de parentesco"},attachment:{sent:"Anexo enviado",previewSoon:"Anexo enviado (visualiza√ß√£o em breve)"},aria:{openEntry:"Abrir mensagem de {{author}}",close:"Fechar"}},invite:{modal:{label:"Convide para deixar uma mensagem",title:"Envie o livro de visitas",qrLabel:"Escaneie o QR Code para acessar",emailLabel:"E-mail do convidado (opcional, para pr√©-preencher)",emailPlaceholder:"convidado@email.com",generateAction:"Gerar convite",updateAction:"Atualizar convite",generating:"Gerando...",copyAction:"Copiar",copied:"Copiado!",whatsapp:"WhatsApp",email:"E-mail"},title:"Deixe uma mensagem para {{childName}}",titleFallback:"a crian√ßa",description:"Sua mensagem vai para <bold>pendentes</bold> e ser√° revisada antes de aparecer no livro de visitas.",sentTitle:"Mensagem enviada!",sentDescription:"Obrigado! Assim que for aprovada, ela aparecer√° no livro de visitas.",labels:{name:"Seu nome",email:"Seu e-mail (opcional)",relationship:"Grau de parentesco",message:"Mensagem",media:"Foto ou v√≠deo (opcional)"},placeholders:{name:"Como voc√™ se chama?",email:"voce@email.com",relationship:"Selecione...",message:"Escreva uma mensagem especial..."},hints:{videoLimit:"V√≠deos: at√© 15s.",uploading:"Enviando... {{pct}}%"},errors:{fillRequired:"Preencha seu nome, grau de parentesco e mensagem.",videoTooLong:"O v√≠deo tem {{duration}}s. Por enquanto, aceitamos at√© 15s.",sendFailed:"N√£o foi poss√≠vel enviar sua mensagem.",mediaFailed:"N√£o foi poss√≠vel anexar a m√≠dia."},notFound:{title:"Convite n√£o encontrado",description:"Este link pode ter expirado ou foi revogado.",cta:"Criar meu Babybook"},actions:{submit:"Enviar mensagem",submitting:"Enviando...",createMyDiary:"Criar meu di√°rio",wantToCreate:"Quero criar meu Babybook"},shareSubject:"Convite para deixar mensagem",shareMessage:"Deixe uma mensagem no livro de visitas {{childName}}: {{url}}"},actions:{leaveMessage:"Deixar mensagem",closeForm:"Fechar formul√°rio",invite:"Convidar"},form:{title:"Deixe uma Mensagem",labels:{name:"Seu Nome",email:"Seu E-mail (opcional)",relationship:"Grau de parentesco",media:"Foto ou v√≠deo (opcional)",message:"Sua Mensagem"},placeholders:{name:"Como voc√™ se chama?",email:"voce@email.com",relationship:"Selecione...",message:"Escreva uma mensagem especial..."},hints:{videoLimit:"V√≠deos: at√© 15s. O upload pode demorar um pouco dependendo da sua conex√£o.",uploadingAttachment:"Enviando anexo... {{pct}}%",moderation:"Sua mensagem ser√° revisada antes de ser publicada."},actions:{submit:"Enviar",submitting:"Enviando...",cancel:"Cancelar"},aria:{close:"Fechar formul√°rio de mensagem"}},tree:{selectChild:"Selecione uma crian√ßa para ver a rede afetiva a partir das mensagens aprovadas no Livro de Visitas.",empty:"Quando voc√™ aprovar mensagens, a √°rvore afetiva aparece aqui com os parentescos.",hud:{label:"√Årvore geneal√≥gica",title:"Quem faz parte da hist√≥ria",peopleCount_one:"{{count}} pessoa j√° deixou recado aprovado.",peopleCount_other:"{{count}} pessoas j√° deixaram recados aprovados.",hint:"Dica: voc√™ pode ajustar o parentesco ao aprovar mensagens na aba ‚ÄúPendentes‚Äù.",expand:"Toque para expandir",ariaExpand:"Ver √°rvore geneal√≥gica"},full:{title:"√Årvore geneal√≥gica",description:"{{childName}} ‚Ä¢ {{peopleCount}} pessoa ‚Ä¢ {{entryCount}} recado aprovado",description_plural:"{{childName}} ‚Ä¢ {{peopleCount}} pessoas ‚Ä¢ {{entryCount}} recados aprovados",source:"Baseado no Livro de Visitas",subtitle:"Mapa completo de parentescos",footnote:"Mostrando apenas mensagens aprovadas.",graph:{ariaLabel:"√Årvore geneal√≥gica (visualiza√ß√£o gr√°fica)",ariaDescription:"√Årvore geneal√≥gica de {{childName}}",footnote:"Um mapa afetivo gerado a partir das mensagens aprovadas"}},common:{child:"Crian√ßa"}},empty:{approvedTitle:"Nenhuma mensagem no livro",approvedDescription:"Compartilhe o link do Guestbook com a fam√≠lia para receber mensagens de carinho.",pendingTitle:"Tudo tranquilo por aqui",pendingDescription:"N√£o h√° novas mensagens aguardando aprova√ß√£o no momento."},hud:{title:"Livro de visitas",subtitle:"Mensagens guardadas",description:"{{count}} de {{total}} slots utilizados",actions:{expand:"Ampliar para 50"}}},health:{vaccines:{hud:{nextVaccine:"Pr√≥xima Vacina",countSeparator:"de"},empty:{title:"Calend√°rio em dia",description:"N√£o h√° vacinas pendentes para este per√≠odo. O cart√£o de vacina√ß√£o est√° atualizado!"}}},vault:{empty:{title:"Nenhum documento no cofre",description:"Use os cart√µes acima para enviar seus documentos.",addPrefix:"Adicionar"},slots:{certidao:{label:"Certid√£o de nascimento",helper:"PDF ou foto digitalizada do cart√≥rio"},cpf:{label:"CPF",helper:"Comprovante emitido pela Receita Federal"},vaccine:{label:"Carteira de vacina√ß√£o",helper:"Frente e verso atualizados"},sus:{label:"Cart√£o SUS",helper:"Identifica√ß√£o do Sistema √önico de Sa√∫de"},insurance:{label:"Plano de sa√∫de",helper:"Carteirinha do plano ou seguro"},rg:{label:"Documento de identidade",helper:"Caso o beb√™ j√° possua RG ou passaporte"}}},moments:{empty:{title:"Sua primeira mem√≥ria",description:"Ainda n√£o h√° momentos registrados. Que tal capturar a primeira mem√≥ria hoje?",action:"Criar primeiro momento"},common:{newMoment:"Novo Momento",noMediaNudge:{title:"Quer deixar esse momento ainda mais completo?",description:"Sem foto agora tudo bem. Voc√™ pode salvar e adicionar depois ‚Äî mas com uma imagem fica ainda mais gostoso de lembrar.",addNow:"Adicionar agora",saveAnyway:"Salvar mesmo assim"}},card:{actions:{openFeatured:"Abrir m√≠dia em destaque",openPhoto:"Abrir foto",openVideo:"Abrir v√≠deo",seeMore:"Ver mais",seeLess:"Ver menos",prevMedia:"M√≠dia anterior",nextMedia:"Pr√≥xima m√≠dia"},status:{draft:"Rascunho",archived:"Arquivado"},privacy:{private:"Privado",people:"Guardi√µes",public:"Link p√∫blico"},type:{recurring:"Recorrente",series:"S√©rie fixa",unique:"Momento √∫nico"},dialog:{label:"Visualiza√ß√£o de m√≠dia"},noDescription:"Sem descri√ß√£o...",noMedia:{title:"Sem m√≠dia",description:"Voc√™ pode adicionar fotos ou v√≠deos depois."},age:{years:"{{count}} ano",years_plural:"{{count}} anos",months:"{{count}} m√™s",months_plural:"{{count}} meses",days:"{{count}} dia",days_plural:"{{count}} dias"}},free:{description:"Crie um momento livre, sem necessidade de seguir um template"},draft:{selectChildFirst:"Selecione uma crian√ßa primeiro.",goToProfile:"Ir para Perfil",missingTemplateTitle:"Estamos quase l√°!",missingTemplateDescription:"Ainda n√£o temos o formul√°rio configurado para este momento ({{templateId}}). Compartilhe este identificador com o time de produto para liberarmos os campos espec√≠ficos. Enquanto isso, continue registrando com o formul√°rio gen√©rico de momentos avulsos.",backToJourney:"Voltar para a jornada",useFreeMoment:"Usar momento avulso"},wizard:{types:{photo:{label:"Foto",description:"Capture um instante especial"},video:{label:"V√≠deo",description:"Grave um momento em movimento"},audio:{label:"√Åudio",description:"Grave uma mensagem de voz"},text:{label:"Texto",description:"Escreva uma mem√≥ria"}},errors:{microphonePermission:"N√£o foi poss√≠vel acessar o microfone. Verifique as permiss√µes.",createFailed:"Erro ao criar momento. Tente novamente."},validation:{missingMedia:"Adicione uma m√≠dia para continuar.",missingAudio:"Grave ou envie um √°udio para continuar.",missingTitle:"Preencha o t√≠tulo para continuar."},stepType:{subtitle:"Como voc√™ quer registrar esse momento?"},stepMedia:{title:{photo:"Adicione suas fotos",video:"Adicione seu v√≠deo",audio:"Grave ou envie √°udio",text:"Pule esta etapa"},optionalHint:{title:"Tudo bem seguir sem m√≠dia",description:"Se estiver com pressa, continue agora e complete depois para deixar a mem√≥ria ainda mais rica.",addNow:"Adicionar agora",skipForNow:"Pular por enquanto"},upload:{tapToAddPhotos:"Toque para adicionar fotos",tapToAddVideo:"Toque para adicionar v√≠deo",dragDrop:"ou arraste e solte aqui"},audio:{start:"Iniciar Grava√ß√£o",stop:"Parar Grava√ß√£o",success:"√Åudio gravado com sucesso!",recordAgain:"Gravar novamente"},textSkip:`Voc√™ pode adicionar fotos depois, se quiser.
Continue para escrever sua mem√≥ria.`},stepDetails:{title:"Conta essa hist√≥ria",fields:{titleLabel:"T√≠tulo do momento *",titlePlaceholder:"Ex: Primeiro sorriso",dateLabel:"Quando aconteceu?",descriptionLabel:"Conte mais sobre esse momento (opcional)",descriptionPlaceholder:"O que tornou esse momento especial..."}},stepPreview:{title:"Tudo certo?",untitled:"Sem t√≠tulo",noMediaBadge:"Sem m√≠dia (adicione depois)"},stepSuccess:{title:"Momento registrado!",subtitle:"Essa mem√≥ria foi salva para sempre",cta:"Ver na Jornada"},saving:"Salvando...",saveMoment:"Salvar Momento",continue:"Continuar",continueNoMedia:"Continuar (sem m√≠dia)"},form:{fields:{titleLabel:"T√≠tulo do Momento *",titlePlaceholder:"Ex: Primeiro Sorriso",dateLabel:"Data do Momento *",summaryLabel:"Descri√ß√£o (opcional)",summaryPlaceholder:"Conte a hist√≥ria desse momento especial...",tagsPlaceholder:"Separe por v√≠rgulas"},sections:{details:"Detalhes do momento"},errors:{requiredField:"Campo obrigat√≥rio."},validation:{missingTitle:"Preencha o t√≠tulo para salvar.",missingDate:"Selecione a data para salvar.",missingField:"Preencha o campo obrigat√≥rio: {{field}}."},media:{optionalHint:{title:"Voc√™ pode adicionar fotos depois",description:"Adicione ao menos uma foto se quiser ‚Äî ela ajuda a reviver esse momento com mais carinho. Mas voc√™ pode salvar agora, sem m√≠dia."},helper:{generic:"At√© 10 m√≠dias por momento. Voc√™ adicionou {{count}}.",photos:"Fotos: {{current}}/{{max}}{{suggestionSuffix}}",photosSuggestionSuffix:" ¬∑ Sugest√£o (opcional): {{suggestion}}",videoOrAudio:"V√≠deo ou √°udio: {{current}}/{{max}}{{secondsSuffix}}{{requiredSuffix}}",video:"V√≠deo: {{current}}/{{max}}{{secondsSuffix}}{{requiredSuffix}}",audio:"√Åudio: {{current}}/{{max}}{{requiredSuffix}}",requiredSuffix:" (obrigat√≥rio)",secondsSuffix:" ({{seconds}}s)"},errors:{maxItemsGeneric:"Limite de 10 m√≠dias por momento.",photosNotAllowed:"Este momento n√£o aceita fotos.",videosNotAllowed:"Este momento n√£o aceita v√≠deos.",audiosNotAllowed:"Este momento n√£o aceita √°udios.",maxDurationExceeded:'Dura√ß√£o m√°xima: {{maxSeconds}}s. Arquivo "{{fileName}}" tem ~{{duration}}s.',maxPhotosExceeded:"Limite de fotos excedido: m√°ximo {{max}}.",minPhotosRequired:"Adicione pelo menos {{min}} foto(s).",maxVideoOrAudioExceeded:"Limite excedido: no m√°ximo {{max}} v√≠deo OU √°udio.",chooseOnlyOneVideoOrAudio:"Escolha apenas um: v√≠deo OU √°udio.",videoOrAudioRequired:"Inclua 1 v√≠deo OU √°udio para este momento.",maxVideosExceeded:"Limite de v√≠deos excedido: m√°ximo {{max}}.",videoRequired:"Inclua 1 v√≠deo para este momento.",maxAudiosExceeded:"Limite de √°udios excedido: m√°ximo {{max}}.",audioRequired:"Inclua 1 √°udio para este momento.",maxPhotos:"Limite de fotos: m√°ximo {{max}}.",maxVideoOrAudio:"Limite: no m√°ximo {{max}} v√≠deo OU √°udio.",maxVideos:"Limite de v√≠deos: m√°ximo {{max}}.",maxAudios:"Limite de √°udios: m√°ximo {{max}}."}},stamps:{emptyHint:"Gere os carimbos da m√£ozinha e do pezinho acima.",guide:{title:"Gerador de carimbo com IA",description:"A IA remove o fundo e aplica o efeito de tinta. Para um resultado melhor, use uma foto bem iluminada e com fundo limpo.",cta:"Como tirar a foto (qualidade, fundo e luz)",bullets:{1:"Use luz natural (perto de uma janela). Evite flash direto e sombras duras.",2:"Fundo liso e neutro (folha branca, mesa clara). Evite estampas e objetos por perto.",3:"Foto n√≠tida (sem tremido). Toque para focar antes de fotografar.",4:"Centralize m√£o/p√©, deixe margens e evite cortar dedos/calcanhar.",5:"Se a pele estiver muito brilhando, seque levemente e tente de novo (reflexos atrapalham)."}},readyTitle:"Artes Prontas:",handLabel:"Carimbo da M√£ozinha",footLabel:"Carimbo do Pezinho"},saving:"Salvando...",save:"Salvar Momento"}},importDelivery:{title:"Importar entrega",subtitle:"Selecione em qual Livro voc√™ quer importar essas fotos.",invalidLink:"Link inv√°lido.",notFound:"N√£o encontrei essa entrega na sua conta. Se voc√™ acabou de receber o link, tente atualizar a p√°gina.",notFoundTip:"Dica: confirme se voc√™ est√° logado(a) com o mesmo e-mail para o qual o fot√≥grafo enviou a entrega.",deliveryLabel:"Entrega",fromPartner:"De {{name}}",assetsCount:"{{count}} arquivo(s)",sentTo:"Enviado para {{email}}",noChildrenHint:"Voc√™ ainda n√£o tem nenhum Livro. Selecione ‚Äúnovo Livro‚Äù.",newChildPlaceholder:"Nome do beb√™ (opcional)",importing:"Importando‚Ä¶",cta:"Importar agora",options:{existing:{title:"Importar em um Livro existente",description:"Gr√°tis para este Livro."},new:{title:"Criar um novo Livro",description:"Pode consumir 1 cr√©dito do fot√≥grafo."}},errors:{selectChildRequired:"Selecione um beb√™ (Livro) para importar.",emailMismatch:"Esta entrega foi enviada para outro e-mail. Fa√ßa login com o e-mail correto para resgatar.",emailMismatchMasked:"Esta entrega foi enviada para outro e-mail. Fa√ßa login com {{email}} para resgatar.",generic:"Falha ao importar entrega. Tente novamente."}},myAccount:{title:"Minha Conta",user:"Usu√°rio",personalData:"Dados Pessoais",edit:"Editar",save:"Salvar",saving:"Salvando...",fullName:"Nome completo",email:"E-mail",security:"Seguran√ßa",changePassword:"Alterar Senha",changePasswordDesc:"Redefina sua senha de acesso",signOutAll:"Sair de todos os dispositivos",signOutAllDesc:"Encerra todas as sess√µes ativas (ex.: outros computadores ou celulares).",signOutAllBtn:"Encerrar sess√µes",signOutAllConfirm:"Deseja encerrar todas as sess√µes ativas? Voc√™ precisar√° logar novamente.",signOutAllError:"Erro ao encerrar sess√µes. Tente novamente.",preferences:"Prefer√™ncias",theme:"Tema",themeLight:"Claro",themeDark:"Escuro",themeSystem:"Sistema",language:"Idioma",signOut:"Sair da Conta"},notifications:{title:"Notifica√ß√µes",unread:"{{count}} n√£o lida",unread_plural:"{{count}} n√£o lidas",allClear:"Tudo em dia por aqui.",history:"Hist√≥rico",preferences:"Prefer√™ncias",markAllAsRead:"Marcar todas como lidas",emptyTitle:"Tudo em dia! üéâ",emptyDescription:"Voc√™ n√£o tem notifica√ß√µes no momento. Quando houver novidades, elas aparecer√£o aqui.",markAsRead:"Marcar como lida",tipTitle:"Dica:",tipDescription:"As notifica√ß√µes s√£o mantidas por 30 dias. Notifica√ß√µes mais antigas s√£o removidas automaticamente.",preferencesDescription:"Configure quais notifica√ß√µes voc√™ deseja receber.",pushTip:"üí° Para receber notifica√ß√µes push, certifique-se de que as notifica√ß√µes est√£o habilitadas nas configura√ß√µes do seu dispositivo.",labels:{milestones:"Marcos do Beb√™",milestonesDesc:"Lembretes sobre marcos de desenvolvimento",appointments:"Consultas e Vacinas",appointmentsDesc:"Alertas de consultas m√©dicas agendadas",guestbook:"Livro de Visitas",guestbookDesc:"Novas mensagens no livro de visitas",memories:"Mem√≥rias",memoriesDesc:"Quando momentos s√£o aprovados ou compartilhados",updates:"Atualiza√ß√µes do App",updatesDesc:"Novidades e melhorias do Baby Book"}},family:{title:"Fam√≠lia",description:"Gerencie quem pode ver e contribuir com o √°lbum do beb√™. Convide familiares e amigos para compartilhar momentos especiais.",inviteTitle:"Convidar Membro",invitePlaceholder:"email@exemplo.com",inviteSend:"Enviar",pending:"Pendente",removeMember:"Remover membro",aboutPermissions:"Sobre as permiss√µes:",roles:{owner:"Dono",ownerDesc:"tem controle total do √°lbum",guardian:"Guardi√£o",guardianDesc:"pode adicionar e editar momentos",viewer:"Visualizador",viewerDesc:"apenas visualiza o conte√∫do"}},subscription:{title:"Assinatura",currentPlan:"Plano Atual",pricePerMonth:"R$ {{price}}/m√™s",renewalOn:"Renova√ß√£o em {{date}}",changePlan:"Alterar Plano",cancel:"Cancelar",included:"Inclu√≠do no seu plano",paymentMethod:"M√©todo de Pagamento",cardEnding:"Visa ‚Ä¢ Expira em {{expiry}}",updatePayment:"Atualizar m√©todo de pagamento",features:{storage:"Armazenamento ilimitado de fotos e v√≠deos",family:"At√© 5 membros da fam√≠lia",backup:"Backup autom√°tico em nuvem",capsule:"C√°psula do tempo programada",export:"Exporta√ß√£o em alta resolu√ß√£o",support:"Suporte priorit√°rio"}},storage:{title:"Armazenamento",usedSpace:"Espa√ßo Usado",usedOfTotal:"de {{total}}",unlimited:"Ilimitado",statsByType:"Estat√≠sticas por Tipo",photos:"Fotos",videos:"V√≠deos",audios:"√Åudios",backupActive:"Backup Ativo",lastBackup:"√öltimo backup: {{time}}",backupNow:"Fazer Backup Agora",tip:"üí° <strong>Dica:</strong> Seus dados s√£o automaticamente sincronizados com a nuvem. Todos os arquivos originais s√£o mantidos em alta resolu√ß√£o."},privacy:{title:"Privacidade",description:"Configure quem pode ver e interagir com o √°lbum do seu beb√™. Suas mem√≥rias est√£o sempre protegidas.",albumVisibility:"Visibilidade do √Ålbum",albumVisibilityDesc:"Quem pode ver o √°lbum do beb√™",guestbook:"Livro de Visitas",guestbookDesc:"Quem pode deixar mensagens",shareDefault:"Compartilhamento Padr√£o",shareDefaultDesc:"Privacidade padr√£o para novos momentos",options:{onlyMe:"Somente eu",guardians:"Guardi√µes convidados",anyoneLink:"Qualquer um com o link",disabled:"Desativado",withApproval:"Com aprova√ß√£o",openToGuests:"Aberto para convidados",private:"Privado",guardiansSimple:"Guardi√µes"},securityInfo:"Todas as suas fotos e dados s√£o criptografados e armazenados com seguran√ßa. Voc√™ tem controle total sobre quem pode acessar as mem√≥rias do seu beb√™.",exportData:"Exportar Dados",exportDataDesc:"Baixe todos os seus dados e m√≠dias",deleteAccount:"Excluir Conta",deleteAccountDesc:"Remover permanentemente todos os dados"},help:{title:"Central de Ajuda",email:"E-mail",chat:"Chat",faq:"Perguntas Frequentes",footer:"Feito com amor para registrar os momentos mais preciosos da vida.",questions:{addChild:"Como adiciono uma nova crian√ßa?",addChildAnswer:"No menu lateral, clique no bot√£o 'Cadastrar crian√ßa' ou acesse 'Perfil da crian√ßa' > 'Adicionar'. Voc√™ pode cadastrar m√∫ltiplas crian√ßas e alternar entre elas facilmente.",shareFamily:"Como compartilho momentos com a fam√≠lia?",shareFamilyAnswer:"Em cada momento, clique no √≠cone de compartilhar. Voc√™ pode gerar um link √∫nico para compartilhar ou convidar guardi√µes diretamente pelo e-mail.",security:"Os dados do meu beb√™ est√£o seguros?",securityAnswer:"Sim! Utilizamos criptografia de ponta a ponta e armazenamento seguro na nuvem. Apenas voc√™ e as pessoas que voc√™ autorizar podem ver as mem√≥rias.",guestbook:"Como funciona o Livro de Visitas?",guestbookAnswer:"O Livro de Visitas permite que familiares e amigos deixem mensagens carinhosas. Voc√™ controla se as mensagens precisam de aprova√ß√£o antes de aparecer.",export:"Posso exportar minhas fotos?",exportAnswer:"Sim! No Cofre, voc√™ pode baixar todas as suas fotos e documentos a qualquer momento. Seus dados pertencem a voc√™."}},terms:{title:"Termos e Pol√≠ticas",termsOfUse:"Termos de Uso",termsOfUseDesc:"Condi√ß√µes para uso do Baby Book",updatedAt:"Atualizado em {{date}}",privacyPolicy:"Pol√≠tica de Privacidade",privacyPolicyDesc:"Como tratamos seus dados",version:"Vers√£o",rightsReserved:"Todos os direitos reservados.",questions:"D√∫vidas sobre nossos termos?",contact:"Entre em contato"},states:{loading:"Carregando...",errorTitle:"Ops! Algo deu errado",errorDescription:"Ocorreu um erro inesperado. Tente novamente ou recarregue a p√°gina.",seeErrorDetails:"Ver detalhes do erro",tryAgain:"Tentar novamente",reloadPage:"Recarregar p√°gina",updating:"Atualizando..."}},Tl={common:Cl,auth:Sl,nav:_l,partner:Al,errors:Dl,time:El,dashboard:Pl,b2c:Ml},Rl={loading:"Loading...",save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",edit:"Edit",back:"Back",next:"Next",previous:"Previous",search:"Search",filter:"Filter",close:"Close",actions:"Actions",status:"Status",date:"Date",name:"Name",email:"Email",phone:"Phone",address:"Address",description:"Description",total:"Total",details:"Details",all:"All",none:"None",yes:"Yes",no:"No",or:"or",and:"and",of:"of",error:"Error",success:"Success",warning:"Warning",info:"Info",retry:"Try again",reload:"Reload page",noResults:"No results found",required:"Required",select:"Select..."},Il={login:"Sign in",logout:"Sign out",register:"Sign up",email:"Email",password:"Password",confirmPassword:"Confirm password",forgotPassword:"Forgot password",rememberMe:"Remember me",loginTitle:"Sign in to your account",registerTitle:"Create your account",loginButton:"Sign in",registerButton:"Sign up",noAccount:"Don't have an account?",hasAccount:"Already have an account?",invalidCredentials:"Invalid email or password",logoutSuccess:"You have been signed out"},Ll={dashboard:"Dashboard",deliveries:"Deliveries",credits:"Credits",settings:"Settings",notifications:"Notifications",help:"Help",profile:"Profile"},Fl={dashboard:{title:"Partner Dashboard",welcome:"Hello",welcomeMorning:"Good morning",welcomeAfternoon:"Good afternoon",welcomeEvening:"Good evening",welcomeNewUser:"Welcome to Baby Book!",stats:{totalDeliveries:"Total Deliveries",pendingDeliveries:"Pending Deliveries",completedDeliveries:"Completed Deliveries",availableCredits:"Available Credits",reservedCredits:"Reserved Credits"},recentDeliveries:"Recent Deliveries",noRecentDeliveries:"No recent deliveries",startFirstDelivery:"Start your first delivery",viewAllDeliveries:"View all deliveries",tips:{pendingUpload:"You have photos waiting for upload. Complete to send to client!",readyDeliveries:"Deliveries ready! Generate link/voucher for your clients.",lowCredits:"Your balance is low. Get credits to avoid pausing deliveries.",growth:"{{count}} clients have already redeemed their photos. Keep growing!",firstDelivery:"Create your first delivery and surprise your clients!",creditsInfo:"Tip: when a client redeems, the credit is consumed or refunded automatically."}},deliveries:{title:"Deliveries",newDelivery:"New Delivery",list:{title:"Deliveries",backToPortal:"Back to portal",empty:"You don't have any deliveries yet",emptyDescription:"Create your first delivery to get started",filters:{title:"Filters",active:"Active filters:",clearAll:"Clear all",searchPlaceholder:"Search by client or title",status:"Status",voucher:"Voucher",redeemed:"Redeemed",date:"Date",presets:{needsAction:"Needs action",withoutVoucher:"Without voucher",redeemed:"Redeemed"},options:{all:"All",with:"With voucher",without:"Without voucher",redeemed:"Redeemed",notRedeemed:"Not redeemed"}},table:{client:"Client",status:"Status",date:"Date",actions:"Actions"},total:"total",archived:"archived",deliveriesSuffix:"deliveries"},status:{pending:"Pending",processing:"Processing",ready:"Ready",delivered:"Delivered",cancelled:"Cancelled"},all:"All",active:"Active",detail:{title:"Delivery Details",recipientInfo:"Recipient Information",deliveryInfo:"Delivery Information",mediaFiles:"Media Files",timeline:"Timeline"},create:{title:"New Delivery",step1:"Information",step2:"Media Upload",step3:"Review",recipientName:"Recipient Name",recipientEmail:"Recipient Email",recipientPhone:"Recipient Phone",message:"Message",uploadMedia:"Upload Media",dragDrop:"Drag and drop files here",orClickToUpload:"or click to select",supportedFormats:"Supported formats: JPG, PNG, MP4, PDF",review:"Review the data before confirming",confirmDelivery:"Confirm Delivery",deliveryCreated:"Delivery created successfully!"},upload:{title:"Media Upload",uploading:"Uploading...",uploaded:"Uploaded",failed:"Upload failed",retryFailed:"Retry failed",retryAll:"Retry all",removeFile:"Remove file",progress:"{{current}} of {{total}} files uploaded"},archive:{action:"Archive",unarchive:"Unarchive",success:"Delivery archived: {{title}}",unarchiveSuccess:"Delivery unarchived: {{title}}",undo:"Undo"},actions:{copyLink:"Copy link",copyId:"Copy ID",copyVoucher:"Copy voucher",generateVoucher:"Generate voucher",generateLink:"Generate link",open:"Open",details:"View details",preview:"Preview",close:"Close",linkCopied:"Link copied",idCopied:"ID copied",voucherCopied:"Voucher copied",copyFailed:"Could not copy"},sections:{client:"Client",files:"Files",created:"Created at",history:"History",voucherCredit:"Voucher / Credit",quickActions:"Quick actions"},hints:{openDetailsToGenerate:"Tip: open details to generate voucher.",keyboardShortcuts:"Tip: Esc to close ‚Ä¢ ‚Üê/‚Üí to navigate."}},onboarding:{title:"Let's get started! üöÄ",subtitle:"Follow these steps to deliver your first photos",progress:{start:"Ready to start?",continue:"Keep it up!",almost:"Almost there!",etapas:"{{current}}/{{total}} steps"},steps:{profile:{title:"Personalize your studio",description:"Your customers will see your name and brand in deliveries"},credits:{title:"Purchase credits",description:"Each credit = 1 delivery with exclusive voucher"},delivery:{title:"Send your first delivery",description:"Surprise a customer with amazing photos"},stats:{title:"Unlock advanced statistics",description:"Complete 5 deliveries to see business insights"}}},tour:{welcome:{title:"Welcome to the Partner Portal!",description:"This is your main dashboard. Here you can track deliveries, credits, and studio statistics."},credits:{title:"Your Credits",description:"Credits are used to generate vouchers. Buy packages and send photos to your customers."},stats:{title:"Statistics",description:"Track the number of deliveries, vouchers generated, and redemptions in real time."},deliveries:{title:"Recent Deliveries",description:"See your latest deliveries and track the status of each one."},notifications:{title:"Notifications",description:"Stay on top of new redemptions and important updates."},settings:{title:"User Menu",description:"Access settings, change the theme, and manage your account."}},credits:{title:"Credits",subtitle:"Choose the ideal package for your deliveries",balance:"Credit Balance",yourCredits:"Your Credits",available:"Available",reserved:"Reserved",lowBalance:"Low balance",ready_one:"ready credit",ready_other:"ready credits",waitingRedemption:"awaiting redemption",availableTooltip:"Credits available for immediate use on new deliveries",reservedTooltip:"Credits reserved for deliveries in progress",history:"Transaction History",noHistory:"No transactions found",info:{consumed:"Credit is consumed only when the client redeems photos."},purchase:{buyCredits:"Buy Credits",selectPackage:"Select a package",mostPopular:"Most Popular",vouchers:"vouchers",totalPix:"Total via PIX (cash)",totalCard:"Total via card (up to {{installments}}x no interest)",perVoucher:"/voucher",savings:"save {{value}}",paymentMethod:"Payment method",payWithPix:"Pay with PIX",payWithCard:"Pay with Card",totalToPay:"Total to pay",orderSummary:"Order Summary",continue:"Continue to Payment",secureCheckout:"üîí You will be redirected to secure checkout (Stripe) to complete payment.",howItWorks:"‚ÑπÔ∏è How credits work?",savingsVsCard:"Save {{value}} vs card",installmentsInfo:"Up to {{count}}x of <bold>{{value}}</bold> interest-free",pixInfo:"üí° With PIX: {{value}} (save {{savings}})",selectToContinue:"Select a package above to continue",processing:"Processing...",volumeDiscount:"Volume discount: {{value}}%",compare:{label:"Comparison",pix:"PIX",card:"Card",onCard:"On card",onPix:"On PIX",installmentsDetails:"Up to {{count}}x of {{value}} interest-free. Above that, interest and total appear at checkout."},info:{reserved:"When generating a voucher, 1 credit becomes RESERVED (in transit)",consumed:"On redemption: new Baby Book ‚Üí CONSUMED; existing baby ‚Üí REFUNDED (automatic refund)",unique:"The voucher is unique per delivery and grants access to that session's photos",expiration:"Credits do not expire"}},transaction:{purchase:"Credit purchase",usage:"Delivery usage",refund:"Refund",bonus:"Bonus"}},settings:{title:"Settings",profile:{title:"Profile",companyName:"Company Name",contactName:"Contact Name",email:"Email",phone:"Phone",logo:"Logo",uploadLogo:"Upload Logo",removeLogo:"Remove Logo"},preferences:{title:"Preferences",language:"Language",theme:"Theme",themeLight:"Light",themeDark:"Dark",themeSystem:"System",notifications:"Notifications",emailNotifications:"Email notifications",pushNotifications:"Push notifications"},security:{title:"Security",changePassword:"Change Password",currentPassword:"Current Password",newPassword:"New Password",confirmNewPassword:"Confirm New Password",twoFactor:"Two-factor authentication",logoutAll:"Sign out from all devices",logoutAllDesc:"Sign out from all active sessions (e.g., mobile, other computers).",logoutAllConfirm:"Do you want to sign out from all active devices? You will need to log in again."}},upload:{title:"Add Photos",backToDelivery:"Back to delivery",deliveryLabel:"Delivery",loading:"Loading delivery...",notFound:"Delivery not found",backToDeliveries:"Back to deliveries",finalizedTitle:"Delivery finalized",finalizedDescription:"Cannot add photos after voucher has been generated.",viewDelivery:"View delivery",stats:{photosInDelivery:"Photos in delivery",uploadedNow:"Uploaded now"},zone:{dragDrop:"Drag photos or click to select",formats:"JPG, PNG, WEBP ‚Ä¢ Up to 20MB per file",ariaLabel:"Select photos for upload"},list:{title:"Uploads",retry:"Retry",remove:"Remove",wait:"Wait...",finish:"Finish",cancel:"Cancel"}},details:{title:"Delivery",backToDeliveries:"Back to deliveries",created:"Created at",event:"Event",description:"Description",files:"Files",add:"Add",finalizedAdd:"Delivery finalized (cannot add files)",noFiles:"No files uploaded yet",sendFiles:"Send Files",removeFile:"Remove file",removeConfirm:"Remove?"},voucher:{label:"Voucher",ready:"Ready",redeemedAt:"Redeemed at {{date}}",notRedeemed:"Not yet redeemed",explanation:"Once generated, you'll have a card (QR Code) and a code to send to the client.",explanationNoFiles:"Upload files for this delivery to enable voucher generation.",openCard:"Open card",copy:"Copy",copied:"Voucher copied",copyFailed:"Could not copy",generate:"Generate voucher",unavailable:"Voucher unavailable",clipboardWarning:"Upload files to enable voucher generation",modal:{titleImport:"Generate import link",titleVoucher:"Generate Voucher",titleCard:"Invitation Card",descImport:"This client <bold>already has</bold> a Baby Book account. So <bold>we don't need a voucher</bold>. Upon completion, we generate an <bold>import link</bold>: ‚Ä¢ if the client imports to a <bold>child with access</bold>, there is no charge; ‚Ä¢ if the client creates a <bold>new Baby Book</bold>, <bold>1 credit</bold> will be consumed.",descVoucher:"This will <bold>reserve 1 credit</bold> (in transit). Upon redemption: ‚Ä¢ if the client creates a <bold>new Baby Book</bold>, the credit becomes <bold>CONSUMED</bold>; ‚Ä¢ if the client links to an <bold>existing baby</bold>, the credit becomes <bold>REFUNDED</bold> (automatic refund). The voucher will be unique to this delivery.",beneficiary:"Beneficiary Name",beneficiaryPlaceholder:"Name that will appear on the card",message:"Message (optional)",messagePlaceholder:"A special message for the client...",cancel:"Cancel",finalize:"Finalizing...",generateLink:"Generate Link",generateBtn:"Generate Voucher"}},status:{draft:{label:"Draft",shortLabel:"Draft",hint:"Delivery created but not sent. Add files to continue."},pending_upload:{label:"Pending upload",shortLabel:"Upload",hint:"We are waiting for you to upload files for this delivery."},processing:{label:"Processing",shortLabel:"Proc.",hint:"Your files are being processed. This may take a few minutes."},ready:{label:"Ready",shortLabel:"Ready",hint:"Delivery ready to send. Generate voucher/link for your client."},delivered:{label:"Delivered",shortLabel:"Delivered",hint:"Your client has redeemed/imported the delivery."},failed:{label:"Failed",shortLabel:"Error",hint:"There was an error processing. Try again or contact support with the delivery ID."},archived:{label:"Archived",shortLabel:"Arch.",hint:"Delivery archived (hidden from active list). You can unarchive at any time."}}},ql={generic:"Something went wrong. Please try again.",network:"Connection error. Check your internet.",notFound:"Resource not found",unauthorized:"You don't have permission to access this resource",sessionExpired:"Your session has expired. Please sign in again.",validation:"Please fix the errors in the form",serverError:"Server error. Please try again later.",offline:"You are offline",offlineDescription:"Check your internet connection"},Bl={justNow:"Just now",minutesAgo:"{{count}} minute ago",minutesAgo_plural:"{{count}} minutes ago",hoursAgo:"{{count}} hour ago",hoursAgo_plural:"{{count}} hours ago",daysAgo:"{{count}} day ago",daysAgo_plural:"{{count}} days ago",weeksAgo:"{{count}} week ago",weeksAgo_plural:"{{count}} weeks ago"},Ol={title:"Your Baby Book is safe and up to date.",storage:"Storage",moments:"Moments",recurrent:"Recurrences"},$l={dashboard:{title:"Journey",errorTitle:"Could not load the journey",errorDescription:"There was a problem fetching dashboard data. Try reloading.",hud:{title:"Your Journey",suggestion:"Next suggestion",start:"Start",hint:"Optional. You can create a free moment at any time.",momentsTitle:"Your Moments"},templates:{descoberta:{title:"The Discovery",description:"The first special moment"},"primeiro-sorriso":{title:"First Smile",description:"That unforgettable smile"},"primeira-gargalhada":{title:"First Laugh",description:"The most special sound"}}},onboarding:{title:"Welcome to Baby Book!",subtitle:"Follow these steps to complete your album",progress:{start:"Ready to start?",continue:"Keep it up!",almost:"Almost there!"},steps:{profile:{title:"Complete baby profile",description:"Add photo and important details"},moment:{title:"Record first moment",description:"Capture a special memory today"},vault:{title:"Explore the Vault",description:"Store documents and exams securely"},family:{title:"Add a family member",description:"Invite the other parent"}}},tour:{welcome:{title:"Welcome to Baby Book! üíñ",description:"This is where the magic happens. Let's show you how to organize your baby's memories."},timeline:{title:"Your Timeline",description:"All your recorded moments appear here, organized by baby's age."},bottomNav:{title:"Quick Access",description:"Navigate between journal, health, messages, and the document vault."},userMenu:{title:"Profile and Settings",description:"Switch between babies, invite family members, and access your account."}},guestbook:{title:"Guestbook",description:"Messages and memories from friends and family.",relationship:{mae:"Mother",pai:"Father",tio:"Uncle",tia:"Aunt",irmao_irma:"Brother / Sister",avo:"Grandfather",avoa:"Grandmother",amigo:"Friend",madrasta:"Stepmother",padrasto:"Stepfather"},tabs:{approved:"Approved",pending:"Pending"},list:{status:{published:"Published",pending:"Pending review"},actions:{approve:"Approve",reject:"Reject"},forms:{relationshipLabel:"Relationship degree"},attachment:{sent:"Attachment sent",previewSoon:"Attachment sent (preview soon)"},aria:{openEntry:"Open message from {{author}}",close:"Close"}},invite:{modal:{label:"Invite to leave a message",title:"Send the guestbook",qrLabel:"Scan the QR Code to access",emailLabel:"Guest email (optional, for pre-filling)",emailPlaceholder:"guest@email.com",generateAction:"Generate invite",updateAction:"Update invite",generating:"Generating...",copyAction:"Copy",copied:"Copied!",whatsapp:"WhatsApp",email:"Email"},title:"Leave a message for {{childName}}",titleFallback:"the child",description:"Your message will be sent to <bold>pending</bold> and will be reviewed before appearing in the guestbook.",sentTitle:"Message sent!",sentDescription:"Thank you! Once approved, it will appear in the guestbook.",labels:{name:"Your name",email:"Your email (optional)",relationship:"Relationship degree",message:"Message",media:"Photo or video (optional)"},placeholders:{name:"What's your name?",email:"you@email.com",relationship:"Select...",message:"Write a special message..."},hints:{videoLimit:"Videos: up to 15s.",uploading:"Uploading... {{pct}}%"},errors:{fillRequired:"Please fill in your name, relationship degree, and message.",videoTooLong:"The video is {{duration}}s long. For now, we accept up to 15s.",sendFailed:"Could not send your message.",mediaFailed:"Could not attach media."},notFound:{title:"Invite not found",description:"This link may have expired or been revoked.",cta:"Create my Babybook"},actions:{submit:"Send message",submitting:"Sending...",createMyDiary:"Create my diary",wantToCreate:"I want to create my Babybook"},shareSubject:"Invite to leave a message",shareMessage:"Leave a message in {{childName}}'s guestbook: {{url}}"},actions:{leaveMessage:"Leave message",closeForm:"Close form",invite:"Invite"},form:{title:"Leave a Message",labels:{name:"Your Name",email:"Your Email (optional)",relationship:"Relationship degree",media:"Photo or video (optional)",message:"Your Message"},placeholders:{name:"What's your name?",email:"you@email.com",relationship:"Select...",message:"Write a special message..."},hints:{videoLimit:"Videos: up to 15s. Upload may take a while depending on your connection.",uploadingAttachment:"Uploading attachment... {{pct}}%",moderation:"Your message will be reviewed before being published."},actions:{submit:"Send",submitting:"Sending...",cancel:"Cancel"},aria:{close:"Close message form"}},tree:{selectChild:"Select a child to view the affective network from the approved messages in the Guestbook.",empty:"When you approve messages, the family tree will appear here with the relationships.",hud:{label:"Family tree",title:"Who's part of the story",peopleCount_one:"{{count}} person has left an approved message.",peopleCount_other:"{{count}} people have left approved messages.",hint:"Tip: you can adjust the relationship when approving messages in the ‚ÄúPending‚Äù tab.",expand:"Tap to expand",ariaExpand:"View family tree"},full:{title:"Family tree",description:"{{childName}} ‚Ä¢ {{peopleCount}} person ‚Ä¢ {{entryCount}} approved message",description_plural:"{{childName}} ‚Ä¢ {{peopleCount}} people ‚Ä¢ {{entryCount}} approved messages",source:"Based on the Guestbook",subtitle:"Complete relationship map",footnote:"Showing only approved messages.",graph:{ariaLabel:"Family tree (graphic visualization)",ariaDescription:"Family tree of {{childName}}",footnote:"An affective map generated from approved messages"}},common:{child:"Child"}},empty:{approvedTitle:"No messages in the book",approvedDescription:"Share the Guestbook link with the family to receive affectionate messages.",pendingTitle:"All quiet here",pendingDescription:"There are no new messages waiting for approval at the moment."},hud:{title:"Guestbook",subtitle:"Saved messages",description:"{{count}} of {{total}} slots used",actions:{expand:"Expand to 50"}}},health:{vaccines:{hud:{nextVaccine:"Next Vaccine",countSeparator:"of"},empty:{title:"Schedule up to date",description:"No pending vaccines for this period. The vaccination card is up to date!"}}},vault:{empty:{title:"No documents in the vault",description:"Use the cards above to upload your documents.",addPrefix:"Add"},slots:{certidao:{label:"Birth certificate",helper:"PDF or scanned photo from the registry"},cpf:{label:"Tax ID (CPF)",helper:"Proof issued by the IRS"},vaccine:{label:"Vaccination card",helper:"Updated front and back"},sus:{label:"National Health Card",helper:"Public health identification"},insurance:{label:"Health insurance",helper:"Insurance or plan card"},rg:{label:"Identity document",helper:"If the baby already has an ID or passport"}}},moments:{empty:{title:"Your first memory",description:"No moments recorded yet. How about capturing the first memory today?",action:"Create first moment"},common:{newMoment:"New Moment",noMediaNudge:{title:"Want to make this moment even more complete?",description:"No photo right now is totally fine. You can save and add it later ‚Äî but an image makes it even nicer to revisit.",addNow:"Add now",saveAnyway:"Save anyway"}},card:{actions:{openFeatured:"Open featured media",openPhoto:"Open photo",openVideo:"Open video",seeMore:"See more",seeLess:"See less",prevMedia:"Previous media",nextMedia:"Next media"},status:{draft:"Draft",archived:"Archived"},privacy:{private:"Private",people:"Guardians",public:"Public link"},type:{recurring:"Recurring",series:"Fixed series",unique:"Unique moment"},dialog:{label:"Media viewer"},noDescription:"No description‚Ä¶",noMedia:{title:"No media",description:"You can add photos or videos later."},age:{years:"{{count}} year",years_plural:"{{count}} years",months:"{{count}} month",months_plural:"{{count}} months",days:"{{count}} day",days_plural:"{{count}} days"}},free:{description:"Create a free moment, no template required"},draft:{selectChildFirst:"Select a child first.",goToProfile:"Go to Profile",missingTemplateTitle:"Almost there!",missingTemplateDescription:"We don't have the form configured for this moment ({{templateId}}). Share this identifier with the product team so we can enable the specific fields. In the meantime, keep registering using the generic free moment form.",backToJourney:"Back to journey",useFreeMoment:"Use free moment"},wizard:{types:{photo:{label:"Photo",description:"Capture a special moment"},video:{label:"Video",description:"Record a moving moment"},audio:{label:"Audio",description:"Record a voice message"},text:{label:"Text",description:"Write a memory"}},errors:{microphonePermission:"Couldn't access the microphone. Please check your permissions.",createFailed:"Error creating the moment. Please try again."},validation:{missingMedia:"Add a media item to continue.",missingAudio:"Record or upload an audio to continue.",missingTitle:"Fill in the title to continue."},stepType:{subtitle:"How do you want to record this moment?"},stepMedia:{title:{photo:"Add your photos",video:"Add your video",audio:"Record or upload audio",text:"Skip this step"},optionalHint:{title:"It‚Äôs okay to continue without media",description:"If you‚Äôre in a hurry, keep going now and complete it later to make the memory even richer.",addNow:"Add now",skipForNow:"Skip for now"},upload:{tapToAddPhotos:"Tap to add photos",tapToAddVideo:"Tap to add a video",dragDrop:"or drag and drop here"},audio:{start:"Start recording",stop:"Stop recording",success:"Audio recorded successfully!",recordAgain:"Record again"},textSkip:`You can add photos later if you want.
Continue to write your memory.`},stepDetails:{title:"Tell this story",fields:{titleLabel:"Moment title *",titlePlaceholder:"e.g. First smile",dateLabel:"When did it happen?",descriptionLabel:"Tell us more about this moment (optional)",descriptionPlaceholder:"What made this moment special..."}},stepPreview:{title:"All set?",untitled:"Untitled",noMediaBadge:"No media (add later)"},stepSuccess:{title:"Moment saved!",subtitle:"This memory is saved forever",cta:"View in Journey"},saving:"Saving...",saveMoment:"Save Moment",continue:"Continue",continueNoMedia:"Continue (no media)"},form:{fields:{titleLabel:"Moment title *",titlePlaceholder:"e.g. First smile",dateLabel:"Moment date *",summaryLabel:"Description (optional)",summaryPlaceholder:"Tell the story of this special moment...",tagsPlaceholder:"Separate with commas"},sections:{details:"Moment details"},errors:{requiredField:"Required field."},validation:{missingTitle:"Fill in the title to save.",missingDate:"Select a date to save.",missingField:"Fill the required field: {{field}}."},media:{optionalHint:{title:"You can add photos later",description:"If you want, add at least one photo ‚Äî it helps you relive this moment with extra warmth. But you can save now with no media."},helper:{generic:"Up to 10 media items per moment. You added {{count}}.",photos:"Photos: {{current}}/{{max}}{{suggestionSuffix}}",photosSuggestionSuffix:" ¬∑ Optional suggestion: {{suggestion}}",videoOrAudio:"Video or audio: {{current}}/{{max}}{{secondsSuffix}}{{requiredSuffix}}",video:"Video: {{current}}/{{max}}{{secondsSuffix}}{{requiredSuffix}}",audio:"Audio: {{current}}/{{max}}{{requiredSuffix}}",requiredSuffix:" (required)",secondsSuffix:" ({{seconds}}s)"},errors:{maxItemsGeneric:"Limit of 10 media items per moment.",photosNotAllowed:"This moment does not allow photos.",videosNotAllowed:"This moment does not allow videos.",audiosNotAllowed:"This moment does not allow audios.",maxDurationExceeded:'Max duration: {{maxSeconds}}s. File "{{fileName}}" is ~{{duration}}s.',maxPhotosExceeded:"Photo limit exceeded: max {{max}}.",minPhotosRequired:"Add at least {{min}} photo(s).",maxVideoOrAudioExceeded:"Limit exceeded: at most {{max}} video OR audio.",chooseOnlyOneVideoOrAudio:"Choose only one: video OR audio.",videoOrAudioRequired:"Include 1 video OR audio for this moment.",maxVideosExceeded:"Video limit exceeded: max {{max}}.",videoRequired:"Include 1 video for this moment.",maxAudiosExceeded:"Audio limit exceeded: max {{max}}.",audioRequired:"Include 1 audio for this moment.",maxPhotos:"Photo limit: max {{max}}.",maxVideoOrAudio:"Limit: at most {{max}} video OR audio.",maxVideos:"Video limit: max {{max}}.",maxAudios:"Audio limit: max {{max}}."}},stamps:{emptyHint:"Generate the hand and foot stamps above.",guide:{title:"AI stamp generator",description:"AI removes the background and applies the ink effect. For best results, use a well-lit photo with a clean background.",cta:"How to take the photo (quality, background and lighting)",bullets:{1:"Use natural light (near a window). Avoid direct flash and harsh shadows.",2:"Use a plain, neutral background (white paper, light table). Avoid patterns and nearby objects.",3:"Keep it sharp (no motion blur). Tap to focus before taking the picture.",4:"Center the hand/foot, leave some margins and avoid cutting fingers/heel.",5:"If the skin is too shiny, gently dry it and try again (reflections can hurt results)."}},readyTitle:"Ready assets:",handLabel:"Hand stamp",footLabel:"Foot stamp"},saving:"Saving...",save:"Save moment"}},importDelivery:{title:"Import delivery",subtitle:"Choose which Book you want to import these photos into.",invalidLink:"Invalid link.",notFound:"I couldn't find this delivery in your account. If you just received the link, try reloading the page.",notFoundTip:"Tip: make sure you're signed in with the same email address the photographer used to send the delivery.",deliveryLabel:"Delivery",fromPartner:"From {{name}}",assetsCount:"{{count}} file(s)",sentTo:"Sent to {{email}}",noChildrenHint:"You don't have any Books yet. Select ‚Äúnew Book‚Äù.",newChildPlaceholder:"Baby name (optional)",importing:"Importing‚Ä¶",cta:"Import now",options:{existing:{title:"Import into an existing Book",description:"Free for this Book."},new:{title:"Create a new Book",description:"May consume 1 photographer credit."}},errors:{selectChildRequired:"Select a baby (Book) to import into.",emailMismatch:"This delivery was sent to a different email address. Sign in with the correct email to redeem.",emailMismatchMasked:"This delivery was sent to a different email address. Sign in with {{email}} to redeem.",generic:"Failed to import delivery. Please try again."}},myAccount:{title:"My Account",user:"User",personalData:"Personal Data",edit:"Edit",save:"Save",saving:"Saving...",fullName:"Full name",email:"Email",security:"Security",changePassword:"Change Password",changePasswordDesc:"Reset your access password",signOutAll:"Sign out from all devices",signOutAllDesc:"Ends all active sessions (e.g., other computers or phones).",signOutAllBtn:"End sessions",signOutAllConfirm:"Do you want to end all active sessions? You will need to log in again.",signOutAllError:"Error ending sessions. Try again.",preferences:"Preferences",theme:"Theme",themeLight:"Light",themeDark:"Dark",themeSystem:"System",language:"Language",signOut:"Sign Out"},notifications:{title:"Notifications",unread:"{{count}} unread",unread_plural:"{{count}} unread",allClear:"Everything is up to date.",history:"History",preferences:"Preferences",markAllAsRead:"Mark all as read",emptyTitle:"All clear! üéâ",emptyDescription:"You have no notifications at the moment. When there's news, it will appear here.",markAsRead:"Mark as read",tipTitle:"Tip:",tipDescription:"Notifications are kept for 30 days. Older notifications are automatically removed.",preferencesDescription:"Configure which notifications you want to receive.",pushTip:"üí° To receive push notifications, make sure notifications are enabled in your device settings.",labels:{milestones:"Baby Milestones",milestonesDesc:"Reminders about development milestones",appointments:"Appointments and Vaccines",appointmentsDesc:"Alerts for scheduled medical appointments",guestbook:"Guestbook",guestbookDesc:"New messages in the guestbook",memories:"Memories",memoriesDesc:"When moments are approved or shared",updates:"App Updates",updatesDesc:"News and improvements from Baby Book"}},family:{title:"Family",description:"Manage who can see and contribute to the baby's album. Invite family and friends to share special moments.",inviteTitle:"Invite Member",invitePlaceholder:"email@example.com",inviteSend:"Send",pending:"Pending",removeMember:"Remove member",aboutPermissions:"About permissions:",roles:{owner:"Owner",ownerDesc:"has full control of the album",guardian:"Guardian",guardianDesc:"can add and edit moments",viewer:"Viewer",viewerDesc:"only views the content"}},subscription:{title:"Subscription",currentPlan:"Current Plan",pricePerMonth:"${{price}}/month",renewalOn:"Renewal on {{date}}",changePlan:"Change Plan",cancel:"Cancel",included:"Included in your plan",paymentMethod:"Payment Method",cardEnding:"Visa ‚Ä¢ Expires on {{expiry}}",updatePayment:"Update payment method",features:{storage:"Unlimited photo and video storage",family:"Up to 5 family members",backup:"Automatic cloud backup",capsule:"Scheduled time capsule",export:"High-resolution export",support:"Priority support"}},storage:{title:"Storage",usedSpace:"Used Space",usedOfTotal:"of {{total}}",unlimited:"Unlimited",statsByType:"Stats by Type",photos:"Photos",videos:"Videos",audios:"Audios",backupActive:"Backup Active",lastBackup:"Last backup: {{time}} ago",backupNow:"Back Up Now",tip:"üí° <strong>Tip:</strong> Your data is automatically synced with the cloud. All original files are kept in high resolution."},privacy:{title:"Privacy",description:"Configure who can see and interact with your baby's album. Your memories are always protected.",albumVisibility:"Album Visibility",albumVisibilityDesc:"Who can see the baby's album",guestbook:"Guestbook",guestbookDesc:"Who can leave messages",shareDefault:"Default Sharing",shareDefaultDesc:"Default privacy for new moments",options:{onlyMe:"Only me",guardians:"Invited guardians",anyoneLink:"Anyone with the link",disabled:"Disabled",withApproval:"With approval",openToGuests:"Open to guests",private:"Private",guardiansSimple:"Guardians"},securityInfo:"All your photos and data are encrypted and stored securely. You have full control over who can access your baby's memories.",exportData:"Export Data",exportDataDesc:"Download all your data and media",deleteAccount:"Delete Account",deleteAccountDesc:"Permanently remove all data"},help:{title:"Help Center",email:"Email",chat:"Chat",faq:"Frequently Asked Questions",footer:"Made with love to register life's most precious moments.",questions:{addChild:"How do I add a new child?",addChildAnswer:"In the side menu, click the 'Register child' button or go to 'Child Profile' > 'Add'. You can register multiple children and easily switch between them.",shareFamily:"How do I share moments with family?",shareFamilyAnswer:"In each moment, click the share icon. You can generate a unique link to share or invite guardians directly by email.",security:"Is my baby's data safe?",securityAnswer:"Yes! We use end-to-end encryption and secure cloud storage. Only you and the people you authorize can see the memories.",guestbook:"How does the Guestbook work?",guestbookAnswer:"The Guestbook allows family and friends to leave loving messages. You control if messages need approval before appearing.",export:"Can I export my photos?",exportAnswer:"Yes! In the Vault, you can download all your photos and documents at any time. Your data belongs to you."}},terms:{title:"Terms and Policies",termsOfUse:"Terms of Use",termsOfUseDesc:"Conditions for using Baby Book",updatedAt:"Updated on {{date}}",privacyPolicy:"Privacy Policy",privacyPolicyDesc:"How we handle your data",version:"Version",rightsReserved:"All rights reserved.",questions:"Questions about our terms?",contact:"Contact us"},states:{loading:"Loading...",errorTitle:"Oops! Something went wrong",errorDescription:"An unexpected error occurred. Please try again or reload the page.",seeErrorDetails:"See error details",tryAgain:"Try again",reloadPage:"Reload page",updating:"Updating..."}},zl={common:Rl,auth:Il,nav:Ll,partner:Fl,errors:ql,time:Bl,dashboard:Ol,b2c:$l},Ul=[{code:"pt-BR",name:"Portugu√™s (BR)",flag:"üáßüá∑"},{code:"en-US",name:"English (US)",flag:"üá∫üá∏"}],li="babybook-language";function ci(){if(typeof window>"u")return"pt-BR";const t=localStorage.getItem(li);if(t&&(t==="pt-BR"||t==="en-US"))return t;const r=navigator,a=navigator.language||r.userLanguage;return a!=null&&a.startsWith("pt")?"pt-BR":a!=null&&a.startsWith("en")?"en-US":"pt-BR"}let Ta=!1;function Vl(){if(Ta)return;const t=ci();Na.use(dn).init({lng:t,fallbackLng:"pt-BR",resources:{"pt-BR":{translation:Tl},"en-US":{translation:zl}},interpolation:{escapeValue:!1},react:{useSuspense:!1}}),Ta=!0}const di=c.createContext(null);function Kl({children:t}){Ta||Vl();const[r,a]=c.useState(()=>ci()),s=c.useCallback(o=>{Na.changeLanguage(o),localStorage.setItem(li,o),a(o),document.documentElement.lang=o},[]);c.useEffect(()=>{document.documentElement.lang=r},[r]);const l={language:r,setLanguage:s,languages:Ul};return e.jsx(di.Provider,{value:l,children:e.jsx(cn,{i18n:Na,children:t})})}function St(){const t=c.useContext(di);if(!t)throw new Error("useLanguage must be used within an I18nProvider");return t}const ce=mn;function D(...t){return un(xn(t))}const ke=Fo()(jn(t=>({user:null,isAuthenticated:!1,isLoading:!1,csrfToken:null,sessionToken:null,login:r=>t({user:r,isAuthenticated:!0}),logout:()=>t({user:null,isAuthenticated:!1,csrfToken:null,sessionToken:null}),setLoading:r=>t({isLoading:r}),setCsrfToken:r=>t({csrfToken:r}),setSessionToken:r=>t({sessionToken:r})}),{name:"babybook-auth",partialize:t=>({user:t.user,isAuthenticated:t.isAuthenticated,csrfToken:t.csrfToken,sessionToken:t.sessionToken})})),Le=K().refine(t=>!Number.isNaN(Date.parse(t)),{message:"Invalid ISO 8601 date"}),mi=Ce({id:K().uuid(),name:K(),birthday:Le.nullable().optional(),avatar_url:K().url().nullable().optional(),created_at:Le,updated_at:Le}),ui=mi.transform(t=>({id:t.id,name:t.name,birthday:t.birthday??null,avatarUrl:t.avatar_url??null,createdAt:t.created_at,updatedAt:t.updated_at})),nr=t=>Ce({items:Ar(t),next:K().nullable()}),Gl=nr(mi).transform(({items:t,next:r})=>({items:t.map(a=>ui.parse(a)),next:r})),Hl=Ce({id:K(),type:Je(["image","video","audio"]),url:K().url().optional(),key:K().optional(),durationSeconds:Ee().int().optional(),variants:Ar(Ce({preset:K(),key:K().optional(),url:K().url().optional(),size_bytes:Ee().int().nonnegative().optional(),width_px:Ee().int().positive().nullable().optional(),height_px:Ee().int().positive().nullable().optional(),kind:Je(["photo","video","audio"]).optional()})).optional()}),Wl=Hl.transform(t=>{var r;return{id:t.id,kind:t.type==="image"?"photo":t.type,url:t.url??null,key:t.key??null,durationSeconds:t.durationSeconds,variants:(r=t.variants)==null?void 0:r.map(a=>({preset:a.preset,key:a.key??null,url:a.url??null,sizeBytes:a.size_bytes??null,widthPx:a.width_px??null,heightPx:a.height_px??null,kind:a.kind??(t.type==="image"?"photo":t.type)}))}}),xi=Ce({id:K().uuid(),child_id:K().uuid(),template_key:K().nullable(),title:K(),summary:K().nullable(),occurred_at:Le.nullable(),status:Je(["draft","published","archived"]),privacy:Je(["private","people","public"]),payload:Eo(Po()).nullish(),rev:Ee().int(),created_at:Le,updated_at:Le,published_at:Le.nullable()}),rs=xi.transform(t=>{const r=t.payload??{},a=r.media,s=Array.isArray(a)?a.map(l=>Wl.safeParse(l)).filter(l=>l.success).map(l=>l.data):[];return{id:t.id,childId:t.child_id,templateKey:t.template_key,title:t.title,summary:t.summary,occurredAt:t.occurred_at,status:t.status,privacy:t.privacy,payload:r,rev:t.rev,createdAt:t.created_at,updatedAt:t.updated_at,publishedAt:t.published_at,media:s}}),Ql=nr(xi).transform(({items:t,next:r})=>({items:t.map(a=>rs.parse(a)),next:r})),bi=Ce({id:K().uuid(),child_id:K().uuid(),author_name:K(),author_email:K().email().nullable(),relationship_degree:Je(["mae","pai","tio","tia","irmao_irma","avo","avoa","amigo","madrasta","padrasto"]),message:K(),status:Je(["approved","pending","hidden"]),created_at:Le,asset_id:K().uuid().nullable().optional()}),Rr=bi.transform(t=>({id:t.id,childId:t.child_id,authorName:t.author_name,authorEmail:t.author_email??null,relationshipDegree:t.relationship_degree,message:t.message,status:t.status,createdAt:t.created_at,assetId:t.asset_id??null})),Yl=nr(bi).transform(({items:t,next:r})=>({items:t.map(a=>Rr.parse(a)),next:r})),pi=Ce({id:K().uuid(),childId:K().uuid(),date:Le,weight:Ee().nullable().optional(),height:Ee().nullable().optional()}),hi=Ce({id:K().uuid(),child_id:K().uuid(),date:Le,reason:K(),notes:K().nullable().optional(),created_at:Le}),gi=hi.transform(t=>({id:t.id,childId:t.child_id,date:t.date,reason:t.reason,notes:t.notes??null,createdAt:t.created_at})),Jl=nr(hi).transform(({items:t,next:r})=>({items:t.map(a=>gi.parse(a)),next:r})),fi=Ce({id:K().uuid(),child_id:K().uuid(),name:K(),due_date:Le,applied_at:Le.nullable(),status:Je(["scheduled","completed","overdue"]),notes:K().nullable().optional()}),Xl=fi.transform(t=>({id:t.id,childId:t.child_id,name:t.name,dueDate:t.due_date,appliedAt:t.applied_at,status:t.status,notes:t.notes??null})),Zl=nr(fi).transform(({items:t,next:r})=>({items:t.map(a=>Xl.parse(a)),next:r})),ec=Je(["certidao","cpf_rg","sus_plano","outro"]),tc=Je(["active","paused"]),rc=Ce({pix_key:K().min(3).nullable().optional(),bank_account:Ce({bank:K().min(1),agency:K().min(1),account:K().min(1),document:K().min(1),name:K().min(1)}).nullable().optional()}).transform(t=>({pixKey:t.pix_key??null,bankAccount:t.bank_account??null})),ac=Ce({id:K().uuid(),code:K().min(2),name:K().min(1),email:K().email(),status:tc,commission_rate:Ee().min(0).max(1),created_at:Le,updated_at:Le,payout_method:rc.optional()});ac.transform(t=>({id:t.id,code:t.code,name:t.name,email:t.email,status:t.status,commissionRate:t.commission_rate,createdAt:t.created_at,updatedAt:t.updated_at,payoutMethod:t.payout_method??null}));const sc=Je(["pending","approved","refunded"]),oc=Ce({id:K().uuid(),affiliate_id:K().uuid(),order_id:K().min(1),occurred_at:Le,amount_cents:Ee().int().nonnegative(),commission_cents:Ee().int().nonnegative(),status:sc});oc.transform(t=>({id:t.id,affiliateId:t.affiliate_id,orderId:t.order_id,occurredAt:t.occurred_at,amountCents:t.amount_cents,commissionCents:t.commission_cents,status:t.status}));const ic=Je(["requested","paid","rejected"]),nc=Ce({id:K().uuid(),affiliate_id:K().uuid(),amount_cents:Ee().int().positive(),status:ic,requested_at:Le,paid_at:Le.nullable(),note:K().nullable().optional()});nc.transform(t=>({id:t.id,affiliateId:t.affiliate_id,amountCents:t.amount_cents,status:t.status,requestedAt:t.requested_at,paidAt:t.paid_at,note:t.note??null}));const lc=Ce({default_commission_rate:Ee().min(0).max(1),minimum_payout_cents:Ee().int().nonnegative()});lc.transform(t=>({defaultCommissionRate:t.default_commission_rate,minimumPayoutCents:t.minimum_payout_cents}));const vi=Ce({id:K().uuid(),child_id:K().uuid(),kind:ec,asset_id:K().uuid(),note:K().nullable(),created_at:Le}),cc=vi.transform(t=>({id:t.id,childId:t.child_id,kind:t.kind,assetId:t.asset_id,note:t.note??null,createdAt:t.created_at}));nr(vi).transform(({items:t,next:r})=>({items:t.map(a=>cc.parse(a)),next:r}));const dc=Ce({bytes_used:Ee().nonnegative(),bytes_quota:Ee().nonnegative(),moments_used:Ee().int().nonnegative(),moments_quota:Ee().int().nonnegative()}),mc=dc.transform(t=>({bytesUsed:t.bytes_used,bytesQuota:t.bytes_quota,momentsUsed:t.moments_used,momentsQuota:t.moments_quota})),uc=Je(["owner","guardian","viewer","photographer","admin"]),xc=Ce({id:K().uuid(),email:K().email(),name:K(),locale:K().nullable().optional(),role:uc.optional(),has_purchased:Qr().optional(),onboarding_completed:Qr().optional()}),as=xc.transform(t=>({id:t.id,email:t.email,name:t.name,locale:t.locale??"pt-BR",role:t.role??"owner",hasPurchased:t.has_purchased??!1,onboardingCompleted:t.onboarding_completed??!1})),yi=Ce({delivery_id:K().uuid(),partner_name:K().nullable().optional(),title:K(),target_email:K().email().nullable().optional(),target_email_masked:K().nullable().optional(),assets_count:Ee().int().nonnegative().optional(),created_at:Le}),bc=yi.transform(t=>({deliveryId:t.delivery_id,partnerName:t.partner_name??null,title:t.title,targetEmail:t.target_email??null,targetEmailMasked:t.target_email_masked??null,assetsCount:t.assets_count??0,createdAt:t.created_at})),pc=Ce({items:Ar(yi),total:Ee().int().nonnegative()}).transform(({items:t,total:r})=>({items:t.map(a=>bc.parse(a)),total:r})),hc=Ce({success:Qr().optional(),delivery_id:K().uuid(),assets_transferred:Ee().int().nonnegative().optional(),child_id:K().uuid(),moment_id:K().uuid(),message:K()}),Us=hc.transform(t=>({success:t.success??!0,deliveryId:t.delivery_id,assetsTransferred:t.assets_transferred??0,childId:t.child_id,momentId:t.moment_id,message:t.message})),gc=Ce({preset:K().max(80),key:K().max(255),size_bytes:Ee().int().nonnegative(),width_px:Ee().int().positive().nullable().optional(),height_px:Ee().int().positive().nullable().optional(),kind:Je(["photo","video","audio"])});Ce({status:Je(["queued","processing","ready","failed"]).optional(),duration_ms:Ee().int().nonnegative().nullable().optional(),error_code:K().max(120).nullable().optional(),viewer_accessible:Qr().optional(),key_original:K().max(255).nullable().optional(),variants:Ar(gc).optional()});const fc=Ce({error:Ce({code:K(),message:K(),details:Eo(Po()).optional(),trace_id:K()})}).transform(({error:t})=>({error:{code:t.code,message:t.message,details:t.details,traceId:t.trace_id}})),vc="true".toLowerCase(),ji=vc!=="false",yc="false".toLowerCase(),jc="false".toLowerCase(),kc=jc==="true",Vs=yc==="true"&&kc,Ks="http://localhost:8000".trim(),pa="/api",wc=t=>t.endsWith("/")?t:`${t}/`,Nc=()=>{if(ji)return[pa];const t=[];return Ks&&t.push(Ks),t.includes(pa)||t.push(pa),t},ha=Nc(),Cc=()=>{var t;if(typeof window>"u")return null;try{const r=window.localStorage.getItem("babybook-auth");if(!r)return null;const a=JSON.parse(r),s=(t=a==null?void 0:a.state)==null?void 0:t.sessionToken;return typeof s=="string"&&s?s:null}catch{return null}};class _t extends Error{constructor(a){super(a.message);He(this,"status");He(this,"code");He(this,"traceId");He(this,"details");this.status=a.status,this.code=a.code,this.traceId=a.traceId,this.details=a.details}}const Sc=(t,r,a)=>{var o;const s=r.startsWith("/")?r:`/${r}`;let l;if(/^https?:\/\//i.test(t))l=new URL(s.replace(/^\//,""),wc(t));else{if(typeof window>"u"||!((o=window.location)!=null&&o.origin))throw new Error("Relative API base URL requires window.location");const i=t.startsWith("/")?t:`/${t}`;l=new URL(`${i.replace(/\/$/,"")}${s}`,window.location.origin)}return a&&Object.entries(a).forEach(([i,n])=>{n==null||n===""||l.searchParams.set(i,String(n))}),l.toString()},_c=t=>{const r=fc.safeParse(t);return r.success?r.data:void 0},Ac=(t,r,a)=>{if(t===401){const s=window.location.pathname;if(a!=null&&a.startsWith("/me"))return;!["/login","/register","/forgot-password","/pro/login","/pro/register"].some(o=>s===o||s.startsWith(`${o}/`))&&!s.includes("/login")&&!s.includes("/auth")&&window.location.assign(`/login?redirectTo=${encodeURIComponent(s)}`)}t===402&&r==="quota.recurrent_limit.exceeded"&&console.warn("Upsell required: quota.recurrent_limit.exceeded")};async function Dc(t,r,a){const s=Sc(t,r,a.searchParams),l={...a.headers??{}};if(Vs&&!l["X-BB-Session"]){let p=ke.getState().sessionToken;p||(p=Cc(),p&&ke.getState().setSessionToken(p)),p&&(l["X-BB-Session"]=p)}const o=a.method??"GET";if(o!=="GET"&&!l["X-CSRF-Token"]){const p=ke.getState().csrfToken;p&&(l["X-CSRF-Token"]=p)}let i;a.body instanceof FormData?i=a.body:a.body!==void 0&&(l["Content-Type"]="application/json",i=JSON.stringify(a.body));const n=await fetch(s,{method:o,headers:l,body:i,credentials:"include"});if(Vs){const p=n.headers.get("X-BB-Session")??void 0;p&&ke.getState().setSessionToken(p)}const d=n.headers.get("X-Trace-Id")??void 0,u=n.status!==204;let m;if(u)try{m=await n.json()}catch{m=void 0}if(!n.ok){const p=_c(m),f=p==null?void 0:p.error.code;throw Ac(n.status,f,r),new _t({status:n.status,message:(p==null?void 0:p.error.message)??"Request failed",code:f,traceId:(p==null?void 0:p.error.traceId)??d,details:p==null?void 0:p.error.details})}if(m)return a.schema?a.schema.parse(m):m}async function zr(t,r={}){let a;for(const s of ha)try{return await Dc(s,t,r)}catch(l){const o=l instanceof TypeError,i=s===ha[ha.length-1];if(!o||ji||i)throw l;a=l,console.warn(`[babybook] Falha ao contactar ${s}. Tentando fallback local...`,l)}throw a??new Error("API request failed")}const re={get(t,r){return zr(t,{...r,method:"GET"})},post(t,r,a){return zr(t,{...a,method:"POST",body:r})},patch(t,r,a){return zr(t,{...a,method:"PATCH",body:r})},delete(t,r){return zr(t,{...r,method:"DELETE"})}},Ec={maxAttempts:3,baseDelayMs:100,backoffMultiplier:2,shouldRetry:()=>!0,onRetry:()=>{}};async function Pc(t,r={}){const a={...Ec,...r};let s;for(let l=1;l<=a.maxAttempts;l++)try{return await t()}catch(o){if(s=o,l>=a.maxAttempts||!a.shouldRetry(o,l))break;const i=a.baseDelayMs*Math.pow(a.backoffMultiplier,l-1);a.onRetry(o,l,i),await Mc(i)}throw s}function Mc(t){return new Promise(r=>setTimeout(r,t))}const ss="@babybook/affiliate-referral/v1",Tc=30*24*60*60*1e3;function Ra(){return Date.now()}function Rc(t){return/^[a-z0-9][a-z0-9_-]{2,63}$/i.test(t)}function Ic(t,r){if(!t)return;const a=new URLSearchParams(t);for(const s of r){const l=a.get(s);if(!l)continue;const o=l.trim();if(o)return o}}function Lc(t,r){if(typeof window>"u")return;const a=Ic(t,["ref","affiliate","affiliate_code"]);if(!a)return;const s=a.trim();if(!Rc(s))return;const l=Tc,o=new Date(Ra()).toISOString(),i=new Date(Ra()+l).toISOString(),n={code:s,capturedAt:o,expiresAt:i};try{window.localStorage.setItem(ss,JSON.stringify(n))}catch{}return s}function os(){if(!(typeof window>"u"))try{const t=window.localStorage.getItem(ss);if(!t)return;const r=JSON.parse(t);if(typeof(r==null?void 0:r.code)!="string"||!r.code||typeof(r==null?void 0:r.expiresAt)!="string"||!r.expiresAt)return;const a=Date.parse(r.expiresAt);if(!Number.isFinite(a)||a<=Ra()){Fc();return}return r.code}catch{return}}function Fc(){if(!(typeof window>"u"))try{window.localStorage.removeItem(ss)}catch{}}const qc=Ce({id:K(),token:K(),url:K().url(),child_id:K().uuid(),invited_email:K().email().nullable(),expires_at:K().datetime().nullable()}),Bc=Ce({token:K(),child_id:K().uuid(),child_name:K(),invited_email:K().email().nullable(),expires_at:K().datetime().nullable()});async function is(){try{return await Pc(async()=>{const a=await re.get("/auth/csrf");if(!a||typeof a.csrf_token!="string")throw new Error("Resposta inv√°lida do servidor de autentica√ß√£o");return a.csrf_token},{maxAttempts:3,baseDelayMs:100,onRetry:(a,s,l)=>{}})}catch{throw new Error("N√£o foi poss√≠vel conectar ao servidor de autentica√ß√£o. Verifique sua conex√£o e tente novamente.")}}const ns=t=>be({queryKey:["children"],enabled:(t==null?void 0:t.enabled)??!0,queryFn:async()=>(await re.get("/children",{schema:Gl})).items}),Oc=()=>{const t=Ae();return Se({mutationFn:async r=>re.post("/children",{name:r.name,birthday:r.birthday,avatar_url:r.avatarUrl},{schema:ui}),onSuccess:()=>{t.invalidateQueries({queryKey:["children"]})}})},$c=t=>be({queryKey:["pending-direct-deliveries"],enabled:(t==null?void 0:t.enabled)??!0,queryFn:async()=>re.get("/me/deliveries/pending",{schema:pc})}),zc=()=>{const t=Ae();return Se({mutationFn:async r=>{const a=$a();return r.action.type==="EXISTING_CHILD"?re.post(`/me/deliveries/${r.deliveryId}/import`,{idempotency_key:a,action:{type:"EXISTING_CHILD",child_id:r.action.childId}},{schema:Us}):re.post(`/me/deliveries/${r.deliveryId}/import`,{idempotency_key:a,action:{type:"NEW_CHILD",child_name:r.action.childName}},{schema:Us})},onSuccess:()=>{t.invalidateQueries({queryKey:["pending-direct-deliveries"]}),t.invalidateQueries({queryKey:["children"]})}})},Uc=t=>be({queryKey:["moments",t],enabled:!!t,queryFn:async()=>t?(await re.get("/moments",{schema:Ql,searchParams:{child_id:t}})).items:[]}),Vc=t=>be({queryKey:["moment",t],enabled:!!t,queryFn:async()=>{if(t)return re.get(`/moments/${t}`,{schema:rs})}}),ki=()=>{const t=Ae();return Se({mutationFn:async r=>re.post("/moments",{child_id:r.childId,title:r.title,summary:r.summary,occurred_at:r.occurredAt,template_key:r.templateKey,privacy:r.privacy,payload:r.payload},{schema:rs}),onSuccess:r=>{t.invalidateQueries({queryKey:["moments",r.childId]})}})},wi=()=>{const t=Ae();return Se({mutationFn:async r=>{const a=await is();ke.getState().setCsrfToken(a),await re.post("/auth/login",{email:r.email,password:r.password,csrf_token:a,remember_me:r.rememberMe??!1})},onSuccess:()=>{t.invalidateQueries({queryKey:["user-profile"]})}})},Kc=()=>{const t=Ae();return Se({mutationFn:async r=>{const a=await is();ke.getState().setCsrfToken(a),await re.post("/auth/register",{email:r.email,password:r.password,csrf_token:a,name:r.name})},onSuccess:()=>{t.invalidateQueries({queryKey:["user-profile"]})}})},ls=()=>{const t=Ae();return Se({mutationFn:async()=>{try{await re.post("/auth/logout")}catch(r){if(r instanceof _t&&(r.status===401||r.status===405))return;throw r}},onSuccess:()=>{t.removeQueries({queryKey:["user-profile"]})}})},Gc=()=>Se({mutationFn:async t=>{const r=os();return re.post("/webhooks/checkout",{package_key:t.packageKey,affiliate_code:r})}}),Hc=()=>{const t=Ae();return Se({mutationFn:async r=>{const a=r.affiliateCode??os();return re.post("/webhooks/mock-complete",{account_id:r.accountId,package_key:r.packageKey,affiliate_code:a})},onSuccess:()=>t.invalidateQueries({queryKey:["user-profile"]})})},Wc=()=>{const t=Ae();return Se({mutationFn:async r=>{try{const a=await is();return await re.post("/auth/password/forgot",{email:r.email,csrf_token:a})}catch(a){if(a instanceof _t&&(a.status===404||a.status===405))return{status:"ok",mock:!0};throw a}},onSuccess:()=>t.invalidateQueries({queryKey:["user-profile"]})})},cs=t=>be({queryKey:["guestbook",t],enabled:!!t,queryFn:async()=>t?(await re.get("/guestbook",{schema:Yl,searchParams:{child_id:t}})).items:[]}),Qc=()=>{const t=Ae();return Se({mutationFn:async r=>re.post("/guestbook",{child_id:r.childId,author_name:r.authorName,author_email:r.authorEmail,relationship_degree:r.relationshipDegree,message:r.message,asset_id:r.assetId},{schema:Rr}),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["guestbook",a.childId]})}})},Yc=()=>Se({mutationFn:async t=>re.post("/guestbook/invites",{child_id:t.childId,invited_email:t.invitedEmail,expires_at:t.expiresAt??null,message_opt:t.messageOpt},{schema:qc})}),Jc=t=>be({queryKey:["guestbook-invite",t],enabled:!!t,queryFn:async()=>t?re.get(`/guestbook/invites/${t}`,{schema:Bc}):null}),Xc=()=>Se({mutationFn:async t=>re.post(`/guestbook/invites/${t.token}/entries`,{author_name:t.authorName,author_email:t.authorEmail,relationship_degree:t.relationshipDegree,message:t.message,asset_id:t.assetId},{schema:Rr})}),Zc=()=>{const t=Ae();return Se({mutationFn:async r=>re.post(`/guestbook/${r.entryId}/approve`,{relationship_degree:r.relationshipDegree??null},{schema:Rr}),onSuccess:r=>{t.invalidateQueries({queryKey:["guestbook",r.childId]})}})},ed=()=>{const t=Ae();return Se({mutationFn:async r=>re.post(`/guestbook/${r.entryId}/reject`,{},{schema:Rr}),onSuccess:r=>{t.invalidateQueries({queryKey:["guestbook",r.childId]})}})},td=t=>be({queryKey:["health-measurements",t],enabled:!!t,queryFn:async()=>{if(!t)return[];try{return await re.get(`/children/${t}/health/measurements`,{schema:Ar(pi)})}catch(r){if(r instanceof _t&&r.status===404)return[];throw r}}}),rd=()=>{const t=Ae();return Se({mutationFn:async r=>{try{return await re.post("/health/measurements",r,{schema:pi})}catch(a){if(a instanceof _t&&a.status===404)return{...r,id:$a()};throw a}},onSuccess:r=>{t.invalidateQueries({queryKey:["health-measurements",r.childId]})}})},ad=t=>be({queryKey:["health-visits",t],enabled:!!t,queryFn:async()=>{if(!t)return[];try{return(await re.get("/health/visits",{schema:Jl,searchParams:{child_id:t}})).items}catch(r){if(r instanceof _t&&r.status===404)return[];throw r}}}),sd=()=>{const t=Ae();return Se({mutationFn:async r=>{try{return await re.post("/health/visits",{child_id:r.childId,date:r.date,reason:r.reason,notes:r.notes},{schema:gi})}catch(a){if(a instanceof _t&&a.status===404)return{id:$a(),childId:r.childId,date:r.date,reason:r.reason,notes:r.notes??null,createdAt:new Date().toISOString()};throw a}},onSuccess:r=>{t.invalidateQueries({queryKey:["health-visits",r.childId]})}})},od=t=>be({queryKey:["health-vaccines",t],enabled:!!t,queryFn:async()=>{if(!t)return[];try{return(await re.get("/health/vaccines",{schema:Zl,searchParams:{child_id:t}})).items}catch(r){if(r instanceof _t&&r.status===404)return[];throw r}}}),Ni=t=>be({queryKey:["user-profile"],enabled:!0,queryFn:async()=>re.get("/me",{schema:as})}),id=t=>be({queryKey:["storage-quota",(t==null?void 0:t.childId)??null],enabled:((t==null?void 0:t.enabled)??!0)&&!!(t!=null&&t.childId),queryFn:async()=>{const r=t==null?void 0:t.childId;if(!r)throw new Error("useStorageQuota requer childId (o backend exige child_id em /me/usage)");return re.get("/me/usage",{schema:mc,searchParams:{child_id:r}})}}),ga=Fo(t=>({selectedChildId:null,setSelectedChildId:r=>t({selectedChildId:r}),clearSelectedChild:()=>t({selectedChildId:null}),theme:"light",setTheme:r=>t({theme:r})})),je=(t,r="10:00:00")=>`${t}T${r}Z`,ot="0b1f0d9a-6c4a-4b83-9a77-3f3c0e2e3c11",yr="3a1d0c72-0c2d-4f9b-9ad9-4f2b77b3a0e1",We=({id:t,childId:r,title:a,summary:s,occurredAt:l=null,templateKey:o=null,status:i="draft",privacy:n="private",media:d=[],payload:u,createdAt:m,updatedAt:p,publishedAt:f})=>({id:t,childId:r,title:a,summary:s,occurredAt:l,templateKey:o,status:i,privacy:n,payload:u??{},media:d.map(x=>{var b;return{id:x.id,kind:x.kind,url:x.url??null,key:x.key??null,durationSeconds:x.durationSeconds??void 0,variants:(b=x.variants)==null?void 0:b.map(g=>({preset:g.preset,url:g.url??null,key:g.key??null,sizeBytes:g.sizeBytes??null,widthPx:g.widthPx??null,heightPx:g.heightPx??null,kind:g.kind??x.kind}))}}),rev:1,createdAt:m??je("2024-01-01"),updatedAt:p??m??je("2024-01-01","12:00:00"),publishedAt:i==="published"?f??p??null:null}),nd={id:ot,name:"Alice",birthday:"2024-03-15",avatarUrl:"https://images.unsplash.com/photo-1503454537195-1dcabb73ffb9?w=240&h=240&fit=crop",createdAt:"2024-03-15T00:00:00Z",updatedAt:"2024-05-01T00:00:00Z"},ld=[nd,{id:yr,name:"Theo",birthday:"2023-06-20",avatarUrl:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=240&h=240&fit=crop",createdAt:"2023-06-20T00:00:00Z",updatedAt:"2024-02-15T00:00:00Z"}];We({id:"b6f2d8b2-9f8e-4a40-9e7a-7b1b5d7d2a00",childId:ot,title:"A Grande Descoberta",summary:"O momento em que tudo come√ßou ‚Äî rea√ß√µes, emo√ß√µes e o primeiro susto bom.",occurredAt:"2024-03-15",templateKey:"capitulo_1_descoberta",status:"published",payload:{chapter:"Cap. 1 - Bem-vindo ao mundo",milestone:"Parto humanizado"},media:[{id:"bb-alice-newborn",kind:"photo",url:"https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?w=900&fit=crop",key:"media/mock/bb-alice-newborn/original.jpg",variants:[{preset:"thumb",url:"https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?w=300&fit=crop"},{preset:"full",url:"https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?w=1600&fit=crop"}]}],createdAt:je("2024-03-15","08:10:00"),updatedAt:je("2024-03-16","07:55:00"),publishedAt:je("2024-03-16","07:55:00")}),We({id:"b6f2d8b2-9f8e-4a40-9e7a-7b1b5d7d2a01",childId:ot,title:"Primeira Noite",summary:"A primeira noite em casa ‚Äî ajustes, rotinas e aquele sil√™ncio novo.",occurredAt:"2024-03-18",templateKey:"capitulo_2_primeira_noite",status:"published",payload:{chapter:"Cap. 2 - Nosso Novo Lar",checklist:["Luzes √¢mbar","Som de chuva"]},media:[{id:"bb-alice-room",kind:"photo",url:"https://images.unsplash.com/photo-1500534314210-9ea7b04b9ccd?w=900&fit=crop"}],createdAt:je("2024-03-18","21:00:00"),updatedAt:je("2024-03-19","09:12:00"),publishedAt:je("2024-03-19","09:12:00")}),We({id:"b6f2d8b2-9f8e-4a40-9e7a-7b1b5d7d2a02",childId:ot,title:"Primeiro Banho",summary:"O primeiro banho ‚Äî √°gua na temperatura certa e muita fofura.",occurredAt:"2024-03-20",templateKey:"capitulo_2_primeiro_banho",status:"published",media:[{id:"bb-alice-bath",kind:"photo",url:"https://images.unsplash.com/photo-1504593811423-6dd665756598?w=900&fit=crop"}],payload:{chapter:"Cap. 2 - Nosso Novo Lar",careTips:["√Ågua a 36¬∫","Manta aquecida"]},createdAt:je("2024-03-21","10:15:00"),updatedAt:je("2024-03-21","10:15:00"),publishedAt:je("2024-03-21","10:15:00")}),We({id:"b6f2d8b2-9f8e-4a40-9e7a-7b1b5d7d2a03",childId:ot,title:"Primeiro Sorriso",summary:"Aquele sorriso que muda o dia inteiro.",occurredAt:"2024-04-25",templateKey:"capitulo_3_primeiro_sorriso",status:"draft",media:[{id:"bb-alice-smile",kind:"photo",url:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=900&fit=crop"}],payload:{chapter:"Cap. 3 - Primeiras descobertas",milestone:"Intera√ß√£o social"},createdAt:je("2024-04-26","08:00:00")}),We({id:"b6f2d8b2-9f8e-4a40-9e7a-7b1b5d7d2a08",childId:ot,title:"Primeiro Rolamento",summary:"Registramos o treino na manta Montessori.",occurredAt:"2024-05-30",templateKey:"capitulo_3_primeiro_rolamento",status:"draft",media:[{id:"bb-alice-roll",kind:"video",url:"https://videos.pexels.com/video-files/4149834/4149834-uhd_2560_1440_24fps.mp4",durationSeconds:14}],payload:{chapter:"Cap. 3 - Primeiras descobertas",milestone:"Coordena√ß√£o motora grossa"},createdAt:je("2024-05-30","19:00:00")}),We({id:"b6f2d8b2-9f8e-4a40-9e7a-7b1b5d7d2a09",childId:ot,title:"Primeiro Dente",summary:"Dois incisivos inferiores apareceram de um dia para o outro.",occurredAt:"2024-08-25",templateKey:"capitulo_3_primeiro_dente",status:"published",privacy:"people",media:[{id:"bb-alice-tooth",kind:"photo",url:"https://images.unsplash.com/photo-1470167290877-7d5d3446de4c?w=900&fit=crop"}],payload:{chapter:"Cap. 3 - Primeiras descobertas",milestone:"Denti√ß√£o"},createdAt:je("2024-08-25","17:45:00"),updatedAt:je("2024-08-26","09:00:00"),publishedAt:je("2024-08-26","09:00:00")}),We({id:"b6f2d8b2-9f8e-4a40-9e7a-7b1b5d7d2a06",childId:ot,title:"Visita Especial - Av√≥s",summary:"Segunda visita da vov√≥ e v√¥ para refor√ßar o v√≠nculo.",occurredAt:"2024-09-05",templateKey:"capitulo_4_visita_especial",status:"published",media:[{id:"bb-alice-grandparents",kind:"photo",url:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=900&fit=crop"}],payload:{chapter:"Cap. 4 - Vila reunida",recurrenceSlot:2,upsellCategory:"social"},createdAt:je("2024-09-05","18:30:00"),publishedAt:je("2024-09-06","07:45:00")}),We({id:"b6f2d8b2-9f8e-4a40-9e7a-7b1b5d7d2a07",childId:ot,title:"Galeria de Arte - Semana 20",summary:"Primeiras pinturas com tinta comest√≠vel.",occurredAt:"2024-10-10",templateKey:"capitulo_4_galeria_arte",status:"published",media:[{id:"bb-alice-art-1",kind:"photo",url:"https://images.unsplash.com/photo-1498079022511-d15614cb1c02?w=900&fit=crop"},{id:"bb-alice-art-2",kind:"photo",url:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=900&fit=crop"}],payload:{upsellCategory:"creative",chapter:"Cap. 4 - Vila reunida"},createdAt:je("2024-10-11","11:00:00"),publishedAt:je("2024-10-11","11:00:00")}),We({id:"b6f2d8b2-9f8e-4a40-9e7a-7b1b5d7d2a0a",childId:ot,title:"Primeiros Passos",summary:"Alice deu tr√™s passinhos independentes em dire√ß√£o ao pai.",occurredAt:null,templateKey:"capitulo_3_primeiros_passos",status:"draft",payload:{chapter:"Cap. 3 - Primeiras descobertas",milestone:"Marcha independente"}}),We({id:"b6f2d8b2-9f8e-4a40-9e7a-7b1b5d7d2a0b",childId:ot,title:"Primeiro Anivers√°rio",summary:"Rascunho com ideias de decora√ß√£o e carta para o PoD.",occurredAt:null,templateKey:"capitulo_5_primeiro_aniversario",status:"draft",payload:{chapter:"Cap. 5 - Grandes celebra√ß√µes",todo:["Selecionar fotos favoritas","Convidar padrinhos"]}}),We({id:"c3a1b2f0-1a2b-4c3d-9e0f-1a2b3c4d5e00",childId:yr,title:"A Descoberta",summary:"Parto em casa, luz baixa e playlist Lo-Fi.",occurredAt:"2023-06-20",templateKey:"capitulo_1_descoberta",status:"published",payload:{chapter:"Cap. 1 - Bem-vindo ao mundo"},media:[{id:"bb-theo-newborn",kind:"photo",url:"https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=900&fit=crop"}],createdAt:je("2023-06-21"),updatedAt:je("2023-06-21","08:30:00"),publishedAt:je("2023-06-21","08:30:00")}),We({id:"c3a1b2f0-1a2b-4c3d-9e0f-1a2b3c4d5e01",childId:yr,title:"Primeiro Banho do Theo",summary:"Theo dormiu o banho inteiro dentro do balde ofur√¥.",occurredAt:"2023-06-23",templateKey:"capitulo_2_primeiro_banho",status:"published",payload:{chapter:"Cap. 2 - Nosso Novo Lar"},media:[{id:"bb-theo-bath",kind:"photo",url:"https://images.unsplash.com/photo-1504198453319-5ce911bafcde?w=900&fit=crop"}],createdAt:je("2023-06-23","20:05:00"),updatedAt:je("2023-06-24","08:00:00"),publishedAt:je("2023-06-24","08:00:00")}),We({id:"c3a1b2f0-1a2b-4c3d-9e0f-1a2b3c4d5e02",childId:yr,title:"Primeiro Dia na Creche",summary:"Registro da adapta√ß√£o gradual no cap√≠tulo 5.5.",occurredAt:"2024-02-05",templateKey:"capitulo_5_primeiro_dia_creche",status:"published",media:[{id:"bb-theo-school",kind:"photo",url:"https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=900&fit=crop"}],payload:{chapter:"Cap. 5 - Grandes celebra√ß√µes",checklist:["Etiqueta com nome","Naninha"]},createdAt:je("2024-02-05","07:30:00"),updatedAt:je("2024-02-05","21:00:00"),publishedAt:je("2024-02-05","21:00:00")}),We({id:"c3a1b2f0-1a2b-4c3d-9e0f-1a2b3c4d5e03",childId:yr,title:"Consulta de Crescimento - 12 Meses",summary:"Gr√°fico de peso/altura anexado ao cap√≠tulo de sa√∫de.",occurredAt:"2024-06-25",templateKey:"capitulo_4_consulta_pediatra",status:"draft",payload:{chapter:"Cap. 4 - Vila reunida",clinicalNotes:"Revisar ferro s√©rico em 3 meses."}});const cd=()=>"true".toLowerCase()!=="false",Xe=()=>{const{data:t=[],isLoading:r}=ns(),a=ga(d=>d.selectedChildId),s=ga(d=>d.setSelectedChildId),l=ga(d=>d.clearSelectedChild),o=cd(),i=c.useMemo(()=>!r&&o&&t.length===0?ld:t,[t,r,o]);c.useEffect(()=>{if(r)return;if(i.length===0){a&&l();return}i.some(u=>u.id===a)||s(i[0].id)},[i,l,r,a,s]);const n=c.useMemo(()=>i.find(d=>d.id===a)??null,[i,a]);return{children:i,selectedChild:n,isLoading:r,setSelectedChildId:s}};function dd(t=768){const[r,a]=c.useState(!1);return c.useEffect(()=>{const s=()=>a(window.innerWidth<t);return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[t]),r}const ds=c.createContext({direction:"bottom"});function yt({direction:t="responsive",open:r,onOpenChange:a,children:s}){const l=dd(),o=t==="responsive"?l?"bottom":"right":t;return e.jsx(ds.Provider,{value:{direction:o},children:e.jsx($t.Root,{direction:o,open:r,onOpenChange:a,children:s})})}const md=$t.Portal,ud=$t.Close,Ci=c.forwardRef(({className:t,...r},a)=>e.jsx($t.Overlay,{ref:a,className:D("fixed inset-0 z-50 backdrop-blur-sm",t),style:{backgroundColor:"rgba(42, 42, 42, 0.5)"},...r}));Ci.displayName="DrawerOverlay";const dt=c.forwardRef(({className:t,children:r,...a},s)=>{const{direction:l}=c.useContext(ds),o=l==="left"||l==="right",i=l==="bottom";return e.jsxs(md,{children:[e.jsx(Ci,{}),e.jsxs($t.Content,{ref:s,className:D("fixed z-50 flex flex-col shadow-2xl overflow-hidden",o&&["top-0 h-full w-full max-w-md",l==="right"&&"right-0 rounded-l-2xl border-l",l==="left"&&"left-0 rounded-r-2xl border-r"],i&&["bottom-0 left-0 right-0","max-h-[96vh] rounded-t-2xl border-t"],l==="top"&&["top-0 left-0 right-0","max-h-[96vh] rounded-b-2xl border-b"],"bg-white dark:bg-gray-900","border-gray-200 dark:border-gray-700",t),...a,children:[i&&e.jsx("div",{className:"mx-auto mt-4 h-1.5 w-12 shrink-0 rounded-full bg-gray-300 dark:bg-gray-600"}),r]})]})});dt.displayName="DrawerContent";const mt=({className:t,children:r,...a})=>{const{direction:s}=c.useContext(ds),l=s==="left"||s==="right";return e.jsxs("div",{className:D("flex items-center justify-between gap-4 px-4 py-4",l&&"border-b border-gray-200 dark:border-gray-700",t),...a,children:[e.jsx("div",{className:"flex-1 min-w-0",children:r}),e.jsx(ud,{className:"shrink-0 rounded-lg p-2 transition-colors text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200","aria-label":"Fechar",children:e.jsx(De,{className:"h-5 w-5"})})]})};mt.displayName="DrawerHeader";const ut=({className:t,...r})=>e.jsx("div",{className:D("mt-auto flex flex-col gap-2 p-4","border-t border-gray-200 dark:border-gray-700","bg-gray-50 dark:bg-gray-800",t),...r});ut.displayName="DrawerFooter";const xt=c.forwardRef(({className:t,...r},a)=>e.jsx($t.Title,{ref:a,className:D("text-lg font-semibold",t),style:{color:"var(--bb-color-ink)"},...r}));xt.displayName="DrawerTitle";const Ir=c.forwardRef(({className:t,...r},a)=>e.jsx($t.Description,{ref:a,className:D("text-sm",t),style:{color:"var(--bb-color-ink-muted)"},...r}));Ir.displayName="DrawerDescription";const bt=({className:t,...r})=>e.jsx("div",{className:D("flex-1 overflow-y-auto overscroll-contain px-4 py-4",t),...r});bt.displayName="DrawerBody";const xd={milestone:pe,health:Oe,guestbook:jt,memory:rt,photo:gt,gift:Be,system:Ze,redemption:Be,credits:Dr};function bd({open:t,onOpenChange:r,notifications:a,onNotificationClick:s,onMarkAsRead:l,onMarkAllAsRead:o}){const[i,n]=c.useState(!1),d=a.filter(x=>x.unread).length,u=async()=>{n(!0),await new Promise(x=>setTimeout(x,300)),o(),n(!1)},m=x=>{x.unread&&l(x.id),s==null||s(x),x.link&&r(!1)},p={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},f={hidden:{opacity:0,x:20},visible:{opacity:1,x:0,transition:{type:"spring",stiffness:400,damping:30}},exit:{opacity:0,x:-20,transition:{duration:.2}}};return e.jsx(yt,{open:t,onOpenChange:r,direction:"right",children:e.jsxs(dt,{className:"h-full w-full sm:max-w-sm rounded-l-[32px] border-l outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsx(mt,{className:"px-6 py-4",style:{borderBottom:"1px solid var(--bb-color-border)",backgroundColor:"var(--bb-color-surface)"},children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xt,{className:"text-lg font-bold text-[var(--bb-color-ink)] font-serif",children:"Notifica√ß√µes"}),d>0&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold",style:{backgroundColor:"var(--bb-color-accent)",color:"white"},children:d})]})})}),e.jsxs(bt,{className:"p-0 overflow-y-auto",style:{backgroundColor:"var(--bb-color-surface)"},children:[a.length>0&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-3",style:{backgroundColor:"var(--bb-color-bg)",borderBottom:"1px solid var(--bb-color-border)"},children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:"var(--bb-color-ink-muted)"},children:"Recentes"}),d>0&&e.jsxs("button",{onClick:u,disabled:i,className:"flex items-center gap-1.5 text-xs font-semibold transition-colors disabled:opacity-50",style:{color:"var(--bb-color-accent)"},children:[i?e.jsx(fe,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Yr,{className:"w-3.5 h-3.5"}),"Marcar todas como lidas"]})]}),a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6 text-center",children:[e.jsxs("div",{className:"relative w-20 h-20 mb-5",children:[e.jsx("div",{className:"absolute inset-0 rounded-full animate-pulse",style:{backgroundColor:"var(--bb-color-accent-soft)"}}),e.jsx("div",{className:"absolute inset-2 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--bb-color-surface)"},children:e.jsx(Ze,{className:"w-8 h-8",style:{color:"var(--bb-color-ink-muted)"}})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 rounded-full animate-bounce",style:{backgroundColor:"var(--bb-color-accent)",animationDelay:"0s"}}),e.jsx("div",{className:"absolute top-1 -left-1 w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"var(--bb-color-accent)",animationDelay:"0.2s"}})]}),e.jsx("h3",{className:"text-base font-semibold mb-2",style:{color:"var(--bb-color-ink)"},children:"Tudo em dia! üéâ"}),e.jsx("p",{className:"text-sm max-w-[200px]",style:{color:"var(--bb-color-ink-muted)"},children:"Voc√™ n√£o tem notifica√ß√µes no momento. Novidades aparecer√£o aqui."})]}):e.jsx(E.div,{className:"divide-y divide-[var(--bb-color-border)]",variants:p,initial:"hidden",animate:"visible",children:e.jsx(qe,{children:a.map(x=>{const b=xd[x.type],g=e.jsxs(E.div,{layout:!0,variants:f,whileTap:{scale:.98},className:D("flex items-start gap-4 p-4 transition-colors cursor-pointer",x.unread?"bg-[var(--bb-color-accent)]/5 hover:bg-[var(--bb-color-accent)]/10":"hover:bg-[var(--bb-color-bg)]"),onClick:()=>m(x),children:[e.jsx("div",{className:D("w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",x.unread?"bg-[var(--bb-color-accent)]/10 text-[var(--bb-color-accent)]":"bg-[var(--bb-color-bg)] text-[var(--bb-color-ink-muted)]"),children:e.jsx(b,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:D("text-sm",x.unread?"font-semibold text-[var(--bb-color-ink)]":"font-medium text-[var(--bb-color-ink-muted)]"),children:x.title}),x.unread&&e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"var(--bb-color-accent)"}})]}),e.jsx("span",{className:"text-[10px] flex-shrink-0",style:{color:"var(--bb-color-ink-muted)"},children:x.time})]}),e.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--bb-color-ink-muted)"},children:x.description})]}),x.unread&&e.jsx("button",{onClick:h=>{h.preventDefault(),h.stopPropagation(),l(x.id)},className:"p-1.5 rounded-lg transition-colors flex-shrink-0 hover:bg-[var(--bb-color-bg)]",style:{color:"var(--bb-color-ink-muted)"},title:"Marcar como lida","aria-label":"Marcar como lida",children:e.jsx(Re,{className:"w-4 h-4"})})]});return x.link?e.jsx(W,{to:x.link,onClick:()=>l(x.id),children:g},x.id):e.jsx("div",{children:g},x.id)})})})]}),e.jsx(ut,{className:"p-4",style:{borderTop:"1px solid var(--bb-color-border)",backgroundColor:"var(--bb-color-bg)"},children:e.jsxs(W,{to:"/jornada/notificacoes",onClick:()=>r(!1),className:"flex items-center justify-center gap-2 w-full py-2.5 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:"var(--bb-color-surface)",color:"var(--bb-color-ink)",border:"1px solid var(--bb-color-border)"},children:[e.jsx(Dr,{className:"w-4 h-4"}),"Gerenciar notifica√ß√µes"]})})]})})}const pd="babybook-theme:b2c",hd="babybook-theme:partner";function Si(t){return t.startsWith("/partner")?hd:pd}function _i(){return typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function gd(t){if(typeof window>"u")return"system";const r=localStorage.getItem(t);return r==="light"||r==="dark"||r==="system"?r:"system"}function Ia(t){const r=document.documentElement;(t==="system"?_i():t)==="dark"?r.classList.add("dark"):r.classList.remove("dark")}const jr=new Map,La={};function Gs(t){const r=La[t];if(r==="light"||r==="dark"||r==="system")return r;const a=gd(t);return La[t]=a,a}function fd(t,r){const a=jr.get(t)??new Set;return a.add(r),jr.set(t,a),()=>{const s=jr.get(t);s==null||s.delete(r),s&&s.size===0&&jr.delete(t)}}function vd(t,r){La[t]=r,localStorage.setItem(t,r),Ia(r);const a=jr.get(t);a==null||a.forEach(s=>s())}function Lr(){const t=ht(),r=Si(t.pathname),a=c.useSyncExternalStore(i=>fd(r,i),()=>Gs(r),()=>Gs(r));c.useEffect(()=>{Ia(a)},[r,a]),c.useEffect(()=>{if(a!=="system")return;const i=window.matchMedia("(prefers-color-scheme: dark)"),n=()=>{Ia("system")};return i.addEventListener("change",n),()=>i.removeEventListener("change",n)},[a]);const s=c.useCallback(i=>{vd(r,i)},[r]),l=c.useCallback(()=>{s(a==="dark"?"light":"dark")},[a,s]),o=a==="system"?_i():a;return{theme:a,effectiveTheme:o,setTheme:s,toggleTheme:l,isLight:o==="light",isDark:o==="dark"}}const yd=[{value:"light",label:"Claro",icon:aa},{value:"dark",label:"Escuro",icon:Ua},{value:"system",label:"Sistema",icon:Va}];function jd({open:t,onOpenChange:r,userName:a="Usu√°rio",userEmail:s,userAvatar:l,childrenList:o,selectedChild:i,onSelectChild:n,onLogout:d,isLoggingOut:u=!1}){var k;const{theme:m,setTheme:p}=Lr(),f=o.length>0,x={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},b={hidden:{opacity:0,x:20},visible:{opacity:1,x:0,transition:{type:"spring",stiffness:300,damping:24}}},g=()=>e.jsxs(W,{to:"/jornada/armazenamento",onClick:()=>r(!1),className:"group relative overflow-hidden flex flex-col gap-3 p-4 rounded-2xl border transition-all hover:shadow-md active:scale-95",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[var(--bb-color-accent)]/20 to-[var(--bb-color-accent)]/5 flex items-center justify-center text-[var(--bb-color-accent)]",children:e.jsx(qo,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-[var(--bb-color-ink)] group-hover:text-[var(--bb-color-accent)] transition-colors",children:"Armazenamento"}),e.jsx("p",{className:"text-xs text-[var(--bb-color-ink-muted)]",children:"Gerenciar uploads"})]})]}),e.jsx(Te,{className:"w-5 h-5 text-[var(--bb-color-ink-muted)] group-hover:translate-x-1 transition-transform"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-semibold uppercase tracking-wider text-[var(--bb-color-ink-muted)]",children:[e.jsx("span",{children:"Uso do plano"}),e.jsx("span",{children:"45%"})]}),e.jsx("div",{className:"h-2 w-full rounded-full bg-[var(--bb-color-bg)] overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-[var(--bb-color-accent)] opacity-80",style:{width:"45%"}})})]})]}),h=({to:v,icon:y,title:N,subtitle:_})=>e.jsxs(W,{to:v,onClick:()=>r(!1),className:"flex items-center gap-4 p-3 rounded-2xl bg-transparent hover:bg-[var(--bb-color-bg)] transition-all group active:scale-95",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[var(--bb-color-bg)] group-hover:bg-[var(--bb-color-surface)] border border-[var(--bb-color-border)] flex items-center justify-center text-[var(--bb-color-ink-muted)] group-hover:text-[var(--bb-color-accent)] group-hover:border-[var(--bb-color-accent)]/30 transition-all shadow-sm",children:e.jsx(y,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--bb-color-ink)] group-hover:text-[var(--bb-color-accent)] transition-colors",children:N}),e.jsx("p",{className:"text-xs text-[var(--bb-color-ink-muted)]",children:_})]}),e.jsx("div",{className:"text-[var(--bb-color-ink-muted)] group-hover:translate-x-1 transition-transform",children:e.jsx(Te,{className:"w-5 h-5"})})]});return e.jsx(yt,{open:t,onOpenChange:r,direction:"right",children:e.jsxs(dt,{className:"h-full w-full sm:max-w-[380px] rounded-l-[32px] border-l outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsx(mt,{className:"px-6 py-6 pb-4",style:{backgroundColor:"var(--bb-color-surface)"},children:e.jsxs("div",{className:"flex items-center gap-4",children:[l?e.jsx("img",{src:l,alt:a,className:"w-14 h-14 rounded-full object-cover shadow-sm ring-2 ring-[var(--bb-color-border)]"}):e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-[var(--bb-color-accent)] to-[var(--bb-color-accent)]/80 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-md ring-2 ring-[var(--bb-color-accent)]/20",children:((k=a==null?void 0:a[0])==null?void 0:k.toUpperCase())||"U"}),e.jsxs("div",{className:"min-w-0 flex-1 text-left",children:[e.jsx(xt,{className:"text-lg font-bold text-[var(--bb-color-ink)] truncate font-serif",children:a}),s&&e.jsx("p",{className:"text-xs text-[var(--bb-color-ink-muted)] truncate mt-0.5",children:s})]})]})}),e.jsx(bt,{className:"px-6 py-6 overflow-y-auto custom-scrollbar",children:e.jsxs(E.div,{variants:x,initial:"hidden",animate:"visible",className:"space-y-8",children:[e.jsxs(E.div,{className:"space-y-4",variants:b,children:[e.jsx("p",{className:"text-[11px] font-bold text-[var(--bb-color-ink-muted)] uppercase tracking-wider pl-1 opacity-70",children:"√Ålbum Atual"}),e.jsx("div",{className:"space-y-2.5",children:f?e.jsxs(e.Fragment,{children:[o.map(v=>{var N;const y=(i==null?void 0:i.id)===v.id;return e.jsxs("button",{type:"button",onClick:()=>{n(v.id),r(!1)},className:D("w-full flex items-center gap-3 p-2 pr-4 rounded-2xl border transition-all",y?"border-[var(--bb-color-accent)] bg-[var(--bb-color-accent)]/5 shadow-sm":"border-[var(--bb-color-border)] bg-[var(--bb-color-bg)] hover:border-[var(--bb-color-ink-muted)]"),children:[e.jsx("div",{className:D("w-12 h-12 rounded-xl flex items-center justify-center text-white font-semibold text-sm shadow-sm transition-transform active:scale-95",y?"bg-[var(--bb-color-accent)]":"bg-[var(--bb-color-ink-muted)]"),children:v.avatarUrl?e.jsx("img",{src:v.avatarUrl,alt:v.name,className:"w-full h-full rounded-xl object-cover"}):((N=v.name[0])==null?void 0:N.toUpperCase())||"?"}),e.jsx("span",{className:D("flex-1 text-left font-bold text-sm",y?"text-[var(--bb-color-accent)]":"text-[var(--bb-color-ink)]"),children:v.name}),y&&e.jsx("div",{className:"bg-[var(--bb-color-accent)] text-white rounded-full p-0.5",children:e.jsx(Re,{className:"w-3 h-3"})})]},v.id)}),e.jsxs(W,{to:"/jornada/perfil-crianca",onClick:()=>r(!1),className:"flex text-xs font-semibold text-[var(--bb-color-ink-muted)] hover:text-[var(--bb-color-accent)] items-center justify-center gap-2 py-3 transition-colors border-t border-[var(--bb-color-border)] border-dashed mt-3 pt-4",children:[e.jsx(Mt,{className:"w-3.5 h-3.5"}),"Gerenciar ou adicionar crian√ßa"]})]}):e.jsxs("div",{className:"rounded-2xl border border-dashed p-6 text-center bg-[var(--bb-color-bg)]",style:{borderColor:"var(--bb-color-border)"},children:[e.jsx(Er,{className:"w-8 h-8 mx-auto mb-3 text-[var(--bb-color-ink-muted)]"}),e.jsx("p",{className:"text-sm mb-4 text-[var(--bb-color-ink-muted)]",children:"Cadastre uma crian√ßa para come√ßar."}),e.jsx(W,{to:"/jornada/perfil-crianca",onClick:()=>r(!1),className:"inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl text-sm font-bold shadow-md transition-all hover:scale-105 active:scale-95",style:{backgroundColor:"var(--bb-color-accent)",color:"var(--bb-color-surface)"},children:"Cadastrar"})]})})]}),e.jsxs(E.div,{className:"space-y-4",variants:b,children:[e.jsx("p",{className:"text-[11px] font-bold text-[var(--bb-color-ink-muted)] uppercase tracking-wider pl-1 opacity-70",children:"Apar√™ncia"}),e.jsx("div",{className:"flex gap-2 p-1.5 rounded-2xl bg-[var(--bb-color-bg)] border border-[var(--bb-color-border)]",children:yd.map(v=>{const y=v.icon,N=m===v.value;return e.jsxs("button",{type:"button",onClick:()=>p(v.value),className:D("flex-1 flex items-center justify-center gap-2 px-3 py-3 rounded-xl text-xs font-semibold transition-all duration-300",N?"bg-[var(--bb-color-surface)] text-[var(--bb-color-accent)] shadow-sm ring-1 ring-black/5 dark:ring-white/10":"text-[var(--bb-color-ink-muted)] hover:text-[var(--bb-color-ink)] hover:bg-[var(--bb-color-surface)]/50"),children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:v.label})]},v.value)})})]}),e.jsxs(E.div,{className:"space-y-4",variants:b,children:[e.jsx("p",{className:"text-[11px] font-bold text-[var(--bb-color-ink-muted)] uppercase tracking-wider pl-1 opacity-70",children:"Conta"}),e.jsx(g,{}),e.jsxs("div",{className:"space-y-1.5 mt-4",children:[e.jsx(h,{to:"/jornada/minha-conta",icon:Dr,title:"Configura√ß√µes",subtitle:"Meus dados e prefer√™ncias"}),e.jsx(h,{to:"/jornada/familia",icon:jt,title:"Fam√≠lia",subtitle:"Membros com acesso"}),e.jsx(h,{to:"/jornada/privacidade",icon:Pr,title:"Privacidade",subtitle:"Seus dados e seguran√ßa"})]})]}),e.jsxs(E.div,{className:"space-y-4",variants:b,children:[e.jsx("p",{className:"text-[11px] font-bold text-[var(--bb-color-ink-muted)] uppercase tracking-wider pl-1 opacity-70",children:"Suporte"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(h,{to:"/jornada/ajuda",icon:Ca,title:"Central de Ajuda",subtitle:"Tire suas d√∫vidas"}),e.jsx(h,{to:"/jornada/termos",icon:Dt,title:"Termos e Pol√≠ticas",subtitle:"Informa√ß√µes legais"})]})]})]})}),e.jsxs(ut,{className:"p-6 pt-6",style:{borderTop:"1px solid var(--bb-color-border)",backgroundColor:"var(--bb-color-bg)"},children:[e.jsxs("button",{onClick:d,disabled:u,className:"flex items-center justify-center gap-2 w-full px-4 py-4 text-sm font-bold text-[var(--bb-color-danger)] bg-[var(--bb-color-surface)] hover:bg-[var(--bb-color-danger)]/5 rounded-2xl transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed border border-[var(--bb-color-border)] hover:border-[var(--bb-color-danger)]/20 shadow-sm",children:[e.jsx(kr,{className:"w-4 h-4"}),u?"Saindo...":"Sair da conta"]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("p",{className:"text-[10px] text-[var(--bb-color-ink-muted)] opacity-50 font-serif",children:"BabyBook v1.0.0"})})]})]})})}function or({variant:t="b2c",className:r,size:a="md",showText:s=!0,textClassName:l}){const o=t==="b2b",i=t==="b2c-dark",n={sm:"w-8 h-8 text-[14px] rounded-xl font-black",md:"w-10 h-10 text-[18px] rounded-2xl font-black",lg:"w-12 h-12 text-[22px] rounded-[1.25rem] font-black"};return e.jsxs("div",{className:D("flex items-center gap-3",r),children:[e.jsx("div",{className:D("flex items-center justify-center text-white font-bold shadow-md transition-shadow",n[a],o?"bg-gradient-to-br from-pink-500 to-rose-600 shadow-pink-500/10":i?"bg-white text-black shadow-none":"bg-gradient-to-br from-orange-400 to-orange-500 shadow-orange-500/10"),children:"BB"}),s&&e.jsxs("div",{className:D("flex flex-col leading-none",l),children:[e.jsxs("div",{className:D("font-sans italic tracking-tight",a==="sm"?"text-sm":a==="lg"?"text-xl":"text-base",i?"text-white":""),children:[e.jsx("span",{className:"font-light opacity-90",children:"Baby"}),e.jsx("span",{className:"font-extrabold tracking-tighter ml-0.5",children:"Book"}),o&&e.jsx("span",{className:"ml-1.5 text-pink-500 dark:text-pink-400 font-bold not-italic tracking-widest text-[0.75em] uppercase font-sans",children:"PRO"})]}),!o&&e.jsx("p",{className:D("text-[10px] font-medium tracking-wide mt-0.5",i?"text-gray-400":"text-gray-500"),children:"Eternizando momentos"})]})]})}const ms="/me/notifications";new Date().toISOString(),new Date(Date.now()-864e5).toISOString(),new Date(Date.now()-1728e5).toISOString(),new Date(Date.now()-2592e5).toISOString(),new Date(Date.now()-6048e5).toISOString();async function kd(){try{return await re.get(ms)||{items:[],total:0,unread_count:0}}catch(t){throw console.error("[Notifications] API error:",t),t}}async function wd(t){try{return await re.patch(`${ms}/${t}/read`,{})}catch(r){throw r}}async function Nd(){try{return await re.patch(`${ms}/read-all`,{})}catch(t){throw t}}const Ai=c.createContext(null);function Cd({children:t}){const r=Ae(),{data:a,isLoading:s,isError:l,refetch:o}=be({queryKey:["notifications"],queryFn:kd,staleTime:30*1e3,refetchInterval:60*1e3}),i=Se({mutationFn:wd,onSuccess:()=>{r.invalidateQueries({queryKey:["notifications"]})}}),n=Se({mutationFn:Nd,onSuccess:()=>{r.invalidateQueries({queryKey:["notifications"]})}}),d=((a==null?void 0:a.items)??[]).map(x=>({id:x.id,title:x.title,description:x.description??"",time:x.time,unread:x.unread,type:x.type,link:x.link??void 0})),u=(a==null?void 0:a.unread_count)??0,m=c.useCallback(x=>{i.mutate(x)},[i]),p=c.useCallback(()=>{n.mutate()},[n]),f=c.useCallback(()=>{o()},[o]);return e.jsx(Ai.Provider,{value:{notifications:d,unreadCount:u,isLoading:s,isError:l,markAsRead:m,markAllAsRead:p,refetch:f},children:t})}function Di(){const t=c.useContext(Ai);if(!t)throw new Error("useNotifications must be used within NotificationsProvider");return t}const Sd=[{id:"jornada",label:"Jornada",to:"/jornada",icon:kn},{id:"saude",label:"Sa√∫de",to:"/saude",icon:Nr},{id:"visitas",label:"Visitas",to:"/visitas",icon:wn},{id:"cofre",label:"Cofre",to:"/cofre",icon:Pr}],_d=()=>{const t=ht(),r=ve(),[a,s]=c.useState(!1),[l,o]=c.useState(!1),i=/^\/jornada\/moment(\/|$)/.test(t.pathname)||/^\/app\/novo-momento(\/|$)/.test(t.pathname)||/^\/jornada\/importar-entrega(\/|$)/.test(t.pathname)||/^\/perfil-usuario(\/|$)/.test(t.pathname)||/^\/jornada\/(minha-conta|notificacoes|privacidade|familia|assinatura|armazenamento|ajuda|termos)(\/|$)/.test(t.pathname),n=i,d=i;c.useEffect(()=>{d&&(s(!1),o(!1))},[d]);const{notifications:u,unreadCount:m,markAsRead:p,markAllAsRead:f}=Di(),{children:x,selectedChild:b,setSelectedChildId:g}=Xe(),h=ke(A=>A.isAuthenticated),k=ke(A=>A.user),v=ke(A=>A.logout),y=ls(),N=A=>{p(A.id),A.link&&r(A.link)},_=async()=>{try{await y.mutateAsync(),v(),r("/login")}catch(A){console.error("Logout failed:",A),v(),r("/login")}};return e.jsxs("div",{className:"app-b2c flex min-h-screen flex-col font-sans selection:bg-pink-100 selection:text-pink-900",style:{backgroundColor:"var(--bb-color-bg)",color:"var(--bb-color-ink)"},children:[!d&&e.jsx("header",{className:"sticky top-0 z-40 transition-all duration-300 bg-white/80 dark:bg-[#1c1917]/80 backdrop-blur-xl border-b border-black/5 dark:border-white/5","data-tour":"b2c-header",children:e.jsx("div",{className:"mx-auto w-full max-w-5xl px-6 py-4",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs(W,{to:"/jornada",className:"flex items-center gap-2 transition-transform active:scale-95",children:[e.jsx("div",{className:"dark:hidden",children:e.jsx(or,{variant:"b2c",size:"md"})}),e.jsx("div",{className:"hidden dark:block",children:e.jsx(or,{variant:"b2c-dark",size:"md"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>{o(!1),s(!0)},className:"group relative inline-flex items-center justify-center rounded-2xl border border-transparent bg-white/50 dark:bg-white/5 px-3 py-2 transition-all hover:bg-white dark:hover:bg-white/10 hover:shadow-sm active:scale-95","aria-label":"Central de notifica√ß√µes",children:[e.jsx(Ze,{className:"h-5 w-5 text-gray-600 dark:text-gray-300 transition-colors group-hover:text-gray-900 dark:group-hover:text-white"}),m>0&&e.jsx("span",{className:"absolute top-1.5 right-1.5 h-2.5 w-2.5 rounded-full bg-red-500 shadow-sm ring-2 ring-white dark:ring-black"})]}),h?e.jsxs("button",{type:"button",onClick:()=>{s(!1),o(!0)},className:"group inline-flex items-center gap-2 rounded-2xl border border-transparent bg-white/50 dark:bg-white/5 px-4 py-2 pl-5 text-sm font-medium text-gray-700 dark:text-gray-100 transition-all hover:bg-white dark:hover:bg-white/10 hover:text-gray-900 dark:hover:text-white hover:shadow-sm active:scale-95","aria-label":"Abrir menu principal","data-tour":"user-menu-button",children:[e.jsx("span",{className:"font-bold tracking-tight",children:(b==null?void 0:b.name)||"Cadastre uma crian√ßa"}),e.jsx(wr,{className:"h-4 w-4 text-gray-400 dark:text-gray-500 transition-transform group-hover:rotate-180"})]}):e.jsx(W,{to:"/login",className:"ml-2 text-sm font-bold text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white",children:"Entrar"})]})]})})}),e.jsx("main",{className:D("mx-auto w-full max-w-5xl flex-1 px-6 pt-6 md:pt-10",n?"pb-10":"pb-32"),children:e.jsx(Ro,{})}),!n&&e.jsx("nav",{className:"fixed bottom-6 left-1/2 z-40 flex w-[calc(100%-3rem)] max-w-md -translate-x-1/2 items-center rounded-[2rem] p-1.5 shadow-[0_8px_40px_-12px_rgba(0,0,0,0.12)] dark:shadow-none ring-1 ring-black/5 dark:ring-white/10 bg-white/90 dark:bg-[#1c1917]/90 backdrop-blur-2xl","aria-label":"Navega√ß√£o dos livros","data-tour":"bottom-nav",children:e.jsx(wt,{id:"book-nav",children:Sd.map(A=>{const G=A.icon;return e.jsx(Io,{to:A.to,className:({isActive:O})=>D("relative isolate flex flex-1 items-center justify-center overflow-hidden rounded-[1.5rem] py-3 text-sm font-medium transition-all duration-500 ease-out"),children:({isActive:O})=>e.jsxs(e.Fragment,{children:[O&&e.jsx(E.span,{layoutId:"book-nav-pill",className:"absolute inset-0 z-0 bg-gray-900 dark:bg-white rounded-[1.5rem]",transition:{type:"spring",stiffness:300,damping:30}}),e.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[e.jsx(G,{className:D("h-5 w-5 transition-colors duration-300",O?"text-white dark:text-black":"text-gray-400 dark:text-stone-500"),strokeWidth:O?2.5:2}),O&&e.jsx(E.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"hidden sm:inline-block whitespace-nowrap text-white dark:text-black",children:A.label})]})]})},A.id)})})}),!d&&e.jsx(bd,{open:a,onOpenChange:s,notifications:u,onNotificationClick:N,onMarkAsRead:p,onMarkAllAsRead:f}),!d&&e.jsx(jd,{open:l,onOpenChange:o,userName:k==null?void 0:k.name,userEmail:k==null?void 0:k.email,childrenList:x,selectedChild:b,onSelectChild:g,onLogout:_,isLoggingOut:y.isPending})]})},Ad="modulepreload",Dd=function(t){return"/"+t},Hs={},us=function(r,a,s){let l=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),n=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));l=Promise.allSettled(a.map(d=>{if(d=Dd(d),d in Hs)return;Hs[d]=!0;const u=d.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Ad,u||(p.as="script"),p.crossOrigin="",p.href=d,n&&p.setAttribute("nonce",n),document.head.appendChild(p),u)return new Promise((f,x)=>{p.addEventListener("load",f),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(i){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=i,window.dispatchEvent(n),!n.defaultPrevented)throw i}return l.then(i=>{for(const n of i||[])n.status==="rejected"&&o(n.reason);return r().catch(o)})},Ve="/partner";async function Ed(t){return re.post(`${Ve}/onboarding`,t)}async function na(){return re.get(`${Ve}/me`)}async function Pd(t){return re.patch(`${Ve}/me`,t)}async function xs(){return re.get(`${Ve}/me/stats`)}async function Md(t){return re.get(`${Ve}/check-access?email=${encodeURIComponent(t)}`)}const Td=[{id:"1",type:"voucher_redeemed",title:"Voucher resgatado",description:"Cliente Maria resgatou o voucher #ABC123 e criou sua conta Baby Book.",time:"H√° 2 horas",unread:!0,link:"/partner/deliveries"},{id:"2",type:"credits_added",title:"Cr√©ditos adicionados",description:"5 cr√©ditos foram adicionados √† sua conta ap√≥s pagamento confirmado.",time:"Ontem √†s 14:30",unread:!0,link:"/partner/credits"},{id:"3",type:"delivery_ready",title:"Entrega pronta",description:"A entrega 'Ensaio Newborn - Jo√£o' est√° pronta para gerar voucher.",time:"Ontem √†s 10:15",unread:!0,link:"/partner/deliveries"},{id:"4",type:"voucher_redeemed",title:"Voucher resgatado",description:"Cliente Ana Paula resgatou o voucher #XYZ789.",time:"2 dias atr√°s",unread:!1,link:"/partner/deliveries"},{id:"5",type:"system",title:"Bem-vindo ao Baby Book PRO!",description:"Sua conta foi aprovada. Comece comprando cr√©ditos para criar suas primeiras entregas.",time:"3 dias atr√°s",unread:!1,link:"/partner/credits"},{id:"6",type:"credits_added",title:"Cr√©ditos adicionados",description:"10 cr√©ditos foram adicionados √† sua conta (pacote inicial de boas-vindas).",time:"3 dias atr√°s",unread:!1,link:"/partner/credits"}];async function Ei(){return await new Promise(t=>setTimeout(t,800)),[...Td]}async function Rd(){return re.get(`${Ve}/credits/packages`)}async function Id(t,r){return re.post(`${Ve}/credits/purchase`,{package_id:t,payment_method:r})}async function Ld(t){return re.get(`${Ve}/credits/history`,{searchParams:t})}async function Gr(t){const{status:r,status_filter:a,...s}=t??{};return re.get(`${Ve}/deliveries`,{searchParams:{...s,status_filter:a??r}})}async function la(t){return re.get(`${Ve}/deliveries/${t}`)}async function Fd(t){return re.post(`${Ve}/deliveries`,t)}async function qd(t,r=!0){return re.patch(`${Ve}/deliveries/${t}/archive?archive=${r}`)}async function Bd(t,r){return re.post(`${Ve}/deliveries/${t}/upload/init`,r)}async function Od(t,r,a,s){return new Promise((l,o)=>{const i=new XMLHttpRequest;i.withCredentials=!1,i.upload.onprogress=n=>{n.lengthComputable&&s&&s(Math.round(n.loaded/n.total*100))},i.onload=()=>{i.status>=200&&i.status<300?l():o(new Error(`Upload failed: ${i.status}`))},i.onerror=()=>o(new Error("Upload network error")),i.ontimeout=()=>o(new Error("Upload timeout")),i.open("PUT",t),i.setRequestHeader("Content-Type",a),i.timeout=3e5,i.send(r)})}async function $d(t,r){return re.post(`${Ve}/deliveries/${t}/upload/complete`,r)}async function zd(t,r){return re.post(`${Ve}/deliveries/${t}/finalize`,r)}async function Ud(t,r){return re.delete(`${Ve}/deliveries/${t}/assets/${encodeURIComponent(r)}`)}async function Vd(t,r={}){const a=(await us(async()=>{const{default:l}=await import("./vendor--YHnU7YG.js").then(o=>o.bc);return{default:l}},__vite__mapDeps([0,1,2]))).default,s=await a(t,{maxSizeMB:r.maxSizeMB??2,maxWidthOrHeight:r.maxWidthOrHeight??2048,initialQuality:r.quality??.85,useWebWorker:!0,fileType:t.type});return new File([s],t.name,{type:s.type})}function Kd(t){return["image/jpeg","image/png","image/webp"].includes(t.type)}function bs({label:t,icon:r,tone:a="neutral",to:s,onClick:l,disabled:o,className:i}){const u=D("inline-flex items-center justify-center w-9 h-9 rounded-xl transition-colors shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-500 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-50 dark:focus-visible:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",a==="primary"?"bg-pink-500 text-white hover:bg-pink-600":"border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/40",i);return s?e.jsx(W,{to:s,"aria-label":t,title:t,className:u,"data-partner-page-header-action":"true",children:r}):e.jsx("button",{type:"button",onClick:l,disabled:o,"aria-label":t,title:t,className:u,"data-partner-page-header-action":"true",children:r})}const Pi=c.createContext(null);function Tt(t){const r=c.useContext(Pi);c.useEffect(()=>{if(r)return r.setHeader(t),()=>r.setHeader(null)},[r,t])}function Gd(){const t=ve(),r=ht(),a=r.pathname.startsWith("/partner"),s=c.useRef(""),l=c.useRef(0),o=c.useCallback(i=>{if(!a)return;const n=i.target;if((n.tagName==="INPUT"||n.tagName==="TEXTAREA"||n.isContentEditable)&&i.key!=="Escape")return;const d=i.key.toLowerCase(),u=Date.now();if(s.current==="g"&&u-l.current<500){switch(i.preventDefault(),d){case"d":t("/partner");break;case"e":t("/partner/deliveries");break;case"c":t("/partner/credits");break;case"s":t("/partner/settings");break;case"n":t("/partner/notifications");break}s.current="";return}if(d==="g"){s.current="g",l.current=u;return}switch(d){case"n":(r.pathname==="/partner"||r.pathname==="/partner/deliveries")&&(i.preventDefault(),t("/partner/deliveries/new"));break;case"/":{i.preventDefault();const m=document.querySelector('[data-search-input="true"]');m&&m.focus();break}case"escape":document.activeElement instanceof HTMLElement&&document.activeElement.blur();break}s.current=d,l.current=u},[a,t,r.pathname]);return c.useEffect(()=>(document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)),[o]),{shortcuts:[{key:"N",description:"Nova entrega"},{key:"/",description:"Focar na busca"},{key:"G D",description:"Ir para Dashboard"},{key:"G E",description:"Ir para Entregas"},{key:"G C",description:"Ir para Cr√©ditos"},{key:"G S",description:"Ir para Configura√ß√µes"},{key:"Esc",description:"Fechar/Limpar foco"}]}}function Hd(t={}){const{onReconnect:r,pingInterval:a=0,pingUrl:s}=t,[l,o]=c.useState(navigator.onLine),[i,n]=c.useState(!1),[d,u]=c.useState(navigator.onLine?null:Date.now()),[m,p]=c.useState(0),f=c.useRef(r);f.current=r,c.useEffect(()=>{if(!d){p(0);return}const g=setInterval(()=>{p(Math.floor((Date.now()-d)/1e3))},1e3);return()=>clearInterval(g)},[d]);const x=c.useCallback(()=>{var h;const g=!l;o(!0),u(null),g&&(n(!0),(h=f.current)==null||h.call(f),setTimeout(()=>n(!1),5e3))},[l]),b=c.useCallback(()=>{o(!1),u(Date.now()),n(!1)},[]);return c.useEffect(()=>(window.addEventListener("online",x),window.addEventListener("offline",b),()=>{window.removeEventListener("online",x),window.removeEventListener("offline",b)}),[x,b]),c.useEffect(()=>{if(!a||!s)return;const h=setInterval(async()=>{try{const k=await fetch(s,{method:"HEAD",cache:"no-store",mode:"no-cors"});(k.ok||k.type==="opaque")&&x()}catch{b()}},a);return()=>clearInterval(h)},[a,s,x,b]),{isOnline:l,wasOffline:i,offlineSince:d,offlineDuration:m}}function Wd(t,r){const a="Voc√™ tem altera√ß√µes n√£o salvas. Tem certeza que deseja sair?";c.useEffect(()=>{if(!t)return;const s=l=>(l.preventDefault(),l.returnValue=r??a,l.returnValue);return window.addEventListener("beforeunload",s),()=>window.removeEventListener("beforeunload",s)},[t,r])}function Qd(t){if(t<60)return`${t}s`;const r=Math.floor(t/60),a=t%60;if(r<60)return`${r}m ${a}s`;const s=Math.floor(r/60),l=r%60;return`${s}h ${l}m`}function Yd(){const t=Ae(),{isOnline:r,wasOffline:a,offlineDuration:s}=Hd({onReconnect:()=>{t.invalidateQueries()}});return r&&!a?null:r&&a?e.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 animate-in slide-in-from-bottom-4 fade-in duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-green-600 text-white rounded-xl shadow-lg",children:[e.jsx(Nn,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Conex√£o restaurada!"}),e.jsx(Bo,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{className:"text-sm opacity-90",children:"Atualizando dados..."})]})}):e.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 animate-in slide-in-from-bottom-4 fade-in duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-amber-600 text-white rounded-xl shadow-lg",children:[e.jsx(Cn,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Voc√™ est√° offline"}),e.jsxs("p",{className:"text-sm opacity-90",children:["Sem conex√£o h√° ",Qd(s),". Suas altera√ß√µes ser√£o salvas quando reconectar."]})]})]})})}const Jd=[{to:"/partner",label:"Dashboard",icon:Oo,end:!0},{to:"/partner/deliveries",label:"Entregas",icon:Pt,end:!1},{to:"/partner/credits",label:"Cr√©ditos",icon:tt,end:!1}],Xd=["/partner","/partner/deliveries","/partner/credits"];function Zd(){var I,M,V,J,ae;const t=ve(),r=ht(),a=Ae(),s=ke(L=>L.logout),l=ls(),{theme:o,setTheme:i}=Lr();Gd();const[n,d]=c.useState(null),[u,m]=c.useState(!1),[p,f]=c.useState(!1),[x,b]=c.useState(!1),{data:g}=be({queryKey:["partner","profile"],queryFn:na}),{data:h}=be({queryKey:["partner","stats"],queryFn:xs,staleTime:5e3,refetchOnWindowFocus:!0}),{data:k=[]}=be({queryKey:["partner","notifications"],queryFn:Ei}),v=(h==null?void 0:h.voucher_balance)??0,y=v<=2,N=v===0,_=()=>{a.setQueryData(["partner","notifications"],L=>(L==null?void 0:L.map(ee=>({...ee,unread:!1})))??[])},A=L=>{a.setQueryData(["partner","notifications"],ee=>(ee==null?void 0:ee.map(ne=>ne.id===L?{...ne,unread:!1}:ne))??[])},G=L=>{A(L.id),m(!1),t(L.link||"/partner/notifications")},O=async()=>{try{await l.mutateAsync(),s(),t("/pro/login")}catch(L){console.error("Logout failed:",L),s(),t("/pro/login")}},C=k.filter(L=>L.unread).length,j=L=>{switch(L){case"success":return"bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300";case"warning":return"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-300";case"info":return"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300";case"purple":return"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300";case"neutral":default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}},w=Xd.includes(r.pathname.replace(/\/$/,""));return e.jsxs("div",{className:"min-h-screen bg-[radial-gradient(ellipse_at_top_left,_var(--tw-gradient-stops))] from-gray-50 via-white to-pink-50/20 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 flex flex-col transition-colors duration-700 font-sans pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-white/40 dark:bg-gray-900/40 backdrop-blur-2xl border-b border-white/20 dark:border-white/5 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.03)] dark:shadow-none transition-all duration-500",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16 relative",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(W,{to:"/partner",className:"flex items-center gap-2 group",children:e.jsx(or,{variant:"b2b",size:"md"})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>{f(!1),m(!1),b(!0)},title:`${v} cr√©ditos dispon√≠veis. Clique para gerenciar.`,className:D("inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-semibold transition-all duration-300 hover:scale-105 active:scale-95 border",N?"bg-red-50/80 dark:bg-red-900/20 text-red-700 dark:text-red-300 border-red-200 dark:border-red-800":y?"bg-amber-50/80 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-800":"bg-emerald-50/80 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800"),children:[e.jsx(ua,{className:"w-4 h-4"}),e.jsx("span",{children:v})]}),e.jsx(yt,{open:x,onOpenChange:b,direction:"right",children:e.jsxs(dt,{className:"h-full w-full sm:max-w-sm border-l border-gray-100 dark:border-gray-800 shadow-2xl",children:[e.jsx(mt,{className:"border-b border-gray-100 dark:border-gray-800 px-6 py-5 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-2xl rotate-3 flex items-center justify-center text-white shadow-xl shadow-emerald-500/20 ring-4 ring-white dark:ring-gray-800",children:e.jsx(ua,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx(xt,{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Saldo e Cr√©ditos"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Gerencie seus vouchers"})]})]})}),e.jsxs(bt,{className:"p-6 space-y-8 overflow-y-auto",children:[e.jsxs("div",{className:"rounded-[2rem] bg-gradient-to-br from-gray-900 to-gray-800 text-white p-6 shadow-2xl shadow-gray-200/50 dark:shadow-none border border-gray-100/10 relative overflow-hidden group transform hover:scale-[1.02] transition-transform duration-500",children:[e.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-emerald-500/20 rounded-full blur-3xl -mr-20 -mt-20 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/20 rounded-full blur-2xl -ml-12 -mb-12 pointer-events-none"}),e.jsx("p",{className:"text-emerald-400 text-xs font-bold uppercase tracking-widest mb-2 relative z-10",children:"Saldo Dispon√≠vel"}),e.jsxs("div",{className:"flex items-baseline gap-2 relative z-10",children:[e.jsx("span",{className:"text-6xl font-bold tracking-tighter",children:v}),e.jsx("span",{className:"text-xl text-gray-400 font-medium leading-none",children:"cr√©ditos"})]}),y&&e.jsxs("div",{className:"mt-6 inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-red-500/20 border border-red-500/30 text-red-200 text-xs font-semibold relative z-10 animate-pulse",children:[e.jsx(ir,{className:"w-3.5 h-3.5"}),"Saldo baixo"]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-white/10 flex items-center justify-between relative z-10",children:[e.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Reservados"}),e.jsx("span",{className:"text-white font-bold text-lg",children:(h==null?void 0:h.reserved_credits)??0})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 mb-6 uppercase tracking-wider pl-1",children:"Como funciona"}),e.jsxs("div",{className:"space-y-6 relative",children:[e.jsx("div",{className:"absolute left-4 top-2 bottom-2 w-0.5 bg-gray-100 dark:bg-gray-800"}),e.jsxs("div",{className:"flex gap-4 relative",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white dark:bg-gray-900 border-2 border-emerald-100 dark:border-emerald-900/30 text-emerald-600 dark:text-emerald-400 flex items-center justify-center text-sm font-bold flex-shrink-0 z-10 shadow-sm",children:"1"}),e.jsxs("div",{className:"pt-1",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-1",children:"Compre cr√©ditos"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed",children:"Adquira pacotes de cr√©ditos para usar os recursos PRO do BabyBook."})]})]}),e.jsxs("div",{className:"flex gap-4 relative",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white dark:bg-gray-900 border-2 border-emerald-100 dark:border-emerald-900/30 text-emerald-600 dark:text-emerald-400 flex items-center justify-center text-sm font-bold flex-shrink-0 z-10 shadow-sm",children:"2"}),e.jsxs("div",{className:"pt-1",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-1",children:"Use em entregas"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed",children:"Cada novo √°lbum ou funcionalidade consome uma quantidade espec√≠fica."})]})]}),e.jsxs("div",{className:"flex gap-4 relative",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white dark:bg-gray-900 border-2 border-emerald-100 dark:border-emerald-900/30 text-emerald-600 dark:text-emerald-400 flex items-center justify-center text-sm font-bold flex-shrink-0 z-10 shadow-sm",children:"3"}),e.jsxs("div",{className:"pt-1",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-1",children:"Expira√ß√£o de 12 meses"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed",children:"Seus cr√©ditos s√£o v√°lidos por um ano a partir da data da compra."})]})]})]})]})]}),e.jsx(ut,{className:"border-t border-gray-100 dark:border-gray-800 p-6 bg-gray-50/50 dark:bg-gray-900/20",children:e.jsxs(W,{to:"/partner/credits",onClick:()=>b(!1),className:"w-full flex items-center justify-center gap-2 bg-gray-900 dark:bg-white text-white dark:text-gray-900 dark:hover:bg-gray-100 hover:bg-gray-800 py-3.5 rounded-xl font-bold shadow-lg shadow-gray-900/10 dark:shadow-white/5 transition-all active:scale-[0.98]",children:[e.jsx(ua,{className:"w-4 h-4"}),"Comprar Cr√©ditos"]})})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>{f(!1),m(L=>!L)},"data-tour":"notifications-button",className:D("relative w-10 h-10 rounded-full flex items-center justify-center transition-all",u?"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-700 dark:hover:text-white"),"aria-label":"Notifica√ß√µes",children:[e.jsx(Ze,{className:"w-5 h-5"}),C>0&&e.jsx("span",{className:"absolute top-2 right-2.5 w-2.5 h-2.5 bg-pink-500 border-2 border-white dark:border-gray-900 rounded-full"})]}),e.jsx(yt,{open:u,onOpenChange:m,direction:"right",children:e.jsxs(dt,{className:"h-full w-full sm:max-w-sm border-l border-gray-100 dark:border-gray-800 shadow-2xl",children:[e.jsx(mt,{className:"border-b border-gray-100 dark:border-gray-800 px-6 py-5 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(xt,{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Notifica√ß√µes"}),C>0&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full bg-pink-50 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300 text-xs font-bold",children:[C," nova",C>1?"s":""]})]})}),e.jsxs(bt,{className:"p-0 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-b border-gray-50 dark:border-gray-800/50 bg-gray-50/50 dark:bg-gray-800/20",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Recentes"}),e.jsx("button",{onClick:_,className:"text-xs font-bold text-pink-600 hover:text-pink-700 dark:text-pink-400 dark:hover:text-pink-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:C===0,children:"Marcar lidas"})]}),e.jsx(E.div,{initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.05}}},className:"divide-y divide-gray-100 dark:divide-gray-800",children:k.map(L=>e.jsx(E.div,{variants:{hidden:{opacity:0,x:20},visible:{opacity:1,x:0}},onClick:()=>G(L),className:D("relative px-6 py-5 hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer transition-colors group",L.unread?"bg-white dark:bg-gray-900":"bg-gray-50/30 dark:bg-gray-900/30"),children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:D("flex-shrink-0 w-12 h-12 rounded-2xl flex items-center justify-center shadow-sm transition-transform group-hover:scale-105 border border-transparent",L.unread?"bg-pink-50 text-pink-600 dark:bg-pink-900/20 dark:text-pink-400 border-pink-100 dark:border-pink-900/30":"bg-white text-gray-400 dark:bg-gray-800 dark:text-gray-500 border-gray-100 dark:border-gray-700"),children:e.jsx(Ze,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("p",{className:D("text-sm font-bold truncate pr-2",L.unread?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300"),children:L.title}),e.jsx("span",{className:"text-[10px] text-gray-400 whitespace-nowrap font-medium",children:L.time})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2 leading-relaxed",children:L.description})]}),L.unread&&e.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2",children:e.jsx("span",{className:"block w-2.5 h-2.5 bg-pink-500 border-2 border-white dark:border-gray-900 rounded-full shadow-sm"})})]})},L.id))}),k.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-6 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-50 dark:bg-gray-800/50 rounded-full flex items-center justify-center mb-6",children:e.jsx(Ze,{className:"w-8 h-8 text-gray-300 dark:text-gray-600"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900 dark:text-white mb-2",children:"Tudo limpo por aqui"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-[200px]",children:"Voc√™ n√£o tem novas notifica√ß√µes no momento."})]})]}),e.jsx(ut,{className:"border-t border-gray-100 dark:border-gray-800 p-6 bg-gray-50/50 dark:bg-gray-800/20",children:e.jsx(W,{to:"/partner/notifications",onClick:()=>m(!1),className:"w-full block text-center text-sm text-pink-600 dark:text-pink-400 hover:text-pink-700 dark:hover:text-pink-300 font-bold",children:"Ver todas as notifica√ß√µes"})})]})})]}),e.jsxs("div",{className:"relative","data-tour":"user-menu",children:[e.jsxs("button",{type:"button",onClick:()=>{m(!1),f(L=>!L)},className:D("flex items-center gap-2 p-1 pl-1.5 pr-2.5 rounded-full transition-all border border-transparent shadow-sm",p?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700":"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800 border-gray-100/50 dark:border-gray-700/50"),children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white text-xs font-bold ring-2 ring-white dark:ring-gray-900",children:((I=g==null?void 0:g.studio_name)==null?void 0:I[0])||((M=g==null?void 0:g.name)==null?void 0:M[0])||"P"}),e.jsx("span",{className:"hidden sm:block text-xs font-bold text-gray-700 dark:text-gray-200 max-w-[100px] truncate",children:(g==null?void 0:g.studio_name)||(g==null?void 0:g.name)||"Parceiro"})]}),e.jsx(yt,{open:p,onOpenChange:f,direction:"right",children:e.jsxs(dt,{className:"h-full w-full sm:max-w-sm border-l border-gray-100 dark:border-gray-800 shadow-2xl",children:[e.jsx(mt,{className:"border-b border-gray-100 dark:border-gray-800 px-6 py-8 bg-gradient-to-br from-pink-50/50 to-purple-50/50 dark:from-pink-900/10 dark:to-purple-900/10",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-600 rounded-[2rem] flex items-center justify-center text-white font-bold text-3xl shadow-xl shadow-pink-500/20 ring-4 ring-white dark:ring-gray-800 rotate-3",children:((V=g==null?void 0:g.studio_name)==null?void 0:V[0])||((J=g==null?void 0:g.name)==null?void 0:J[0])||"P"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx(xt,{className:"text-xl font-bold text-gray-900 dark:text-white truncate",children:(g==null?void 0:g.studio_name)||(g==null?void 0:g.name)||"Parceiro"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate mt-1",children:g==null?void 0:g.email})]})]})}),e.jsxs(bt,{className:"p-6 space-y-8 overflow-y-auto",children:[e.jsxs(E.div,{initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.05}}},className:"space-y-8",children:[e.jsxs(E.div,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 mb-4 uppercase tracking-wider pl-1 font-sans",children:"Apar√™ncia"}),e.jsxs("div",{className:"flex gap-2 p-1.5 rounded-2xl bg-gray-100/80 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-800",children:[e.jsxs("button",{type:"button",onClick:()=>i("light"),className:D("flex-1 flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl text-xs font-bold transition-all duration-300",o==="light"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm ring-1 ring-black/5 dark:ring-white/10 scale-[1.02]":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-gray-800/50"),children:[e.jsx(aa,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Claro"})]}),e.jsxs("button",{type:"button",onClick:()=>i("dark"),className:D("flex-1 flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl text-xs font-bold transition-all duration-300",o==="dark"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm ring-1 ring-black/5 dark:ring-white/10 scale-[1.02]":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-gray-800/50"),children:[e.jsx(Sn,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Escuro"})]}),e.jsxs("button",{type:"button",onClick:()=>i("system"),className:D("flex-1 flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl text-xs font-bold transition-all duration-300",o==="system"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm ring-1 ring-black/5 dark:ring-white/10 scale-[1.02]":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-gray-800/50"),children:[e.jsx(Va,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Auto"})]})]})]}),e.jsxs(E.div,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 mb-4 uppercase tracking-wider pl-1 font-sans",children:"Conta"}),e.jsxs("nav",{className:"space-y-3",children:[e.jsxs(W,{to:"/partner/settings",onClick:()=>f(!1),className:"flex items-center gap-4 p-3.5 rounded-2xl bg-white dark:bg-gray-800/40 hover:bg-gray-50 dark:hover:bg-gray-800 border border-gray-100 dark:border-gray-700/50 hover:border-gray-200 dark:hover:border-gray-700 hover:shadow-md transition-all group active:scale-[0.99]",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-50 dark:bg-gray-800 border border-gray-100 dark:border-gray-700 flex items-center justify-center text-gray-500 dark:text-gray-400 group-hover:text-pink-600 dark:group-hover:text-pink-400 group-hover:bg-pink-50 dark:group-hover:bg-pink-900/20 group-hover:border-pink-100 dark:group-hover:border-pink-900/30 transition-all",children:e.jsx(Dr,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white group-hover:text-pink-600 dark:group-hover:text-pink-400 transition-colors",children:"Configura√ß√µes"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Gerencie seus dados"})]}),e.jsx("div",{className:"text-gray-300 group-hover:text-pink-400 group-hover:translate-x-1 transition-all",children:e.jsx(Te,{className:"w-5 h-5"})})]}),e.jsxs("a",{href:"https://babybook.ai/help",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 p-3.5 rounded-2xl bg-white dark:bg-gray-800/40 hover:bg-gray-50 dark:hover:bg-gray-800 border border-gray-100 dark:border-gray-700/50 hover:border-gray-200 dark:hover:border-gray-700 hover:shadow-md transition-all group active:scale-[0.99]",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-50 dark:bg-gray-800 border border-gray-100 dark:border-gray-700 flex items-center justify-center text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 group-hover:bg-blue-50 dark:group-hover:bg-blue-900/20 group-hover:border-blue-100 dark:group-hover:border-blue-900/30 transition-all",children:e.jsx(Ca,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"Central de Ajuda"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Suporte e tutoriais"})]}),e.jsx("div",{className:"text-gray-300 group-hover:text-blue-400 group-hover:translate-x-1 transition-all",children:e.jsx(Te,{className:"w-5 h-5"})})]}),e.jsxs(W,{to:"/partner/logout",className:"flex items-center gap-4 p-3.5 rounded-2xl hover:bg-red-50 dark:hover:bg-red-900/10 group transition-all active:scale-[0.99]",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-50 dark:bg-gray-800 border border-gray-100 dark:border-gray-700 flex items-center justify-center text-gray-400 group-hover:text-red-600 dark:group-hover:text-red-400 group-hover:bg-red-50 dark:group-hover:bg-red-900/20 group-hover:border-red-100 dark:group-hover:border-red-900/30 transition-all",children:e.jsx(kr,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-bold text-gray-600 dark:text-gray-400 group-hover:text-red-600 dark:group-hover:text-red-400 transition-colors",children:"Sair da Conta"})})]})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 mb-4 uppercase tracking-wider pl-1",children:"Suporte"}),e.jsxs("nav",{className:"space-y-3",children:[e.jsxs(W,{to:"/partner/help",onClick:()=>f(!1),className:"flex items-center gap-4 p-3.5 rounded-2xl bg-white dark:bg-gray-800/40 hover:bg-gray-50 dark:hover:bg-gray-800 border border-gray-100 dark:border-gray-700/50 hover:border-gray-200 dark:hover:border-gray-700 hover:shadow-md transition-all group active:scale-[0.99]",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-50 dark:bg-gray-800 border border-gray-100 dark:border-gray-700 flex items-center justify-center text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 group-hover:bg-blue-50 dark:group-hover:bg-blue-900/20 group-hover:border-blue-100 dark:group-hover:border-blue-900/30 transition-all",children:e.jsx(Ca,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"Central de Ajuda"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Tire suas d√∫vidas"})]}),e.jsx("div",{className:"text-gray-300 group-hover:text-blue-400 group-hover:translate-x-1 transition-all",children:e.jsx(Te,{className:"w-5 h-5"})})]}),e.jsxs(W,{to:"/partner/terms",onClick:()=>f(!1),className:"flex items-center gap-4 p-3.5 rounded-2xl bg-white dark:bg-gray-800/40 hover:bg-gray-50 dark:hover:bg-gray-800 border border-gray-100 dark:border-gray-700/50 hover:border-gray-200 dark:hover:border-gray-700 hover:shadow-md transition-all group active:scale-[0.99]",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-50 dark:bg-gray-800 border border-gray-100 dark:border-gray-700 flex items-center justify-center text-gray-500 dark:text-gray-400 group-hover:text-amber-600 dark:group-hover:text-amber-400 group-hover:bg-amber-50 dark:group-hover:bg-amber-900/20 group-hover:border-amber-100 dark:group-hover:border-amber-900/30 transition-all",children:e.jsx(Dt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white group-hover:text-amber-600 dark:group-hover:text-amber-400 transition-colors",children:"Termos e Pol√≠ticas"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Informa√ß√µes legais"})]}),e.jsx("div",{className:"text-gray-300 group-hover:text-amber-400 group-hover:translate-x-1 transition-all",children:e.jsx(Te,{className:"w-5 h-5"})})]})]})]})]}),e.jsx(ut,{className:"border-t border-gray-100 dark:border-gray-800 p-6 bg-gray-50/50 dark:bg-gray-800/20",children:e.jsxs("button",{onClick:O,disabled:l.isPending,className:"flex items-center justify-center gap-2 w-full px-4 py-3.5 text-sm font-bold text-red-600 bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30 dark:text-red-300 rounded-xl border border-red-100 dark:border-red-900/50 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed group",children:[e.jsx(kr,{className:"w-4 h-4 group-hover:-translate-x-0.5 transition-transform"}),l.isPending?"Saindo...":"Sair da conta"]})})]})})]})]})]})})}),e.jsx(Pi.Provider,{value:{setHeader:d},children:e.jsxs("main",{className:"flex-1 pb-28",children:[n?e.jsx("div",{className:"md:hidden sticky top-16 z-30 border-b border-gray-200/60 dark:border-gray-800 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center gap-3",children:[n.backTo?e.jsx(W,{to:n.backTo,"aria-label":n.backLabel||"Voltar",className:"inline-flex items-center justify-center w-8 h-8 rounded-lg bg-gray-100/50 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:text-pink-600 dark:hover:text-pink-400 hover:bg-pink-50 dark:hover:bg-pink-900/20 transition-all duration-200 active:scale-95",children:e.jsx(Et,{className:"w-4 h-4"})}):null,e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("p",{className:"text-base font-bold text-gray-900 dark:text-white truncate",children:n.title}),(ae=n.badge)!=null&&ae.text?e.jsx("span",{className:D("inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold uppercase tracking-wide flex-shrink-0",j(n.badge.tone)),children:n.badge.text}):null]})}),n.actions?e.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:n.actions}):null]})}):null,e.jsx(Ro,{})]})}),w&&e.jsx("div",{className:"fixed bottom-6 inset-x-0 z-50 flex justify-center pointer-events-none",children:e.jsx("nav",{className:"flex items-center gap-1 p-1.5 rounded-full border border-white/20 dark:border-gray-700/50 bg-white/70 dark:bg-gray-900/70 shadow-[0_8px_32px_rgba(0,0,0,0.12)] dark:shadow-[0_8px_32px_rgba(0,0,0,0.4)] backdrop-blur-xl ring-1 ring-black/5 dark:ring-white/5 pointer-events-auto transform transition-all duration-500 hover:scale-[1.02]","aria-label":"Navega√ß√£o principal",children:e.jsx(wt,{id:"partner-nav",children:Jd.map(L=>{const ee=L.icon;return e.jsx(Io,{to:L.to,end:L.end,className:({isActive:ne})=>D("relative flex items-center gap-2 px-5 py-3 rounded-full text-sm font-bold transition-all duration-300 isolate",ne?"text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100/50 dark:hover:bg-gray-800/50"),children:({isActive:ne})=>e.jsxs(e.Fragment,{children:[ne&&e.jsx(E.div,{layoutId:"partner-nav-pill",className:"absolute inset-0 bg-gray-900 dark:bg-white rounded-full z-[-1] shadow-lg",transition:{type:"spring",stiffness:400,damping:30}}),e.jsx(ee,{className:D("w-5 h-5 transition-transform duration-300",ne?"text-white dark:text-gray-900 scale-110":"")}),ne&&e.jsx(E.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"whitespace-nowrap overflow-hidden text-white dark:text-gray-900",children:L.label})]})},L.to)})})})}),e.jsx(Yd,{})]})}const em=()=>e.jsx("div",{role:"status","aria-label":"loading",className:"inline-flex items-center justify-center",children:e.jsxs("svg",{className:"animate-spin h-8 w-8 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})});function Ws({children:t}){const r=ke(l=>l.isAuthenticated),a=ke(l=>l.isLoading),s=ht();return a?e.jsx("div",{className:"py-16 flex items-center justify-center",children:e.jsx(em,{})}):r?t:e.jsx(lt,{to:`/login?redirectTo=${encodeURIComponent(s.pathname)}`,replace:!0})}const tm=Mo("relative overflow-hidden bg-gray-200 dark:bg-gray-700",{variants:{variant:{default:"rounded-lg",circular:"rounded-full",text:"rounded h-4",title:"rounded h-6 w-3/4",paragraph:"rounded h-4 w-full",avatar:"rounded-full w-10 h-10",thumbnail:"rounded-xl w-full aspect-video",card:"rounded-xl"},animation:{shimmer:"",pulse:"animate-pulse",none:""}},defaultVariants:{variant:"default",animation:"shimmer"}}),z=c.forwardRef(({className:t,variant:r,animation:a,width:s,height:l,style:o,...i},n)=>{const d={...o,width:typeof s=="number"?`${s}px`:s,height:typeof l=="number"?`${l}px`:l};return e.jsx("div",{ref:n,className:D(tm({variant:r,animation:a}),t),style:d,...i,children:a==="shimmer"&&e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-[shimmer_1.5s_infinite] bg-gradient-to-r from-transparent via-white/20 dark:via-white/10 to-transparent"})})});z.displayName="Skeleton";function rm(){return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col transition-colors duration-300",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-white/95 dark:bg-gray-800/95 backdrop-blur-lg border-b border-gray-200/60 dark:border-gray-700/50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-6 h-6 rounded-md"}),e.jsx(z,{className:"h-6 w-32 rounded-md"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-16 h-8 rounded-lg"}),e.jsx(z,{className:"w-9 h-9 rounded-lg"}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg p-1.5 pr-3",children:[e.jsx(z,{className:"w-8 h-8 rounded-full"}),e.jsx(z,{className:"h-4 w-24 hidden sm:block rounded"})]})]})]})})}),e.jsxs("main",{className:"flex-1 pb-24 max-w-6xl mx-auto w-full px-4 sm:px-6 py-6 sm:py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(z,{className:"h-8 w-48 mb-2 rounded-lg"}),e.jsx(z,{className:"h-4 w-64 rounded"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(z,{className:"h-32 rounded-2xl"}),e.jsx(z,{className:"h-32 rounded-2xl"}),e.jsx(z,{className:"h-32 rounded-2xl"})]}),e.jsx(z,{className:"h-64 rounded-2xl w-full"})]}),e.jsxs("div",{className:"fixed bottom-4 left-1/2 z-50 flex w-[calc(100%-2rem)] max-w-md -translate-x-1/2 items-center rounded-full border border-gray-200/60 dark:border-gray-600/40 bg-white/95 dark:bg-gray-800/95 px-2 py-2 shadow-lg backdrop-blur-lg",children:[e.jsx("div",{className:"flex-1 flex justify-center",children:e.jsx(z,{className:"w-6 h-6 rounded-full"})}),e.jsx("div",{className:"flex-1 flex justify-center",children:e.jsx(z,{className:"w-6 h-6 rounded-full"})}),e.jsx("div",{className:"flex-1 flex justify-center",children:e.jsx(z,{className:"w-6 h-6 rounded-full"})})]})]})}function am({children:t}){const r=ke(n=>n.user),a=ke(n=>n.isAuthenticated),s=ke(n=>n.isLoading),l=ht();if(s)return e.jsx(rm,{});if(!a)return e.jsx(lt,{to:`/pro/login?redirectTo=${encodeURIComponent(l.pathname)}`,replace:!0});const o=["photographer","admin"],i=r==null?void 0:r.role;return!i||!o.includes(i)?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-md text-center shadow-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Acesso Restrito"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"O Portal do Parceiro √© exclusivo para fot√≥grafos parceiros. Se voc√™ √© um fot√≥grafo interessado em se tornar parceiro, entre em contato conosco."}),e.jsx("div",{className:"flex gap-3 justify-center",children:e.jsx(W,{to:"/pro/login",className:"px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors",children:"Fazer login"})})]})}):t}function it({value:t,onChange:r,label:a,rules:s=[],showValidation:l=!0,validateOnBlur:o=!1,validateDelay:i=500,helperText:n,error:d,containerClassName:u,className:m,id:p,icon:f,rightElement:x,...b}){const[g,h]=c.useState("idle"),[k,v]=c.useState(null),[y,N]=c.useState(!1);c.useEffect(()=>{if(!l||s.length===0||!y&&o)return;if(!t){h("idle"),v(null);return}h("validating");const w=setTimeout(async()=>{try{for(const I of s)if(!await I.test(t)){h("invalid"),v(I.message);return}h("valid"),v(null)}catch{h("invalid"),v("Erro ao validar")}},i);return()=>clearTimeout(w)},[t,s,l,y,o,i]);const _=w=>{var I;N(!0),(I=b.onBlur)==null||I.call(b,w)},A=p||(a==null?void 0:a.toLowerCase().replace(/\s+/g,"-")),O=!!d?"invalid":g,C=d??k,j=c.useMemo(()=>{if(!l||!t)return null;switch(O){case"validating":return e.jsx(fe,{className:"w-4 h-4 animate-spin text-gray-400"});case"valid":case"valid":return e.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center animate-in zoom-in-50 duration-200",style:{backgroundColor:"var(--bb-color-success)"},children:e.jsx(Re,{className:"w-3 h-3 text-white"})});case"invalid":return e.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center animate-in zoom-in-50 duration-200",style:{backgroundColor:"var(--bb-color-danger)"},children:e.jsx(De,{className:"w-3 h-3 text-white"})});default:return null}},[O,t,l]);return e.jsxs("div",{className:u,children:[a&&e.jsx("label",{htmlFor:A,className:"block text-sm font-medium mb-1",style:{color:"var(--bb-color-ink)"},children:a}),e.jsxs("div",{className:"relative",children:[f&&e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",children:e.jsx(f,{className:"w-5 h-5"})}),b.multiline?e.jsx("textarea",{id:A,value:t,onChange:r,onBlur:_,className:D("w-full py-3 border rounded-xl transition-all outline-none resize-none",f?"pl-12 pr-4":"px-4","focus:ring-2 focus:ring-[var(--bb-color-accent)]/20 focus:border-[var(--bb-color-accent)]",l&&t||x?"pr-12":"",x&&l&&t?"pr-20":"",m),style:{backgroundColor:"var(--bb-color-surface)",color:"var(--bb-color-ink)",borderColor:O==="invalid"?"var(--bb-color-danger)":O==="valid"?"var(--bb-color-success)":"var(--bb-color-border-strong)"},...b}):e.jsx("input",{id:A,value:t,onChange:r,onBlur:_,className:D("w-full py-3 border rounded-xl transition-all outline-none",f?"pl-12 pr-4":"px-4","focus:ring-2 focus:ring-[var(--bb-color-accent)]/20 focus:border-[var(--bb-color-accent)]",l&&t||x?"pr-12":"",x&&l&&t?"pr-20":"",m),style:{backgroundColor:"var(--bb-color-surface)",color:"var(--bb-color-ink)",borderColor:O==="invalid"?"var(--bb-color-danger)":O==="valid"?"var(--bb-color-success)":"var(--bb-color-border-strong)"},...b}),(j||x)&&e.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[x,j]})]}),C&&O==="invalid"&&e.jsxs("p",{className:"mt-1.5 text-xs flex items-center gap-1 animate-in fade-in-0 slide-in-from-top-1 duration-200",style:{color:"var(--bb-color-danger)"},children:[e.jsx(pt,{className:"w-3 h-3"}),C]}),n&&O!=="invalid"&&e.jsx("p",{className:"mt-1.5 text-xs",style:{color:"var(--bb-color-ink-muted)"},children:n})]})}const _r={email:{test:t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),message:"Informe um e-mail v√°lido"},required:t=>({test:r=>r.trim().length>0,message:`${t} √© obrigat√≥rio`}),minLength:t=>({test:r=>r.length>=t,message:`M√≠nimo de ${t} caracteres`}),maxLength:t=>({test:r=>r.length<=t,message:`M√°ximo de ${t} caracteres`})};function ea(t,r="/jornada"){return!t||!t.startsWith("/")||t.startsWith("//")||t.includes("\\")||t.includes("\0")||t.length>2048?r:t}function Mi({className:t}){return e.jsxs("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-label":"Google",children:[e.jsx("path",{fill:"#4285F4",d:"M23.754 12.276c0-.85-.076-1.67-.218-2.458H12.24v4.654h6.451c-.278 1.5-1.115 2.773-2.377 3.627v3.01h3.834c2.244-2.068 3.526-5.115 3.526-8.833z"}),e.jsx("path",{fill:"#34A853",d:"M12.24 24c3.21 0 5.899-1.06 7.865-2.881l-3.834-3.01c-1.062.717-2.422 1.147-4.031 1.147-3.103 0-5.735-2.097-6.676-4.924H1.611v3.09A11.997 11.997 0 0012.24 24z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.564 14.332a7.287 7.287 0 010-4.664V6.578H1.611a11.998 11.998 0 000 10.844l3.953-3.09z"}),e.jsx("path",{fill:"#EA4335",d:"M12.24 4.75c1.744 0 3.311.6 4.545 1.78l3.405-3.405C18.132.96 15.45 0 12.24 0 7.032 0 2.477 2.69 1.611 6.578l3.953 3.09c.94-2.827 3.573-4.918 6.676-4.918z"})]})}function Ti({className:t}){return e.jsxs("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-label":"Microsoft",children:[e.jsx("rect",{x:"1.5",y:"1.5",width:"10",height:"10",rx:"1.2",fill:"#F35325"}),e.jsx("rect",{x:"12.5",y:"1.5",width:"10",height:"10",rx:"1.2",fill:"#81BC06"}),e.jsx("rect",{x:"1.5",y:"12.5",width:"10",height:"10",rx:"1.2",fill:"#FFBA08"}),e.jsx("rect",{x:"12.5",y:"12.5",width:"10",height:"10",rx:"1.2",fill:"#05A6F0"})]})}function Ri({className:t}){return e.jsxs("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-label":"Apple",children:[e.jsx("path",{fill:"#111",d:"M19.665 13.194c-.03-3.048 2.487-4.527 2.598-4.592-1.421-2.076-3.63-2.36-4.411-2.382-1.871-.19-3.652 1.137-4.604 1.137-.966 0-2.449-1.11-4.031-1.08-2.077.03-4 .211-5.076 3.092-2.173 3.764-.55 9.338 1.558 12.392 1.036 1.488 2.28 3.16 3.905 3.1 1.575-.06 2.17-1.002 4.072-1.002 1.9 0 2.444 1.002 4.08.97 1.693-.028 2.766-1.5 3.8-2.99 1.2-1.757 1.69-3.46 1.72-3.553-.04-.02-3.29-1.267-3.31-5.074z"}),e.jsx("path",{fill:"#111",d:"M15.58 3.76c.84-1.019 1.406-2.43 1.263-3.838-1.221.048-2.713.813-3.595 1.83-.79.91-1.48 2.36-1.3 3.748 1.37.107 2.793-.694 3.632-1.74z"})]})}const ta={sm:"px-3 py-2 text-xs font-semibold",md:"px-6 py-2 text-sm font-bold",lg:"px-7 py-3 text-base font-bold"};function sm(){if(typeof window>"u")return!1;try{return typeof window.matchMedia!="function"?!1:window.matchMedia("(pointer: coarse)").matches}catch{return!1}}function om(){typeof navigator>"u"||typeof navigator.vibrate=="function"&&navigator.vibrate(10)}function im(t,r,a){const s=t.getBoundingClientRect(),l=r.clientX-s.left,o=r.clientY-s.top,i=Math.max(s.width,s.height)*2,n=document.createElement("span");n.className="bb-ripple",n.style.left=`${l}px`,n.style.top=`${o}px`,n.style.width=`${i}px`,n.style.height=`${i}px`,n.style.background=a,t.appendChild(n),window.setTimeout(()=>{n.remove()},520)}const Pe=c.forwardRef(({className:t,variant:r="primary",size:a="md",ripple:s=!0,haptics:l=!0,onPointerDown:o,disabled:i,children:n,...d},u)=>{const m=c.useRef(null),p=g=>{m.current=g,u&&(typeof u=="function"?u(g):u.current=g)},f=ta[a]??ta.md,x=(()=>{switch(r){case"secondary":return"border border-[var(--bb-color-accent)] text-[var(--bb-color-accent)] bg-transparent hover:bg-[var(--bb-color-accent)] hover:text-[var(--bb-color-surface)]";case"ghost":return"text-[var(--bb-color-ink-muted)] bg-transparent hover:bg-[var(--bb-color-bg)] hover:text-[var(--bb-color-ink)]";case"primary":default:return"bg-[var(--bb-color-accent)] text-[var(--bb-color-surface)] hover:brightness-110 shadow-sm hover:shadow-md"}})(),b=(()=>{switch(r){case"secondary":case"ghost":return"rgba(242, 153, 93, 0.25)";default:return"rgba(255, 255, 255, 0.25)"}})();return e.jsx("button",{ref:p,type:d.type??"button",disabled:i,onPointerDown:g=>{o==null||o(g),!i&&(l&&sm()&&om(),s&&m.current&&im(m.current,g,b))},className:D("bb-pressable relative inline-flex items-center justify-center gap-2 overflow-hidden rounded-2xl transition-all duration-300 active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--bb-color-accent)]/40 focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--bb-color-surface)] disabled:opacity-50",f,x,t),...d,children:n})});Pe.displayName="B2CButton";function nm(){const t=ve(),r=wi(),a=Ae(),s=ke(_=>_.login);ke(_=>_.isAuthenticated);const[l,o]=c.useState(""),[i,n]=c.useState(""),[d,u]=c.useState(!1),[m,p]=c.useState(!1),[f,x]=c.useState(null),b=!1,g="http://localhost:8000".replace(/\/+$/,""),h="/",k=new URLSearchParams(window.location.search),v=ea(k.get("redirectTo"),"/jornada"),y=async _=>{if(_.preventDefault(),x(null),!l.trim()){x("Informe seu e-mail");return}if(!i){x("Informe sua senha");return}try{await r.mutateAsync({email:l.trim(),password:i,rememberMe:m}),a.removeQueries({queryKey:["user-profile"]});const A=await re.get("/me",{schema:as});s(A),t(v)}catch(A){A instanceof Error?x(A.message||"Email ou senha inv√°lidos"):x("Email ou senha inv√°lidos")}},N=[{provider:"google",icon:e.jsx(Mi,{className:"h-5 w-5"}),label:"Google"},{provider:"microsoft",icon:e.jsx(Ti,{className:"h-5 w-5"}),label:"Microsoft"},{provider:"apple",icon:e.jsx(Ri,{className:"h-5 w-5"}),label:"Apple"}];return e.jsxs("div",{className:"app-b2c min-h-screen flex flex-col",style:{backgroundColor:"var(--bb-color-bg)"},children:[e.jsx("header",{className:"p-4",children:e.jsx("a",{href:h,rel:"noreferrer",children:e.jsx(or,{variant:"b2c",size:"md"})})}),e.jsx("main",{className:"flex-1 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-sm",children:[e.jsxs("div",{className:"rounded-2xl p-6 shadow-lg",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-xl font-bold",style:{color:"var(--bb-color-ink)"},children:"Bem-vindo de volta"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--bb-color-ink-muted)"},children:"Entre para continuar sua jornada"})]}),f&&e.jsxs("div",{className:"mb-4 p-3 rounded-xl flex items-center gap-2 text-sm",style:{backgroundColor:"var(--bb-color-danger-soft)",color:"var(--bb-color-danger)",border:"1px solid var(--bb-color-danger)"},children:[e.jsx(pt,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("p",{children:f})]}),e.jsx("div",{className:"flex justify-center gap-3 mb-4",children:N.map(({provider:_,icon:A,label:G})=>e.jsx("button",{type:"button",onClick:()=>window.location.href=`${g}/auth/${_}/authorize?state=${encodeURIComponent(v)}`,className:"w-12 h-12 rounded-xl flex items-center justify-center transition-all hover:scale-105",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border-strong)",color:"var(--bb-color-ink)"},"aria-label":`Entrar com ${G}`,title:`Entrar com ${G}`,children:A},_))}),e.jsxs("div",{className:"flex items-center gap-3 text-xs mb-4",children:[e.jsx("div",{className:"flex-1 h-px",style:{backgroundColor:"var(--bb-color-border)"}}),e.jsx("span",{style:{color:"var(--bb-color-ink-subtle)"},children:"ou com e-mail"}),e.jsx("div",{className:"flex-1 h-px",style:{backgroundColor:"var(--bb-color-border)"}})]}),e.jsxs("form",{onSubmit:y,className:"space-y-3",children:[e.jsx(it,{label:"E-mail",type:"email",value:l,onChange:_=>o(_.target.value),placeholder:"seu@email.com",autoComplete:"email",rules:[_r.email],validateDelay:300}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",style:{color:"var(--bb-color-ink)"},children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:d?"text":"password",value:i,onChange:_=>n(_.target.value),placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",className:"w-full px-3 py-2.5 rounded-xl text-sm transition-all focus:outline-none focus:ring-2 pr-10",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border-strong)",color:"var(--bb-color-ink)"},autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 opacity-60 hover:opacity-100 p-1 rounded-full hover:bg-[var(--bb-color-bg)] transition-colors",style:{color:"var(--bb-color-ink)"},"aria-label":d?"Ocultar senha":"Mostrar senha",children:d?e.jsx(Cr,{className:"w-4 h-4"}):e.jsx(Ot,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("button",{type:"button",onClick:()=>p(!m),"aria-pressed":m,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg transition-all",style:{backgroundColor:m?"var(--bb-color-accent-soft)":"var(--bb-color-muted)",color:m?"var(--bb-color-accent)":"var(--bb-color-ink-muted)"},children:[e.jsx("span",{children:"Lembrar"}),e.jsx("div",{className:"relative w-6 h-3 rounded-full transition-colors",style:{backgroundColor:m?"var(--bb-color-accent)":"var(--bb-color-border-strong)"},children:e.jsx("div",{className:"absolute top-0.5 w-2 h-2 bg-white rounded-full shadow transition-transform",style:{transform:m?"translateX(12px)":"translateX(2px)"}})})]}),e.jsx(W,{to:"/forgot-password",className:"hover:underline font-medium",style:{color:"var(--bb-color-accent)"},children:"Esqueci a senha"})]}),b,e.jsx(Pe,{type:"submit",disabled:r.isPending,className:"w-full",size:"lg",children:r.isPending?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4 animate-spin"}),"Entrando..."]}):"Entrar"})]}),e.jsxs("div",{className:"mt-4 text-center text-xs",style:{color:"var(--bb-color-ink-muted)"},children:["N√£o tem conta?"," ",e.jsx(W,{to:"/register",className:"font-medium",style:{color:"var(--bb-color-accent)"},children:"Criar agora"})]})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("a",{href:h,className:"inline-flex items-center gap-1 text-xs px-3 py-1.5 rounded-lg transition-all hover:opacity-80",style:{color:"var(--bb-color-ink-muted)"},rel:"noreferrer",children:"‚Üê Voltar"})})]})})]})}function lm(){const[t,r]=c.useState(""),[a,s]=c.useState(""),[l,o]=c.useState(""),[i,n]=c.useState(!1),[d,u]=c.useState(null),m=Kc(),p=ve(),f=ke(y=>y.isAuthenticated),x=new URLSearchParams(window.location.search),b=ea(x.get("redirectTo"),"/jornada"),g="http://localhost:8000".replace(/\/+$/,""),h="/";Qe.useEffect(()=>{f&&p(b)},[f,p,b]);async function k(y){y.preventDefault(),u(null);try{await m.mutateAsync({email:t,password:a,name:l});const N=new URLSearchParams(window.location.search),_=ea(N.get("redirectTo"),"/jornada");p(_)}catch(N){console.error(N),u(N.message||"Erro ao criar conta. Tente novamente.")}}const v=[{provider:"google",icon:e.jsx(Mi,{className:"h-5 w-5"}),label:"Google"},{provider:"microsoft",icon:e.jsx(Ti,{className:"h-5 w-5"}),label:"Microsoft"},{provider:"apple",icon:e.jsx(Ri,{className:"h-5 w-5"}),label:"Apple"}];return e.jsxs("div",{className:"app-b2c min-h-screen flex flex-col",style:{backgroundColor:"var(--bb-color-bg)"},children:[e.jsx("header",{className:"p-4",children:e.jsx("a",{href:h,rel:"noreferrer",children:e.jsx(or,{variant:"b2c",size:"md"})})}),e.jsx("main",{className:"flex-1 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-sm",children:[e.jsxs("div",{className:"rounded-2xl p-6 shadow-lg",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-xl font-bold",style:{color:"var(--bb-color-ink)"},children:"Crie sua conta"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--bb-color-ink-muted)"},children:"Comece a registrar momentos hoje"})]}),d&&e.jsxs("div",{className:"mb-4 p-3 rounded-xl flex items-center gap-2 text-sm",style:{backgroundColor:"var(--bb-color-danger-soft)",color:"var(--bb-color-danger)",border:"1px solid var(--bb-color-danger)"},children:[e.jsx(pt,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("p",{children:d})]}),e.jsx("div",{className:"flex justify-center gap-3 mb-4",children:v.map(({provider:y,icon:N,label:_})=>e.jsx("button",{type:"button",onClick:()=>window.location.href=`${g}/auth/${y}/authorize?state=${encodeURIComponent(b)}`,className:"w-12 h-12 rounded-xl flex items-center justify-center transition-all hover:scale-105",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border-strong)",color:"var(--bb-color-ink)"},"aria-label":`Entrar com ${_}`,title:`Entrar com ${_}`,children:N},y))}),e.jsxs("div",{className:"flex items-center gap-3 text-xs mb-4",children:[e.jsx("div",{className:"flex-1 h-px",style:{backgroundColor:"var(--bb-color-border)"}}),e.jsx("span",{style:{color:"var(--bb-color-ink-subtle)"},children:"ou cadastre com e-mail"}),e.jsx("div",{className:"flex-1 h-px",style:{backgroundColor:"var(--bb-color-border)"}})]}),e.jsxs("form",{onSubmit:k,className:"space-y-3",children:[e.jsx(it,{label:"Nome completo",type:"text",value:l,onChange:y=>o(y.target.value),placeholder:"Seu nome",autoComplete:"name",rules:[_r.required("Nome")]}),e.jsx(it,{label:"E-mail",type:"email",value:t,onChange:y=>r(y.target.value),placeholder:"seu@email.com",autoComplete:"email",rules:[_r.email],validateDelay:300}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",style:{color:"var(--bb-color-ink)"},children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:i?"text":"password",value:a,onChange:y=>s(y.target.value),placeholder:"Min. 6 caracteres",className:"w-full px-3 py-2.5 rounded-xl text-sm transition-all focus:outline-none focus:ring-2 pr-10",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border-strong)",color:"var(--bb-color-ink)"},autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>n(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 opacity-60 hover:opacity-100 p-1 rounded-full hover:bg-[var(--bb-color-bg)] transition-colors",style:{color:"var(--bb-color-ink)"},"aria-label":i?"Ocultar senha":"Mostrar senha",children:i?e.jsx(Cr,{className:"w-4 h-4"}):e.jsx(Ot,{className:"w-4 h-4"})})]})]}),e.jsx(Pe,{type:"submit",disabled:m.status==="pending",className:"w-full",size:"lg",children:m.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4 animate-spin"}),"Criando conta..."]}):"Criar Conta"})]}),e.jsxs("div",{className:"mt-4 text-center text-xs",style:{color:"var(--bb-color-ink-muted)"},children:["J√° tem uma conta?"," ",e.jsx(W,{to:"/login",className:"font-medium",style:{color:"var(--bb-color-accent)"},children:"Entrar"})]})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("a",{href:h,className:"inline-flex items-center gap-1 text-xs px-3 py-1.5 rounded-lg transition-all hover:opacity-80",style:{color:"var(--bb-color-ink-muted)"},rel:"noreferrer",children:"‚Üê Voltar"})})]})})]})}const cm=Mo("inline-flex items-center justify-center gap-2 rounded-xl text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-pink-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",soft:"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-sm hover:shadow-md hover:shadow-pink-500/20 hover:-translate-y-0.5",softOutline:"border-2 border-gray-200 dark:border-gray-700 bg-transparent text-gray-700 dark:text-gray-200 hover:border-pink-400 dark:hover:border-pink-500 hover:text-pink-600 dark:hover:text-pink-400 hover:bg-pink-50/50 dark:hover:bg-pink-950/20",softGhost:"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white",softDanger:"bg-red-50 dark:bg-red-950/30 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-900 hover:bg-red-100 dark:hover:bg-red-950/50",softSuccess:"bg-emerald-50 dark:bg-emerald-950/30 text-emerald-600 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-900 hover:bg-emerald-100 dark:hover:bg-emerald-950/50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3 text-xs",lg:"h-12 rounded-xl px-6 text-base",xl:"h-14 rounded-xl px-8 text-lg",icon:"h-10 w-10",iconSm:"h-8 w-8 rounded-lg",iconLg:"h-12 w-12",touch:"min-h-[44px] min-w-[44px] px-4 py-2"}},defaultVariants:{variant:"default",size:"default"}}),ct=c.forwardRef(({className:t,variant:r,size:a,asChild:s=!1,...l},o)=>{const i=s?xl:"button";return e.jsx(i,{className:D(cm({variant:r,size:a,className:t})),ref:o,...l})});ct.displayName="Button";function dm(){const t=ve(),r=Gc(),a=async()=>{try{const s=await r.mutateAsync({packageKey:"unlimited_social"}),l=s&&typeof s=="object"&&"checkout_url"in s?s.checkout_url:void 0;typeof l=="string"&&l&&(window.location.href=l)}catch(s){console.error(s)}};return e.jsxs("div",{className:"p-6 max-w-md mx-auto",children:[e.jsx("h1",{className:"mb-8 text-3xl font-bold",children:"Checkout (Mock)"}),e.jsx("p",{className:"mb-4",children:"Pacote: Pacote Completo - Repeti√ß√µes Ilimitadas"}),e.jsx(ct,{onClick:a,children:"Comprar agora"}),e.jsx("div",{className:"mt-6",children:e.jsx(ct,{variant:"link",onClick:()=>t(-1),size:"sm",children:"Voltar"})})]})}function mm(t){return 29700}function um(){const t=ht().search;return c.useMemo(()=>new URLSearchParams(t),[t])}function xm(){const t=ve(),r=um(),a=Hc(),{refetch:s}=Ni();return c.useEffect(()=>{(async()=>{const o=r.get("account_id"),i=r.get("package_key")||"unlimited_social",n=r.get("affiliate_code")??os();if(o)try{await a.mutateAsync({accountId:o,packageKey:i,affiliateCode:n??void 0}),typeof n=="string"&&n&&(mm(i),r.get("order_id"),void 0),await s(),t("/jornada")}catch(d){console.error(d)}})()},[a,t,r,s]),e.jsxs("div",{className:"p-6 max-w-md mx-auto text-center",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Pagamento confirmado"}),e.jsx("p",{className:"mb-4",children:"Redirecionando para a aplica√ß√£o..."}),e.jsx(ct,{onClick:()=>t("/jornada"),children:"Ir para a aplica√ß√£o"})]})}function bm(){const[t,r]=c.useState(""),a=Wc(),s=ve(),[l,o]=c.useState(!1);async function i(n){n.preventDefault();try{await a.mutateAsync({email:t}),o(!0)}catch(d){console.error(d)}}return e.jsxs("div",{className:"p-6 max-w-md mx-auto",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Recuperar senha"}),l?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"mb-4",children:"Se existir uma conta com esse email, voc√™ receber√° instru√ß√µes para redefinir sua senha."}),e.jsx(ct,{onClick:()=>s("/login"),variant:"secondary",children:"Ir para o login"})]}):e.jsxs("form",{onSubmit:i,className:"flex flex-col gap-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Informe o e-mail da conta e enviaremos instru√ß√µes para redefinir a senha."}),e.jsx("input",{type:"email",value:t,onChange:n=>r(n.target.value),placeholder:"Email",className:"p-3 border rounded"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(ct,{type:"submit",disabled:a.status==="pending",children:"Enviar instru√ß√µes"}),e.jsx(ct,{variant:"link",size:"sm",onClick:()=>s(-1),children:"Voltar"})]})]})]})}const ps=[{id:"cap-1",title:"Cap. 1 ‚Ä¢ A Doce Espera",subtitle:"Gesta√ß√£o",range:"Da grande descoberta ao ch√° revela√ß√£o",accent:"#F4DAD4",moments:[{id:"descoberta",templateKey:"capitulo_1_descoberta",title:"A Grande Descoberta",prompt:"Como voc√™ descobriu? E como foi a rea√ß√£o?",type:"unique",fields:[{key:"how_discovered",label:"Como descobriu?",type:"textarea",required:!0},{key:"reaction",label:"Rea√ß√£o",type:"textarea",required:!0}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["Regra de Ouro: 3 fotos + 1 v√≠deo (30s) ou √°udio."]}},{id:"diario-barriga",templateKey:"capitulo_1_diario_barriga",title:"Di√°rio da Barriga",prompt:"Semanas, medida e sentimentos ‚Äî sempre no mesmo √¢ngulo.",type:"recurring",badges:["Upsell ‚Ä¢ Tracking"],fields:[{key:"weeks",label:"Semanas",type:"number",required:!0,min:1,max:45},{key:"measurement_cm",label:"Medida (cm)",type:"number",required:!1,min:0,max:200},{key:"feelings",label:"Sentimentos",type:"textarea",required:!1}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["Foco em time-lapse (consist√™ncia √© tudo)."]}},{id:"ouvimos-coracao",templateKey:"capitulo_1_ouvimos_coracao",title:"Ouvimos seu Cora√ß√£o",prompt:"Onde foi? E quantos BPM?",type:"unique",fields:[{key:"where",label:"Onde foi?",type:"text",required:!1},{key:"bpm",label:"BPM",type:"number",required:!1,min:0,max:300}],media:{photos:{min:1,max:1},audio:{max:1,maxSeconds:30},notes:["1 foto (ultrassom) + 1 √°udio (30s) dos batimentos."]}},{id:"cha-bebe",templateKey:"capitulo_1_cha_bebe",title:"Ch√° Revela√ß√£o / Beb√™",prompt:"Tema e destaques. Como foi o momento da revela√ß√£o?",type:"unique",fields:[{key:"theme",label:"Tema",type:"text",required:!1},{key:"highlights",label:"Destaques",type:"textarea",required:!1}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["3 fotos + 1 v√≠deo (30s) da revela√ß√£o."]}},{id:"ensaio-gestante",templateKey:"capitulo_1_ensaio_gestante",title:"Ensaio Gestante",prompt:"Fot√≥grafo(a) e data. Um registro profissional dessa fase.",type:"unique",badges:["Especial ‚Ä¢ B2B/Voucher"],fields:[{key:"photographer",label:"Fot√≥grafo(a)",type:"text",required:!1}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["B2C: 3 fotos + 1 v√≠deo.","B2B: 50+ fotos (galeria)."]},mediaB2B:{photos:{min:50,max:200},notes:["B2B: 50+ fotos (galeria).","No modo B2B, este momento aceita somente fotos (sem v√≠deo/√°udio)."]}}]},{id:"cap-2",title:"Cap. 2 ‚Ä¢ A Chegada",subtitle:"Nascimento",range:"Do parto √† alta da maternidade",accent:"#F9E7C8",moments:[{id:"bem-vindo",templateKey:"capitulo_1_seja_bem_vindo",title:"Bem-Vindo(a)!",prompt:"Data/hora, peso, altura e local ‚Äî o cart√£o oficial.",type:"unique",fields:[{key:"time",label:"Hora (opcional)",type:"text",placeholder:"Ex: 14:35",required:!1},{key:"weight_kg",label:"Peso (kg)",type:"number",required:!1,min:0,max:20},{key:"height_cm",label:"Altura (cm)",type:"number",required:!1,min:0,max:100},{key:"location",label:"Local",type:"text",required:!1}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["3 fotos (1 principal para capa) + 1 v√≠deo (30s)."]}},{id:"relato-parto",templateKey:"capitulo_2_relato_parto",title:"Relato do Parto",prompt:"Tipo de parto e a hist√≥ria ‚Äî do seu jeito.",type:"unique",fields:[{key:"birth_type",label:"Tipo de Parto",type:"select",required:!1,options:[{value:"normal",label:"Normal"},{value:"cesarea",label:"Ces√°rea"},{value:"outro",label:"Outro"}]},{key:"story",label:"A Hist√≥ria",type:"richtext",required:!1,placeholder:"Conte o relato do parto..."}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30}}},{id:"marcas-crescimento",templateKey:"capitulo_2_marcas_crescimento",title:"Marcas do Crescimento",prompt:"M√£o ou p√©? Um carimbo afetivo pra guardar.",type:"recurring",badges:["Upsell ‚Ä¢ Creative"],fields:[{key:"age_months",label:"Idade (meses)",type:"number",required:!1,min:0,max:48},{key:"limb",label:"Membro",type:"select",required:!1,options:[{value:"mao",label:"M√£o"},{value:"pe",label:"P√©"}]}],media:{photos:{min:3,max:3},notes:["Sem v√≠deo (foco na arte / contraste)."]}},{id:"ensaio-newborn",templateKey:"capitulo_2_ensaio_newborn",title:"Ensaio Newborn",prompt:"Fot√≥grafo(a) e tema. Um registro profissional dos primeiros dias.",type:"unique",badges:["Especial ‚Ä¢ B2B/Voucher"],fields:[{key:"photographer",label:"Fot√≥grafo(a)",type:"text",required:!1},{key:"theme",label:"Tema",type:"text",required:!1}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["B2C: 3 fotos + 1 v√≠deo.","B2B: 50+ fotos (galeria)."]},mediaB2B:{photos:{min:50,max:200},notes:["B2B: 50+ fotos (galeria).","No modo B2B, este momento aceita somente fotos (sem v√≠deo/√°udio)."]}},{id:"lembrancas-maternidade",templateKey:"capitulo_1_lembrancas_maternidade",title:"Lembran√ßas da Maternidade",prompt:"Pulseira, roupinha, legendas e detalhes que viram mem√≥ria.",type:"unique",fields:[{key:"captions",label:"Legendas (pulseira, roupa, detalhes)",type:"textarea",required:!1}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["3 fotos documentais + 1 v√≠deo (30s)."]}}]},{id:"cap-3",title:"Cap. 3 ‚Ä¢ Primeiros Dias",subtitle:"Adapta√ß√£o",range:"Chegada em casa, cuidados e rotina",accent:"#FCE4EB",moments:[{id:"chegada-casa",templateKey:"capitulo_2_chegada_casa",title:"Chegada em Casa",prompt:"Quem recebeu? Conte como foi a entrada no novo ninho.",type:"unique",fields:[{key:"who_received",label:"Quem recebeu?",type:"tags",required:!1,placeholder:"Ex: mam√£e, papai, vov√≥"},{key:"story",label:"Relato",type:"textarea",required:!1}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["V√≠deo (30s) da entrada/chegada."]}},{id:"primeiro-banho",templateKey:"capitulo_2_primeiro_banho",title:"Primeiro Banho",prompt:"Quem deu? E como foi a rea√ß√£o?",type:"unique",fields:[{key:"who_gave",label:"Quem deu?",type:"text",required:!1},{key:"reaction",label:"Rea√ß√£o",type:"textarea",required:!1}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30}}},{id:"caiu-umbigo",templateKey:"capitulo_3_caiu_umbigo",title:"Caiu o Umbigo",prompt:"Data da queda e onde voc√™ guardou.",type:"unique",fields:[{key:"stored_where",label:"Onde guardou?",type:"text",required:!1}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30,required:!1},notes:["V√≠deo opcional."]}},{id:"soninho",templateKey:"capitulo_2_cantinho_dormir",title:"O Soninho",prompt:"Local e ritual ‚Äî um ru√≠do branco pra lembrar.",type:"unique",fields:[{key:"sleep_place",label:"Local",type:"select",required:!1,options:[{value:"berco",label:"Ber√ßo"},{value:"cama",label:"Cama"},{value:"outro",label:"Outro"}]},{key:"ritual",label:"Ritual",type:"textarea",required:!1}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["V√≠deo (30s) com o ritual/ambiente."]}}]},{id:"cap-4",title:"Cap. 4 ‚Ä¢ Marcos do Desenvolvimento",subtitle:"Conquistas",range:"Do primeiro sorriso √†s primeiras palavras",accent:"#E3F0E2",moments:[{id:"primeiro-sorriso",templateKey:"capitulo_3_primeiro_sorriso",title:"Primeiro Sorriso",prompt:"Qual foi o motivo do sorriso?",type:"unique",fields:[{key:"reason",label:"O motivo",type:"textarea",required:!1}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["V√≠deo (30s) do sorriso."]}},{id:"introducao-alimentar",templateKey:"capitulo_3_primeira_comida",title:"Introdu√ß√£o Alimentar",prompt:"O que comeu? E a rea√ß√£o (amou/odiou)?",type:"unique",fields:[{key:"food",label:"O que comeu?",type:"text",required:!1},{key:"reaction",label:"Rea√ß√£o",type:"select",required:!1,options:[{value:"amou",label:"Amou"},{value:"odiou",label:"Odiou"}]}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["3 fotos (a sujeira) + 1 v√≠deo (30s) da careta."]}},{id:"sentou-sozinho",templateKey:"capitulo_4_sentou_sozinho",title:"Sentou Sozinho",prompt:"O dia em que a postura virou conquista.",type:"unique",media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30}}},{id:"engatinhou",templateKey:"capitulo_3_primeiro_engatinhar",title:"Engatinhou",prompt:"Estilo (arrastando/4 apoios) e como foi o primeiro dia.",type:"unique",fields:[{key:"style",label:"Estilo",type:"select",required:!1,options:[{value:"arrastando",label:"Arrastando"},{value:"4_apoios",label:"4 apoios"}]}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30}}},{id:"primeiros-passos",templateKey:"capitulo_3_primeiros_passos",title:"Primeiros Passos",prompt:"Onde foi? Quem viu?",type:"unique",fields:[{key:"where",label:"Onde foi?",type:"text",required:!1}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30}}},{id:"primeiras-palavras",templateKey:"capitulo_3_primeira_palavra",title:"Primeiras Palavras",prompt:"Qual foi a palavra?",type:"unique",fields:[{key:"word",label:"A palavra",type:"text",required:!1}],media:{photos:{min:3,max:3},videoOrAudio:{max:1,maxSeconds:30},notes:["1 √°udio OU 1 v√≠deo (30s)."]}},{id:"primeiro-dente",templateKey:"capitulo_3_primeiro_dente",title:"Primeiro Dente",prompt:"Qual dente foi? (macro/sorriso).",type:"unique",fields:[{key:"tooth",label:"Qual dente?",type:"text",required:!1,placeholder:"Ex: incisivo inferior"}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30,required:!1},notes:["V√≠deo opcional."]}}]},{id:"cap-5",title:"Cap. 5 ‚Ä¢ Celebra√ß√µes & Rituais",subtitle:"Festas, f√© e datas especiais",range:"Do 1¬∫ m√™s ao primeiro ano",accent:"#FFE6D6",moments:[{id:"mesversario-m01",templateKey:"capitulo_5_mesversarios",title:"M√™svers√°rio ‚Ä¢ 1¬∫ m√™s",prompt:"Destaques do m√™s e a foto do time-lapse.",type:"series",defaults:{month_ref:1},fields:[{key:"month_ref",label:"M√™s ref.",type:"number",readOnly:!0},{key:"highlights",label:"Destaques",type:"textarea",required:!1}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["1 foto obrigat√≥ria para o time-lapse."]}},{id:"mesversario-m02",templateKey:"capitulo_5_mesversarios",title:"M√™svers√°rio ‚Ä¢ 2¬∫ m√™s",prompt:"O que mudou desde o m√™s passado?",type:"series",defaults:{month_ref:2},fields:[{key:"month_ref",label:"M√™s ref.",type:"number",readOnly:!0},{key:"highlights",label:"Destaques",type:"textarea"}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["1 foto obrigat√≥ria para o time-lapse."]}},{id:"mesversario-m03",templateKey:"capitulo_5_mesversarios",title:"M√™svers√°rio ‚Ä¢ 3¬∫ m√™s",prompt:"Destaques e novas manias do m√™s.",type:"series",defaults:{month_ref:3},fields:[{key:"month_ref",label:"M√™s ref.",type:"number",readOnly:!0},{key:"highlights",label:"Destaques",type:"textarea"}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["1 foto obrigat√≥ria para o time-lapse."]}},{id:"mesversario-m04",templateKey:"capitulo_5_mesversarios",title:"M√™svers√°rio ‚Ä¢ 4¬∫ m√™s",prompt:"Destaques do m√™s e uma frase que marcou.",type:"series",defaults:{month_ref:4},fields:[{key:"month_ref",label:"M√™s ref.",type:"number",readOnly:!0},{key:"highlights",label:"Destaques",type:"textarea"}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["1 foto obrigat√≥ria para o time-lapse."]}},{id:"mesversario-m05",templateKey:"capitulo_5_mesversarios",title:"M√™svers√°rio ‚Ä¢ 5¬∫ m√™s",prompt:"Destaques do m√™s e a carinha dessa fase.",type:"series",defaults:{month_ref:5},fields:[{key:"month_ref",label:"M√™s ref.",type:"number",readOnly:!0},{key:"highlights",label:"Destaques",type:"textarea"}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["1 foto obrigat√≥ria para o time-lapse."]}},{id:"mesversario-m06",templateKey:"capitulo_5_mesversarios",title:"M√™svers√°rio ‚Ä¢ 6¬∫ m√™s",prompt:"Metade do primeiro ano! Hora da foto especial.",type:"series",defaults:{month_ref:6},fields:[{key:"month_ref",label:"M√™s ref.",type:"number",readOnly:!0},{key:"highlights",label:"Destaques",type:"textarea"}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["1 foto obrigat√≥ria para o time-lapse."]}},{id:"mesversario-m07",templateKey:"capitulo_5_mesversarios",title:"M√™svers√°rio ‚Ä¢ 7¬∫ m√™s",prompt:"Registre as novas manias e express√µes preferidas.",type:"series",defaults:{month_ref:7},fields:[{key:"month_ref",label:"M√™s ref.",type:"number",readOnly:!0},{key:"highlights",label:"Destaques",type:"textarea"}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["1 foto obrigat√≥ria para o time-lapse."]}},{id:"mesversario-m08",templateKey:"capitulo_5_mesversarios",title:"M√™svers√°rio ‚Ä¢ 8¬∫ m√™s",prompt:"Quem √© o convidado especial desse m√™s?",type:"series",defaults:{month_ref:8},fields:[{key:"month_ref",label:"M√™s ref.",type:"number",readOnly:!0},{key:"highlights",label:"Destaques",type:"textarea"}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["1 foto obrigat√≥ria para o time-lapse."]}},{id:"mesversario-m09",templateKey:"capitulo_5_mesversarios",title:"M√™svers√°rio ‚Ä¢ 9¬∫ m√™s",prompt:"Tempo de celebrar as descobertas motoras.",type:"series",defaults:{month_ref:9},fields:[{key:"month_ref",label:"M√™s ref.",type:"number",readOnly:!0},{key:"highlights",label:"Destaques",type:"textarea"}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["1 foto obrigat√≥ria para o time-lapse."]}},{id:"mesversario-m10",templateKey:"capitulo_5_mesversarios",title:"M√™svers√°rio ‚Ä¢ 10¬∫ m√™s",prompt:"Registre a personalidade que j√° desponta.",type:"series",defaults:{month_ref:10},fields:[{key:"month_ref",label:"M√™s ref.",type:"number",readOnly:!0},{key:"highlights",label:"Destaques",type:"textarea"}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["1 foto obrigat√≥ria para o time-lapse."]}},{id:"mesversario-m11",templateKey:"capitulo_5_mesversarios",title:"M√™svers√°rio ‚Ä¢ 11¬∫ m√™s",prompt:"√öltimo antes do anivers√°rio! Fa√ßa um teaser do grande dia.",type:"series",defaults:{month_ref:11},fields:[{key:"month_ref",label:"M√™s ref.",type:"number",readOnly:!0},{key:"highlights",label:"Destaques",type:"textarea"}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["1 foto obrigat√≥ria para o time-lapse."]}},{id:"primeiro-ano",templateKey:"capitulo_5_primeiro_aniversario",title:"O Primeiro Ano (12m)",prompt:"Tema e relato ‚Äî o grande marco do primeiro ano.",type:"unique",fields:[{key:"theme",label:"Tema",type:"text"},{key:"story",label:"Relato",type:"richtext",placeholder:"Conte como foi a festa e o que voc√™ sentiu..."}],media:{photos:{min:10,max:10},video:{max:2,maxSeconds:30},notes:["Exce√ß√£o: 10 fotos + 2 v√≠deos (30s)."]}},{id:"batizado-apresentacao",templateKey:"capitulo_5_batizado_apresentacao",title:"Batizado / Apresenta√ß√£o",prompt:"Padrinhos e local. Um ritual que vira mem√≥ria.",type:"unique",badges:["Especial ‚Ä¢ B2B Link"],fields:[{key:"godparents",label:"Padrinhos",type:"tags",placeholder:"Ex: tia Ana, tio Jo√£o"},{key:"location",label:"Local",type:"text"}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30},notes:["B2C: 3 fotos + 1 v√≠deo.","B2B: 50+ fotos (galeria)."]},mediaB2B:{photos:{min:50,max:200},notes:["B2B: 50+ fotos (galeria).","No modo B2B, este momento aceita somente fotos (sem v√≠deo/√°udio)."]}},{id:"datas-especiais",templateKey:"capitulo_5_datas_especiais",title:"Datas Especiais",prompt:"Natal, P√°scoa, Dia dos Pais/M√£es‚Ä¶ Onde foi e como foi?",type:"recurring",fields:[{key:"year",label:"Ano",type:"number",min:1900,max:2100},{key:"where",label:"Onde foi?",type:"text"}],media:{photos:{min:3,max:3},video:{max:1,maxSeconds:30}}},{id:"galeria-arte",templateKey:"capitulo_4_galeria_arte",title:"Galeria de Arte",prompt:"T√≠tulo/descri√ß√£o do desenho e a hist√≥ria por tr√°s.",type:"recurring",badges:["Upsell ‚Ä¢ Creative"],fields:[{key:"art_title",label:"T√≠tulo",type:"text"},{key:"art_description",label:"Descri√ß√£o",type:"textarea"}],media:{photos:{min:3,max:3},notes:["Sem v√≠deo."]}}]}],pm={capitulo_5_primeiro_natal:"capitulo_5_datas_especiais",capitulo_5_primeira_pascoa:"capitulo_5_datas_especiais",capitulo_5_primeiro_dia_das_maes_pais:"capitulo_5_datas_especiais"},et=t=>t?pm[t]??t:null;let hm=0;const er=ps.flatMap(t=>t.moments.map(r=>({...r,chapterId:t.id,chapterTitle:t.title,chapterSubtitle:t.subtitle,chapterAccent:t.accent,range:t.range,order:hm++}))),Zt=t=>{if(!t)return;const r=et(t);if(r)return er.find(a=>a.templateKey===r)},Qs=er.length,gm=t=>{if(!t.length)return er[0]??null;const r=new Set(t.filter(s=>s.status==="draft"&&!!s.templateKey).map(s=>et(s.templateKey)??s.templateKey));if(r.size>0){const s=er.find(l=>r.has(l.templateKey));if(s)return s}const a=new Set(t.filter(s=>s.status==="published").map(s=>et(s.templateKey)??s.templateKey).filter(s=>!!s));return er.find(s=>!a.has(s.templateKey))??null},fm=t=>{const r=Uc(t),a=c.useMemo(()=>gm(r.data??[]),[r.data]),s=c.useMemo(()=>({moments:r.data??[],nextTemplate:a}),[r.data,a]);return{...r,data:s}},Ys="".replace(/\/$/,""),Ii=t=>typeof t=="string"&&/^https?:\/\//i.test(t),vm=t=>{const r=t.trim();if(r.startsWith("//"))return!0;const a=r.indexOf(":"),s=r.indexOf("/");return a!==-1&&(s===-1||a<s)},ym=t=>{if(!t)return;if(Ii(t))return t;if(vm(t))return;if(!Ys)return t;const r=t.replace(/^\/+/,"");return`${Ys}/${r}`},Fe=(t,r)=>{var o;const a=r?(o=t.variants)==null?void 0:o.find(i=>i.preset===r):void 0,s=(a==null?void 0:a.url)??t.url??(a==null?void 0:a.key)??t.key;if(Ii(s))return s??void 0;const l=(a==null?void 0:a.key)??t.key??s;return ym(l??void 0)},jm={private:{icon:Nt,label:"Privado"},people:{icon:jt,label:"Guardi√µes"},public:{icon:sa,label:"P√∫blico"}},fa=t=>String(t).padStart(2,"0"),km=t=>{if(!t||t<=0)return null;const r=Math.floor(t%60),a=Math.floor(t/60%60),s=Math.floor(t/3600);return s>0?`${s}:${fa(a)}:${fa(r)}`:`${a}:${fa(r)}`},wm=(t,r)=>{const a=new Date(t),s=new Intl.DateTimeFormat(r,{day:"numeric",month:"long"}).format(a);if(r.toLowerCase().startsWith("pt")){const l=s.split(" de ");if(l.length===2){const[o,i]=l;return`${o} de ${i.charAt(0).toUpperCase()}${i.slice(1)}`}}return s},Nm=t=>typeof t=="string"&&/\.(mp4|webm|mov|m4v)(\?|#|$)/i.test(t),Js=t=>{if(t)return Nm(t)?void 0:t},Xs=t=>Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),Cm=(t,r)=>Math.floor((Xs(r)-Xs(t))/864e5),Zs=(t,r)=>{const a=t.getUTCDate(),s=t.getUTCFullYear(),l=t.getUTCMonth(),o=new Date(Date.UTC(s,l+r,1)),i=o.getUTCFullYear(),n=o.getUTCMonth(),d=new Date(Date.UTC(i,n+1,0)).getUTCDate();return new Date(Date.UTC(i,n,Math.min(a,d)))},Sm=(t,r,a)=>{if(!t)return null;const s=new Date(t),l=new Date(r);if(Number.isNaN(s.getTime())||Number.isNaN(l.getTime())||l.getTime()<s.getTime())return null;let o=(l.getUTCFullYear()-s.getUTCFullYear())*12+(l.getUTCMonth()-s.getUTCMonth());Zs(s,o).getTime()>l.getTime()&&(o=Math.max(0,o-1));const n=Zs(s,o),d=Math.max(0,Cm(n,l)),u=Math.floor(o/12),m=o%12,p=[];return u>0&&p.push(a("b2c.moments.card.age.years",{count:u})),m>0&&p.push(a("b2c.moments.card.age.months",{count:m})),u===0&&d>0&&p.push(a("b2c.moments.card.age.days",{count:d})),p.length===0?a("b2c.moments.card.age.days",{count:0}):p.slice(0,2).join(` ${a("common.and")} `)},_m=t=>{const r=Zt(t.templateKey??void 0),a=t.payload,s=(r==null?void 0:r.fields)??[];if(!a||s.length===0)return null;const l=[];for(const o of s){if(l.length>=2)break;const i=a[o.key];if(i!=null&&!(o.type==="textarea"||o.type==="richtext")){if(o.type==="tags"){const n=Array.isArray(i)?i.filter(d=>typeof d=="string").join(", "):typeof i=="string"?i:"";n&&l.push(`${o.label}: ${n}`);continue}if(o.type==="date"||o.type==="datetime"){const n=typeof i=="string"?i:"";if(!n)continue;const d=new Date(n);if(Number.isNaN(d.getTime()))continue;l.push(`${o.label}: ${d.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}`);continue}if(typeof i=="string"){const n=i.trim();if(!n)continue;l.push(`${o.label}: ${n}`);continue}if(typeof i=="number"){l.push(`${o.label}: ${i}`);continue}}}return l.length>0?l.join(" ‚Ä¢ "):null},va=({moment:t,compact:r=!1,recurrence:a=null})=>{var he,ye;const{t:s,i18n:l}=ce(),o=ve(),{selectedChild:i}=Xe(),n=ke(H=>H.user),d=(n==null?void 0:n.role)==="owner",[u,m]=Qe.useState(!1),[p,f]=Qe.useState(null),x=t.occurredAt??t.createdAt,b=(l==null?void 0:l.language)||"pt-BR",g=Sm(i==null?void 0:i.birthday,x,s),h=t.payload,k=t.summary||(h==null?void 0:h.relato)||"",v=Qe.useMemo(()=>t.media??[],[t.media]),y=_m(t),N=v.filter(H=>H.kind==="photo"),_=v.filter(H=>H.kind==="video"),A=N[0]??v[0],G=N.filter(H=>H.id!==(A==null?void 0:A.id)).slice(0,2),C=_[0]??null??N.filter(H=>H.id!==(A==null?void 0:A.id)).slice(2,3)[0]??null,j=new Set([A==null?void 0:A.id,(he=G[0])==null?void 0:he.id,(ye=G[1])==null?void 0:ye.id,C==null?void 0:C.id].filter(Boolean)),w=Math.max(0,v.length-j.size),I=p?v.find(H=>H.id===p)??null:null,M=Qe.useMemo(()=>v.filter(H=>H.kind==="photo"||H.kind==="video"),[v]),V=Qe.useMemo(()=>p?M.findIndex(H=>H.id===p):-1,[p,M]),J=M.length>1&&V>=0,ae=Qe.useCallback(H=>{if(M.length===0)return;const we=(H%M.length+M.length)%M.length;f(M[we].id)},[M]),L=Qe.useCallback(()=>{J&&ae(V-1)},[V,J,ae]),ee=Qe.useCallback(()=>{J&&ae(V+1)},[V,J,ae]),ne=H=>f(H),ue=()=>f(null);Qe.useEffect(()=>{if(!p)return;const H=te=>{if(te.key==="Escape"){f(null);return}if(te.key==="ArrowLeft"){te.preventDefault(),L();return}te.key==="ArrowRight"&&(te.preventDefault(),ee())},we=document.body.style.overflow;return document.body.style.overflow="hidden",document.addEventListener("keydown",H),()=>{document.body.style.overflow=we,document.removeEventListener("keydown",H)}},[p,ee,L]);const B=H=>{H.target.closest("button")||o(`/jornada/moment/${t.id}`)},se=H=>{H.stopPropagation(),o(`/jornada/moment/${t.id}/edit`)};return r?e.jsx("div",{className:"aspect-square bg-gray-200 rounded-xl"}):e.jsx(dl,{id:`moment-card:${t.id}`,children:e.jsxs(It.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:D("relative w-full flex flex-col rounded-[2.5rem] overflow-hidden shadow-[0_12px_36px_-8px_rgba(0,0,0,0.08)] dark:shadow-none border transition-all duration-300 mb-8 hover:shadow-[0_16px_48px_-12px_rgba(0,0,0,0.12)]","max-h-[calc(100svh-11rem)]"),style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},onClick:B,children:[a?e.jsx("div",{className:"absolute left-0 top-0 h-full w-1.5 opacity-80",style:{backgroundColor:a.kind==="recurring"?"var(--bb-color-accent)":"var(--bb-color-ink-muted)"},"aria-hidden":!0}):null,e.jsxs("div",{className:"px-6 pt-5 pb-4 flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0 flex flex-col",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 text-xs font-bold uppercase tracking-wider text-[var(--bb-color-ink-muted)] opacity-80",children:[e.jsx("span",{children:wm(x,b)}),g&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-current opacity-40"}),e.jsx("span",{children:g})]}),a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-current opacity-40"}),e.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full px-2 py-0.5 text-[10px] font-bold uppercase tracking-[0.25em]",style:{backgroundColor:a.kind==="recurring"?"rgba(242,153,93,0.1)":"rgba(148,163,184,0.1)",color:"var(--bb-color-ink)"},title:`${a.label} ¬∑ ${a.index}/${a.total}`,children:[a.kind==="recurring"?e.jsx(_n,{className:"h-3 w-3"}):e.jsx(An,{className:"h-3 w-3"}),e.jsx("span",{className:"tracking-[0.25em]",children:a.label}),e.jsxs("span",{className:"opacity-70",children:[a.index,"/",a.total]})]})]}):null]}),e.jsx("h3",{className:"text-[22px] font-serif font-bold text-[var(--bb-color-ink)] mt-2 leading-tight truncate tracking-tight",children:t.title}),y?e.jsx("p",{className:"mt-1 text-[13px] leading-snug truncate opacity-70",style:{color:"var(--bb-color-ink)"},title:y,children:y}):null]}),e.jsx("div",{className:"text-[var(--bb-color-ink-muted)] opacity-50",children:Qe.createElement(jm[t.privacy].icon,{className:"w-4 h-4"})})]}),A?e.jsxs("div",{className:"w-full",children:[e.jsx("button",{type:"button",onClick:H=>{H.stopPropagation(),ne(A.id)},className:"block w-full text-left","aria-label":s("b2c.moments.card.actions.openFeatured"),children:e.jsx(It.div,{layoutId:`media-${t.id}-${A.id}`,className:D("relative w-full overflow-hidden",v.length<=1?"aspect-[4/3] max-h-[min(52svh,420px)]":"aspect-[4/3] max-h-[min(42svh,340px)]"),style:{backgroundColor:"var(--bb-color-bg)"},children:(()=>{const H=A.kind==="photo"?Fe(A):Js(Fe(A,"thumb")||Fe(A,"card"));return H?e.jsx("img",{src:H,alt:t.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full opacity-10",style:{background:"repeating-linear-gradient(45deg, var(--bb-color-border) 0, var(--bb-color-border) 1px, transparent 0, transparent 50%)",backgroundSize:"20px 20px"}})})()})}),v.length>1?e.jsx("div",{className:D("grid gap-0.5 mt-0.5",(()=>{const H=[G[0]??null,G[1]??null,C].filter(Boolean).length;return H<=1?"grid-cols-1":H===2?"grid-cols-2":"grid-cols-3"})()),children:[G[0]??null,G[1]??null,C].filter(Boolean).map((H,we,te)=>{const xe=H.kind==="video",S=xe?Js(Fe(H,"thumb")||Fe(H,"card")):Fe(H,"thumb")||Fe(H,"card")||Fe(H),$=xe?km(H.durationSeconds):null,oe=we===te.length-1&&w>0;return e.jsxs("button",{type:"button",onClick:Q=>{Q.stopPropagation(),ne(H.id)},className:"relative aspect-square overflow-hidden text-left",style:{backgroundColor:"var(--bb-color-bg)"},"aria-label":s(xe?"b2c.moments.card.actions.openVideo":"b2c.moments.card.actions.openPhoto"),children:[e.jsx(It.div,{layoutId:`media-${t.id}-${H.id}`,className:"absolute inset-0",children:S?e.jsx("img",{src:S,alt:t.title,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full opacity-10",style:{background:"repeating-linear-gradient(45deg, var(--bb-color-border) 0, var(--bb-color-border) 1px, transparent 0, transparent 50%)",backgroundSize:"20px 20px"}})}),xe?e.jsxs("div",{className:"absolute inset-0 bg-black/15",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-white/25 backdrop-blur-sm text-white",children:e.jsx(Jr,{className:"w-4 h-4 fill-current ml-0.5"})})}),$?e.jsx("div",{className:"absolute right-2 bottom-2 rounded-md bg-black/60 px-2 py-1 text-[11px] font-semibold text-white",children:$}):null]}):null,oe?e.jsx("div",{className:"absolute inset-0 bg-black/45 flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-bold text-lg",children:["+",w]})}):null]},H.id)})}):null]}):e.jsx("div",{className:"px-5",children:e.jsxs("div",{className:D("rounded-2xl border p-5","flex items-start gap-4"),style:{backgroundColor:"var(--bb-color-bg)",borderColor:"var(--bb-color-border)"},children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl",style:{backgroundColor:"color-mix(in srgb, var(--bb-color-ink) 6%, transparent)",color:"var(--bb-color-ink-muted)"},"aria-hidden":!0,children:e.jsx(Ge,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--bb-color-ink)"},children:s("b2c.moments.card.noMedia.title")}),e.jsx("p",{className:"mt-1 text-xs",style:{color:"var(--bb-color-ink-muted)"},children:s("b2c.moments.card.noMedia.description")})]})]})}),e.jsxs("div",{className:"px-5 py-4 pb-2 flex-1 min-h-0",children:[e.jsx("p",{className:D("text-[var(--bb-color-ink-muted)] text-[15px] leading-relaxed",u?"":"line-clamp-3"),children:k||e.jsx("span",{className:"italic opacity-50",children:s("b2c.moments.card.noDescription")})}),k&&k.trim().length>=80?e.jsx("button",{type:"button",onClick:H=>{H.stopPropagation(),m(we=>!we)},className:"text-[var(--bb-color-accent)] text-xs font-bold uppercase tracking-wider mt-2",children:s(u?"b2c.moments.card.actions.seeLess":"b2c.moments.card.actions.seeMore")}):null]}),e.jsx("div",{className:"px-4 py-3 flex items-center justify-end border-t border-[var(--bb-color-border)] mt-2",children:d&&e.jsxs("button",{onClick:se,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-xl hover:bg-[var(--bb-color-bg)] text-[var(--bb-color-ink-muted)] hover:text-[var(--bb-color-ink)] transition-colors text-xs font-medium",children:[e.jsx(Dn,{className:"w-3.5 h-3.5"}),s("common.edit")]})}),e.jsx(ml,{initial:!1,children:I?e.jsxs(It.div,{className:"fixed inset-0 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:ue,role:"dialog","aria-modal":"true","aria-label":s("b2c.moments.card.dialog.label"),children:[e.jsx(It.div,{className:"absolute inset-0 bg-black/70",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:e.jsx(It.div,{className:"relative w-full max-w-[920px]",initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},transition:{type:"spring",stiffness:380,damping:34},onClick:H=>H.stopPropagation(),children:e.jsxs(It.div,{layoutId:`media-${t.id}-${I.id}`,className:"overflow-hidden rounded-3xl bg-black shadow-2xl",children:[e.jsx("div",{className:"absolute left-3 right-3 top-3 z-10 flex items-center justify-end gap-2",children:e.jsx("button",{type:"button",onClick:ue,"aria-label":s("common.close"),className:D("inline-flex items-center justify-center rounded-full p-2","backdrop-blur-md","transition hover:opacity-90"),style:{backgroundColor:"color-mix(in srgb, var(--bb-color-surface) 24%, transparent)",color:"white",boxShadow:"0 0 0 1px rgba(255,255,255,0.18) inset, 0 10px 24px rgba(0,0,0,0.35)"},children:e.jsx(De,{className:"h-5 w-5","aria-hidden":!0})})}),J?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:H=>{H.stopPropagation(),L()},"aria-label":s("b2c.moments.card.actions.prevMedia"),className:"absolute left-3 top-1/2 z-10 -translate-y-1/2 rounded-full p-2 backdrop-blur-md transition hover:opacity-90",style:{backgroundColor:"color-mix(in srgb, var(--bb-color-surface) 24%, transparent)",color:"white",boxShadow:"0 0 0 1px rgba(255,255,255,0.18) inset, 0 10px 24px rgba(0,0,0,0.35)"},children:e.jsx(Ne,{className:"h-6 w-6","aria-hidden":!0})}),e.jsx("button",{type:"button",onClick:H=>{H.stopPropagation(),ee()},"aria-label":s("b2c.moments.card.actions.nextMedia"),className:"absolute right-3 top-1/2 z-10 -translate-y-1/2 rounded-full p-2 backdrop-blur-md transition hover:opacity-90",style:{backgroundColor:"color-mix(in srgb, var(--bb-color-surface) 24%, transparent)",color:"white",boxShadow:"0 0 0 1px rgba(255,255,255,0.18) inset, 0 10px 24px rgba(0,0,0,0.35)"},children:e.jsx(Te,{className:"h-6 w-6","aria-hidden":!0})}),e.jsxs("div",{className:"absolute bottom-3 left-1/2 z-10 -translate-x-1/2 rounded-full px-3 py-1 text-xs font-semibold backdrop-blur-md",style:{backgroundColor:"color-mix(in srgb, var(--bb-color-surface) 24%, transparent)",color:"white",boxShadow:"0 0 0 1px rgba(255,255,255,0.18) inset"},children:[V+1,"/",M.length]})]}):null,I.kind==="video"?e.jsx("video",{controls:!0,preload:"metadata",poster:Fe(I,"thumb")||Fe(I,"card")||void 0,src:Fe(I),className:"w-full h-[min(72svh,680px)] object-contain bg-black"}):e.jsx("img",{src:Fe(I),alt:t.title,className:"w-full h-[min(72svh,680px)] object-contain bg-black"})]})})})]},`overlay:${t.id}`):null})]})})},hr={};function Am(t){const{containerRef:r,key:a,delay:s=0}=t||{},l=ht(),o=a||l.pathname,i=c.useRef(!1),n=c.useCallback(()=>{r!=null&&r.current?hr[o]=r.current.scrollTop:hr[o]=window.scrollY},[r,o]),d=c.useCallback(()=>{const p=hr[o];if(p!==void 0){const f=()=>{r!=null&&r.current?r.current.scrollTop=p:window.scrollTo(0,p),i.current=!0};s>0?setTimeout(f,s):f()}},[r,o,s]),u=c.useCallback(()=>{delete hr[o]},[o]),m=c.useCallback(()=>{r!=null&&r.current?r.current.scrollTop=0:window.scrollTo(0,0)},[r]);return c.useEffect(()=>{let p;const f=()=>{cancelAnimationFrame(p),p=requestAnimationFrame(n)},x=(r==null?void 0:r.current)||window;return x.addEventListener("scroll",f,{passive:!0}),()=>{cancelAnimationFrame(p),x.removeEventListener("scroll",f)}},[r,n]),c.useEffect(()=>{i.current||requestAnimationFrame(()=>{d()})},[d]),c.useEffect(()=>()=>{n()},[n]),{saveScrollPosition:n,restoreScrollPosition:d,clearScrollPosition:u,scrollToTop:m,savedPosition:hr[o]}}const Dm=({template:t,childName:r,hasBirthday:a})=>{const s=ve();return r?a?t?e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,type:"spring"},className:"relative overflow-hidden rounded-2xl shadow-sm border border-orange-100/50 dark:border-stone-800 bg-gradient-to-br from-amber-50/50 via-[#fffbf6] to-orange-50/50 dark:from-[#1c1917] dark:via-[#201d1b] dark:to-[#1c1917]",children:[e.jsxs("div",{className:"relative z-10 flex flex-col sm:flex-row sm:items-center justify-between px-6 py-5 gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsx("div",{className:"p-1 rounded-full bg-orange-50 dark:bg-orange-900/10",children:e.jsx(pe,{className:"h-3 w-3 text-orange-400 dark:text-orange-300"})}),e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-orange-600/70 dark:text-orange-300/80",children:"Sugest√£o do dia"})]}),e.jsx("h3",{className:"font-serif text-2xl font-bold text-[var(--bb-color-ink)] dark:text-orange-50 leading-tight truncate",children:t.title}),e.jsx("p",{className:"text-[var(--bb-color-ink-muted)] dark:text-stone-400 text-sm mt-1 line-clamp-1",children:t.prompt})]}),e.jsxs(Pe,{variant:"secondary",onClick:()=>s(`/jornada/moment/draft/${t.id}`),className:"shrink-0",children:["Registrar",e.jsx(Ie,{className:"h-4 w-4"})]})]}),e.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-orange-100/20 dark:bg-orange-500/5 blur-3xl"}),e.jsx("div",{className:"absolute -left-10 -bottom-10 h-40 w-40 rounded-full bg-amber-100/20 dark:bg-amber-500/5 blur-3xl"})]}):e.jsxs(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"rounded-2xl border p-5 text-center shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsx("div",{className:"mb-2 flex justify-center text-[var(--bb-color-accent)]",children:e.jsx(pe,{className:"h-6 w-6"})}),e.jsx("p",{className:"font-serif text-lg text-[var(--bb-color-ink)]",children:"Jornada Completa!"}),e.jsx("p",{className:"text-sm text-[var(--bb-color-ink-muted)]",children:"Voc√™ registrou todos os momentos principais."}),e.jsx("button",{onClick:()=>s("/jornada/moment/avulso"),className:"mt-3 text-sm font-semibold text-[var(--bb-color-accent)] hover:underline",children:"Criar momento livre"})]}):e.jsxs(E.button,{whileTap:{scale:.98},onClick:()=>s("/jornada/perfil-crianca"),className:"relative w-full overflow-hidden rounded-2xl p-5 text-left shadow-lg transition-shadow hover:shadow-xl bg-gradient-to-br from-purple-500 to-fuchsia-600 dark:from-purple-700 dark:to-fuchsia-900",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"z-10",children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-purple-100 dark:text-purple-200",children:"Configure o HUD"}),e.jsx("h3",{className:"font-serif text-lg font-bold text-white mt-0.5",children:"Definir data de nascimento"})]}),e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-white/20 text-white backdrop-blur-sm z-10 transition-colors group-hover:bg-white/30",children:e.jsx(Ie,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-white/10"})]}):e.jsxs(E.button,{whileTap:{scale:.98},onClick:()=>s("/jornada/perfil-crianca"),className:"relative w-full overflow-hidden rounded-2xl p-5 text-left shadow-lg transition-shadow hover:shadow-xl bg-gradient-to-br from-pink-400 to-rose-500 dark:from-pink-600 dark:to-rose-800",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"z-10",children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-pink-100 dark:text-pink-200",children:"Comece agora"}),e.jsx("h3",{className:"font-serif text-lg font-bold text-white mt-0.5",children:"Cadastrar perfil da crian√ßa"})]}),e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-white/20 text-white backdrop-blur-sm z-10 transition-colors group-hover:bg-white/30",children:e.jsx(Ie,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-white/10"})]})},Em=({completed:t})=>{const r=Math.min(100,Math.round(t/Qs*100));return e.jsxs("section",{className:"mb-8 relative overflow-hidden rounded-2xl shadow-sm border border-orange-100/50 dark:border-stone-800 bg-gradient-to-br from-amber-50/50 via-[#fffbf6] to-orange-50/50 dark:from-[#1c1917] dark:via-[#201d1b] dark:to-[#1c1917]",children:[e.jsxs("div",{className:"relative z-10 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-orange-600/70 dark:text-orange-300/80",children:"Progresso geral"}),e.jsxs("h2",{className:"mt-1 font-serif text-2xl font-bold text-[var(--bb-color-ink)] dark:text-orange-50",children:[t," de ",Qs," momentos registrados"]})]}),e.jsxs("p",{className:"text-xl font-semibold text-orange-500 dark:text-orange-300",children:[r,"%"]})]}),e.jsx("div",{className:"mt-4 h-3 w-full rounded-full bg-orange-100 dark:bg-stone-800/50",children:e.jsx("div",{className:"h-full rounded-full transition-all bg-orange-400 dark:bg-orange-500",style:{width:`${r}%`,boxShadow:"0 2px 8px rgba(251, 146, 60, 0.2)"}})})]}),e.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-orange-100/20 dark:bg-orange-500/5 blur-3xl"}),e.jsx("div",{className:"absolute -left-10 -bottom-10 h-40 w-40 rounded-full bg-amber-100/20 dark:bg-amber-500/5 blur-3xl"})]})},nt=t=>(t??"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[_-]/g," ").replace(/[^\p{L}\p{N}]+/gu," ").trim().replace(/\s+/g," "),Pm={gestacao:["gravidez","gravida","gravidinha","prenatal","pre natal","pre-natal","ultrassom","eco","ecografia","pregnancy"],nascimento:["parto","cesarea","cesaria","cesariana","normal","maternidade","hospital","sala de parto","delivery","birth"],"primeiros dias":["primeiras semanas","recem nascido","recem-nascido","rn","puerperio","puerperio","pos parto","pos-parto","newborn"],marcos:["desenvolvimento","conquistas","habilidades","primeiras vezes","marcos de desenvolvimento"],celebracoes:["celebracao","comemoracao","festa","datas especiais","aniversario","batizado","batismo","comemorar","celebrations"],umbigo:["cordao","cordao umbilical","cordao-umbilical","coto"],dente:["dentinho","denticao","denticao","primeiro dentinho"],amamentacao:["mamar","mamadeira","lactacao","leite"]},Hr=new Set(["a","o","os","as","de","do","da","dos","das","e","em","no","na","nos","nas","um","uma","para","pra","pro","por","com","sem","ao","aos","aquela","aquele","seu","sua","seus","suas","bem","vindo","vinda"]),Mm=(...t)=>{const r=new Map;for(const s of t)for(const[l,o]of Object.entries(s)){const i=l;r.has(i)||r.set(i,new Set);const n=r.get(i);for(const d of o??[])n.add(d)}const a={};for(const[s,l]of r.entries())a[s]=Array.from(l);return a},Tm=t=>{const r=new Map,a=(o,i)=>{const n=nt(o),d=nt(i);!n||!d||Hr.has(n)||Hr.has(d)||(r.has(n)||r.set(n,new Set),r.get(n).add(i))},s=o=>nt(o).replace(/\s+/g," ").replace(/^capitulo\s+\d+\s+/,"").replace(/^cap\s+\d+\s+/,"").trim();for(const o of t){const i=`${o.subtitle} ${o.title}`;for(const n of o.moments){const d=s(n.templateKey);d&&(a(d,n.title),a(d,o.subtitle));const u=Array.from(new Set([...nt(d||n.templateKey).split(" "),...nt(n.title).split(" ")].map(m=>m.trim()).filter(m=>m.length>=4&&!Hr.has(m))));for(const m of u)a(m,n.title),a(m,d||n.templateKey),a(m,i)}}const l={};for(const[o,i]of r.entries())l[o]=Array.from(i);return l},Rm=t=>{const r=new Map,a=new Map;for(const[s,l]of Object.entries(t)){const o=nt(s),i=(l??[]).map(n=>nt(n));r.set(o,i);for(const n of i)n&&!a.has(n)&&a.set(n,o)}return{canonicalToSynonyms:r,synonymToCanonical:a}},Im=Rm(Mm(Pm,Tm(ps))),Lm=(t,r)=>{const a=nt(t);if(!a)return{q:"",tokens:[]};const s=a.split(" ").filter(Boolean),l=s.slice(0,-1).map((n,d)=>`${n} ${s[d+1]}`).filter(Boolean),o=[...s,...l],i=new Set;for(const n of o){i.add(n);const d=r.synonymToCanonical.get(n);if(d){i.add(d);for(const m of r.canonicalToSynonyms.get(d)??[])i.add(m);continue}const u=r.canonicalToSynonyms.get(n);if(u)for(const m of u)i.add(m)}return{q:a,tokens:Array.from(i).filter(Boolean)}},eo=(t,r,a)=>{if(!r)return{score:0,matchedExact:!1,matchedTokens:[]};if(!t)return{score:0,matchedExact:!1,matchedTokens:[]};let s=0;const l=[],o=t.includes(r),i=t.startsWith(r);o&&(s+=8),i&&(s+=4);for(const n of a)n&&t.includes(n)&&(l.push(n),s+=n.length>=5?2:1);return{score:s,matchedExact:o||i,matchedTokens:Array.from(new Set(l)).slice(0,6)}},Fm=t=>Array.from(new Set(t)),qm=t=>{const r=[],a=[];let s=0;for(const l of t??""){const o=s;s+=l.length;const i=l.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase();for(const n of i){const d=n==="_"||n==="-"?" ":n,u=/[\p{L}\p{N}]/u.test(d)?d:" ";a[a.length-1]===" "&&u===" "||(a.push(u),r.push(o))}}return{normalized:a.join(""),map:r}},Bm=t=>{const r=t.filter(s=>s.end>s.start).sort((s,l)=>s.start-l.start),a=[];for(const s of r){const l=a[a.length-1];!l||s.start>l.end?a.push({...s}):l.end=Math.max(l.end,s.end)}return a},Ur=(t,r)=>{const a=Fm(r.map(u=>nt(u)).flatMap(u=>u.split(" ")).map(u=>u.trim()).filter(u=>u.length>=3&&!Hr.has(u))).slice(0,8);if(!t||a.length===0)return t;const{normalized:s,map:l}=qm(t);if(!s||l.length===0)return t;const o=[];for(const u of a){let m=s.indexOf(u);for(;m!==-1;){const p=l[m],f=m+u.length,x=f<l.length?l[f]:t.length;p<x&&o.push({start:p,end:x}),m=s.indexOf(u,m+u.length)}}const i=Bm(o);if(i.length===0)return t;const n=[];let d=0;return i.forEach((u,m)=>{d<u.start&&n.push(t.slice(d,u.start)),n.push(e.jsx("mark",{className:"rounded px-1",style:{backgroundColor:"rgba(242,153,93,0.22)",color:"inherit"},children:t.slice(u.start,u.end)},`hl-${m}`)),d=u.end}),d<t.length&&n.push(t.slice(d)),e.jsx(e.Fragment,{children:n})},Om=({moments:t,isLoading:r,nextTemplate:a=null,childName:s,hasBirthday:l=!1,completedCount:o=0})=>{const i=ve(),{selectedChild:n}=Xe(),[d,u]=c.useState("timeline"),[m,p]=c.useState(null),[f,x]=c.useState("list"),[b,g]=c.useState(""),[h,k]=c.useState("all"),v=c.useRef({}),y=c.useRef(null),N=c.useRef(null),[_,A]=c.useState(!1),[G,O]=c.useState(null);Am({key:"moments-timeline",delay:100}),c.useEffect(()=>{if(d!=="chapters"){A(!1),O(null);return}const S=()=>{const F=document.querySelector("header"),X=(F==null?void 0:F.getBoundingClientRect().height)??0;return Math.round(X+12)},$=()=>{const F=y.current,X=N.current;if(!F||!X)return;const T=S(),U=X.getBoundingClientRect().top<=T,ie=F.getBoundingClientRect(),ge=ie.height;A(U),O({top:T,left:Math.round(ie.left),width:Math.round(ie.width),height:Math.round(ge)})},oe=F=>{let X=F;for(;X;){const T=window.getComputedStyle(X),P=T.overflowY,U=T.overflowX,ie=(P==="auto"||P==="scroll")&&X.scrollHeight>X.clientHeight,ge=(U==="auto"||U==="scroll")&&X.scrollWidth>X.clientWidth;if(ie||ge)return X;X=X.parentElement}return null},Q=()=>$(),de=()=>$(),q=oe(y.current);window.addEventListener("scroll",Q,{passive:!0}),q==null||q.addEventListener("scroll",Q,{passive:!0}),window.addEventListener("resize",de);const me=window.requestAnimationFrame($);return()=>{window.cancelAnimationFrame(me),window.removeEventListener("scroll",Q),q==null||q.removeEventListener("scroll",Q),window.removeEventListener("resize",de)}},[d,f,b,h]);const C=c.useMemo(()=>new Set((t??[]).filter(S=>S.status==="published").map(S=>et(S.templateKey)).filter(S=>!!S)),[t]),j=c.useMemo(()=>ps.map(S=>{const $=S.moments.length,oe=S.moments.filter(q=>C.has(q.templateKey)).length,Q=S.moments.find(q=>!C.has(q.templateKey)),de=$===0?0:oe/$*100;return{...S,completed:oe,total:$,nextMoment:Q,progressPercent:de}}),[C]);function w(S,$){return $>0&&S>=$?{key:"done",label:"Conclu√≠do",tone:"success"}:S>0?{key:"in_progress",label:"Em andamento",tone:"warning"}:{key:"todo",label:"N√£o iniciado",tone:"neutral"}}const I=c.useMemo(()=>j.filter(S=>{const $=w(S.completed,S.total);return!(h!=="all"&&$.key!==h)}),[h,j]),M=c.useMemo(()=>{const{q:S,tokens:$}=Lm(b,Im);if(!S)return{query:"",chapterResults:[],momentResults:[],matchChapterIds:null};const oe=[],Q=[],de=new Set;for(const q of I){const me=nt(`${q.title} ${q.subtitle} ${q.range}`),F=eo(me,S,$);F.score>0&&(oe.push({kind:"chapter",chapterId:q.id,score:F.score,matchedExact:F.matchedExact,matchedTokens:F.matchedTokens}),de.add(q.id));for(const X of q.moments){const T=nt(`${X.title} ${X.prompt} ${X.templateKey}`),P=eo(T,S,$);if(P.score>0){const U=Zt(X.templateKey)??{...X,chapterId:q.id,chapterTitle:q.title,chapterSubtitle:q.subtitle,chapterAccent:q.accent,range:q.range,order:0};Q.push({kind:"moment",chapterId:q.id,template:U,score:P.score,matchedExact:P.matchedExact,matchedTokens:P.matchedTokens}),de.add(q.id)}}}return oe.sort((q,me)=>me.score-q.score),Q.sort((q,me)=>me.score-q.score),{query:S,chapterResults:oe.slice(0,6),momentResults:Q.slice(0,10),matchChapterIds:de}},[b,I]),V=c.useMemo(()=>!M.query||!M.matchChapterIds?I:I.filter(S=>{var $;return($=M.matchChapterIds)==null?void 0:$.has(S.id)}),[M.matchChapterIds,M.query,I]),J=S=>{const $=v.current[S];$&&$.scrollIntoView({behavior:"smooth",block:"start"})},ae=S=>{p($=>$===S?null:S)},L=d==="chapters"&&!!b.trim(),ee=()=>{i("/jornada/moment/avulso")},ne=(S,$)=>{if(!n){i("/perfil-usuario");return}const oe=et($)??$,Q=t.filter(me=>et(me.templateKey)===oe).sort((me,F)=>(F.updatedAt??"").localeCompare(me.updatedAt??"")),de=Q.find(me=>me.status==="published");if(de){i(`/jornada/moment/${de.id}`);return}if(Q.find(me=>me.status==="draft")){i(`/jornada/moment/draft/${S}`);return}i(`/jornada/moment/draft/${S}`)},ue=t&&t.length>0,B=c.useMemo(()=>{const S=new Map,$=new Map;for(const Q of t??[]){const de=et(Q.templateKey)??Q.templateKey??"";de&&($.has(de)||$.set(de,[]),$.get(de).push(Q))}const oe=Q=>new Date(Q.occurredAt??Q.createdAt).getTime();for(const[Q,de]of $.entries()){const q=Zt(Q),me=q==null?void 0:q.type;if(me!=="recurring"&&me!=="series")continue;const F=de.slice().sort((T,P)=>oe(T)-oe(P)),X=F.length;F.forEach((T,P)=>{const U=P+1;S.set(T.id,{kind:me,label:me==="recurring"?"Recorrente":"S√©rie",index:U,total:X})})}return S},[t]),[se,he]=c.useState(()=>new Set),ye=S=>{he($=>{const oe=new Set($);return oe.has(S)?oe.delete(S):oe.add(S),oe})},H=c.useMemo(()=>{if(!(t!=null&&t.length))return[];const S=new Map,$=[],oe=q=>et(q.templateKey)??q.templateKey??"",Q=q=>new Date(q.occurredAt??q.createdAt).getTime();for(const q of t){const me=oe(q),F=me?Zt(me):null,X=F==null?void 0:F.type;if(!(X==="recurring"||X==="series")||!me){$.push(q);continue}const P=S.get(me)??[];P.push(q),S.set(me,P)}const de=[];for(const q of $)de.push({kind:"moment",moment:q});for(const[q,me]of S){const F=me.slice().sort((ge,Me)=>Q(Me)-Q(ge));if(F.length<=1){de.push({kind:"moment",moment:F[0]});continue}const X=F[0],T=F.slice(1),P=Zt(q),U=(P==null?void 0:P.title)??X.title??"Momento",ie=(P==null?void 0:P.type)==="series"?"series":"recurring";de.push({kind:"recurrence",canonicalTemplateKey:q,label:U,recurrenceKind:ie,latest:X,history:T})}return de.sort((q,me)=>{const F=q.kind==="moment"?q.moment:q.latest,X=me.kind==="moment"?me.moment:me.latest;return Q(X)-Q(F)}),de},[t]),we=()=>r?e.jsx("div",{className:"mt-6 space-y-4",children:[1,2,3].map(S=>e.jsx("div",{className:"h-32 rounded-3xl border shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"}},S))}):ue?e.jsx(wt,{id:"journey-timeline-items",children:e.jsxs("div",{className:"relative mt-6 space-y-10 pl-8",children:[e.jsx("div",{className:"absolute left-[11px] top-4 bottom-4 w-px bg-gradient-to-b from-gray-200/0 via-gray-200 dark:via-stone-700 to-gray-200/0","aria-hidden":"true"}),H.map((S,$)=>{if(S.kind==="moment"){const q=S.moment;return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[26px] top-8 h-3 w-3 rounded-full border-2 border-white dark:border-[#1c1917] bg-pink-300 dark:bg-pink-600 shadow-sm z-10 box-content"}),e.jsx(va,{moment:q,recurrence:B.get(q.id)??null})]},q.id)}const oe=se.has(S.canonicalTemplateKey),Q=S.history.length,de=S.recurrenceKind==="series"?"bg-purple-300 dark:bg-purple-600":"bg-orange-300 dark:bg-orange-600";return e.jsxs(E.div,{layout:!0,className:"relative space-y-3",children:[e.jsx("div",{className:`absolute -left-[26px] top-8 h-3 w-3 rounded-full border-2 border-white dark:border-[#1c1917] ${de} shadow-sm z-10 box-content`}),e.jsx("div",{className:"flex items-center justify-between gap-3 pr-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-wider",style:{color:"var(--bb-color-ink-muted)"},title:S.label,children:[e.jsx("span",{className:`inline-block w-1.5 h-1.5 rounded-full ${S.recurrenceKind==="series"?"bg-purple-400":"bg-orange-400"}`}),S.recurrenceKind==="series"?"S√©rie de Momentos":"Registro Recorrente"]})}),e.jsxs("div",{className:"relative z-0",children:[e.jsx(va,{moment:S.latest,recurrence:B.get(S.latest.id)??null}),Q>0&&!oe&&e.jsx("div",{className:"absolute top-full inset-x-4 -mt-6 h-4 bg-white/50 dark:bg-stone-800/50 border border-t-0 border-black/5 dark:border-white/5 rounded-b-[2rem] -z-10 scale-[0.98]"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>ye(S.canonicalTemplateKey),className:D("group flex items-center gap-2 text-xs font-semibold transition px-3 py-1.5 rounded-full hover:bg-black/5 dark:hover:bg-white/10",Q>0?"opacity-100":"opacity-40 cursor-default pointer-events-none"),style:{color:"var(--bb-color-ink-muted)"},"aria-expanded":oe,disabled:Q===0,children:oe?e.jsxs(e.Fragment,{children:[e.jsx(wr,{className:"w-3 h-3 rotate-180 transition-transform"}),"Ocultar ",Q," momentos anteriores"]}):e.jsxs(e.Fragment,{children:[e.jsx(Sa,{className:"w-3 h-3"}),"Ver ",Q," momentos anteriores"]})})}),e.jsx(qe,{initial:!1,children:oe&&Q>0?e.jsx(E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:420,damping:40,mass:.8},className:"overflow-hidden pl-2",children:e.jsx(E.div,{layout:!0,className:"space-y-6 pt-2 pb-4 border-l-2 border-dashed border-gray-100 dark:border-stone-800 ml-[5px]",children:S.history.map(q=>e.jsxs("div",{className:"relative pl-6",children:[e.jsx("div",{className:"absolute -left-[5px] top-6 w-2 h-2 rounded-full bg-gray-200 dark:bg-stone-700 ring-4 ring-white dark:ring-[#1c1917]"}),e.jsx(va,{moment:q,compact:!0,recurrence:B.get(q.id)??null})]},q.id))})},`history:${S.canonicalTemplateKey}`):null})]},`recurrence:${S.canonicalTemplateKey}`)})]})}):e.jsxs("div",{className:"mt-6 rounded-3xl border border-dashed p-6 md:p-8 text-center shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:"Nenhum momento publicado ainda. Use o HUD ou crie um momento livre para iniciar a hist√≥ria."}),e.jsxs(Pe,{onClick:ee,variant:"secondary",className:"mt-4",children:[e.jsx(Ye,{className:"h-5 w-5"}),"Registrar primeiro momento"]})]}),te=()=>V.length===0?e.jsxs("div",{className:"mt-6 rounded-3xl border border-dashed p-6 md:p-8 text-center shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:"Nenhum cap√≠tulo encontrado com os filtros atuais."}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{g(""),k("all")},className:"rounded-2xl border px-4 py-2 text-sm font-semibold transition",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},children:"Limpar filtros"}),e.jsx("button",{type:"button",onClick:()=>x(S=>S==="list"?"grid":"list"),className:"rounded-2xl border border-dashed px-4 py-2 text-sm font-semibold transition",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},children:"Alternar visualiza√ß√£o"})]})]}):f==="grid"?e.jsx(wt,{id:"journey-chapters-grid",children:e.jsx("div",{className:"mt-6 grid gap-4 md:grid-cols-2",children:V.map(S=>{const $=m===S.id,oe=w(S.completed,S.total),Q=S.nextMoment,de=oe.tone==="success"?{backgroundColor:"rgba(34, 197, 94, 0.12)",color:"rgb(22, 163, 74)",borderColor:"rgba(34, 197, 94, 0.28)"}:oe.tone==="warning"?{backgroundColor:"rgba(245, 158, 11, 0.12)",color:"rgb(217, 119, 6)",borderColor:"rgba(245, 158, 11, 0.28)"}:{backgroundColor:"rgba(148, 163, 184, 0.12)",color:"var(--bb-color-ink-muted)",borderColor:"rgba(148, 163, 184, 0.28)"};return e.jsxs(E.div,{layout:!0,ref:q=>{v.current[S.id]=q},className:"rounded-3xl border border-gray-100 dark:border-stone-800 p-4 md:p-5 shadow-sm transition-all duration-300 hover:shadow-md hover:border-pink-300 dark:hover:border-pink-600 bg-white dark:bg-[#1c1917]",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em]",style:{color:"var(--bb-color-ink-muted)"},children:S.title}),e.jsx("h4",{className:"mt-1 font-serif text-xl",style:{color:"var(--bb-color-ink)"},children:S.subtitle})]}),e.jsxs("span",{className:"shrink-0 inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-semibold",style:de,children:[e.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:S.accent},"aria-hidden":!0}),oe.label]})]}),e.jsx("p",{className:"mt-2 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:S.range}),e.jsxs("div",{className:"mt-4 flex items-center justify-between gap-3",children:[e.jsxs("p",{className:"text-sm font-semibold",style:{color:"var(--bb-color-ink)"},children:[S.completed,e.jsxs("span",{style:{color:"var(--bb-color-ink-muted)"},children:["/",S.total]})]}),e.jsxs("p",{className:"text-xs",style:{color:"var(--bb-color-ink-muted)"},children:[Math.round(S.progressPercent),"%"]})]}),e.jsx("div",{className:"mt-4 h-1.5 rounded-full",style:{backgroundColor:"var(--bb-color-muted)",opacity:.4},children:e.jsx("div",{className:"h-full rounded-full",style:{backgroundColor:"var(--bb-color-accent)",width:`${S.progressPercent}%`}})}),Q?e.jsxs("button",{type:"button",onClick:()=>ne(Q.id,Q.templateKey),className:"mt-4 w-full rounded-2xl px-4 py-2 text-sm font-semibold transition hover:opacity-90",style:{backgroundColor:"var(--bb-color-accent)",color:"var(--bb-color-surface)"},children:[oe.key==="in_progress"?"Continuar":"Come√ßar"," ¬∑"," ",Q.title]}):e.jsx("div",{className:"mt-4 w-full rounded-2xl border px-4 py-2 text-center text-sm font-semibold",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},children:"Cap√≠tulo completo"}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.jsx("button",{type:"button",onClick:()=>ae(S.id),className:"inline-flex flex-1 items-center justify-center gap-2 rounded-2xl border px-4 py-2 text-sm font-semibold transition",style:$?{backgroundColor:"var(--bb-color-ink)",color:"var(--bb-color-surface)",borderColor:"var(--bb-color-ink)"}:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},children:$?"Fechar":"Ver momentos"})}),e.jsx(qe,{initial:!1,children:$?e.jsx(E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:420,damping:40,mass:.8},className:"overflow-hidden",children:e.jsxs(E.div,{layout:!0,className:"mt-4 space-y-2",children:[S.moments.slice(0,4).map(q=>{const me=et(q.templateKey)??q.templateKey,X=t.filter(U=>et(U.templateKey)===me).filter(U=>U.status==="published").length,P=X>0?$e:_a;return e.jsx("button",{type:"button",onClick:()=>ne(q.id,q.templateKey),className:"w-full rounded-2xl border px-4 py-3 text-left transition-all duration-200 hover:shadow-md hover:border-pink-300 dark:hover:border-pink-600 active:scale-[0.99]",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},disabled:r,children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em]",style:{color:"var(--bb-color-ink-muted)"},children:q.type==="recurring"?"Recorrente":q.type==="series"?"S√©rie":"√önico"}),q.id==="marcas-crescimento"?e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[10px] font-bold uppercase tracking-[0.25em]",style:{borderColor:"rgba(242,153,93,0.35)",background:"linear-gradient(135deg, rgba(242,153,93,0.18), rgba(168,85,247,0.14))",color:"var(--bb-color-ink)",boxShadow:"0 0 0 1px rgba(242,153,93,0.08) inset"},title:"Gerado por IA",children:[e.jsx(pe,{className:"h-3 w-3","aria-hidden":!0}),"IA"]}):null]}),e.jsx("p",{className:"mt-0.5 font-semibold",style:{color:"var(--bb-color-ink)"},children:q.title})]}),X>0?e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-lg px-3 py-1 text-xs font-semibold",style:{backgroundColor:"var(--bb-color-success)",color:"var(--bb-color-surface)",opacity:.9},children:[e.jsx(P,{className:"h-4 w-4"}),q.type==="unique"?"Feito":`${X} registro(s)`]}):e.jsxs("span",{className:"inline-flex items-center gap-2 text-xs",style:{color:"var(--bb-color-ink-muted)"},children:[e.jsx(P,{className:"h-4 w-4"}),"N√£o iniciado"]})]})},q.id)}),S.moments.length>4?e.jsxs("p",{className:"px-1 text-xs",style:{color:"var(--bb-color-ink-muted)"},children:["+ ",S.moments.length-4," momento(s) no cap√≠tulo"]}):null]})},`chapter:${S.id}:moments`):null})]},S.id)})})}):e.jsx(wt,{id:"journey-chapters-list",children:e.jsx("div",{className:"mt-6 space-y-4",children:V.map(S=>{const $=m===S.id,oe=w(S.completed,S.total),Q=S.nextMoment,de=oe.tone==="success"?{backgroundColor:"rgba(34, 197, 94, 0.12)",color:"rgb(22, 163, 74)",borderColor:"rgba(34, 197, 94, 0.28)"}:oe.tone==="warning"?{backgroundColor:"rgba(245, 158, 11, 0.12)",color:"rgb(217, 119, 6)",borderColor:"rgba(245, 158, 11, 0.28)"}:{backgroundColor:"rgba(148, 163, 184, 0.12)",color:"var(--bb-color-ink-muted)",borderColor:"rgba(148, 163, 184, 0.28)"};return e.jsxs(E.div,{layout:!0,ref:q=>{v.current[S.id]=q},className:"rounded-3xl border border-gray-100 dark:border-stone-800 p-4 md:p-5 shadow-sm transition-all duration-300 hover:shadow-md hover:border-pink-300 dark:hover:border-pink-600 bg-white dark:bg-[#1c1917]",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em]",style:{color:"var(--bb-color-ink-muted)"},children:S.title}),e.jsx("h4",{className:"mt-1 font-serif text-xl",style:{color:"var(--bb-color-ink)"},children:S.subtitle}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:S.range})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-semibold",style:de,children:[e.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:S.accent},"aria-hidden":!0}),oe.label]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-serif text-3xl",style:{color:"var(--bb-color-ink)"},children:[S.completed,e.jsxs("span",{style:{color:"var(--bb-color-ink-muted)"},children:["/",S.total]})]}),e.jsx("p",{className:"text-xs uppercase tracking-[0.3em]",style:{color:"var(--bb-color-ink-muted)"},children:"momentos"})]})]})]}),e.jsx("div",{className:"mt-4 h-1.5 rounded-full",style:{backgroundColor:"var(--bb-color-muted)",opacity:.4},children:e.jsx("div",{className:"h-full rounded-full",style:{backgroundColor:"var(--bb-color-accent)",width:`${S.progressPercent}%`}})}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[Q?e.jsxs("button",{type:"button",onClick:()=>ne(Q.id,Q.templateKey),className:"rounded-2xl px-4 py-2 text-sm font-semibold transition hover:opacity-90",style:{backgroundColor:"var(--bb-color-accent)",color:"var(--bb-color-surface)"},children:[oe.key==="in_progress"?"Continuar":"Come√ßar"," ¬∑"," ",Q.title]}):null,e.jsxs("button",{type:"button",onClick:()=>ae(S.id),className:"inline-flex items-center gap-2 rounded-2xl border px-4 py-2 text-sm font-semibold transition hover:opacity-90 active:scale-[0.99]",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)",backgroundColor:"transparent"},children:[e.jsx("span",{children:$?"Esconder momentos":`Ver todos os momentos (${S.total})`}),e.jsx(wr,{className:D("h-4 w-4 transition-transform duration-200 ease-out",$?"rotate-180":"rotate-0"),"aria-hidden":!0})]})]}),e.jsx(qe,{initial:!1,children:$?e.jsx(E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:420,damping:40,mass:.8},className:"overflow-hidden",children:e.jsx(E.div,{layout:!0,className:"mt-5 space-y-3",children:S.moments.map(q=>{const me=et(q.templateKey)??q.templateKey,X=t.filter(U=>et(U.templateKey)===me).filter(U=>U.status==="published").length,P=X>0?$e:_a;return e.jsxs("button",{type:"button",onClick:()=>ne(q.id,q.templateKey),className:"w-full rounded-2xl border px-4 py-3 text-left transition-all duration-200 hover:shadow-md hover:border-pink-300 dark:hover:border-pink-600 active:scale-[0.99]",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},disabled:r,children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em]",style:{color:"var(--bb-color-ink-muted)"},children:q.type==="recurring"?"Recorrente":q.type==="series"?"S√©rie":"√önico"}),q.id==="marcas-crescimento"?e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[10px] font-bold uppercase tracking-[0.25em]",style:{borderColor:"rgba(242,153,93,0.35)",background:"linear-gradient(135deg, rgba(242,153,93,0.18), rgba(168,85,247,0.14))",color:"var(--bb-color-ink)",boxShadow:"0 0 0 1px rgba(242,153,93,0.08) inset"},title:"Gerado por IA",children:[e.jsx(pe,{className:"h-3 w-3","aria-hidden":!0}),"IA"]}):null]}),e.jsx("p",{className:"font-semibold",style:{color:"var(--bb-color-ink)"},children:q.title})]}),X>0?e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-lg px-3 py-1 text-xs font-semibold",style:{backgroundColor:"var(--bb-color-success)",color:"var(--bb-color-surface)",opacity:.9},children:[e.jsx(P,{className:"h-4 w-4"}),q.type==="unique"?"Feito":`${X} registro(s)`]}):e.jsxs("span",{className:"inline-flex items-center gap-2 text-xs",style:{color:"var(--bb-color-ink-muted)"},children:[e.jsx(P,{className:"h-4 w-4"}),"N√£o iniciado"]})]}),e.jsx("p",{className:"mt-1 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:q.prompt})]},q.id)})})},`chapter:${S.id}:moments`):null})]},S.id)})})}),xe=()=>d==="timeline"?e.jsx(Dm,{template:a??null,childName:s,hasBirthday:l}):e.jsx(Em,{completed:o});return e.jsxs("section",{className:"mb-12",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"w-full rounded-2xl border p-1.5 shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:e.jsx(wt,{id:"journey-view-tabs",children:e.jsx("div",{className:"flex flex-wrap gap-1.5",children:[{id:"timeline",label:"Timeline",icon:Sa},{id:"chapters",label:"Cap√≠tulos",icon:En}].map(S=>{const $=d===S.id,oe=S.icon;return e.jsxs("button",{type:"button",onClick:()=>u(S.id),className:D("relative flex-1 min-w-[140px] overflow-hidden rounded-2xl px-4 py-1.5 text-sm font-semibold transition-colors duration-300"),style:{color:$?"var(--bb-color-surface)":"var(--bb-color-ink-muted)"},children:[$&&e.jsx(E.span,{layoutId:"journey-view-pill",className:"absolute inset-0 rounded-2xl",style:{backgroundColor:"var(--bb-color-accent)",boxShadow:"0 8px 20px rgba(242,153,93,0.2)"},transition:{type:"spring",stiffness:320,damping:30}}),e.jsxs("span",{className:"relative z-10 inline-flex items-center justify-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 transition-colors duration-300",style:{color:$?"var(--bb-color-surface)":"var(--bb-color-ink-muted)"}}),S.label]})]},S.id)})})})})}),e.jsx("div",{className:"mt-6",children:xe()}),e.jsxs("div",{className:"mt-6",children:[d==="chapters"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-serif text-2xl",style:{color:"var(--bb-color-ink)"},children:"Cap√≠tulos"}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:"Explore a jornada por fases e continue exatamente de onde parou."})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>x("list"),className:"inline-flex items-center gap-2 rounded-2xl border px-3 py-1.5 text-sm font-semibold transition",style:f==="list"?{backgroundColor:"var(--bb-color-ink)",color:"var(--bb-color-surface)",borderColor:"var(--bb-color-ink)"}:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},children:[e.jsx(Pn,{className:"h-4 w-4"}),"Lista"]}),e.jsxs("button",{type:"button",onClick:()=>x("grid"),className:"inline-flex items-center gap-2 rounded-2xl border px-3 py-1.5 text-sm font-semibold transition",style:f==="grid"?{backgroundColor:"var(--bb-color-ink)",color:"var(--bb-color-surface)",borderColor:"var(--bb-color-ink)"}:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},children:[e.jsx(Mn,{className:"h-4 w-4"}),"Grade"]})]})]}),e.jsxs("div",{ref:y,className:"-mx-1",style:_&&G?{height:G.height}:void 0,children:[e.jsx("div",{ref:N,"aria-hidden":!0,className:"h-0"}),e.jsx("div",{className:_&&G?"fixed z-30 rounded-3xl border p-3 shadow-sm backdrop-blur":"sticky top-16 z-30 rounded-3xl border p-3 shadow-sm backdrop-blur",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",..._&&G?{top:G.top,left:G.left,width:G.width}:void 0},children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx($o,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2",style:{color:"var(--bb-color-ink-muted)"}}),e.jsx("input",{value:b,onChange:S=>g(S.target.value),onKeyDown:S=>{S.key==="Escape"&&g("")},placeholder:"Buscar cap√≠tulo ou momento...",className:"w-full rounded-2xl border py-2 pl-10 pr-3 text-sm font-medium outline-none transition",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"}})]}),L?e.jsxs("div",{className:"rounded-2xl border p-2",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 px-2 py-1",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em]",style:{color:"var(--bb-color-ink-muted)"},children:"Resultados"}),e.jsx("button",{type:"button",onClick:()=>g(""),className:"rounded-xl border px-2 py-1 text-xs font-semibold transition",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},children:"Limpar"})]}),e.jsx("div",{className:"max-h-[50vh] overflow-y-auto overscroll-contain pr-1",style:{WebkitOverflowScrolling:"touch"},children:M.chapterResults.length===0&&M.momentResults.length===0?e.jsxs("p",{className:"px-2 py-2 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:["Nenhum resultado para ‚Äú",b.trim(),"‚Äù. Dica: tente termos como ‚Äúgravidez‚Äù, ‚Äúparto‚Äù, ‚Äúumbigo‚Äù ou ‚Äúdente‚Äù."]}):e.jsxs("div",{className:"space-y-2",children:[M.chapterResults.length>0?e.jsxs("div",{children:[e.jsx("p",{className:"px-2 pt-2 text-xs font-semibold",style:{color:"var(--bb-color-ink-muted)"},children:"Cap√≠tulos"}),e.jsx("div",{className:"mt-1 space-y-1",children:M.chapterResults.map(S=>{const $=I.find(Q=>Q.id===S.chapterId);if(!$)return null;const oe=[b,...S.matchedTokens];return e.jsx("button",{type:"button",onClick:()=>{p($.id),window.requestAnimationFrame(()=>J($.id))},className:"w-full rounded-2xl border px-3 py-2 text-left transition hover:shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[10px] font-bold uppercase tracking-[0.25em]",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},children:"Cap√≠tulo"}),e.jsx("span",{className:"truncate font-semibold",style:{color:"var(--bb-color-ink)"},children:Ur($.subtitle,oe)}),S.matchedExact?null:e.jsx("span",{className:"shrink-0 rounded-full border px-2 py-0.5 text-[10px] font-bold uppercase tracking-[0.25em]",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},children:"Sin√¥nimo"})]}),e.jsx("p",{className:"mt-0.5 truncate text-xs",style:{color:"var(--bb-color-ink-muted)"},children:Ur(`${$.title} ¬∑ ${$.range}`,oe)})]}),e.jsx("span",{className:"shrink-0 h-2 w-2 rounded-full",style:{backgroundColor:$.accent},"aria-hidden":!0})]})},`chapter-${$.id}`)})})]}):null,M.momentResults.length>0?e.jsxs("div",{children:[e.jsx("p",{className:"px-2 pt-2 text-xs font-semibold",style:{color:"var(--bb-color-ink-muted)"},children:"Momentos"}),e.jsx("div",{className:"mt-1 space-y-1",children:M.momentResults.map(S=>{const $=I.find(Q=>Q.id===S.chapterId);if(!$)return null;const oe=[b,...S.matchedTokens];return e.jsx("button",{type:"button",onClick:()=>{p(S.chapterId),window.requestAnimationFrame(()=>J(S.chapterId)),ne(S.template.id,S.template.templateKey)},className:"w-full rounded-2xl border px-3 py-2 text-left transition hover:shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[10px] font-bold uppercase tracking-[0.25em]",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},children:"Momento"}),S.template.id==="marcas-crescimento"?e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[10px] font-bold uppercase tracking-[0.25em]",style:{borderColor:"rgba(242,153,93,0.35)",background:"linear-gradient(135deg, rgba(242,153,93,0.18), rgba(168,85,247,0.14))",color:"var(--bb-color-ink)",boxShadow:"0 0 0 1px rgba(242,153,93,0.08) inset"},title:"Gerado por IA",children:[e.jsx(pe,{className:"h-3 w-3","aria-hidden":!0}),"IA"]}):null,e.jsx("span",{className:"truncate font-semibold",style:{color:"var(--bb-color-ink)"},children:Ur(S.template.title,oe)}),S.matchedExact?null:e.jsx("span",{className:"shrink-0 rounded-full border px-2 py-0.5 text-[10px] font-bold uppercase tracking-[0.25em]",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},children:"Sin√¥nimo"})]}),e.jsx("p",{className:"mt-0.5 line-clamp-2 text-xs",style:{color:"var(--bb-color-ink-muted)"},children:Ur(S.template.prompt,oe)})]}),e.jsxs("div",{className:"shrink-0 text-right",children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-[0.25em]",style:{color:"var(--bb-color-ink-muted)"},children:"em"}),e.jsx("p",{className:"text-xs",style:{color:"var(--bb-color-ink)"},children:$.subtitle})]})]})},`moment-${S.chapterId}-${S.template.id}`)})})]}):null]})})]}):null,e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"all",label:"Todos"},{id:"todo",label:"N√£o iniciados"},{id:"in_progress",label:"Em andamento"},{id:"done",label:"Conclu√≠dos"}].map(S=>{const $=h===S.id;return e.jsx("button",{type:"button",onClick:()=>k(S.id),className:"rounded-2xl border px-3 py-1.5 text-sm font-semibold transition",style:$?{backgroundColor:"var(--bb-color-accent)",color:"var(--bb-color-surface)",borderColor:"var(--bb-color-accent)"}:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},children:S.label},S.id)})})]})})]})]}),d==="timeline"?we():r?null:te()]})]})},R=c.forwardRef(({className:t,animation:r="shimmer",...a},s)=>e.jsx("div",{ref:s,className:D("relative overflow-hidden rounded-lg",r==="pulse"&&"animate-pulse",t),style:{backgroundColor:"var(--bb-color-muted)"},...a,children:r==="shimmer"&&e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-[shimmer_1.5s_infinite]",style:{background:"linear-gradient(to right, transparent, var(--bb-color-surface-muted), transparent)"}})}));R.displayName="B2CSkeleton";function to(){return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx(R,{className:"h-9 w-32 rounded-lg"})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(R,{className:"h-11 w-full max-w-sm rounded-2xl"})}),e.jsxs("div",{className:"rounded-2xl shadow-sm p-6 mb-6 border",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsx(R,{className:"h-8 w-48 mb-2 rounded-lg"}),e.jsx(R,{className:"h-4 w-32 mb-4 rounded-md opacity-60"}),e.jsx(R,{className:"h-40 w-full rounded-2xl mb-4"}),e.jsx(R,{className:"h-3 w-64 rounded-md opacity-60"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"w-full rounded-2xl border p-1.5 shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx(R,{className:"h-9 flex-1 rounded-xl"}),e.jsx(R,{className:"h-9 flex-1 rounded-xl opacity-40"})]})})}),e.jsx(R,{className:"h-7 w-40 mb-4 rounded-lg"}),e.jsx("div",{className:"space-y-4",children:[1,2].map(t=>e.jsxs("div",{className:"rounded-3xl p-4 md:p-5 border space-y-3",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(R,{className:"h-10 w-10 rounded-2xl flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(R,{className:"h-6 w-3/4 rounded-lg"}),e.jsx(R,{className:"h-4 w-1/3 rounded-md opacity-60"}),e.jsx("div",{className:"pt-2",children:e.jsx(R,{className:"aspect-video w-full rounded-2xl"})})]})]}),e.jsx("div",{className:"flex justify-end pt-2 border-t",style:{borderColor:"var(--bb-color-border)"},children:e.jsx(R,{className:"h-8 w-20 rounded-xl"})})]},t))})]})}function $m(t){switch(t){case"success":return{icon:"text-[var(--bb-color-success)]",iconBg:"bg-[var(--bb-color-success)]/20 dark:bg-[var(--bb-color-success)]/10",iconRing:"ring-1 ring-[var(--bb-color-success)]/30"};case"warning":return{icon:"text-amber-500 dark:text-amber-400",iconBg:"bg-amber-50 dark:bg-amber-900/20",iconRing:"ring-1 ring-amber-100 dark:ring-amber-800/30"};case"danger":return{icon:"text-[var(--bb-color-danger)] dark:text-red-400",iconBg:"bg-[var(--bb-color-danger-soft)] dark:bg-red-900/20",iconRing:"ring-1 ring-[var(--bb-color-danger)]/20 dark:ring-red-800/30"};case"neutral":default:return{icon:"text-[var(--bb-color-accent)]",iconBg:"bg-[var(--bb-color-accent)]/10 dark:bg-[var(--bb-color-accent)]/20",iconRing:"ring-1 ring-[var(--bb-color-accent)]/20"}}}function Li({action:t}){const r=t.icon,a=D("inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-2xl text-sm font-semibold","bg-[var(--bb-color-accent)] text-white","shadow-[0_8px_20px_rgba(242,153,93,0.25)] dark:shadow-[0_8px_20px_rgba(242,153,93,0.15)]","hover:shadow-[0_12px_28px_rgba(242,153,93,0.35)] hover:-translate-y-0.5","active:scale-[0.98] transition-all duration-200","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--bb-color-accent)]/40 focus-visible:ring-offset-2 dark:focus-visible:ring-offset-[var(--bb-color-bg)]",t.className);return"to"in t&&typeof t.to=="string"?e.jsxs(W,{to:t.to,className:a,children:[r?e.jsx(r,{className:"w-4 h-4"}):null,t.label]}):e.jsxs("button",{type:"button",onClick:t.onClick,disabled:t.disabled,className:D(a,t.disabled&&"opacity-60 cursor-not-allowed"),children:[r?e.jsx(r,{className:"w-4 h-4"}):null,t.label]})}function Fi({action:t}){const r=t.icon,a=D("inline-flex items-center justify-center gap-2 rounded-2xl",ta.md,"border-2 border-[var(--bb-color-muted)] bg-[var(--bb-color-surface)] text-[var(--bb-color-ink)]","hover:border-[var(--bb-color-accent)]/60 hover:text-[var(--bb-color-accent)]","active:scale-[0.98] transition-all duration-200","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--bb-color-muted)]/40 focus-visible:ring-offset-2 dark:focus-visible:ring-offset-[var(--bb-color-bg)]",t.className);return"to"in t&&typeof t.to=="string"?e.jsxs(W,{to:t.to,className:a,children:[r?e.jsx(r,{className:"w-4 h-4"}):null,t.label]}):e.jsxs("button",{type:"button",onClick:t.onClick,disabled:t.disabled,className:D(a,t.disabled&&"opacity-60 cursor-not-allowed"),children:[r?e.jsx(r,{className:"w-4 h-4"}):null,t.label]})}function zm({variant:t,tone:r,icon:a,title:s,description:l,actions:o,children:i}){const n=$m(r),d=t==="page"?"bg-[var(--bb-color-surface)] rounded-2xl border border-[var(--bb-color-border)] shadow-lg p-8":t==="section"?"bg-[var(--bb-color-surface)]/50 rounded-2xl border border-[var(--bb-color-border)]/60 p-6":"",u=t!=="inline"?"max-w-md mx-auto text-center":"text-center",m=t==="page"||t==="section"?"":"py-6";return e.jsx("div",{className:d,children:e.jsxs("div",{className:D(u,m),children:[a?e.jsx("div",{className:D("w-16 h-16 mx-auto mb-5 rounded-full flex items-center justify-center transition-transform duration-300 hover:scale-105",n.iconBg,n.iconRing),children:e.jsx(a,{className:D("w-8 h-8",n.icon)})}):null,e.jsx("h2",{className:"text-xl font-semibold text-[var(--bb-color-ink)] mb-2.5 font-serif",children:s}),l?e.jsx("p",{className:"text-sm text-[var(--bb-color-ink-muted)] mb-5 leading-relaxed max-w-sm mx-auto",children:l}):null,i?e.jsx("div",{className:"mb-5",children:i}):null,o!=null&&o.primary||o!=null&&o.secondary?e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-center gap-3",children:[o.secondary?e.jsx(Fi,{action:o.secondary}):null,o.primary?e.jsx(Li,{action:o.primary}):null]}):null]})})}function hs({size:t="default",children:r,className:a}){const s=t==="narrow"?"max-w-2xl":t==="wide"?"max-w-6xl":"max-w-4xl";return e.jsx("div",{className:D("mx-auto w-full px-4 py-6",s,a),children:r})}function Um({variant:t="page",size:r="default",label:a}){const{t:s}=ce(),l=a||s("b2c.states.loading"),o=e.jsx("div",{role:"status","aria-live":"polite",className:D("flex items-center justify-center",t==="page"?"py-24":t==="section"?"py-12":"py-6"),children:e.jsxs("div",{className:"inline-flex items-center gap-3 text-sm text-[var(--bb-color-ink-muted)]",children:[e.jsx(rt,{className:"w-6 h-6 animate-pulse text-[var(--bb-color-accent)] fill-current"}),e.jsx("span",{className:"animate-pulse",children:l})]})});return t==="page"?e.jsx(hs,{size:r,children:o}):o}function lr({variant:t="page",size:r="default",title:a,description:s,errorDetails:l,onRetry:o,primaryAction:i,secondaryAction:n,skeleton:d,autoReloadInDev:u=!0}){const{t:m}=ce(),p=!1,f="babybook_b2c_reload_attempts",x=a||m("b2c.states.errorTitle"),b=s||m("b2c.states.errorDescription"),g=p;Qe.useEffect(()=>{},[g]);const h=()=>{sessionStorage.removeItem(f),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(v=>{v.forEach(y=>y.unregister())}),"caches"in window&&caches.keys().then(v=>{v.forEach(y=>caches.delete(y))}),window.location.reload()},k=e.jsx("div",{role:"alert","aria-live":"assertive",className:D(t==="page"?"py-12":"py-8"),children:e.jsxs("div",{className:D("bg-[var(--bb-color-surface)] rounded-2xl shadow-lg p-6 text-center max-w-md mx-auto",t==="page"?"border border-[var(--bb-color-border)]":""),children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-[var(--bb-color-danger-soft)] dark:bg-red-900/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-[var(--bb-color-danger)]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h2",{className:"text-xl font-bold text-[var(--bb-color-ink)] mb-2 font-serif",children:x}),e.jsx("p",{className:"text-[var(--bb-color-ink-muted)] mb-4",children:b}),p,e.jsxs("div",{className:"flex gap-3 justify-center",children:[n?e.jsx(Fi,{action:n}):e.jsx("button",{onClick:o??h,className:D("rounded-2xl border-2 border-[var(--bb-color-muted)] text-[var(--bb-color-ink)] hover:border-[var(--bb-color-accent)] hover:text-[var(--bb-color-accent)] transition-colors",ta.md),children:m("b2c.states.tryAgain")}),i?e.jsx(Li,{action:i}):e.jsx("button",{onClick:h,className:"px-4 py-2 rounded-2xl bg-[var(--bb-color-accent)] text-white hover:bg-[var(--bb-color-accent)]/90 transition-colors",children:m("b2c.states.reloadPage")})]})]})});return t==="page"?e.jsx(hs,{size:r,children:k}):k}function Fa({variant:t="page",size:r="default",tone:a="neutral",icon:s,title:l,description:o,primaryAction:i,secondaryAction:n}){const d=e.jsx(zm,{variant:t,tone:a,icon:s,title:l,description:o,actions:i||n?{primary:i,secondary:n}:void 0});return t==="page"?e.jsx(hs,{size:r,children:d}):d}const ro="@babybook/b2c-onboarding-dismissed",ya=[{id:"profile",titleKey:"b2c.onboarding.steps.profile.title",descriptionKey:"b2c.onboarding.steps.profile.description",icon:Mt,to:"/jornada/perfil-crianca",check:t=>t.hasCompletedProfile},{id:"moment",titleKey:"b2c.onboarding.steps.moment.title",descriptionKey:"b2c.onboarding.steps.moment.description",icon:gt,to:"/app/novo-momento",check:t=>t.hasMoments},{id:"vault",titleKey:"b2c.onboarding.steps.vault.title",descriptionKey:"b2c.onboarding.steps.vault.description",icon:Pr,to:"/cofre",check:t=>t.hasVaultFiles},{id:"family",titleKey:"b2c.onboarding.steps.family.title",descriptionKey:"b2c.onboarding.steps.family.description",icon:jt,to:"/jornada/familia",check:t=>t.hasFamilyMembers}];function Vm({stats:t}){const{t:r}=ce(),[a,s]=c.useState(!1),[l,o]=c.useState(!1);c.useEffect(()=>{localStorage.getItem(ro)==="true"&&s(!0),o(!0)},[]);const i=()=>{s(!0),localStorage.setItem(ro,"true")},d=ya.filter(u=>u.check(t)).length===ya.length;return!l||a||d?null:e.jsxs("div",{className:"relative mb-12 overflow-hidden rounded-[2.5rem] p-8 shadow-sm transition-all hover:shadow-md group",style:{background:"linear-gradient(135deg, var(--bb-color-surface) 0%, var(--bb-color-bg) 100%)",boxShadow:"0 20px 40px -10px rgba(0,0,0,0.05), inset 0 0 0 1px rgba(0,0,0,0.03)"},children:[e.jsx("div",{className:"absolute -right-20 -top-20 h-64 w-64 rounded-full opacity-10 blur-3xl transition-opacity group-hover:opacity-20",style:{background:"var(--bb-color-accent)"}}),e.jsxs("div",{className:"relative z-10 flex items-start justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-bold uppercase tracking-wider backdrop-blur-sm",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-accent)"},children:[e.jsx(pe,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Comece por aqui"})]}),e.jsx("h3",{className:"font-serif text-2xl font-medium leading-tight",style:{color:"var(--bb-color-ink)"},children:"Vamos, criar o livro da vida? ‚ú®"}),e.jsx("p",{className:"mt-2 text-base opacity-70 max-w-md leading-relaxed",style:{color:"var(--bb-color-ink)"},children:"Complete estes passos essenciais para deixar a linha do tempo do seu beb√™ mais rica e segura."})]}),e.jsx("button",{onClick:i,className:"rounded-full p-2 transition-colors hover:bg-black/5 active:scale-95",style:{color:"var(--bb-color-ink-muted)"},title:r("common.dismiss"),children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"relative z-10 grid gap-4 sm:grid-cols-2",children:ya.map(u=>{const m=u.check(t),p=u.icon;return e.jsxs(W,{to:u.to,className:`flex items-center gap-5 rounded-[1.5rem] p-4 transition-all duration-300 ${m?"opacity-60 grayscale-[0.5]":"bg-white/50 dark:bg-white/5 hover:bg-white dark:hover:bg-white/10 hover:shadow-lg hover:-translate-y-0.5 active:scale-[0.98]"}`,style:{},children:[e.jsx("div",{className:`flex h-12 w-12 shrink-0 items-center justify-center rounded-2xl shadow-sm transition-colors ${m?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-white dark:bg-white/10 text-[var(--bb-color-accent)]"}`,style:{boxShadow:m?"none":"0 4px 12px rgba(0,0,0,0.06)"},children:m?e.jsx($e,{className:"w-6 h-6"}):e.jsx(p,{className:"w-6 h-6"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`font-semibold ${m?"line-through opacity-80":""}`,style:{color:"var(--bb-color-ink)"},children:r(u.titleKey)}),e.jsx("p",{className:"truncate text-sm opacity-70",style:{color:"var(--bb-color-ink)"},children:r(u.descriptionKey)})]}),!m&&e.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-white/80 dark:bg-white/10 shadow-sm",children:e.jsx(Te,{className:"w-4 h-4 text-[var(--bb-color-ink-muted)]"})})]},u.id)})})]})}const Km="@babybook/partner-tour-completed",qi="@babybook/b2c-tour-completed",Gm=[{id:"welcome",target:"[data-tour='dashboard-header']",titleKey:"partner.tour.welcome.title",descriptionKey:"partner.tour.welcome.description",icon:pe},{id:"credits",target:'[data-tour="credits-card"]',titleKey:"partner.tour.credits.title",descriptionKey:"partner.tour.credits.description",icon:tt},{id:"stats",target:'[data-tour="stats-grid"]',titleKey:"partner.tour.stats.title",descriptionKey:"partner.tour.stats.description",icon:Ga},{id:"deliveries",target:'[data-tour="recent-deliveries"]',titleKey:"partner.tour.deliveries.title",descriptionKey:"partner.tour.deliveries.description",icon:Pt},{id:"notifications",target:'[data-tour="notifications-button"]',titleKey:"partner.tour.notifications.title",descriptionKey:"partner.tour.notifications.description",icon:Ze},{id:"settings",target:'[data-tour="user-menu"]',titleKey:"partner.tour.settings.title",descriptionKey:"partner.tour.settings.description",icon:ft}],Hm=[{id:"welcome",target:"[data-tour='b2c-header']",titleKey:"b2c.tour.welcome.title",descriptionKey:"b2c.tour.welcome.description",icon:pe},{id:"timeline",target:'[data-tour="moments-timeline"]',titleKey:"b2c.tour.timeline.title",descriptionKey:"b2c.tour.timeline.description",icon:Oe},{id:"vault",target:'[data-tour="vault-nav"]',titleKey:"b2c.tour.vault.title",descriptionKey:"b2c.tour.vault.description",icon:Ka},{id:"family",target:'[data-tour="family-nav"]',titleKey:"b2c.tour.family.title",descriptionKey:"b2c.tour.family.description",icon:jt},{id:"settings",target:'[data-tour="user-menu"]',titleKey:"b2c.tour.settings.title",descriptionKey:"b2c.tour.settings.description",icon:ft}];function Bi({steps:t,tourKey:r,onComplete:a,autoStart:s=!0}){const[l,o]=c.useState(!1),[i,n]=c.useState(0),[d,u]=c.useState(null),{t:m}=ce(),p=r===qi,f=p?"var(--bb-color-accent)":"#ec4899";c.useEffect(()=>{if(!s)return;if(localStorage.getItem(r)!=="true"){const A=setTimeout(()=>o(!0),1500);return()=>clearTimeout(A)}},[s,r]);const x=c.useCallback(()=>{const _=t[i];if(!_)return;const A=document.querySelector(_.target);if(A){const G=A.getBoundingClientRect();u(G)}else u(null)},[i,t]);c.useEffect(()=>{if(l)return x(),window.addEventListener("resize",x),window.addEventListener("scroll",x,!0),()=>{window.removeEventListener("resize",x),window.removeEventListener("scroll",x,!0)}},[l,x]);const b=()=>{i<t.length-1?n(_=>_+1):h()},g=()=>{i>0&&n(_=>_-1)},h=()=>{localStorage.setItem(r,"true"),o(!1),a==null||a()},k=()=>{localStorage.setItem(r,"true"),o(!1)},v=t[i],y=(v==null?void 0:v.icon)||pe,N=c.useMemo(()=>{if(!d)return{};const _=16,A=320;switch((v==null?void 0:v.position)||"bottom"){case"top":return{left:Math.max(_,Math.min(d.left+d.width/2-A/2,window.innerWidth-A-_)),bottom:window.innerHeight-d.top+_};case"bottom":return{left:Math.max(_,Math.min(d.left+d.width/2-A/2,window.innerWidth-A-_)),top:d.bottom+_};case"left":return{right:window.innerWidth-d.left+_,top:d.top+d.height/2-80};case"right":return{left:d.right+_,top:d.top+d.height/2-80};default:return{}}},[d,v==null?void 0:v.position]);return!l||!v?null:za.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[9999] pointer-events-auto",children:[d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute bg-black/70 transition-all duration-300",style:{top:0,left:0,right:0,height:Math.max(0,d.top-8)},onClick:k}),e.jsx("div",{className:"absolute bg-black/70 transition-all duration-300",style:{top:d.bottom+8,left:0,right:0,bottom:0},onClick:k}),e.jsx("div",{className:"absolute bg-black/70 transition-all duration-300",style:{top:Math.max(0,d.top-8),left:0,width:Math.max(0,d.left-8),height:d.height+16},onClick:k}),e.jsx("div",{className:"absolute bg-black/70 transition-all duration-300",style:{top:Math.max(0,d.top-8),right:0,left:d.right+8,height:d.height+16},onClick:k})]}):e.jsx("div",{className:"absolute inset-0 bg-black/70 transition-opacity duration-300",onClick:k}),d&&e.jsx("div",{className:"absolute border-4 rounded-xl pointer-events-none",style:{left:d.left-8,top:d.top-8,width:d.width+16,height:d.height+16,borderColor:f,animation:"pulse-border-custom 2s ease-in-out infinite"}}),e.jsx("style",{children:`
        @keyframes pulse-border-custom {
          0%, 100% {
            border-color: ${f};
            box-shadow: 0 0 0 0 ${f}44;
          }
          50% {
            border-color: ${f}cc;
            box-shadow: 0 0 0 8px ${f}00;
          }
        }
      `}),e.jsxs("div",{className:D("absolute w-80 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-5","border border-gray-200 dark:border-gray-700","animate-in fade-in-0 zoom-in-95 duration-300"),style:N,children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:p?"var(--bb-color-accent-soft)":"#fdf2f8",color:f},children:e.jsx(y,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base leading-tight",children:m(v.titleKey)})}),e.jsx("button",{onClick:k,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Pular tour",children:e.jsx(De,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 leading-relaxed",children:m(v.descriptionKey)}),e.jsx("div",{className:"flex items-center gap-1.5 mb-4",children:t.map((_,A)=>e.jsx("div",{className:D("h-1.5 rounded-full transition-all",A===i?"w-6":A<i?"w-1.5 opacity-60":"w-1.5 bg-gray-200 dark:bg-gray-700"),style:{backgroundColor:A<=i?f:void 0}},A))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:k,className:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:"Pular tour"}),e.jsxs("div",{className:"flex items-center gap-2",children:[i>0&&e.jsx("button",{onClick:g,className:"p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Anterior",children:e.jsx(Ne,{className:"w-4 h-4"})}),e.jsx("button",{onClick:b,className:"inline-flex items-center gap-1.5 px-4 py-2 text-white text-sm font-medium rounded-lg transition-colors",style:{backgroundColor:f},children:i<t.length-1?e.jsxs(e.Fragment,{children:["Pr√≥ximo",e.jsx(Te,{className:"w-4 h-4"})]}):"Concluir"})]})]})]})]}),document.body)}const Wm=[{id:"1",name:"certidao-nascimento.pdf",size:"2.3 MB",uploadedAt:"2023-01-20T10:00:00Z",type:"pdf"},{id:"2",name:"carteira-vacinacao.pdf",size:"5.1 MB",uploadedAt:"2023-02-15T14:30:00Z",type:"pdf"}],Qm=async t=>t?(console.log(`Fetching vault documents for child ${t}`),new Promise(r=>{setTimeout(()=>{r(Wm)},800)})):[],Oi=()=>{const{selectedChild:t}=Xe();return be({queryKey:["vault",t==null?void 0:t.id],queryFn:()=>Qm(t==null?void 0:t.id),enabled:!!t})};async function $i(){return await re.get("/me/settings/family")||{members:[],total:0}}async function Ym(t){return re.post("/me/settings/family/invite",t)}async function Jm(t){return re.delete(`/me/settings/family/${t}`)}async function Xm(){return await re.get("/me/settings/subscription")||{plan_name:"",plan_display_name:"",price_cents:0,currency:"BRL",renewal_date:null,features:[],storage_bytes_used:0,storage_bytes_limit:0,is_unlimited:!1}}async function Zm(){return await re.get("/me/settings/storage")||{bytes_used:0,bytes_quota:0,is_unlimited:!1,photos_count:0,videos_count:0,audios_count:0,last_backup_at:null}}const tr={family:["settings","family"],subscription:["settings","subscription"],storage:["settings","storage"]},eu=()=>{var k;const{t}=ce(),{selectedChild:r}=Xe(),{data:a,isLoading:s,isError:l,error:o,refetch:i}=fm(r==null?void 0:r.id),{data:n,isLoading:d}=Oi(),{data:u,isLoading:m}=be({queryKey:tr.family,queryFn:$i}),p=s||d||m;if(p)return e.jsx(to,{});if(l)return e.jsx(lr,{title:t("b2c.dashboard.errorTitle"),description:t("b2c.dashboard.errorDescription"),errorDetails:o==null?void 0:o.message,onRetry:()=>i(),skeleton:e.jsx(to,{})});const f=!!(r!=null&&r.birthday),x=(a==null?void 0:a.moments.filter(v=>v.status==="published").length)??0,b={hasCompletedProfile:!!(r!=null&&r.name&&(r!=null&&r.birthday)),hasMoments:x>0,hasVaultFiles:((n==null?void 0:n.length)??0)>0,hasFamilyMembers:(((k=u==null?void 0:u.members)==null?void 0:k.length)??0)>1},g={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}};return e.jsxs(E.div,{className:"max-w-4xl mx-auto px-4 py-6",variants:g,initial:"hidden",animate:"visible",children:[e.jsxs(E.div,{className:"mb-8 mt-2 px-2",variants:h,children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-medium tracking-tight",style:{color:"var(--bb-color-ink)"},children:t("b2c.dashboard.title")}),e.jsx("p",{className:"mt-2 text-lg opacity-60 font-medium max-w-lg",children:r!=null&&r.name?t("b2c.dashboard.subtitle_child",{defaultValue:"O livro da vida de "+r.name,name:r.name}):t("b2c.dashboard.subtitle_generic",{defaultValue:"Cada momento conta uma hist√≥ria."})})]}),e.jsx(E.div,{variants:h,children:e.jsx(Vm,{stats:b})}),e.jsx(E.div,{"data-tour":"moments-timeline",variants:h,children:e.jsx(Om,{moments:(a==null?void 0:a.moments)||[],isLoading:p,nextTemplate:(a==null?void 0:a.nextTemplate)??null,childName:(r==null?void 0:r.name)??void 0,hasBirthday:f,completedCount:x})}),e.jsx(Bi,{steps:Hm,tourKey:qi})]})};function tu({media:t,initialIndex:r=0,isOpen:a,onClose:s,title:l}){const[o,i]=c.useState(r),[n,d]=c.useState(!1),[u,m]=c.useState(1),[p,f]=c.useState(!1),x=Os(0),b=Os(0),g=ul(b,[-200,0,200],[.3,1,.3]),h=t[o],k=t.length>1;c.useEffect(()=>{a&&(i(r),d(!1),m(1),x.set(0),b.set(0))},[a,r,x,b]),c.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]);const v=c.useCallback(()=>{o<t.length-1&&(i(C=>C+1),d(!1),m(1))},[o,t.length]),y=c.useCallback(()=>{o>0&&(i(C=>C-1),d(!1),m(1))},[o]);c.useEffect(()=>{if(!a)return;const C=j=>{switch(j.key){case"Escape":s();break;case"ArrowLeft":y();break;case"ArrowRight":v();break}};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[a,v,y,s]);const N=()=>{d(C=>!C),m(C=>C===1?2:1)},_=()=>{f(C=>!C)},A=(C,j)=>{if(j.offset.y>100||j.velocity.y>500){s();return}n||(j.offset.x<-100||j.velocity.x<-500?v():(j.offset.x>100||j.velocity.x>500)&&y()),x.set(0),b.set(0)},G=async()=>{const C=Fe(h,"full")??Fe(h);if(C)try{const w=await(await fetch(C,{referrerPolicy:"no-referrer"})).blob(),I=document.createElement("a");I.href=URL.createObjectURL(w),I.download=`babybook-${o+1}.${h.kind==="photo"?"jpg":h.kind==="video"?"mp4":"mp3"}`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(I.href)}catch(j){console.error("Download failed:",j)}};if(!a)return null;const O=Fe(h,"full")??Fe(h);return za.createPortal(e.jsx(qe,{children:e.jsxs(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black",onClick:s,children:[e.jsxs(E.div,{initial:{y:-60,opacity:0},animate:{y:0,opacity:1},exit:{y:-60,opacity:0},className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-between p-4 bg-gradient-to-b from-black/80 to-transparent",onClick:C=>C.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:s,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Fechar",children:e.jsx(De,{className:"w-5 h-5 text-white"})}),l&&e.jsx("span",{className:"text-white font-medium truncate max-w-[200px]",children:l})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[k&&e.jsxs("span",{className:"text-white/80 text-sm",children:[o+1," / ",t.length]}),h.kind==="photo"&&e.jsx("button",{onClick:N,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":n?"Diminuir zoom":"Aumentar zoom",children:n?e.jsx(Tn,{className:"w-5 h-5 text-white"}):e.jsx(Rn,{className:"w-5 h-5 text-white"})}),(h.kind==="video"||h.kind==="audio")&&e.jsx("button",{onClick:_,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":p?"Ativar som":"Silenciar",children:p?e.jsx(In,{className:"w-5 h-5 text-white"}):e.jsx(Aa,{className:"w-5 h-5 text-white"})}),e.jsx("button",{onClick:G,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Baixar",children:e.jsx(oa,{className:"w-5 h-5 text-white"})})]})]}),e.jsx(E.div,{className:"absolute inset-0 flex items-center justify-center",style:{x,y:b,opacity:g},drag:!n,dragElastic:.2,dragConstraints:{left:0,right:0,top:0,bottom:0},onDragEnd:A,onClick:C=>C.stopPropagation(),children:e.jsx(qe,{mode:"wait",children:e.jsxs(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"relative max-w-full max-h-full",children:[h.kind==="photo"&&O&&e.jsx(E.img,{src:O,alt:"",className:"max-w-full max-h-[80vh] object-contain select-none",style:{scale:u},onDoubleClick:N,draggable:!1}),h.kind==="video"&&O&&e.jsx("div",{className:"relative",children:e.jsx("video",{src:O,className:"max-w-full max-h-[80vh] object-contain",controls:!0,autoPlay:!0,muted:p})}),h.kind==="audio"&&O&&e.jsxs("div",{className:"w-[90vw] max-w-md bg-white/10 rounded-2xl p-8 text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-purple-400 to-indigo-500 rounded-full flex items-center justify-center",children:e.jsx(Aa,{className:"w-12 h-12 text-white"})})}),e.jsx("audio",{src:O,controls:!0,className:"w-full",autoPlay:!0}),e.jsx("p",{className:"mt-4 text-white/60 text-sm",children:"Grava√ß√£o de √°udio"})]})]},o)})}),k&&!n&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:C=>{C.stopPropagation(),y()},disabled:o===0,className:D("absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors",o===0&&"opacity-30 cursor-not-allowed"),"aria-label":"Anterior",children:e.jsx(Ne,{className:"w-6 h-6 text-white"})}),e.jsx("button",{onClick:C=>{C.stopPropagation(),v()},disabled:o===t.length-1,className:D("absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors",o===t.length-1&&"opacity-30 cursor-not-allowed"),"aria-label":"Pr√≥ximo",children:e.jsx(Te,{className:"w-6 h-6 text-white"})})]}),k&&e.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2",children:t.map((C,j)=>e.jsx("button",{onClick:w=>{w.stopPropagation(),i(j),d(!1),m(1)},className:D("w-2 h-2 rounded-full transition-all",j===o?"bg-white w-4":"bg-white/40 hover:bg-white/60"),"aria-label":`Ir para m√≠dia ${j+1}`},j))}),e.jsx(E.div,{initial:{opacity:1},animate:{opacity:0},transition:{delay:2,duration:.5},className:"absolute bottom-16 left-1/2 -translate-x-1/2 text-white/60 text-sm",children:"Deslize para baixo para fechar"})]})}),document.body)}const ru=()=>e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx(R,{className:"h-10 w-24 rounded-lg"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{className:"h-10 w-10 rounded-lg"}),e.jsx(R,{className:"h-10 w-10 rounded-lg"}),e.jsx(R,{className:"h-10 w-10 rounded-lg"})]})]}),e.jsxs("div",{className:"rounded-2xl p-6 border",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[e.jsx(R,{className:"h-64 w-full rounded-lg"}),e.jsx(R,{className:"h-64 w-full rounded-lg"})]}),e.jsx(R,{className:"h-8 w-3/4 mb-4 rounded-lg"}),e.jsx(R,{className:"h-4 w-full mb-2 rounded-lg opacity-60"}),e.jsx(R,{className:"h-4 w-full mb-2 rounded-lg opacity-60"}),e.jsx(R,{className:"h-4 w-1/2 rounded-lg opacity-60"})]})]}),au=()=>{const t=ve(),{id:r}=Ct(),{data:a,isLoading:s,error:l}=Vc(r||""),[o,i]=c.useState(!1),[n,d]=c.useState(0),u=()=>{if(typeof window<"u"&&window.history.length>1){t(-1);return}t("/jornada")},m=f=>{d(f),i(!0)};if(s)return e.jsxs("div",{className:"max-w-3xl mx-auto text-[var(--bb-color-ink)]",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("button",{onClick:u,className:"flex items-center gap-2 p-2 rounded-lg transition-colors hover:bg-[var(--bb-color-bg)]",style:{color:"var(--bb-color-ink)"},children:[e.jsx(Ne,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Voltar"})]})}),e.jsx(ru,{})]});if(l)return e.jsxs("div",{className:"max-w-3xl mx-auto text-[var(--bb-color-ink)]",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("button",{onClick:u,className:"flex items-center gap-2 p-2 rounded-lg transition-colors hover:bg-[var(--bb-color-bg)]",style:{color:"var(--bb-color-ink)"},children:[e.jsx(Ne,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Voltar"})]})}),e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:"var(--bb-color-ink)"},children:"Erro ao carregar o momento"}),e.jsx("p",{className:"mt-2",style:{color:"var(--bb-color-ink-muted)"},children:"N√£o foi poss√≠vel carregar este momento agora. Tente novamente em instantes."})]})]});if(!a)return e.jsxs("div",{className:"max-w-3xl mx-auto text-[var(--bb-color-ink)]",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("button",{onClick:u,className:"flex items-center gap-2 p-2 rounded-lg transition-colors hover:bg-[var(--bb-color-bg)]",style:{color:"var(--bb-color-ink)"},children:[e.jsx(Ne,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Voltar"})]})}),e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:"var(--bb-color-ink-muted)"},children:"Momento n√£o encontrado"}),e.jsx("p",{className:"mt-2",style:{color:"var(--bb-color-ink-subtle)"},children:"O momento que voc√™ est√° procurando n√£o existe ou foi removido."})]})]});const p=f=>f?new Date(f).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}):"";return e.jsxs(E.div,{className:"max-w-3xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("button",{onClick:u,className:"flex items-center gap-2 p-2 rounded-lg transition-colors hover:bg-[var(--bb-color-bg)]",style:{color:"var(--bb-color-ink)"},children:[e.jsx(Ne,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Voltar"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",className:"p-2 rounded-lg transition-colors hover:bg-[var(--bb-color-bg)]","aria-label":"Compartilhar momento",title:"Compartilhar momento",children:e.jsx(Ha,{className:"w-5 h-5 text-[var(--bb-color-accent)]"})}),e.jsx("button",{type:"button",className:"p-2 rounded-lg transition-colors hover:bg-[var(--bb-color-bg)]",style:{color:"var(--bb-color-ink)"},"aria-label":"Editar momento",title:"Editar momento",children:e.jsx(Wa,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",className:"p-2 rounded-lg transition-colors hover:bg-[var(--bb-color-danger-soft)]",style:{color:"var(--bb-color-danger)"},"aria-label":"Excluir momento",title:"Excluir momento",children:e.jsx(ar,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"rounded-2xl overflow-hidden shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[a.media.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:a.media.map((f,x)=>e.jsxs("button",{type:"button",onClick:()=>m(x),className:"rounded-lg overflow-hidden bg-gray-100 dark:bg-stone-800 flex items-center justify-center aspect-w-4 aspect-h-3 relative group cursor-pointer ring-offset-2 ring-offset-[var(--bb-color-surface)] hover:ring-2 hover:ring-[var(--bb-color-accent)] transition-all",children:[f.kind==="photo"&&e.jsx("img",{src:Fe(f,"full")??Fe(f)??"",alt:a.title,className:"w-full h-full object-cover"}),f.kind==="video"&&e.jsxs(e.Fragment,{children:[e.jsx("video",{src:Fe(f)??"",className:"w-full h-full object-cover",muted:!0}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:e.jsx("div",{className:"w-14 h-14 rounded-full bg-white/90 flex items-center justify-center",children:e.jsx(Jr,{className:"w-6 h-6 text-gray-800 ml-1"})})})]}),f.kind==="audio"&&e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gradient-to-br from-purple-100 to-indigo-100 p-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-purple-400 to-indigo-500 flex items-center justify-center mb-2",children:e.jsx(Jr,{className:"w-8 h-8 text-white ml-1"})}),e.jsx("span",{className:"text-sm text-indigo-600",children:"Ouvir √°udio"})]}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"p-1.5 rounded-full bg-black/50",children:e.jsx(Sr,{className:"w-4 h-4 text-white"})})})]},f.id))}),e.jsx(tu,{media:a.media,initialIndex:n,isOpen:o,onClose:()=>i(!1),title:a.title}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm mb-1",style:{color:"var(--bb-color-ink-muted)"},children:p(a.occurredAt??a.createdAt)}),e.jsx("h1",{className:"text-3xl font-bold",style:{color:"var(--bb-color-ink)"},children:a.title})]}),a.summary&&e.jsx("p",{className:"leading-relaxed whitespace-pre-wrap",style:{color:"var(--bb-color-ink)"},children:a.summary}),a.templateKey&&e.jsx("div",{className:"mt-6 pt-4 border-t",style:{borderColor:"var(--bb-color-border)"},children:e.jsxs("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:["Template:"," ",e.jsx("span",{className:"font-semibold capitalize",style:{color:"var(--bb-color-ink)"},children:a.templateKey.replace("-"," ")})]})})]})]})]})},su=()=>{const t=ve(),{selectedChild:r}=Xe(),[a,s]=c.useState(!1),[l,o]=c.useState(""),[i,n]=c.useState("");if(!r)return e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Selecione uma crian√ßa para ver a c√°psula do tempo."})});const d=()=>{if(i){const m=new Date(i),p=new Date;if(m.getFullYear()-p.getFullYear()<10){alert("A c√°psula deve estar selada por pelo menos 10 anos");return}window.confirm(`Selar esta c√°psula para ${m.toLocaleDateString("pt-BR")}? Voc√™ n√£o poder√° ver ou editar o conte√∫do at√© l√°.`)&&s(!0)}},u=()=>{window.confirm("Abrir a c√°psula? Voc√™ poder√° ler a carta.")&&s(!1)};return e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"üîÆ C√°psula do Tempo"}),e.jsx("p",{className:"text-gray-500",children:"Uma mensagem do cora√ß√£o para o futuro"})]}),a?e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 text-center text-white",children:[e.jsx(Nt,{className:"w-16 h-16 mx-auto mb-4 opacity-80"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"C√°psula Selada"}),e.jsxs("p",{className:"text-white/80 mb-6",children:["Selada at√©"," ",e.jsx("strong",{children:new Date(i).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-6 mb-6 backdrop-blur",children:[e.jsx("p",{className:"text-sm opacity-70",children:"Dias at√© a abertura:"}),e.jsx("p",{className:"text-3xl font-bold",children:Math.ceil((new Date(i).getTime()-new Date().getTime())/(1e3*60*60*24))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:u,className:"w-full flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg font-semibold transition-all",children:[e.jsx(Ln,{className:"w-4 h-4"}),"Cancelar Selo (Editar)"]}),e.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-white/10 hover:bg-white/20 text-white px-6 py-2 rounded-lg font-semibold transition-all",children:"Voltar"})]})]}):e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Escreva a Sua Carta"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Data de Abertura"}),e.jsx("input",{type:"date",value:i,onChange:m=>n(m.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"M√≠nimo de 10 anos a partir de hoje"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Sua Mensagem"}),e.jsx("textarea",{value:l,onChange:m=>o(m.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg resize-none",rows:8,placeholder:"Escreva uma mensagem especial para o futuro..."})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:d,disabled:!l||!i,className:"flex-1 flex items-center justify-center gap-2 bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[e.jsx(Nt,{className:"w-5 h-5"}),"Selar C√°psula"]}),e.jsx("button",{onClick:()=>t("/dashboard"),className:"flex-1 bg-gray-200 text-gray-800 px-6 py-3 rounded-lg font-semibold hover:bg-opacity-80 transition-all",children:"Cancelar"})]})]})]})},ou=pl,iu=hl,nu=c.forwardRef(({className:t,inset:r,children:a,...s},l)=>e.jsxs(Qo,{ref:l,className:D("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",t),...s,children:[a,e.jsx(Te,{className:"ml-auto h-4 w-4"})]}));nu.displayName=Qo.displayName;const lu=c.forwardRef(({className:t,...r},a)=>e.jsx(Yo,{ref:a,className:D("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));lu.displayName=Yo.displayName;const zi=c.forwardRef(({className:t,sideOffset:r=4,...a},s)=>e.jsx(bl,{children:e.jsx(Jo,{ref:s,sideOffset:r,className:D("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})}));zi.displayName=Jo.displayName;const qa=c.forwardRef(({className:t,inset:r,...a},s)=>e.jsx(Xo,{ref:s,className:D("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",t),...a}));qa.displayName=Xo.displayName;const cu=c.forwardRef(({className:t,children:r,checked:a,...s},l)=>e.jsxs(Zo,{ref:l,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:a,...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ei,{children:e.jsx(Re,{className:"h-4 w-4"})})}),r]}));cu.displayName=Zo.displayName;const du=c.forwardRef(({className:t,children:r,...a},s)=>e.jsxs(ti,{ref:s,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ei,{children:e.jsx(_a,{className:"h-2 w-2 fill-current"})})}),r]}));du.displayName=ti.displayName;const mu=c.forwardRef(({className:t,inset:r,...a},s)=>e.jsx(ri,{ref:s,className:D("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...a}));mu.displayName=ri.displayName;const uu=c.forwardRef(({className:t,...r},a)=>e.jsx(ai,{ref:a,className:D("-mx-1 my-1 h-px bg-muted",t),...r}));uu.displayName=ai.displayName;const ao=({document:t,onClick:r,className:a,label:s})=>e.jsxs("div",{onClick:r,className:`group relative overflow-hidden rounded-xl border transition-all duration-300 hover:shadow-lg cursor-pointer ${a}`,style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center justify-between border-b px-4 py-3",style:{borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"rounded-full p-1",style:{backgroundColor:"var(--bb-color-accent-soft)"},children:e.jsx(Nt,{className:"h-3 w-3",style:{color:"var(--bb-color-accent)"}})}),e.jsx("span",{className:"text-sm font-semibold",style:{color:"var(--bb-color-ink)"},children:s})]}),e.jsxs(ou,{children:[e.jsx(iu,{asChild:!0,children:e.jsx("button",{onClick:l=>l.stopPropagation(),className:"rounded-full p-1 transition-colors hover:bg-black/5",style:{color:"var(--bb-color-ink-muted)",backgroundColor:"var(--bb-color-surface)"},children:e.jsx(Fn,{className:"h-4 w-4"})})}),e.jsxs(zi,{align:"end",style:{backgroundColor:"var(--bb-color-surface)"},children:[e.jsx(qa,{onClick:l=>{l.stopPropagation()},children:"Baixar"}),e.jsx(qa,{className:"text-red-500 focus:text-red-500",onClick:l=>{l.stopPropagation()},children:"Excluir"})]})]})]}),e.jsxs("div",{className:"relative flex aspect-[1.586] w-full items-center justify-center overflow-hidden bg-gray-100 dark:bg-gray-800",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle, #000 1px, transparent 1px)",backgroundSize:"10px 10px"}}),e.jsxs("div",{className:"flex flex-col items-center gap-2 opacity-50 blur-[2px] transition-all duration-500 group-hover:blur-0 group-hover:opacity-100",children:[t.type==="pdf"?e.jsx(Dt,{className:"h-12 w-12",style:{color:"var(--bb-color-ink-muted)"}}):e.jsx(Ge,{className:"h-12 w-12",style:{color:"var(--bb-color-ink-muted)"}}),e.jsx("span",{className:"text-xs font-mono uppercase tracking-widest",style:{color:"var(--bb-color-ink-muted)"},children:t.type.toUpperCase()})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/30 backdrop-blur-sm transition-opacity duration-300 group-hover:opacity-0 dark:bg-black/30",children:e.jsx(Nt,{className:"h-8 w-8 opacity-40",style:{color:"var(--bb-color-ink)"}})})]}),e.jsxs("div",{className:"flex justify-between border-t px-4 py-2 text-xs",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},children:[e.jsxs("span",{children:["Adicionado em ",new Date(t.uploadedAt).toLocaleDateString()]}),e.jsx("span",{children:t.size})]})]}),xu=({label:t,helper:r,onClick:a})=>{const{t:s}=ce();return e.jsxs("button",{onClick:a,type:"button",className:"group relative flex w-full flex-col items-center justify-center rounded-xl border-2 border-dashed p-6 text-center transition-all duration-200 hover:border-solid hover:shadow-md active:scale-[0.99]",style:{backgroundColor:"var(--bb-color-bg)",borderColor:"var(--bb-color-border)"},children:[e.jsx("div",{className:"mb-3 rounded-full p-3 transition-colors group-hover:bg-[var(--bb-color-accent-soft)]",style:{color:"var(--bb-color-accent)"},children:e.jsx(Ye,{className:"h-6 w-6"})}),e.jsxs("h3",{className:"mb-1 font-semibold",style:{color:"var(--bb-color-ink)"},children:[s("b2c.vault.empty.addPrefix")," ",t]}),e.jsx("p",{className:"max-w-[200px] text-xs",style:{color:"var(--bb-color-ink-muted)"},children:r})]})},Fr=ni,bu=si,Ui=c.forwardRef(({className:t,...r},a)=>e.jsx(es,{ref:a,className:D("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r}));Ui.displayName=es.displayName;const qr=c.forwardRef(({className:t,children:r,...a},s)=>e.jsxs(bu,{children:[e.jsx(Ui,{}),e.jsxs(ts,{ref:s,className:D("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a,children:[r,e.jsxs(gl,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qr.displayName=ts.displayName;const Br=({className:t,...r})=>e.jsx("div",{className:D("flex flex-col space-y-1.5 text-center sm:text-left",t),...r});Br.displayName="DialogHeader";const gs=({className:t,...r})=>e.jsx("div",{className:D("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});gs.displayName="DialogFooter";const Or=c.forwardRef(({className:t,...r},a)=>e.jsx(oi,{ref:a,className:D("text-lg font-semibold leading-none tracking-tight",t),...r}));Or.displayName=oi.displayName;const ca=c.forwardRef(({className:t,...r},a)=>e.jsx(ii,{ref:a,className:D("text-sm text-muted-foreground",t),...r}));ca.displayName=ii.displayName;const fs=c.forwardRef(({className:t,style:r,children:a,...s},l)=>e.jsx(qr,{ref:l,className:D("rounded-3xl border shadow-lg sm:rounded-3xl",t),style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)",...r},...s,children:a}));fs.displayName="B2CDialogContent";const vs=({className:t,...r})=>e.jsx(Br,{className:D("text-left space-y-2",t),...r});vs.displayName="B2CDialogHeader";const ys=({className:t,...r})=>e.jsx(gs,{className:D("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});ys.displayName="B2CDialogFooter";const js=c.forwardRef(({className:t,style:r,...a},s)=>e.jsx(Or,{ref:s,className:D("text-xl font-serif font-bold leading-none tracking-tight",t),style:{color:"var(--bb-color-ink)",...r},...a}));js.displayName="B2CDialogTitle";const ks=c.forwardRef(({className:t,style:r,...a},s)=>e.jsx(ca,{ref:s,className:D("text-sm",t),style:{color:"var(--bb-color-ink-muted)",...r},...a}));ks.displayName="B2CDialogDescription";const pu=({isOpen:t,onClose:r})=>{const[a,s]=c.useState([]),l=i=>{i.target.files&&s(Array.from(i.target.files))},o=()=>{console.log("Uploading files:",a),r()};return e.jsx(Fr,{open:t,onOpenChange:r,children:e.jsxs(fs,{children:[e.jsxs(vs,{children:[e.jsx(js,{children:"Carregar Novo Documento"}),e.jsx(ks,{children:"Fa√ßa o upload de um documento para guardar no seu cofre."})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{htmlFor:"dropzone-file",className:"group flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-2xl cursor-pointer transition-colors hover:border-[var(--bb-color-accent)]/50",style:{backgroundColor:"var(--bb-color-bg)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx("div",{className:"p-4 rounded-full mb-4 transition-transform group-hover:scale-110",style:{backgroundColor:"var(--bb-color-surface)"},children:e.jsx(zo,{className:"w-8 h-8",style:{color:"var(--bb-color-accent)"}})}),e.jsxs("p",{className:"mb-2 text-sm font-medium",style:{color:"var(--bb-color-ink)"},children:[e.jsx("span",{className:"font-bold",children:"Clique para carregar"})," ou arraste e solte"]}),e.jsx("p",{className:"text-xs",style:{color:"var(--bb-color-ink-muted)"},children:"PDF, PNG, JPG (MAX. 10MB)"})]}),e.jsx("input",{id:"dropzone-file",type:"file",className:"hidden",onChange:l,multiple:!0})]})}),a.length>0&&e.jsxs("div",{className:"mt-4 p-4 rounded-xl",style:{backgroundColor:"var(--bb-color-bg)"},children:[e.jsxs("h4",{className:"text-sm font-bold mb-2",style:{color:"var(--bb-color-ink)"},children:["Arquivos selecionados (",a.length,"):"]}),e.jsx("ul",{className:"text-sm space-y-1",style:{color:"var(--bb-color-ink-muted)"},children:a.map((i,n)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[var(--bb-color-accent)]"}),i.name]},n))})]})]}),e.jsxs(ys,{className:"flex-row gap-3",children:[e.jsx(Pe,{variant:"secondary",onClick:r,className:"flex-1",children:"Cancelar"}),e.jsx(Pe,{onClick:o,disabled:a.length===0,className:"flex-1",children:"Carregar"})]})]})})},$r=({title:t,value:r,description:a,progressPercent:s,progressText:l,customVisual:o,actions:i,className:n})=>e.jsxs("section",{className:D("relative overflow-hidden rounded-2xl shadow-sm border border-orange-100/50 dark:border-stone-800 bg-gradient-to-br from-amber-50/50 via-[#fffbf6] to-orange-50/50 dark:from-[#1c1917] dark:via-[#201d1b] dark:to-[#1c1917]",n),children:[e.jsxs("div",{className:"relative z-10 flex items-start justify-between gap-4 p-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-orange-600/70 dark:text-orange-300/80",children:t}),e.jsx("h2",{className:"mt-1 font-serif text-3xl font-bold text-[var(--bb-color-ink)] dark:text-orange-50",children:r}),a&&e.jsx("p",{className:"mt-1 text-sm text-[var(--bb-color-ink-muted)] dark:text-stone-400",children:a})]}),(l||typeof s=="number")&&e.jsx("p",{className:"text-xl font-semibold text-orange-500 dark:text-orange-300",children:l||`${s}%`})]}),e.jsxs("div",{className:"relative z-10 px-6 pb-6",children:[o&&e.jsx("div",{className:"mt-2",children:o}),typeof s=="number"&&e.jsx("div",{className:"mt-4 h-2 rounded-full bg-orange-100 dark:bg-stone-800/50",children:e.jsx("div",{className:"h-full rounded-full bg-orange-400 dark:bg-orange-500",style:{width:`${s}%`}})}),i&&e.jsx("div",{className:"mt-4 flex flex-wrap justify-end gap-3",children:i})]}),e.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-orange-100/20 dark:bg-orange-500/5 blur-3xl"}),e.jsx("div",{className:"absolute -left-10 -bottom-10 h-40 w-40 rounded-full bg-amber-100/20 dark:bg-amber-500/5 blur-3xl"})]});function so(){return e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx(R,{className:"h-12 w-64 rounded-xl"}),e.jsx(R,{className:"h-6 w-96 rounded-lg opacity-60"})]}),e.jsxs("div",{className:"rounded-3xl p-6",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",borderWidth:1},children:[e.jsx(R,{className:"h-4 w-32 rounded-md mb-2"}),e.jsx(R,{className:"h-6 w-64 rounded-lg mb-3"}),e.jsx(R,{className:"h-3 w-full rounded-md mb-4"}),e.jsx(R,{className:"h-2 w-full rounded-full"})]}),e.jsx(R,{className:"h-16 w-full rounded-[32px]"}),e.jsxs("div",{className:"rounded-2xl p-6",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",borderWidth:1},children:[e.jsx(R,{className:"h-5 w-48 rounded-lg mx-auto mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-2",children:[e.jsx(R,{className:"aspect-[1.586] w-full rounded-xl"}),e.jsx(R,{className:"aspect-[1.586] w-full rounded-xl"}),e.jsx(R,{className:"aspect-[1.586] w-full rounded-xl"}),e.jsx(R,{className:"aspect-[1.586] w-full rounded-xl"})]})]})]})}const hu=()=>{const{t}=ce(),{data:r=[],isLoading:a,isError:s,error:l,refetch:o}=Oi(),[i,n]=c.useState(!1),d=x=>{console.log("Clicked slot",x)},u=c.useMemo(()=>{const x=[{id:"certidao",label:t("b2c.vault.slots.certidao.label","Certid√£o de nascimento"),helper:t("b2c.vault.slots.certidao.helper","PDF ou foto digitalizada do cart√≥rio")},{id:"cpf",label:t("b2c.vault.slots.cpf.label","CPF"),helper:t("b2c.vault.slots.cpf.helper","Comprovante emitido pela Receita Federal")},{id:"carteira-vacinacao",label:t("b2c.vault.slots.vaccine.label","Carteira de vacina√ß√£o"),helper:t("b2c.vault.slots.vaccine.helper","Frente e verso atualizados")},{id:"cartao-sus",label:t("b2c.vault.slots.sus.label","Cart√£o SUS"),helper:t("b2c.vault.slots.sus.helper","Identifica√ß√£o do Sistema √önico de Sa√∫de")},{id:"plano-saude",label:t("b2c.vault.slots.insurance.label","Plano de sa√∫de"),helper:t("b2c.vault.slots.insurance.helper","Carteirinha do plano ou seguro")},{id:"rg",label:t("b2c.vault.slots.rg.label","Documento de identidade"),helper:t("b2c.vault.slots.rg.helper","Caso o beb√™ j√° possua RG ou passaporte")}],b=new Set,g=x.map(k=>{const v=r.find(y=>y.name.toLowerCase().includes(k.id)&&!b.has(y.id));return v&&b.add(v.id),{...k,document:v}}),h=r.filter(k=>!b.has(k.id));return{slots:g,additional:h}},[r,t]),m=6,p=u.slots.filter(x=>!!x.document).length,f=Math.min(100,Math.round(p/m*100));return a?e.jsx(so,{}):s?e.jsx(lr,{title:"Erro ao carregar cofre",description:"N√£o foi poss√≠vel acessar seus documentos protegidos.",errorDetails:l==null?void 0:l.message,onRetry:()=>o(),skeleton:e.jsx(so,{})}):e.jsxs(E.div,{className:"mx-auto max-w-4xl px-4 py-6",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},children:[e.jsxs(E.div,{className:"mb-8 mt-2 px-2",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}},children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-medium tracking-tight",children:"Cofre de Documentos"}),e.jsx("p",{className:"mt-2 text-lg opacity-60 font-medium max-w-lg",children:"Armazene certid√µes, documentos e cart√µes de sa√∫de com seguran√ßa."})]}),e.jsx("div",{className:"mb-8",children:e.jsx($r,{title:"Cofre Familiar",value:`${p} de ${m} documentos essenciais`,description:"Tudo criptografado e vis√≠vel apenas para voc√™, o dono do √°lbum.",progressPercent:f})}),e.jsx("div",{className:"mt-4 mb-8 rounded-[32px] border px-5 py-4 text-sm shadow-inner",style:{backgroundColor:"var(--bb-color-accent-soft)",borderColor:"var(--bb-color-accent)",color:"var(--bb-color-ink)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-xl p-2",style:{backgroundColor:"var(--bb-color-surface)",color:"var(--bb-color-accent)"},children:e.jsx(Nt,{className:"h-4 w-4"})}),e.jsx("p",{children:"Estes documentos s√£o privados e nunca ser√£o inclu√≠dos em √°lbuns impressos ou compartilhados sem consentimento expl√≠cito."})]})}),e.jsxs("div",{className:"mt-6 rounded-2xl border p-6",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsx("h2",{className:"text-center text-lg font-semibold",children:"Seus documentos privados"}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-2",children:[u.slots.map(x=>x.document?e.jsx(ao,{label:x.label,document:x.document,onClick:()=>d(x.id)},x.id):e.jsx(xu,{label:x.label,helper:x.helper,onClick:()=>n(!0)},x.id)),u.additional.map(x=>e.jsx(ao,{label:x.name,document:x,onClick:()=>d(x.id)},x.id))]})]}),e.jsx(pu,{isOpen:i,onClose:()=>n(!1)})]})},gu={name:"Bruno",email:"dev@babybook.dev",children:[{id:"1",name:"Alice"},{id:"2",name:"Bob"}]},fu=async()=>(console.log("Fetching profile data"),new Promise(t=>{setTimeout(()=>{t(gu)},600)})),vu=()=>be({queryKey:["profile"],queryFn:fu}),yu=()=>{const{data:t,isLoading:r}=vu(),a=ve(),s=()=>{a("/jornada")};return r||!t?e.jsxs("div",{className:"max-w-2xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 opacity-50",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--bb-color-surface)]"}),e.jsx("div",{className:"w-24 h-4 rounded bg-[var(--bb-color-surface)]"})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(R,{className:"w-20 h-20 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"h-8 w-48 rounded-lg"}),e.jsx(R,{className:"h-4 w-32 rounded-lg"})]})]}),e.jsx(R,{className:"h-32 w-full rounded-2xl"}),e.jsx(R,{className:"h-32 w-full rounded-2xl"})]}):e.jsxs(E.div,{className:"max-w-2xl mx-auto p-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsx("div",{className:"flex items-center mb-8",children:e.jsxs("button",{onClick:s,className:"flex items-center gap-2 p-2 -ml-2 rounded-xl transition-colors hover:bg-[var(--bb-color-surface)]",style:{color:"var(--bb-color-ink-muted)"},children:[e.jsx(Ne,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold text-sm",children:"Voltar"})]})}),e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center border shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},children:e.jsx(ft,{className:"w-10 h-10"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:t.name}),e.jsx("p",{style:{color:"var(--bb-color-ink-muted)"},children:t.email})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"var(--bb-color-ink)"},children:"Minha Conta"}),e.jsxs("div",{className:"rounded-2xl border p-4 space-y-4 shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(zt,{className:"w-5 h-5",style:{color:"var(--bb-color-ink-muted)"}}),e.jsx("span",{style:{color:"var(--bb-color-ink)"},children:t.email})]}),e.jsx(Pe,{variant:"secondary",size:"sm",disabled:!0,children:"Alterar E-mail"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Uo,{className:"w-5 h-5",style:{color:"var(--bb-color-ink-muted)"}}),e.jsx("span",{style:{color:"var(--bb-color-ink)"},children:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"})]}),e.jsx(Pe,{variant:"secondary",size:"sm",children:"Alterar Senha"})]})]})]}),e.jsxs(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"var(--bb-color-ink)"},children:"Crian√ßas"}),e.jsxs("div",{className:"rounded-2xl border p-4 space-y-4 shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[t.children.map(l=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Mt,{className:"w-5 h-5",style:{color:"var(--bb-color-accent)"}}),e.jsx("span",{style:{color:"var(--bb-color-ink)"},children:l.name})]}),e.jsx(Pe,{variant:"ghost",size:"sm",children:"Gerenciar"})]},l.id)),e.jsx(Pe,{variant:"secondary",className:"w-full",children:"Adicionar Crian√ßa"})]})]})]})]})},ju=({childId:t,open:r,onOpenChange:a})=>{const{mutate:s,isPending:l}=rd(),[o,i]=c.useState(""),[n,d]=c.useState(""),[u,m]=c.useState(""),[p,f]=c.useState(""),[x,b]=c.useState(!1);c.useEffect(()=>{r&&(i(new Date().toISOString().split("T")[0]),d(""),m(""),f(""),b(!1))},[r]);const g=h=>{h.preventDefault(),!(!o||!n&&!u)&&(console.log("Saving Measurement:",{childId:t,date:o,weight:n,height:u,headCircumference:p,hasPhoto:x}),s({childId:t,date:o,weight:n?parseFloat(n):void 0,height:u?parseFloat(u):void 0},{onSuccess:()=>{a(!1)}}))};return e.jsx(yt,{open:r,onOpenChange:a,direction:"right",children:e.jsx(dt,{className:"sm:max-w-md",style:{backgroundColor:"var(--bb-color-surface)"},children:e.jsxs("form",{onSubmit:g,className:"flex h-full flex-col",children:[e.jsxs(mt,{style:{borderBottom:"1px solid var(--bb-color-border)",backgroundColor:"var(--bb-color-surface)"},children:[e.jsx(xt,{style:{color:"var(--bb-color-ink)"},children:"Nova Medi√ß√£o"}),e.jsx(Ir,{style:{color:"var(--bb-color-ink-muted)"},children:"Registre o crescimento para acompanhar a curva."})]}),e.jsxs(bt,{className:"space-y-6",style:{backgroundColor:"var(--bb-color-surface)"},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-ink flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-ink-muted"}),"Data da medi√ß√£o"]}),e.jsx("input",{type:"date",required:!0,value:o,onChange:h=>i(h.target.value),className:"w-full rounded-2xl border border-border bg-transparent px-4 py-3 text-ink focus:border-ink focus:outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-ink flex items-center gap-2",children:[e.jsx(qn,{className:"h-4 w-4 text-ink-muted"}),"Peso (kg)"]}),e.jsx("input",{type:"number",step:"0.01",placeholder:"0,00",value:n,onChange:h=>d(h.target.value),className:"w-full rounded-2xl border border-border bg-transparent px-4 py-3 text-ink focus:border-ink focus:outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-ink flex items-center gap-2",children:[e.jsx(Bn,{className:"h-4 w-4 text-ink-muted"}),"Altura (cm)"]}),e.jsx("input",{type:"number",step:"0.1",placeholder:"0,0",value:u,onChange:h=>m(h.target.value),className:"w-full rounded-2xl border border-border bg-transparent px-4 py-3 text-ink focus:border-ink focus:outline-none"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-ink flex items-center gap-2",children:[e.jsx(ft,{className:"h-4 w-4 text-ink-muted"}),"Per√≠metro Cef√°lico (cm)"]}),e.jsx("input",{type:"number",step:"0.1",placeholder:"0,0",value:p,onChange:h=>f(h.target.value),className:"w-full rounded-2xl border border-border bg-transparent px-4 py-3 text-ink focus:border-ink focus:outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-ink flex items-center gap-2",children:[e.jsx(gt,{className:"h-4 w-4 text-ink-muted"}),"Foto do registro (Balan√ßa)"]}),e.jsx("button",{type:"button",onClick:()=>b(!x),className:D("flex w-full items-center justify-center gap-2 rounded-2xl border-2 border-dashed p-6 transition-all",x?"border-success bg-success/10 text-success":"border-border text-ink-muted hover:border-ink hover:bg-surface-hover"),children:x?e.jsx(e.Fragment,{children:"Foto adicionada!"}):e.jsx(e.Fragment,{children:"Toque para adicionar foto"})})]})]}),e.jsxs(ut,{style:{borderTop:"1px solid var(--bb-color-border)",backgroundColor:"var(--bb-color-bg)"},children:[e.jsx("button",{type:"submit",disabled:l,className:"w-full rounded-2xl bg-primary py-3 font-semibold text-primary-foreground transition hover:opacity-90 disabled:opacity-60",children:l?"Salvando...":"Salvar Medi√ß√£o"}),e.jsx("button",{type:"button",onClick:()=>a(!1),className:"w-full rounded-2xl border border-border py-3 font-semibold text-ink transition hover:bg-surface-hover",children:"Cancelar"})]})]})})})};function ws({isOpen:t,onClose:r,title:a,subtitle:s,children:l,icon:o,layoutId:i,media:n}){return c.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),c.useEffect(()=>{if(!t)return;const d=u=>{u.key==="Escape"&&r()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[t,r]),t?za.createPortal(e.jsx(qe,{children:e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6",children:[e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),e.jsxs(E.div,{layoutId:i,initial:i?void 0:{opacity:0,scale:.9,y:20},animate:i?void 0:{opacity:1,scale:1,y:0},exit:i?void 0:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:520,damping:46},className:D("relative w-full max-w-2xl overflow-hidden rounded-[32px] border shadow-2xl","bg-[var(--bb-color-surface)] border-[var(--bb-color-border)]"),onClick:d=>d.stopPropagation(),children:[n&&e.jsx("div",{className:"w-full h-48 sm:h-64 overflow-hidden bg-black/5",children:n}),e.jsxs("div",{className:"flex items-center justify-between border-b border-[var(--bb-color-border)] px-6 py-5 sm:px-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[o&&e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-[var(--bb-color-bg)] text-[var(--bb-color-accent)]",children:e.jsx(o,{className:"h-6 w-6"})}),e.jsxs("div",{children:[s&&e.jsx("p",{className:"text-xs font-bold uppercase tracking-[0.2em] text-[var(--bb-color-ink-muted)]",children:s}),e.jsx("h3",{className:"font-serif text-2xl font-bold text-[var(--bb-color-ink)]",children:a})]})]}),e.jsx("button",{onClick:r,className:"rounded-full p-2 text-[var(--bb-color-ink-muted)] transition-colors hover:bg-[var(--bb-color-bg)] hover:text-[var(--bb-color-ink)]","aria-label":"Fechar",children:e.jsx(De,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"max-h-[70vh] overflow-y-auto px-6 py-6 sm:px-8 sm:py-8",children:e.jsx("div",{className:"space-y-6 text-[var(--bb-color-ink)]",children:l})}),e.jsx("div",{className:"flex justify-center pb-4 pt-2 sm:hidden",children:e.jsx("div",{className:"h-1.5 w-12 rounded-full bg-[var(--bb-color-border)]"})})]})]})}),document.body):null}const ku=({childId:t})=>{const{data:r=[],isLoading:a,isError:s,error:l,refetch:o}=td(t),{isDark:i}=Lr(),[n,d]=c.useState(!1),[u,m]=c.useState(!1),[p,f]=c.useState(null),x=r.find(_=>_.id===p),b=[...r].sort((_,A)=>new Date(_.date).getTime()-new Date(A.date).getTime()),g=b.at(-1),h=12,k=g?new Date(g.date).toLocaleDateString("pt-BR",{day:"numeric",month:"long",year:"numeric"}):null,v=g?`${g.weight?`${g.weight} kg`:"--"} ‚Ä¢ ${g.height?`${g.height} cm`:"--"}`:"Acompanhe peso e altura",y=g?`Atualizado em ${k}. ${b.length} de ${h} registros recomendados.`:"Registre peso e altura sempre que fizer uma medi√ß√£o oficial para alimentar o gr√°fico da pr√≥xima consulta.",N=b.map(_=>({date:new Date(_.date).toLocaleDateString("pt-BR",{month:"short",day:"numeric"}),weight:_.weight,height:_.height,expectedMinWeight:_.weight?_.weight*.9:void 0,expectedMaxWeight:_.weight?_.weight*1.1:void 0}));return a?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-32 rounded-3xl animate-pulse",style:{backgroundColor:"var(--bb-color-muted)"}}),e.jsx("div",{className:"h-64 rounded-3xl animate-pulse",style:{backgroundColor:"var(--bb-color-muted)"}})]}):s?e.jsx(lr,{variant:"section",title:"Erro no gr√°fico de crescimento",description:"N√£o foi poss√≠vel carregar o hist√≥rico de medidas.",errorDetails:l==null?void 0:l.message,onRetry:()=>o(),skeleton:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-[32px] border p-6",style:{borderColor:"var(--bb-color-border)",backgroundColor:"var(--bb-color-surface)"},children:[e.jsx("div",{className:"flex gap-4 mb-6",children:e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-3 w-20 rounded bg-gray-200 animate-pulse"}),e.jsx("div",{className:"h-6 w-32 rounded bg-gray-200 animate-pulse"})]})}),e.jsx("div",{className:"h-[120px] w-full rounded-2xl bg-gray-100 animate-pulse"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-20 rounded-2xl bg-gray-100 animate-pulse"}),e.jsx("div",{className:"h-20 rounded-2xl bg-gray-100 animate-pulse"}),e.jsx("div",{className:"h-20 rounded-2xl bg-gray-100 animate-pulse"})]})]})}):e.jsxs("section",{className:"space-y-6",children:[e.jsx($r,{title:"Curva de Crescimento",value:v,description:y,customVisual:N.length>0?e.jsxs("div",{className:"h-[120px] w-full cursor-pointer transition-opacity hover:opacity-80",onClick:()=>m(!0),children:[e.jsx($s,{width:"100%",height:"100%",children:e.jsx(fl,{data:N,children:e.jsx(ba,{type:"monotone",dataKey:"weight",stroke:"#F2995D",strokeWidth:3,dot:!1,isAnimationActive:!0})})}),e.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2 text-xs font-semibold text-ink-muted",children:[e.jsx(Sr,{className:"h-3 w-3"}),"Toque para expandir"]})]}):void 0,actions:e.jsxs(Pe,{variant:"secondary",size:"sm",onClick:()=>d(_=>!_),children:[e.jsx(Ye,{className:"h-4 w-4"}),n?"Fechar formul√°rio":"Adicionar medi√ß√£o"]})}),e.jsx(ju,{childId:t,open:n,onOpenChange:d}),N.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"px-2 text-lg font-semibold text-ink",children:"Hist√≥rico de Medi√ß√µes"}),e.jsx("div",{className:"grid gap-3 grid-cols-1",children:[...b].reverse().map(_=>e.jsxs(E.button,{layoutId:`measurement-card-${_.id}`,type:"button",onClick:()=>f(_.id),className:"flex items-center justify-between w-full text-left rounded-2xl border border-border bg-surface px-5 py-4 transition-all hover:border-[var(--bb-color-accent)] hover:shadow-sm active:scale-[0.99]",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-ink-muted",children:new Date(_.date).toLocaleDateString("pt-BR")}),e.jsx("p",{className:"mt-1 font-serif text-lg text-ink",children:typeof _.weight=="number"?`${_.weight} kg`:"--"})]}),typeof _.height=="number"&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-ink-muted",children:"Altura"}),e.jsxs("p",{className:"font-semibold text-ink",children:[_.height," cm"]})]})]},_.id))})]}):e.jsxs("div",{className:"rounded-[32px] border border-dashed border-border bg-surface p-10 text-center shadow-sm",children:[e.jsx("p",{className:"text-sm text-ink-muted",children:"Nenhuma medi√ß√£o registrada ainda. Use o bot√£o acima para come√ßar o hist√≥rico oficial de crescimento."}),e.jsxs("button",{type:"button",onClick:()=>d(!0),className:"mt-4 inline-flex items-center gap-2 rounded-2xl bg-primary px-6 py-3 font-semibold text-primary-foreground transition hover:opacity-90",children:[e.jsx(Ye,{className:"h-4 w-4"}),"Registrar primeira medi√ß√£o"]})]}),e.jsx(Fr,{open:u,onOpenChange:m,children:e.jsxs(qr,{className:"max-w-4xl w-[90vw] h-[80vh] flex flex-col",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsx(Br,{className:"flex-shrink-0",children:e.jsx(Or,{style:{color:"var(--bb-color-ink)"},children:"Curva Detalhada"})}),e.jsx("div",{className:"flex-1 w-full min-h-0 mt-4",children:e.jsx($s,{width:"100%",height:"100%",children:e.jsxs(vl,{data:N,margin:{top:20,right:30,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"healthyRange",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:.1})]})}),e.jsx(yl,{strokeDasharray:"4 4",stroke:i?"#3d352e":"#E3DBCF"}),e.jsx(jl,{dataKey:"date",stroke:i?"#8a8075":"#8C8C8C",tick:{fontSize:12}}),e.jsx(zs,{yAxisId:"weight",stroke:"#F2995D",tick:{fontSize:12},label:{value:"Peso (kg)",angle:-90,position:"insideLeft",fill:"#F2995D",fontSize:12}}),e.jsx(zs,{yAxisId:"height",orientation:"right",stroke:"#C76A6A",tick:{fontSize:12},label:{value:"Altura (cm)",angle:90,position:"insideRight",fill:"#C76A6A",fontSize:12}}),e.jsx(kl,{contentStyle:{borderRadius:16,borderColor:"var(--bb-color-border)",backgroundColor:"var(--bb-color-surface)",color:"var(--bb-color-ink)",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},itemStyle:{padding:0}}),e.jsx(wl,{verticalAlign:"top",height:36}),e.jsx(Nl,{yAxisId:"weight",type:"monotone",dataKey:"expectedMaxWeight",baseValue:"dataMin",stroke:"none",fill:"url(#healthyRange)",name:"Faixa Saud√°vel (OMS)"}),e.jsx(ba,{yAxisId:"weight",type:"monotone",dataKey:"weight",stroke:"#F2995D",strokeWidth:3,name:"Peso (kg)",activeDot:{r:6,strokeWidth:0,fill:"#F2995D"}}),e.jsx(ba,{yAxisId:"height",type:"monotone",dataKey:"height",stroke:"#C76A6A",strokeWidth:3,name:"Altura (cm)",activeDot:{r:6,strokeWidth:0,fill:"#C76A6A"}})]})})})]})}),e.jsx(ws,{isOpen:!!x,onClose:()=>f(null),title:"Detalhes da Medi√ß√£o",subtitle:x?new Date(x.date).toLocaleDateString("pt-BR",{day:"numeric",month:"long",year:"numeric"}):"",icon:Vo,layoutId:x?`measurement-card-${x.id}`:void 0,children:x&&e.jsxs(E.div,{className:"grid grid-cols-2 gap-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.3},children:[e.jsxs("div",{className:"rounded-3xl bg-[var(--bb-color-bg)] p-6 text-center",children:[e.jsx("p",{className:"text-sm font-bold uppercase tracking-wider text-[var(--bb-color-ink-muted)]",children:"Peso"}),e.jsx("p",{className:"mt-2 font-serif text-4xl font-bold text-[var(--bb-color-accent)]",children:x.weight?`${x.weight} kg`:"--"})]}),e.jsxs("div",{className:"rounded-3xl bg-[var(--bb-color-bg)] p-6 text-center",children:[e.jsx("p",{className:"text-sm font-bold uppercase tracking-wider text-[var(--bb-color-ink-muted)]",children:"Altura"}),e.jsx("p",{className:"mt-2 font-serif text-4xl font-bold text-[var(--bb-color-ink)]",children:x.height?`${x.height} cm`:"--"})]})]})})]})},wu=({childId:t,open:r,onOpenChange:a})=>{const{mutate:s,isPending:l}=sd(),[o,i]=c.useState(""),[n,d]=c.useState(""),[u,m]=c.useState(""),[p,f]=c.useState(!1);c.useEffect(()=>{r&&(i(new Date().toISOString().split("T")[0]),d(""),m(""),f(!1))},[r]);const x=b=>{b.preventDefault(),!(!o||!n)&&(console.log("Saving Visit:",{childId:t,date:o,reason:n,notes:u,hasPhoto:p}),s({childId:t,date:o,reason:n,notes:u||void 0},{onSuccess:()=>{a(!1)}}))};return e.jsx(yt,{open:r,onOpenChange:a,direction:"right",children:e.jsx(dt,{className:"sm:max-w-md",style:{backgroundColor:"var(--bb-color-surface)"},children:e.jsxs("form",{onSubmit:x,className:"flex h-full flex-col",children:[e.jsxs(mt,{style:{borderBottom:"1px solid var(--bb-color-border)",backgroundColor:"var(--bb-color-surface)"},children:[e.jsx(xt,{style:{color:"var(--bb-color-ink)"},children:"Nova Visita"}),e.jsx(Ir,{style:{color:"var(--bb-color-ink-muted)"},children:"Registre consultas, urg√™ncias ou acompanhamentos."})]}),e.jsxs(bt,{className:"space-y-6",style:{backgroundColor:"var(--bb-color-surface)"},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-ink flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-ink-muted"}),"Data da consulta"]}),e.jsx("input",{type:"date",required:!0,value:o,onChange:b=>i(b.target.value),className:"w-full rounded-2xl border border-border bg-transparent px-4 py-3 text-ink focus:border-ink focus:outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-ink flex items-center gap-2",children:[e.jsx(Nr,{className:"h-4 w-4 text-ink-muted"}),"Motivo"]}),e.jsx("input",{type:"text",placeholder:"Ex: Rotina, Febre, Vacina...",value:n,onChange:b=>d(b.target.value),className:"w-full rounded-2xl border border-border bg-transparent px-4 py-3 text-ink focus:border-ink focus:outline-none",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-ink flex items-center gap-2",children:[e.jsx(Dt,{className:"h-4 w-4 text-ink-muted"}),"Prescri√ß√£o / Observa√ß√µes"]}),e.jsx("textarea",{rows:5,placeholder:"Medicamentos, orienta√ß√µes, diagn√≥sticos...",value:u,onChange:b=>m(b.target.value),className:"w-full resize-none rounded-2xl border border-border bg-transparent px-4 py-3 text-ink focus:border-ink focus:outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-ink flex items-center gap-2",children:[e.jsx(gt,{className:"h-4 w-4 text-ink-muted"}),"Foto (Receita ou Laudo)"]}),e.jsx("button",{type:"button",onClick:()=>f(!p),className:D("flex w-full items-center justify-center gap-2 rounded-2xl border-2 border-dashed p-6 transition-all",p?"border-success bg-success/10 text-success":"border-border text-ink-muted hover:border-ink hover:bg-surface-hover"),children:p?e.jsx(e.Fragment,{children:"Foto adicionada!"}):e.jsx(e.Fragment,{children:"Toque para adicionar foto"})})]})]}),e.jsxs(ut,{style:{borderTop:"1px solid var(--bb-color-border)",backgroundColor:"var(--bb-color-bg)"},children:[e.jsx("button",{type:"submit",disabled:l,className:"w-full rounded-2xl bg-primary py-3 font-semibold text-primary-foreground transition hover:opacity-90 disabled:opacity-60",children:l?"Salvando...":"Salvar Visita"}),e.jsx("button",{type:"button",onClick:()=>a(!1),className:"w-full rounded-2xl border border-border py-3 font-semibold text-ink transition hover:bg-surface-hover",children:"Cancelar"})]})]})})})},Nu=({childId:t})=>{const{data:r=[],isLoading:a,isError:s,error:l,refetch:o}=ad(t),[i,n]=c.useState(!1),[d,u]=c.useState(null),m=r.find(h=>h.id===d),p=c.useMemo(()=>[...r].sort((h,k)=>new Date(k.date).getTime()-new Date(h.date).getTime()),[r]),f=p[0],x=p.length,b=f?new Date(f.date).toLocaleDateString("pt-BR",{day:"numeric",month:"long",year:"numeric"}):"Nenhuma visita";let g="Registre as consultas para manter o hist√≥rico m√©dico organizado.";if(x>0&&(g=`√öltima consulta. Total de ${x} ${x===1?"visita realizada":"visitas realizadas"} at√© o momento.`),a)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-32 rounded-3xl animate-pulse",style:{backgroundColor:"var(--bb-color-muted)"}}),e.jsx("div",{className:"h-64 rounded-[32px] animate-pulse",style:{backgroundColor:"var(--bb-color-muted)"}})]});if(s){const h=e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-32 rounded-[32px] bg-gray-100 animate-pulse"}),e.jsx("div",{className:"h-64 rounded-[32px] bg-gray-100 animate-pulse"})]});return e.jsx(lr,{variant:"section",title:"Erro nas consultas",description:"N√£o foi poss√≠vel carregar o hist√≥rico de visitas.",errorDetails:l==null?void 0:l.message,onRetry:()=>o(),skeleton:h})}return e.jsxs("section",{className:"space-y-6",children:[e.jsx($r,{title:"Consultas Pedi√°tricas",value:b,description:g,actions:e.jsxs(Pe,{variant:"secondary",size:"sm",onClick:()=>n(!0),children:[e.jsx(Ye,{className:"h-4 w-4"}),"Nova Visita"]})}),e.jsx(wu,{childId:t,open:i,onOpenChange:n}),p.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:p.map(h=>e.jsxs(E.button,{layoutId:`visit-card-${h.id}`,type:"button",onClick:()=>u(h.id),className:"relative w-full text-left overflow-hidden rounded-[32px] border border-border bg-surface p-6 shadow-sm transition-all hover:border-[var(--bb-color-accent)] hover:shadow-md active:scale-[0.99]",children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-surface-hover px-3 py-1",children:[e.jsx(On,{className:"h-3.5 w-3.5 text-ink-muted"}),e.jsx("span",{className:"text-xs font-medium uppercase tracking-wider text-ink-muted",children:new Date(h.date).toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"})})]})}),e.jsx("h3",{className:"mb-2 font-serif text-xl font-medium text-ink",children:h.reason}),h.notes?e.jsx("div",{className:"mt-3 rounded-2xl bg-surface-hover/50 p-4",children:e.jsx("p",{className:"text-sm line-clamp-2 leading-relaxed text-ink-muted",children:h.notes})}):e.jsx("p",{className:"text-sm text-ink-muted italic",children:"Sem observa√ß√µes."})]},h.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-[32px] border border-dashed border-border bg-surface/50 p-12 text-center",children:[e.jsx("div",{className:"mb-4 rounded-full bg-surface-hover p-4",children:e.jsx(Nr,{className:"h-8 w-8 text-ink-muted"})}),e.jsx("h3",{className:"mb-2 font-serif text-lg text-ink",children:"Nenhuma consulta registrada"}),e.jsx("p",{className:"max-w-xs text-sm text-ink-muted",children:"Comece registrando a primeira visita ao pediatra para manter o hist√≥rico de sa√∫de organizado."}),e.jsx("button",{type:"button",onClick:()=>n(!0),className:"mt-6 inline-flex items-center gap-2 rounded-2xl bg-primary px-6 py-3 font-semibold text-primary-foreground shadow-md transition-all hover:opacity-90 active:scale-[0.98]",children:"Registrar primeira visita"})]}),e.jsx(ws,{isOpen:!!m,onClose:()=>u(null),title:(m==null?void 0:m.reason)||"Detalhes da Consulta",subtitle:m?new Date(m.date).toLocaleDateString("pt-BR",{day:"numeric",month:"long",year:"numeric"}):"",icon:Nr,layoutId:m?`visit-card-${m.id}`:void 0,children:m&&e.jsxs(E.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.3},children:[e.jsxs("div",{className:"rounded-3xl bg-[var(--bb-color-bg)] p-6",children:[e.jsx("p",{className:"text-sm font-bold uppercase tracking-wider text-[var(--bb-color-ink-muted)] mb-4",children:"Motivo da Consulta"}),e.jsx("p",{className:"text-xl font-serif text-[var(--bb-color-ink)]",children:m.reason})]}),e.jsxs("div",{className:"rounded-3xl bg-[var(--bb-color-bg)] p-6",children:[e.jsx("p",{className:"text-sm font-bold uppercase tracking-wider text-[var(--bb-color-ink-muted)] mb-4",children:"Relato e Observa√ß√µes"}),m.notes?e.jsx("p",{className:"text-lg leading-relaxed text-[var(--bb-color-ink)] whitespace-pre-wrap",children:m.notes}):e.jsx("p",{className:"text-lg italic text-[var(--bb-color-ink-muted)]",children:"Nenhuma observa√ß√£o registrada para esta consulta."})]})]})})]})},Cu=({childId:t,vaccineName:r,open:a,onOpenChange:s})=>{const[l,o]=c.useState(""),[i,n]=c.useState(""),[d,u]=c.useState(""),[m,p]=c.useState(!1),[f,x]=c.useState(!1);c.useEffect(()=>{a&&(o(new Date().toISOString().split("T")[0]),n(""),u(""),p(!1))},[a]);const b=g=>{g.preventDefault(),x(!0),console.log("Marking Vaccine Taken:",{childId:t,vaccineName:r,date:l,batch:i,reaction:d,hasPhoto:m}),setTimeout(()=>{x(!1),s(!1),alert(`Vacina ${r} registrada com sucesso! (Mock)`)},1e3)};return e.jsx(yt,{open:a,onOpenChange:s,direction:"right",children:e.jsx(dt,{className:"sm:max-w-md",style:{backgroundColor:"var(--bb-color-surface)"},children:e.jsxs("form",{onSubmit:b,className:"flex h-full flex-col",children:[e.jsxs(mt,{style:{borderBottom:"1px solid var(--bb-color-border)",backgroundColor:"var(--bb-color-surface)"},children:[e.jsx(xt,{style:{color:"var(--bb-color-ink)"},children:"Registrar Vacina"}),e.jsxs(Ir,{style:{color:"var(--bb-color-ink-muted)"},children:["Detalhes da aplica√ß√£o de ",e.jsx("strong",{children:r}),"."]})]}),e.jsxs(bt,{className:"space-y-6",style:{backgroundColor:"var(--bb-color-surface)"},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-ink flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-ink-muted"}),"Data da aplica√ß√£o"]}),e.jsx("input",{type:"date",required:!0,value:l,onChange:g=>o(g.target.value),className:"w-full rounded-2xl border border-border bg-transparent px-4 py-3 text-ink focus:border-ink focus:outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-ink flex items-center gap-2",children:[e.jsx(Xr,{className:"h-4 w-4 text-ink-muted"}),"Lote da vacina"]}),e.jsx("input",{type:"text",placeholder:"Ex: AB12345",value:i,onChange:g=>n(g.target.value),className:"w-full rounded-2xl border border-border bg-transparent px-4 py-3 text-ink focus:border-ink focus:outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-ink flex items-center gap-2",children:[e.jsx($n,{className:"h-4 w-4 text-ink-muted"}),"Rea√ß√£o (se houver)"]}),e.jsx("textarea",{rows:3,placeholder:"Ex: Febre leve, dor local...",value:d,onChange:g=>u(g.target.value),className:"w-full resize-none rounded-2xl border border-border bg-transparent px-4 py-3 text-ink focus:border-ink focus:outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-ink flex items-center gap-2",children:[e.jsx(gt,{className:"h-4 w-4 text-ink-muted"}),"Foto do comprovante/selo"]}),e.jsx("button",{type:"button",onClick:()=>p(!m),className:D("flex w-full items-center justify-center gap-2 rounded-2xl border-2 border-dashed p-6 transition-all",m?"border-success bg-success/10 text-success":"border-border text-ink-muted hover:border-ink hover:bg-surface-hover"),children:m?e.jsx(e.Fragment,{children:"Foto adicionada!"}):e.jsx(e.Fragment,{children:"Toque para adicionar foto"})})]})]}),e.jsxs(ut,{style:{borderTop:"1px solid var(--bb-color-border)",backgroundColor:"var(--bb-color-bg)"},children:[e.jsx("button",{type:"submit",disabled:f,className:"w-full rounded-2xl bg-primary py-3 font-semibold text-primary-foreground transition hover:opacity-90 disabled:opacity-60",children:f?"Salvando...":"Confirmar Aplica√ß√£o"}),e.jsx("button",{type:"button",onClick:()=>s(!1),className:"w-full rounded-2xl border border-border py-3 font-semibold text-ink transition hover:bg-surface-hover",children:"Cancelar"})]})]})})})};function Vi({icon:t,title:r,description:a,action:s,className:l,illustration:o}){return e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},className:D("flex flex-col items-center justify-center text-center p-8 rounded-[32px] border border-dashed border-[var(--bb-color-border-strong)] bg-[var(--bb-color-surface)]/50",l),children:[o?e.jsx("div",{className:"mb-6",children:o}):t?e.jsx("div",{className:"mb-6 p-4 rounded-full bg-[var(--bb-color-bg)] text-[var(--bb-color-accent)]",children:e.jsx(t,{className:"w-8 h-8 opacity-80"})}):null,e.jsx("h3",{className:"text-xl font-serif font-semibold text-[var(--bb-color-ink)] mb-2",children:r}),a&&e.jsx("p",{className:"text-[var(--bb-color-ink-muted)] mb-8 max-w-sm leading-relaxed",children:a}),s&&e.jsx("div",{className:"mt-2",children:s})]})}const Lt={completed:{label:"Aplicada",icon:$e,containerClass:"inline-flex items-center gap-2 rounded-lg px-3 py-1 text-xs font-semibold",style:{backgroundColor:"var(--bb-color-success)",color:"var(--bb-color-surface)",opacity:.9},iconClass:"h-4 w-4"},scheduled:{label:"Agendada",icon:Da,containerClass:"flex items-center gap-2 text-sm font-semibold",style:{color:"var(--bb-color-accent)"},iconClass:"h-4 w-4"},overdue:{label:"Atrasada",icon:pt,containerClass:"flex items-center gap-2 text-sm font-semibold",style:{color:"var(--bb-color-danger)"},iconClass:"h-4 w-4"}},Su=[{period:"Ao nascer",months:0,vaccines:["BCG","Hepatite B"]},{period:"2 meses",months:2,vaccines:["Pentavalente (1¬™ dose)","Poliomielite inativada (1¬™ dose)","Rotav√≠rus (1¬™ dose)","Pneumoc√≥cica 13 (1¬™ dose)","Meningoc√≥cica C (1¬™ dose)"]},{period:"4 meses",months:4,vaccines:["Pentavalente (2¬™ dose)","Poliomielite inativada (2¬™ dose)","Rotav√≠rus (2¬™ dose)","Pneumoc√≥cica 13 (2¬™ dose)"]},{period:"6 meses",months:6,vaccines:["Pentavalente (3¬™ dose)","Poliomielite inativada (3¬™ dose)","Hepatite B (3¬™ dose)"]},{period:"9 meses",months:9,vaccines:["Febre amarela"]},{period:"12 meses",months:12,vaccines:["Tr√≠plice viral","Pneumoc√≥cica 13 (refor√ßo)","Meningoc√≥cica C (refor√ßo)"]},{period:"15 meses",months:15,vaccines:["Tetra viral","Hepatite A","DTP (1¬∫ refor√ßo)"]}],_u=({childId:t})=>{var _,A,G,O,C;const{t:r}=ce(),{data:a=[],isLoading:s,isError:l,error:o,refetch:i}=od(t),{selectedChild:n}=Xe(),[d,u]=c.useState(!1),[m,p]=c.useState(""),[f,x]=c.useState(null),b=a.find(j=>j.id===f),g=Su.map(j=>({...j,vaccines:j.vaccines.map(w=>{const I=a.find(M=>M.name.toLowerCase().includes(w.toLowerCase()))??null;return{name:w,entry:I}})})),h=g.reduce((j,w)=>j+w.vaccines.length,0),k=a.filter(j=>j.status==="completed").length,v=h===0?0:Math.min(100,Math.round(k/h*100)),N=(()=>{if(!(n!=null&&n.birthday))return{title:"Pr√≥xima Vacina",description:"Atualize a data de nascimento para ver o calend√°rio personalizado.",actions:null};const j=new Date(n.birthday),w=new Date;for(const I of g)for(const M of I.vaccines)if(!M.entry||M.entry.status!=="completed"){const V=new Date(j);V.setMonth(j.getMonth()+I.months);const J=V.getTime()-w.getTime(),ae=Math.ceil(J/(1e3*60*60*24)),L=ae<0,ee=L?`Venceu h√° ${Math.abs(ae)} dias!`:ae===0?"Vence hoje!":`Vence em ${ae} dias`;return{title:`Pr√≥xima: ${M.name} (${I.period})`,description:ee,isOverdue:L,actions:e.jsxs(Pe,{variant:"secondary",size:"sm",onClick:()=>{p(M.name),u(!0)},children:[e.jsx(Xr,{className:"h-4 w-4"}),"Marcar como tomada"]})}}return{status:"completed",title:r("b2c.health.vaccines.empty.title"),description:r("b2c.health.vaccines.empty.description"),actions:null}})();if(s)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-32 rounded-3xl animate-pulse",style:{backgroundColor:"var(--bb-color-muted)"}}),e.jsx("div",{className:"h-64 rounded-[32px] animate-pulse",style:{backgroundColor:"var(--bb-color-muted)"}}),e.jsx("div",{className:"h-64 rounded-[32px] animate-pulse",style:{backgroundColor:"var(--bb-color-muted)"}})]});if(l){const j=e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-[32px] border p-6",style:{borderColor:"var(--bb-color-border)",backgroundColor:"var(--bb-color-surface)"},children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-24 rounded bg-gray-200 animate-pulse"}),e.jsx("div",{className:"h-8 w-48 rounded bg-gray-200 animate-pulse"})]}),e.jsx("div",{className:"h-8 w-12 rounded bg-gray-200 animate-pulse"})]}),e.jsx("div",{className:"mt-6 h-2 w-full rounded-full bg-gray-100 animate-pulse"})]}),e.jsx("div",{className:"h-48 rounded-[32px] bg-gray-100 animate-pulse"})]});return e.jsx(lr,{variant:"section",title:"Erro nas vacinas",description:"N√£o foi poss√≠vel carregar o cart√£o de vacinas.",errorDetails:o==null?void 0:o.message,onRetry:()=>i(),skeleton:j})}return e.jsxs("section",{className:"space-y-6",children:[N.status==="completed"?e.jsx(Vi,{title:N.title,description:N.description,illustration:e.jsx("div",{className:"text-6xl animate-pulse",children:"üõ°Ô∏è"})}):e.jsx($r,{title:r("b2c.health.vaccines.hud.nextVaccine"),value:N.title,description:N.description,progressPercent:v,progressText:`${k} ${r("b2c.health.vaccines.hud.countSeparator")} ${h}`,actions:N.actions}),g.map(j=>e.jsxs("div",{className:"rounded-[32px] border border-border bg-surface p-6 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-ink-muted",children:j.period}),e.jsx("div",{className:"mt-4 space-y-3",children:j.vaccines.map(({name:w,entry:I})=>{const M=I&&Lt[I.status]||Lt.scheduled,V=(M==null?void 0:M.icon)||Da;return e.jsxs(E.button,{layoutId:I?`vaccine-card-${I.id}`:void 0,type:"button",onClick:()=>{I&&I.status==="completed"?x(I.id):(p(w),u(!0))},className:D("flex flex-wrap items-center justify-between gap-4 w-full text-left rounded-2xl border border-border bg-surface px-4 py-3 transition-all","hover:border-[var(--bb-color-accent)] hover:shadow-sm active:scale-[0.99] cursor-pointer"),children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-ink",children:w}),(I==null?void 0:I.dueDate)&&e.jsxs("p",{className:"text-xs text-ink-muted",children:["Prevista para"," ",new Date(I.dueDate).toLocaleDateString("pt-BR")]}),I!=null&&I.appliedAt?e.jsxs("p",{className:"text-xs text-ink-muted",children:["Aplicada em"," ",new Date(I.appliedAt).toLocaleDateString("pt-BR")]}):e.jsx("p",{className:"text-xs text-ink-muted",children:"Sem registro aplicado"})]}),e.jsxs("div",{className:M.containerClass,style:M.style,children:[e.jsx(V,{className:M.iconClass}),e.jsx("span",{children:M.label})]})]},w)})})]},j.period)),e.jsx(Cu,{childId:t,vaccineName:m,open:d,onOpenChange:u}),e.jsx(ws,{isOpen:!!b,onClose:()=>x(null),title:(b==null?void 0:b.name)||"Detalhes da Vacina",subtitle:b!=null&&b.appliedAt?`Aplicada em ${new Date(b.appliedAt).toLocaleDateString("pt-BR")}`:"Registro de Vacina",icon:Xr,layoutId:b?`vaccine-card-${b.id}`:void 0,children:b&&e.jsxs(E.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.3},children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-3xl bg-[var(--bb-color-bg)] p-6",children:[e.jsx("p",{className:"text-sm font-bold uppercase tracking-wider text-[var(--bb-color-ink-muted)] mb-2",children:"Status"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:D((_=Lt[b.status])==null?void 0:_.containerClass),style:(A=Lt[b.status])==null?void 0:A.style,children:[Qe.createElement(((G=Lt[b.status])==null?void 0:G.icon)||Da,{className:(O=Lt[b.status])==null?void 0:O.iconClass}),e.jsx("span",{className:"ml-2",children:(C=Lt[b.status])==null?void 0:C.label})]})})]}),b.appliedAt&&e.jsxs("div",{className:"rounded-3xl bg-[var(--bb-color-bg)] p-6",children:[e.jsx("p",{className:"text-sm font-bold uppercase tracking-wider text-[var(--bb-color-ink-muted)] mb-2",children:"Data da Aplica√ß√£o"}),e.jsx("p",{className:"text-lg font-semibold text-[var(--bb-color-ink)]",children:new Date(b.appliedAt).toLocaleDateString("pt-BR",{day:"numeric",month:"long",year:"numeric"})})]})]}),b.notes&&e.jsxs("div",{className:"rounded-3xl bg-[var(--bb-color-bg)] p-6",children:[e.jsx("p",{className:"text-sm font-bold uppercase tracking-wider text-[var(--bb-color-ink-muted)] mb-4",children:"Observa√ß√µes"}),e.jsx("p",{className:"text-lg leading-relaxed text-[var(--bb-color-ink)] whitespace-pre-wrap",children:b.notes})]})]})})]})},Au=[{id:"crescimento",label:"Crescimento",description:"Curva e medi√ß√µes oficiais",icon:Vo},{id:"pediatra",label:"Pediatra",description:"Consultas e receitu√°rio",icon:Nr},{id:"vacinas",label:"Vacinas",description:"Cart√£o atualizado",icon:Xr}],Du=5*60*1e3,Eu=()=>{const[t,r]=c.useState("crescimento"),{selectedChild:a}=Xe(),s=ke(y=>y.user),l=ke(y=>y.logout),o=ke(y=>y.isLoading),i=ls(),[n,d]=c.useState(!1),u=c.useRef(null),p="true".toLowerCase()!=="false"&&!1,f=(s==null?void 0:s.role)==="owner",x=c.useCallback(()=>{u.current&&(window.clearTimeout(u.current),u.current=null)},[]),b=c.useCallback(()=>{x(),u.current=window.setTimeout(()=>{d(!0),u.current=null},Du)},[x]),g=c.useCallback(()=>{n||b()},[n,b]);c.useEffect(()=>{if(!f||!a||p){x(),d(!1);return}b();const y=["pointerdown","keydown","visibilitychange"],N=["scroll"],_=()=>g();return y.forEach(A=>document.addEventListener(A,_,{passive:!0})),N.forEach(A=>window.addEventListener(A,_,{passive:!0})),()=>{y.forEach(A=>document.removeEventListener(A,_)),N.forEach(A=>window.removeEventListener(A,_)),x()}},[f,a,p,g,b,x]);const h=()=>{d(!1),b()},k=async()=>{x();try{await i.mutateAsync()}catch(y){console.error(y)}finally{l()}},v=()=>{if(!a)return null;switch(t){case"pediatra":return e.jsx(Nu,{childId:a.id});case"vacinas":return e.jsx(_u,{childId:a.id});case"crescimento":default:return e.jsx(ku,{childId:a.id})}};return o&&!p?e.jsx(Um,{variant:"page",label:"Buscando o perfil e as permiss√µes da conta..."}):f?a?e.jsxs(E.div,{className:"mx-auto max-w-4xl px-4 py-6",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},children:[e.jsxs(E.div,{className:"mb-8 mt-2 px-2",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}},children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-medium tracking-tight",children:"Livro da Sa√∫de"}),e.jsx("p",{className:"mt-2 text-lg opacity-60 font-medium max-w-lg",children:"Acompanhe vacinas, crescimento e consultas."})]}),e.jsx("div",{className:"mb-8 rounded-2xl border p-1.5 shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:e.jsx(wt,{id:"health-tabs",children:e.jsx("div",{className:"flex flex-wrap gap-1.5",children:Au.map(y=>{const N=y.icon,_=t===y.id;return e.jsxs("button",{type:"button",onClick:()=>r(y.id),className:"relative flex-1 min-w-[140px] overflow-hidden rounded-2xl px-4 py-1.5 text-sm font-semibold transition-all duration-300 active:scale-[0.98]",style:{color:_?"var(--bb-color-surface)":"var(--bb-color-ink-muted)"},children:[_&&e.jsx(E.span,{layoutId:"health-nav-pill",className:"absolute inset-0 rounded-2xl",style:{backgroundColor:"var(--bb-color-accent)",boxShadow:"0 8px 20px rgba(242,153,93,0.2)"},transition:{type:"spring",stiffness:320,damping:30}}),e.jsxs("span",{className:"relative z-10 inline-flex items-center justify-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 transition-colors duration-300",style:{color:_?"var(--bb-color-surface)":"var(--bb-color-ink-muted)"}}),y.label]})]},y.id)})})})}),e.jsx("div",{className:"mb-8",children:e.jsx(qe,{mode:"wait",children:e.jsx(E.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:-12},transition:{duration:.35,ease:"easeOut"},children:v()},t)})}),n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",style:{backgroundColor:"rgba(42, 42, 42, 0.6)"},children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl border p-8 text-center shadow-2xl",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full",style:{backgroundColor:"var(--bb-color-danger-soft)",color:"var(--bb-color-danger)"},children:e.jsx(Pr,{className:"h-5 w-5"})}),e.jsx("p",{className:"text-xs uppercase tracking-[0.3em]",style:{color:"var(--bb-color-ink-muted)"},children:"Sess√£o protegida"}),e.jsx("h2",{className:"mt-2 text-2xl",children:"Vamos confirmar que √© voc√™"}),e.jsx("p",{className:"mt-2 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:"Por seguran√ßa, a aba Sa√∫de bloqueia ap√≥s alguns minutos de inatividade. Continue para destravar ou encerre a sess√£o se n√£o estiver em um dispositivo seguro."}),e.jsxs("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row",children:[e.jsx("button",{type:"button",onClick:k,className:"inline-flex flex-1 items-center justify-center rounded-2xl border px-4 py-2 text-sm font-semibold transition",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},children:"Encerrar sess√£o"}),e.jsx("button",{type:"button",onClick:h,className:"inline-flex flex-1 items-center justify-center rounded-2xl px-4 py-2 text-sm font-semibold transition hover:opacity-90",style:{backgroundColor:"var(--bb-color-accent)",color:"var(--bb-color-surface)"},children:"Continuar"})]})]})})]}):e.jsx(Fa,{variant:"page",icon:Mt,title:"Escolha uma crian√ßa",description:"Para acompanhar curva, consultas e documentos, selecione ou cadastre uma crian√ßa primeiro.",primaryAction:{label:"Ir para Perfil da Crian√ßa",to:"/jornada/perfil-crianca"}}):e.jsx(Fa,{variant:"page",tone:"danger",icon:zn,title:"Aba privada",description:"Esta √°rea √© um cofre privado, acess√≠vel apenas pelo dono do √°lbum. Pe√ßa ao Owner para revisar os dados de sa√∫de ou convide-o a compartilhar as atualiza√ß√µes com voc√™."})},Pu=["mae","pai","tio","tia","irmao_irma","avo","avoa","amigo","madrasta","padrasto"];function da(){const{t}=ce();return{options:c.useMemo(()=>Pu.map(s=>({value:s,label:t(`b2c.guestbook.relationship.${s}`,s)})),[t]),formatRelationshipDegree:s=>t(`b2c.guestbook.relationship.${s}`,s)}}const oo=({childId:t,status:r})=>{const{t:a,i18n:s}=ce(),{options:l,formatRelationshipDegree:o}=da(),{data:i=[]}=cs(t),{mutate:n,isPending:d}=Zc(),{mutate:u,isPending:m}=ed(),[p,f]=c.useState({}),[x,b]=c.useState(null);c.useEffect(()=>{if(!x)return;const v=N=>{N.key==="Escape"&&b(null)};document.addEventListener("keydown",v);const y=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",v),document.body.style.overflow=y}},[x]);const g=d||m,h=i.filter(v=>v.status===r),k=c.useMemo(()=>[...h].sort((v,y)=>new Date(y.createdAt).getTime()-new Date(v.createdAt).getTime()),[h]);return h.length===0?e.jsx(Vi,{title:a(r==="approved"?"b2c.guestbook.empty.approvedTitle":"b2c.guestbook.empty.pendingTitle"),description:a(r==="approved"?"b2c.guestbook.empty.approvedDescription":"b2c.guestbook.empty.pendingDescription"),illustration:e.jsx("div",{className:"text-6xl animate-pulse",children:r==="approved"?"üìñ":"üõ°Ô∏è"})}):e.jsx(wt,{id:`guestbook-${t}-${r}`,children:e.jsxs("div",{className:"space-y-4",children:[k.map(v=>e.jsx(c.Fragment,{children:r==="approved"?e.jsxs(E.button,{type:"button",layoutId:`gb-entry-${v.id}`,onClick:()=>b(v),className:"bb-pressable w-full text-left rounded-2xl p-6 border transition hover:shadow-sm active:scale-[0.99]",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},"aria-label":a("b2c.guestbook.list.aria.openEntry",{author:v.authorName}),transition:{type:"spring",stiffness:520,damping:46},children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",style:{color:"var(--bb-color-ink)"},children:v.authorName}),e.jsxs("p",{className:"text-xs",style:{color:"var(--bb-color-ink-muted)"},children:[o(v.relationshipDegree)," ‚Ä¢"," ",new Date(v.createdAt).toLocaleDateString(s.language)]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-lg text-xs font-semibold",style:{backgroundColor:"var(--bb-color-success)",color:"var(--bb-color-surface)",opacity:.9},children:[e.jsx($e,{className:"w-4 h-4"}),a("b2c.guestbook.list.status.published")]})]}),e.jsx("p",{className:"mb-3",style:{color:"var(--bb-color-ink)"},children:v.message}),v.assetId&&e.jsx(E.div,{layoutId:`gb-entry-media-${v.id}`,className:"mt-4 rounded-xl border p-3",style:{borderColor:"var(--bb-color-border)",backgroundColor:"var(--bb-color-bg)"},children:e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold",style:{color:"var(--bb-color-ink-muted)"},children:[e.jsx(Ge,{className:"h-4 w-4"}),a("b2c.guestbook.list.attachment.sent")]})})]}):e.jsxs("div",{className:"rounded-2xl p-6 border",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",style:{color:"var(--bb-color-ink)"},children:v.authorName}),e.jsxs("p",{className:"text-xs",style:{color:"var(--bb-color-ink-muted)"},children:[o(v.relationshipDegree)," ‚Ä¢"," ",new Date(v.createdAt).toLocaleDateString(s.language)]})]}),r==="pending"?e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-lg text-xs font-semibold",style:{backgroundColor:"var(--bb-color-accent-soft)",color:"var(--bb-color-accent)"},children:[e.jsx(Un,{className:"w-4 h-4"}),a("b2c.guestbook.list.status.pending")]}):e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-lg text-xs font-semibold",style:{backgroundColor:"var(--bb-color-success)",color:"var(--bb-color-surface)",opacity:.9},children:[e.jsx($e,{className:"w-4 h-4"}),a("b2c.guestbook.list.status.published")]})]}),e.jsx("p",{className:"mb-3",style:{color:"var(--bb-color-ink)"},children:v.message}),v.assetId&&e.jsx("p",{className:"text-xs mb-3",style:{color:"var(--bb-color-ink-muted)"},children:a("b2c.guestbook.list.attachment.sent")}),r==="pending"&&e.jsxs("div",{className:"mt-4 grid gap-3 sm:grid-cols-[1fr_auto_auto] sm:items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-1",htmlFor:`guestbook-relationship-${v.id}`,style:{color:"var(--bb-color-ink-muted)"},children:a("b2c.guestbook.list.forms.relationshipLabel")}),e.jsx("select",{id:`guestbook-relationship-${v.id}`,value:p[v.id]??v.relationshipDegree,onChange:y=>f(N=>({...N,[v.id]:y.target.value})),className:"w-full px-3 py-2 border rounded-xl text-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},children:l.map(y=>e.jsx("option",{value:y.value,children:y.label},y.value))})]}),e.jsxs("button",{type:"button",disabled:g,className:"bb-button-success inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2 text-sm font-bold shadow-sm transition hover:opacity-90 disabled:opacity-50",onClick:()=>{const y=p[v.id]??v.relationshipDegree;n({entryId:v.id,relationshipDegree:y})},children:[e.jsx(ia,{className:"h-4 w-4"}),a("b2c.guestbook.list.actions.approve")]}),e.jsxs("button",{type:"button",disabled:g,className:"inline-flex items-center justify-center gap-2 rounded-2xl border px-4 py-2 text-sm font-bold transition hover:opacity-90 disabled:opacity-50",style:{borderColor:"rgba(239,68,68,0.35)",color:"rgb(239,68,68)"},onClick:()=>u({entryId:v.id}),children:[e.jsx(Qa,{className:"h-4 w-4"}),a("b2c.guestbook.list.actions.reject")]})]})]})},v.id)),e.jsx(qe,{initial:!1,children:x&&e.jsxs(E.div,{className:"fixed inset-0 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(E.button,{type:"button",className:"absolute inset-0 w-full h-full",onClick:()=>b(null),"aria-label":a("b2c.guestbook.list.aria.close"),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{backgroundColor:"rgba(0,0,0,0.55)"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 sm:p-6",children:e.jsx(E.div,{layoutId:`gb-entry-${x.id}`,className:"w-full max-w-3xl max-h-[90vh] overflow-hidden rounded-2xl border",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},transition:{type:"spring",stiffness:520,damping:46},onClick:v=>v.stopPropagation(),children:e.jsxs("div",{className:"p-5 sm:p-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold",style:{color:"var(--bb-color-ink)"},children:x.authorName}),e.jsxs("div",{className:"mt-1 text-xs",style:{color:"var(--bb-color-ink-muted)"},children:[o(x.relationshipDegree)," ","‚Ä¢"," ",new Date(x.createdAt).toLocaleDateString(s.language)]})]}),e.jsx("button",{type:"button",className:"rounded-xl p-2 transition hover:opacity-90",onClick:()=>b(null),"aria-label":a("b2c.guestbook.list.aria.close"),style:{backgroundColor:"var(--bb-color-bg)",border:"1px solid var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},children:e.jsx(De,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mt-4 max-h-[70vh] overflow-y-auto",children:[e.jsx("p",{className:"text-base leading-relaxed whitespace-pre-wrap",style:{color:"var(--bb-color-ink)"},children:x.message}),x.assetId&&e.jsx(E.div,{layoutId:`gb-entry-media-${x.id}`,className:"mt-4 rounded-xl border p-4",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink-muted)",backgroundColor:"var(--bb-color-bg)"},children:e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsx(Ge,{className:"h-4 w-4"}),a("b2c.guestbook.list.attachment.previewSoon")]})})]})]})})})]})})]})})};function Mu(){const t=typeof SharedArrayBuffer<"u",r=typeof Worker<"u",a=navigator.deviceMemory,s=a?a*1024:4096,l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),o=s<2048||navigator.hardwareConcurrency<4;return{supportsSharedArrayBuffer:t,supportsWebWorker:r,estimatedMemoryMB:s,isMobile:l,isLowEndDevice:o}}function Ns(){const t=Mu();return t.supportsSharedArrayBuffer&&t.supportsWebWorker&&!t.isLowEndDevice}class Tu{constructor(){He(this,"worker",null);He(this,"isReady",!1);He(this,"initPromise",null);He(this,"pendingJobs",new Map);He(this,"jobCounter",0)}async initialize(){return this.isReady?!0:Ns()?this.initPromise?(await this.initPromise,this.isReady):(this.initPromise=this.initWorker(),await this.initPromise,this.isReady):(console.warn("[MediaProcessor] Client-side processing not supported on this device"),!1)}async initWorker(){try{this.worker=new Worker(new URL("/assets/media-processor.worker-DiIb87bT.js",import.meta.url),{type:"module"}),this.worker.onmessage=this.handleWorkerMessage.bind(this),this.worker.onerror=r=>{console.error("[MediaProcessor] Worker error:",r),this.handleWorkerError(r)},await new Promise((r,a)=>{const s=o=>{o.data.type==="ready"?(this.isReady=!0,r()):o.data.type==="error"&&o.data.id==="init"&&a(new Error(o.data.error))},l=this.worker.onmessage;this.worker.onmessage=o=>{s(o),l&&typeof l=="function"&&this.worker&&l.call(this.worker,o)},this.worker.postMessage({type:"init",id:"init"}),setTimeout(()=>a(new Error("Worker initialization timeout")),3e4)}),console.log("[MediaProcessor] Worker initialized successfully")}catch(r){throw console.error("[MediaProcessor] Failed to initialize worker:",r),this.cleanup(),r}}handleWorkerMessage(r){var m;const{type:a,id:s,progress:l,stage:o,result:i,error:n,metadata:d}=r.data,u=this.pendingJobs.get(s);if(u)switch(a){case"progress":(m=u.onProgress)==null||m.call(u,l??0,o??"processing");break;case"complete":i&&d&&(u.resolve({blob:i,metadata:d,processedOnClient:!0}),this.pendingJobs.delete(s));break;case"error":u.reject(new Error(n??"Unknown processing error")),this.pendingJobs.delete(s);break}}handleWorkerError(r){this.pendingJobs.forEach((a,s)=>{a.reject(new Error(`Worker error: ${r.message}`)),this.pendingJobs.delete(s)})}generateJobId(){return`job_${Date.now()}_${++this.jobCounter}`}async transcodeVideo(r,a){if(!this.isReady||!this.worker)throw new Error("MediaProcessor not initialized. Call initialize() first.");const s=this.generateJobId();return new Promise((l,o)=>{this.pendingJobs.set(s,{resolve:l,reject:o,onProgress:a.onProgress});const i={file:r,targetResolution:a.resolution,format:a.format,quality:a.quality};this.worker.postMessage({type:"transcode",id:s,payload:i})})}async extractThumbnail(r,a={}){if(!this.isReady||!this.worker)throw new Error("MediaProcessor not initialized. Call initialize() first.");const s=this.generateJobId();return new Promise((l,o)=>{this.pendingJobs.set(s,{resolve:l,reject:o});const i={file:r,timeSeconds:a.timeSeconds??1,width:a.width??320,height:a.height??180};this.worker.postMessage({type:"thumbnail",id:s,payload:i})})}async optimizeImage(r,a={}){if(!this.isReady||!this.worker)throw new Error("MediaProcessor not initialized. Call initialize() first.");const s=this.generateJobId();return new Promise((l,o)=>{this.pendingJobs.set(s,{resolve:l,reject:o});const i={file:r,maxWidth:a.maxWidth??1920,maxHeight:a.maxHeight??1080,quality:a.quality??85,format:a.format??"webp"};this.worker.postMessage({type:"optimize",id:s,payload:i})})}abort(r){this.worker&&this.worker.postMessage({type:"abort",id:r}),this.pendingJobs.delete(r)}abortAll(){this.pendingJobs.forEach((r,a)=>this.abort(a))}cleanup(){var r;this.abortAll(),(r=this.worker)==null||r.terminate(),this.worker=null,this.isReady=!1,this.initPromise=null}get ready(){return this.isReady}}let ja=null;function Ki(){return ja||(ja=new Tu),ja}const Ru=t=>["image/jpeg","image/png","image/webp"].includes(t.type),Iu=t=>t.type.startsWith("video/"),Lu=(t,r)=>`${t.replace(/\.[^.]+$/,"")}.${r}`,Fu=t=>Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("");async function qu(t){var l;const r=(l=globalThis.crypto)==null?void 0:l.subtle;if(!r)throw new Error("WebCrypto n√£o dispon√≠vel (crypto.subtle). N√£o foi poss√≠vel calcular sha256 do arquivo.");const a=await t.arrayBuffer(),s=await r.digest("SHA-256",a);return Fu(s)}async function Bu(t){if(Ru(t))try{const r=(await us(async()=>{const{default:s}=await import("./vendor--YHnU7YG.js").then(l=>l.bc);return{default:s}},__vite__mapDeps([0,1,2]))).default,a=await r(t,{maxSizeMB:2,maxWidthOrHeight:2048,initialQuality:.85,useWebWorker:!0,fileType:t.type});return{blob:a,filename:t.name,mime:a.type??t.type}}catch{return{blob:t,filename:t.name,mime:t.type}}if(Iu(t)){try{if(Ns()){const r=Ki();if(await r.initialize()){const s=await r.transcodeVideo(t,{resolution:"720p",format:"mp4",quality:"medium"});return{blob:s.blob,filename:Lu(t.name,"mp4"),mime:s.blob.type||"video/mp4"}}}}catch{}return{blob:t,filename:t.name,mime:t.type}}return{blob:t,filename:t.name,mime:t.type}}function Gi(t,r,a,s){return new Promise((l,o)=>{const i=new XMLHttpRequest;i.withCredentials=!1,i.upload.onprogress=n=>{n.lengthComputable&&(s==null||s(n.loaded))},i.onload=()=>{if(i.status>=200&&i.status<300){const n=i.getResponseHeader("ETag")||i.getResponseHeader("etag");if(!n){o(new Error("Upload conclu√≠do, mas o header ETag n√£o foi exposto pela resposta. Verifique CORS do storage (Access-Control-Expose-Headers: ETag)."));return}l({etag:n})}else o(new Error(`Upload failed: ${i.status}`))},i.onerror=()=>o(new Error("Upload network error")),i.ontimeout=()=>o(new Error("Upload timeout")),i.open("PUT",t),i.setRequestHeader("Content-Type",a),i.timeout=3e5,i.send(r)})}async function Ou(t,r,a,s){const l=t.part_size,o=t.parts,i=t.urls;if(!l||!(o!=null&&o.length)||!(i!=null&&i.length))throw new Error("Resposta inv√°lida do /uploads/init (multipart).");if(o.length!==i.length)throw new Error("Resposta inv√°lida do /uploads/init: parts/urls mismatch.");const n=r.size;let d=0;const u=[];for(let p=0;p<o.length;p+=1){const f=o[p],x=i[p],b=(f-1)*l,g=Math.min(b+l,n),h=r.slice(b,g),{etag:k}=await Gi(x,h,a,y=>{const N=d+y,_=n>0?Math.round(N/n*100):0;s==null||s(Math.max(0,Math.min(100,_)))});u.push({part:f,etag:k}),d+=h.size;const v=n>0?Math.round(d/n*100):0;s==null||s(Math.max(0,Math.min(100,v)))}const m={upload_id:t.upload_id,etags:u};return await re.post("/uploads/complete",m),{assetId:t.asset_id,key:t.key}}async function $u(t,r,a,s){var d,u;const l=(d=t.urls)==null?void 0:d[0],o=(u=t.parts)==null?void 0:u[0];if(!l||!o)throw new Error("Resposta inv√°lida do /uploads/init (single PUT).");const{etag:i}=await Gi(l,r,a,m=>{const p=r.size>0?Math.round(m/r.size*100):0;s==null||s(Math.max(0,Math.min(100,p)))}),n={upload_id:t.upload_id,etags:[{part:o,etag:i}]};return await re.post("/uploads/complete",n),{assetId:t.asset_id,key:t.key}}async function Cs(t){var l;const r=t.scope??"moment",a=[],s=t.files.length;for(let o=0;o<s;o+=1){const i=t.files[o],n=await Bu(i),d=n.mime.startsWith("video/")?"video":n.mime.startsWith("audio/")?"audio":"photo",u=await qu(n.blob),m={child_id:t.childId,filename:n.filename,size:n.blob.size,mime:n.mime,sha256:u,kind:d,scope:r},p=await re.post("/uploads/init",m),f=g=>{var k;const h=s>0?Math.round((o+g/100)/s*100):0;(k=t.onProgress)==null||k.call(t,{fileIndex:o,fileCount:s,fileName:i.name,filePct:g,overallPct:h})};if(p.deduplicated){if(!p.key)throw new Error("Upload deduplicado, mas sem key no response.");a.push({id:p.asset_id,type:d==="photo"?"image":d,key:p.key}),f(100);continue}if(!p.upload_id||!p.key)throw new Error("Resposta inv√°lida do /uploads/init: upload_id/key ausentes.");const x=((l=p.parts)==null?void 0:l.length)??0;if(x<=0)throw new Error("Resposta inv√°lida do /uploads/init: parts ausente.");if(x===1){const g=await $u({asset_id:p.asset_id,upload_id:p.upload_id,key:p.key,parts:p.parts??[],urls:p.urls??[]},n.blob,n.mime,f);a.push({id:g.assetId,type:d==="photo"?"image":d,key:g.key}),f(100);continue}const b=await Ou({asset_id:p.asset_id,upload_id:p.upload_id,key:p.key,part_size:p.part_size??0,parts:p.parts??[],urls:p.urls??[]},n.blob,n.mime,f);a.push({id:b.assetId,type:d==="photo"?"image":d,key:b.key}),f(100)}return a}const zu='a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])',Uu=({childId:t,onClose:r})=>{const{t:a}=ce(),{options:s}=da(),[l,o]=c.useState(""),[i,n]=c.useState(""),[d,u]=c.useState(""),[m,p]=c.useState(""),[f,x]=c.useState(null),[b,g]=c.useState(0),[h,k]=c.useState(!1),[v,y]=c.useState(null),{mutate:N,isPending:_}=Qc(),A=c.useRef(null),G=c.useRef(null),O=c.useId(),C=c.useId(),j=_||h,w=async M=>{const V=URL.createObjectURL(M);try{return await new Promise((ae,L)=>{const ee=document.createElement("video");ee.preload="metadata",ee.src=V,ee.onloadedmetadata=()=>ae(ee.duration),ee.onerror=()=>L(new Error(a("b2c.guestbook.invite.errors.mediaFailed")))})}finally{URL.revokeObjectURL(V)}};c.useEffect(()=>{var M;(M=G.current)==null||M.focus()},[]),c.useEffect(()=>{const M=V=>{if(V.key==="Escape"){V.preventDefault(),r();return}if(V.key==="Tab"&&A.current){const J=Array.from(A.current.querySelectorAll(zu)).filter(ne=>!ne.hasAttribute("disabled"));if(J.length===0)return;const ae=J[0],L=J[J.length-1],ee=document.activeElement;V.shiftKey&&ee===ae?(V.preventDefault(),L.focus()):!V.shiftKey&&ee===L&&(V.preventDefault(),ae.focus())}};return document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M)}},[r]);const I=async M=>{var V;if(M.preventDefault(),y(null),!(!l||!m||!d))try{let J;if(f){if(f.type.startsWith("video/")){const L=await w(f);if(Number.isFinite(L)&&L>15){y(a("b2c.guestbook.invite.errors.videoTooLong",{duration:Math.ceil(L)}));return}}k(!0),g(0),J=(V=(await Cs({childId:t,files:[f],scope:"guestbook",onProgress:({overallPct:L})=>g(L)}))[0])==null?void 0:V.id}N({childId:t,authorName:l,authorEmail:i||void 0,relationshipDegree:d,message:m,assetId:J},{onSuccess:()=>{o(""),n(""),u(""),p(""),x(null),r()},onError:ae=>{y(ae instanceof Error?ae.message:a("b2c.guestbook.invite.errors.sendFailed"))},onSettled:()=>{k(!1),g(0)}})}catch(J){k(!1),g(0),y(J instanceof Error?J.message:a("b2c.guestbook.invite.errors.mediaFailed"))}};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 z-50",style:{backgroundColor:"rgba(42, 42, 42, 0.5)"},onMouseDown:M=>{M.target===M.currentTarget&&r()},children:e.jsxs("div",{ref:A,role:"dialog","aria-modal":"true","aria-labelledby":O,"aria-describedby":C,className:"rounded-2xl p-6 w-full max-w-md shadow-2xl",style:{backgroundColor:"var(--bb-color-surface)"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{id:O,className:"text-lg font-bold",style:{color:"var(--bb-color-ink)"},children:a("b2c.guestbook.form.title")}),e.jsx("button",{type:"button",onClick:r,className:"p-1 rounded-lg transition-colors",style:{color:"var(--bb-color-ink)"},"aria-label":a("b2c.guestbook.form.aria.close"),children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"guestbook-name",style:{color:"var(--bb-color-ink)"},children:a("b2c.guestbook.form.labels.name")}),e.jsx("input",{id:"guestbook-name",type:"text",value:l,onChange:M=>o(M.target.value),className:"w-full px-3 py-2 border rounded-xl",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},placeholder:a("b2c.guestbook.form.placeholders.name"),ref:G,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"guestbook-email",style:{color:"var(--bb-color-ink)"},children:a("b2c.guestbook.form.labels.email")}),e.jsx("input",{id:"guestbook-email",type:"email",value:i,onChange:M=>n(M.target.value),className:"w-full px-3 py-2 border rounded-xl",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},placeholder:a("b2c.guestbook.form.placeholders.email")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"guestbook-relationship",style:{color:"var(--bb-color-ink)"},children:a("b2c.guestbook.form.labels.relationship")}),e.jsxs("select",{id:"guestbook-relationship",value:d,onChange:M=>u(M.target.value||""),className:"w-full px-3 py-2 border rounded-xl",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:a("b2c.guestbook.form.placeholders.relationship")}),s.map(M=>e.jsx("option",{value:M.value,children:M.label},M.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"guestbook-media",style:{color:"var(--bb-color-ink)"},children:a("b2c.guestbook.form.labels.media")}),e.jsx("input",{id:"guestbook-media",type:"file",accept:"image/*,video/*",onChange:M=>{var J;const V=((J=M.target.files)==null?void 0:J[0])??null;x(V),y(null)},className:"w-full px-3 py-2 border rounded-xl",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"}}),e.jsx("p",{className:"mt-2 text-xs",style:{color:"var(--bb-color-ink-muted)"},children:a("b2c.guestbook.form.hints.videoLimit")}),h&&e.jsx("p",{className:"mt-2 text-xs",style:{color:"var(--bb-color-ink-muted)"},children:a("b2c.guestbook.form.hints.uploadingAttachment",{pct:b})})]}),v&&e.jsx("div",{className:"border rounded-lg p-3",style:{backgroundColor:"rgba(239,68,68,0.08)",borderColor:"rgba(239,68,68,0.35)"},children:e.jsx("p",{className:"text-xs",style:{color:"var(--bb-color-ink)"},children:v})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"guestbook-message",style:{color:"var(--bb-color-ink)"},children:a("b2c.guestbook.form.labels.message")}),e.jsx("textarea",{id:"guestbook-message",value:m,onChange:M=>p(M.target.value),className:"w-full px-3 py-2 border rounded-xl",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},rows:5,placeholder:a("b2c.guestbook.form.placeholders.message"),required:!0})]}),e.jsx("div",{className:"border rounded-lg p-3",id:C,style:{backgroundColor:"var(--bb-color-accent-soft)",borderColor:"var(--bb-color-accent)"},children:e.jsx("p",{className:"text-xs",style:{color:"var(--bb-color-ink)"},children:a("b2c.guestbook.form.hints.moderation")})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:j,className:"flex-1 px-6 py-2 rounded-xl font-semibold hover:opacity-90 disabled:opacity-50 transition-all",style:{backgroundColor:"var(--bb-color-accent)",color:"var(--bb-color-surface)"},children:a(j?"b2c.guestbook.form.actions.submitting":"b2c.guestbook.form.actions.submit")}),e.jsx("button",{type:"button",onClick:r,className:"flex-1 px-6 py-2 rounded-xl font-semibold hover:opacity-80 transition-all",style:{backgroundColor:"var(--bb-color-muted)",color:"var(--bb-color-ink)"},children:a("b2c.guestbook.form.actions.cancel")})]})]})]})})},Vu=({className:t,align:r="end",children:a,...s})=>e.jsx("div",{className:D("mb-6 flex flex-wrap items-center gap-2",r==="end"?"justify-end":"justify-start",t),...s,children:a});function io(){return e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx(R,{className:"h-12 w-64 rounded-xl"}),e.jsx(R,{className:"h-6 w-96 rounded-lg opacity-60"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{className:"h-10 flex-1 rounded-2xl"}),e.jsx(R,{className:"h-10 flex-1 rounded-2xl"})]}),e.jsxs("div",{className:"rounded-3xl p-6",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",borderWidth:1},children:[e.jsx(R,{className:"h-4 w-32 rounded-md mb-2"}),e.jsx(R,{className:"h-6 w-48 rounded-lg mb-3"}),e.jsx(R,{className:"h-3 w-full rounded-md mb-4"}),e.jsx(R,{className:"h-2 w-full rounded-full"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",borderWidth:1},children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(R,{className:"h-12 w-12 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(R,{className:"h-4 w-32 rounded-md"}),e.jsx(R,{className:"h-3 w-full rounded-md"}),e.jsx(R,{className:"h-3 w-3/4 rounded-md"})]})]})}),e.jsx("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",borderWidth:1},children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(R,{className:"h-12 w-12 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(R,{className:"h-4 w-24 rounded-md"}),e.jsx(R,{className:"h-3 w-full rounded-md"})]})]})})]})]})}function Hi({childName:t,entries:r,variant:a="hud",expandable:s=!0}){const{t:l}=ce(),{formatRelationshipDegree:o}=da(),[i,n]=c.useState(!1),d=c.useMemo(()=>r.filter(b=>b.status==="approved"),[r]),u=c.useMemo(()=>{const b=new Map;for(const g of d){const h=b.get(g.relationshipDegree)??[];h.push(g),b.set(g.relationshipDegree,h)}return b},[d]),m=c.useMemo(()=>{const b=new Set;for(const g of d){const h=`${g.authorName.trim().toLowerCase()}|${(g.authorEmail??"").trim().toLowerCase()}`;b.add(h)}return b.size},[d]),p=a==="hud"&&s,f=()=>{p&&n(!0)},x=b=>{p&&(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),f())};return d.length===0?e.jsx("div",{className:"rounded-3xl p-8 text-center border-2 border-dashed",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:l("b2c.guestbook.tree.empty")})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:p?"rounded-3xl p-6 shadow-sm border border-orange-50/50 cursor-pointer transition hover:opacity-95 active:scale-[0.995]":"rounded-3xl p-6 shadow-sm border border-orange-50/50",style:{backgroundColor:"var(--bb-color-surface)"},onClick:p?f:void 0,role:p?"button":void 0,tabIndex:p?0:void 0,onKeyDown:x,"aria-label":p?l("b2c.guestbook.tree.hud.ariaExpand"):void 0,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em]",style:{color:"var(--bb-color-ink-muted)"},children:l("b2c.guestbook.tree.hud.label")}),e.jsx("h3",{className:"text-xl font-serif font-bold mt-1",style:{color:"var(--bb-color-ink)"},children:l("b2c.guestbook.tree.hud.title")})]}),p&&e.jsx("button",{type:"button",className:"p-2 rounded-xl hover:bg-orange-50/50 transition-colors",style:{color:"var(--bb-color-accent)"},children:e.jsx(Sr,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-2xl bg-orange-50/30",children:[e.jsx(rt,{className:"w-5 h-5 fill-[var(--bb-color-accent)]",style:{color:"var(--bb-color-accent)"}}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--bb-color-ink)"},children:l(m===1?"b2c.guestbook.tree.hud.peopleCount_one":"b2c.guestbook.tree.hud.peopleCount_other",{count:m})})]}),e.jsx("p",{className:"text-xs",style:{color:"var(--bb-color-ink-muted)"},children:l("b2c.guestbook.tree.hud.hint")}),p&&e.jsxs("div",{className:"w-full flex items-center justify-center gap-2 text-xs font-semibold py-2 rounded-xl border border-orange-100 hover:bg-orange-50/30 transition-colors",style:{color:"var(--bb-color-ink-muted)"},children:[e.jsx(Sr,{className:"h-3 w-3"}),l("b2c.guestbook.tree.hud.expand")]})]})]}),e.jsx(Fr,{open:i,onOpenChange:n,children:e.jsxs(qr,{className:"w-[96vw] h-[92vh] sm:w-[92vw] sm:h-[86vh] max-w-5xl flex flex-col p-0 border-none rounded-[2.5rem] overflow-hidden",style:{backgroundColor:"#faf9f6"},children:[e.jsx("div",{className:"p-8 pb-4 flex items-center justify-between border-b border-stone-100",children:e.jsx("div",{children:e.jsxs(Br,{children:[e.jsx(Or,{className:"text-2xl font-serif font-bold text-stone-900",children:l("b2c.guestbook.tree.full.title")}),e.jsx(ca,{className:"text-sm text-stone-500 mt-1",children:l(m===1?"b2c.guestbook.tree.full.description":"b2c.guestbook.tree.full.description_plural",{childName:t||l("b2c.guestbook.tree.common.child"),peopleCount:m,entryCount:d.length})})]})})}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto p-8 custom-scrollbar",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"col-span-full flex justify-center mb-8",children:e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-4 bg-orange-100/50 rounded-full blur-xl group-hover:bg-orange-200/50 transition-colors"}),e.jsx("div",{className:"relative w-24 h-24 rounded-full bg-gradient-to-br from-orange-400 to-rose-500 p-1 shadow-lg",children:e.jsx("div",{className:"w-full h-full rounded-full border-2 border-white/30 flex items-center justify-center bg-white/10 backdrop-blur-sm text-white font-serif text-2xl font-bold",children:(t==null?void 0:t.charAt(0))||"?"})}),e.jsx("p",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 whitespace-nowrap text-sm font-bold text-stone-900",children:t||l("b2c.guestbook.tree.common.child")})]})}),Array.from(u.entries()).map(([b,g])=>e.jsxs("div",{className:"group p-6 rounded-3xl bg-white border border-stone-100 hover:border-orange-200 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 rounded-xl bg-orange-50 text-orange-500 font-bold text-xs uppercase tracking-wider",children:o(b)}),e.jsx("div",{className:"h-px flex-1 bg-stone-100"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(new Set(g.map(h=>h.authorName))).map(h=>e.jsx("div",{className:"px-3 py-1.5 rounded-full bg-stone-50 border border-stone-100 text-sm text-stone-600 font-medium hover:bg-orange-50 hover:border-orange-100 hover:text-orange-700 transition-colors",children:h},h))})]},b))]})}),e.jsxs("div",{className:"p-6 bg-stone-50 bg-opacity-50 border-t border-stone-100 flex items-center justify-between text-xs text-stone-400 px-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:l("b2c.guestbook.tree.full.source")})]}),e.jsx("div",{className:"font-medium uppercase tracking-widest bg-stone-100 px-2 py-0.5 rounded",children:l("b2c.guestbook.tree.full.footnote")})]})]})})]})}const no=20,Ku=()=>{const{t}=ce(),{selectedChild:r}=Xe(),{data:a=[],isLoading:s,isError:l,error:o,refetch:i}=cs(r==null?void 0:r.id),[n,d]=c.useState("approved"),[u,m]=c.useState(!1),[p,f]=c.useState(!1);c.useEffect(()=>{n==="pending"&&m(!1)},[n]);const[x,b]=c.useState(""),[g,h]=c.useState(""),[k,v]=c.useState(null),{mutate:y,isPending:N}=Yc(),_=a.filter(C=>C.status==="pending").length,A=a.filter(C=>C.status==="approved").length,G=Math.min(100,Math.round(A/no*100));if(c.useEffect(()=>{!p||!r||(v(null),y({childId:r.id},{onSuccess:C=>h(C.url),onError:C=>v(C instanceof Error?C.message:t("b2c.guestbook.invite.modal.errorGenerate"))}))},[p,r,y,t]),s)return e.jsx(io,{});if(l)return e.jsx(lr,{title:t("b2c.errors.guestbookLoadTitle"),description:t("b2c.errors.guestbookLoadDesc"),errorDetails:o==null?void 0:o.message,onRetry:()=>i(),skeleton:e.jsx(io,{})});const O=()=>r?n==="approved"?e.jsxs("div",{children:[u&&e.jsx(Uu,{childId:r.id,onClose:()=>m(!1)}),e.jsx(oo,{childId:r.id,status:"approved"})]}):e.jsx(oo,{childId:r.id,status:"pending"}):null;return r?e.jsxs(E.div,{className:"mx-auto max-w-4xl px-4 py-6",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},children:[e.jsxs(E.div,{className:"mb-8 mt-2 px-2",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}},children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-medium tracking-tight",children:t("b2c.guestbook.title")}),e.jsx("p",{className:"mt-2 text-lg opacity-60 font-medium max-w-lg",children:t("b2c.guestbook.description")})]}),e.jsx("div",{className:"mb-8 rounded-2xl border p-1.5 shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:e.jsx(wt,{id:"guestbook-tabs",children:e.jsx("div",{className:"flex flex-wrap gap-1.5",children:[{id:"approved",icon:ia,label:t("b2c.guestbook.tabs.approved")},{id:"pending",icon:jt,label:t("b2c.guestbook.tabs.pending")}].map(C=>{const j=n===C.id,w=C.icon;return e.jsxs("button",{type:"button",onClick:()=>d(C.id),className:"relative flex-1 min-w-[140px] overflow-hidden rounded-2xl px-4 py-1.5 text-sm font-semibold transition-colors duration-300",style:{color:j?"var(--bb-color-surface)":"var(--bb-color-ink-muted)"},children:[j&&e.jsx(E.span,{layoutId:"guestbook-nav-pill",className:"absolute inset-0 rounded-2xl",style:{backgroundColor:"var(--bb-color-accent)",boxShadow:"0 8px 20px rgba(242,153,93,0.2)"},transition:{type:"spring",stiffness:320,damping:30}}),e.jsxs("span",{className:"relative z-10 inline-flex items-center justify-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 transition-colors duration-300",style:{color:j?"var(--bb-color-surface)":"var(--bb-color-ink-muted)"}}),C.label,C.id==="pending"&&_>0&&e.jsx("span",{className:"inline-flex h-5 min-w-[20px] items-center justify-center rounded-full px-2 text-[11px] font-semibold",style:{backgroundColor:"rgba(255,255,255,0.3)",color:"var(--bb-color-surface)"},children:_})]})]},C.id)})})})}),e.jsx("div",{className:"mb-8",children:e.jsx($r,{title:t("b2c.guestbook.hud.title"),value:t("b2c.guestbook.hud.subtitle"),description:t("b2c.guestbook.hud.description",{count:A,total:no}),progressPercent:G,actions:e.jsx(e.Fragment,{children:e.jsxs(Pe,{variant:"secondary",size:"sm",children:[e.jsx(Vn,{className:"h-4 w-4"}),t("b2c.guestbook.hud.actions.expand")]})})})}),n==="approved"&&e.jsx("div",{className:"mb-8",children:e.jsx(Hi,{childName:r.name,entries:a})}),e.jsxs(Vu,{children:[n==="approved"&&e.jsxs(Pe,{variant:"primary",onClick:()=>m(C=>!C),children:[e.jsx(jt,{className:"h-4 w-4"}),t(u?"b2c.guestbook.actions.closeForm":"b2c.guestbook.actions.leaveMessage")]}),e.jsxs(Pe,{variant:"secondary",onClick:()=>f(!0),children:[e.jsx(Er,{className:"h-4 w-4"}),t("b2c.guestbook.actions.invite")]})]}),e.jsx(qe,{mode:"wait",children:e.jsx(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeOut"},children:O()},n)}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",style:{backgroundColor:"rgba(42, 42, 42, 0.4)"},children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl border p-6 shadow-2xl",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em]",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.guestbook.invite.modal.label")}),e.jsx("h2",{className:"mt-1 text-xl",children:t("b2c.guestbook.invite.modal.title")})]}),e.jsx("button",{type:"button",onClick:()=>f(!1),className:"rounded-full border p-1 transition",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},"aria-label":t("b2c.guestbook.list.aria.close"),children:e.jsx(De,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mt-6 rounded-[24px] border p-6 text-center",style:{backgroundColor:"var(--bb-color-muted)",borderColor:"var(--bb-color-border)",opacity:.1},children:[e.jsx("div",{className:"mx-auto flex h-32 w-32 items-center justify-center rounded-2xl shadow-inner",style:{backgroundColor:"var(--bb-color-surface)"},children:g?e.jsx(To,{value:g,size:120,level:"M",includeMargin:!1,fgColor:"#1f2937"}):e.jsx("span",{className:"text-sm font-semibold",style:{color:"var(--bb-color-ink-muted)"},children:N?t("b2c.guestbook.invite.modal.generating"):"QR"})}),e.jsx("p",{className:"mt-3 text-xs uppercase tracking-[0.3em]",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.guestbook.invite.modal.qrLabel")})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-xs font-semibold mb-2",htmlFor:"guestbook-invited-email",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.guestbook.invite.modal.emailLabel")}),e.jsx("input",{id:"guestbook-invited-email",type:"email",value:x,onChange:C=>b(C.target.value),placeholder:t("b2c.guestbook.invite.modal.emailPlaceholder"),className:"w-full px-3 py-2 border rounded-xl",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"}}),e.jsx("div",{className:"mt-2 flex gap-2",children:e.jsx("button",{type:"button",disabled:!r||N,className:"flex-1 rounded-[20px] border px-3 py-2 text-sm font-semibold transition disabled:opacity-50",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},onClick:()=>{r&&(v(null),y({childId:r.id,invitedEmail:x.trim()||void 0},{onSuccess:C=>h(C.url),onError:C=>v(C instanceof Error?C.message:t("b2c.guestbook.invite.modal.errorGenerate"))}))},children:t(N?"b2c.guestbook.invite.modal.generating":g?"b2c.guestbook.invite.modal.updateAction":"b2c.guestbook.invite.modal.generateAction")})}),k&&e.jsx("p",{className:"mt-2 text-xs",style:{color:"rgb(239,68,68)"},children:k})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-2 rounded-[24px] border px-3 py-2 text-sm font-semibold",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},children:[e.jsx("span",{className:"flex-1 truncate",children:g||""}),e.jsx("button",{type:"button",className:"rounded-full border px-3 py-1 text-xs transition",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},onClick:()=>{var C;g&&((C=navigator.clipboard)==null||C.writeText(g),At.success(t("b2c.guestbook.invite.modal.copied")))},children:t("b2c.guestbook.invite.modal.copyAction")})]}),e.jsxs("div",{className:"mt-4 grid gap-2 sm:grid-cols-2",children:[e.jsxs("button",{type:"button",className:"inline-flex items-center justify-center gap-2 rounded-[20px] border px-3 py-2 text-sm font-semibold transition",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},onClick:()=>{if(!g)return;const C=encodeURIComponent(t("b2c.guestbook.invite.shareMessage",{childName:r==null?void 0:r.name,url:g}));window.open(`https://wa.me/?text=${C}`,"_blank")},children:[e.jsx(Mr,{className:"h-4 w-4"}),t("b2c.guestbook.invite.modal.whatsapp")]}),e.jsxs("button",{type:"button",className:"inline-flex items-center justify-center gap-2 rounded-[20px] border px-3 py-2 text-sm font-semibold transition",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},onClick:()=>{if(!g)return;const C=encodeURIComponent(t("b2c.guestbook.invite.shareSubject")),j=encodeURIComponent(t("b2c.guestbook.invite.shareMessage",{childName:r==null?void 0:r.name,url:g})),w=x.trim();window.location.href=`mailto:${w}?subject=${C}&body=${j}`},children:[e.jsx(zt,{className:"h-4 w-4"}),t("b2c.guestbook.invite.modal.email")]})]})]})})]}):e.jsx(Fa,{variant:"page",icon:Mt,title:t("b2c.common.selectChildTitle"),description:t("b2c.common.selectChildDesc"),primaryAction:{label:t("b2c.common.goToChildProfile"),to:"/jornada/perfil-crianca"}})},Gu=()=>{const t=ve(),{selectedChild:r}=Xe();return r?e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsx("div",{className:"rounded-2xl p-6 border mb-8",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center text-4xl",style:{backgroundColor:"var(--bb-color-bg)"},children:"üë∂"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-serif font-bold",style:{color:"var(--bb-color-ink)"},children:r.name}),r.birthday&&e.jsxs("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:["Nascido em"," ",new Date(r.birthday).toLocaleDateString("pt-BR")]}),e.jsxs("button",{className:"mt-2 flex items-center gap-2 hover:underline font-semibold text-sm",style:{color:"var(--bb-color-accent)"},children:[e.jsx(Wa,{className:"w-4 h-4"}),"Editar Perfil"]})]})]})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("button",{className:"w-full rounded-2xl p-6 border text-left transition-colors",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Oo,{className:"w-5 h-5",style:{color:"var(--bb-color-accent)"}}),e.jsx("h3",{className:"font-semibold",style:{color:"var(--bb-color-ink)"},children:"√Årvore da Fam√≠lia"})]}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:"Conecte pais, av√≥s e outras pessoas especiais"})]}),e.jsxs("button",{onClick:()=>t(`/capsule/${r.id}`),className:"w-full rounded-2xl p-6 border text-left transition-colors",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Nt,{className:"w-5 h-5",style:{color:"var(--bb-color-accent)"}}),e.jsx("h3",{className:"font-semibold",style:{color:"var(--bb-color-ink)"},children:"C√°psula do Tempo"})]}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:"Escreva uma carta para o futuro"})]}),e.jsxs("button",{className:"w-full rounded-2xl p-6 border text-left transition-colors",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Kn,{className:"w-5 h-5",style:{color:"var(--bb-color-accent)"}}),e.jsx("h3",{className:"font-semibold",style:{color:"var(--bb-color-ink)"},children:"Compartilhar √Ålbum"})]}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:"Convide familiares para acompanhar"})]})]}),e.jsxs("div",{className:"mt-8 p-4 rounded-2xl",style:{backgroundColor:"var(--bb-color-bg)"},children:[e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--bb-color-ink)"},children:"Precisa gerenciar sua conta?"}),e.jsx("button",{onClick:()=>t("/perfil-usuario"),className:"hover:underline font-semibold text-sm",style:{color:"var(--bb-color-accent)"},children:"Ir para Configura√ß√µes da Conta"})]})]}):e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6 text-center",children:e.jsx("p",{style:{color:"var(--bb-color-ink-muted)"},children:"Selecione uma crian√ßa primeiro"})})},Ss="/vouchers";async function Hu(t){return re.post(`${Ss}/validate`,{code:t})}async function Wu(t){return re.post(`${Ss}/redeem`,t)}async function Qu(){return await re.get(`${Ss}/me`)||[]}const lo={step:"input",code:"",validation:null,isLoading:!1,error:null};function Yu(){const[t,r]=c.useState(lo),a=c.useCallback(n=>{r(d=>({...d,code:n.toUpperCase().trim(),error:null}))},[]),s=c.useCallback(async()=>{if(!t.code)return r(n=>({...n,error:"Por favor, insira o c√≥digo do voucher"})),null;r(n=>({...n,isLoading:!0,error:null}));try{const n=await Hu(t.code);return n.valid?(r(d=>({...d,isLoading:!1,validation:n})),n):(r(d=>({...d,isLoading:!1,error:n.error_message??"Voucher inv√°lido",step:"error"})),null)}catch(n){return r(d=>({...d,isLoading:!1,error:n instanceof Error?n.message:"Erro ao validar voucher",step:"error"})),null}},[t.code]),l=c.useCallback(async n=>{r(d=>({...d,isLoading:!0,error:null}));try{const d={code:t.code,...n},u=await Wu(d);return u.success?(r(m=>({...m,isLoading:!1,step:"success"})),u):(r(m=>({...m,isLoading:!1,error:u.message??"Erro ao resgatar voucher",step:"error"})),null)}catch(d){return r(u=>({...u,isLoading:!1,error:d instanceof Error?d.message:"Erro ao resgatar voucher",step:"error"})),null}},[t.code]),o=c.useCallback(n=>{r(d=>({...d,step:n,error:null}))},[]),i=c.useCallback(()=>{r(lo)},[]);return{state:t,setCode:a,validate:s,redeem:l,goToStep:o,reset:i}}const _s="babybook:voucher:redemptionCode";function gr(t){if(t)try{sessionStorage.setItem(_s,t)}catch{}}function Ju(){try{return sessionStorage.getItem(_s)}catch{return null}}function Xu(){try{sessionStorage.removeItem(_s)}catch{}}function co(t){return`/resgate/${encodeURIComponent(t)}`}const mo=["#ec4899","#f43f5e","#f59e0b","#10b981","#8b5cf6","#06b6d4","#fbbf24"];function Wi({isActive:t,duration:r=3e3,particleCount:a=50}){const[s,l]=c.useState([]),[o,i]=c.useState(!1);return c.useEffect(()=>{if(t){i(!0);const n=Array.from({length:a},(u,m)=>({id:m,x:Math.random()*100,delay:Math.random()*.5,color:mo[Math.floor(Math.random()*mo.length)],size:Math.random()*8+4,rotation:Math.random()*360}));l(n);const d=setTimeout(()=>{i(!1),l([])},r);return()=>clearTimeout(d)}},[t,r,a]),e.jsx(qe,{children:o&&e.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden z-50",children:s.map(n=>e.jsx(E.div,{initial:{x:`${n.x}vw`,y:"-10vh",rotate:0,opacity:1},animate:{y:"110vh",rotate:n.rotation+720,opacity:[1,1,0]},exit:{opacity:0},transition:{duration:2.5+Math.random(),delay:n.delay,ease:"easeOut"},style:{position:"absolute",width:n.size,height:n.size,backgroundColor:n.color,borderRadius:Math.random()>.5?"50%":"2px"}},n.id))})})}const uo=["Abrindo seu presente...","Preparando suas mem√≥rias...","Organizando as fotos...","Quase l√°...","Finalizando..."];function Zu({isActive:t,progress:r,partnerName:a,onComplete:s}){const[l,o]=c.useState(0),[i,n]=c.useState(!1);return c.useEffect(()=>{if(!t)return;const d=setInterval(()=>{o(u=>(u+1)%uo.length)},1500);return()=>clearInterval(d)},[t]),c.useEffect(()=>{if(r>=100&&t){n(!0);const d=setTimeout(()=>{s==null||s()},1500);return()=>clearTimeout(d)}},[r,t,s]),t?e.jsx(qe,{mode:"wait",children:e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-b from-pink-100 via-white to-rose-100 flex items-center justify-center z-40",children:e.jsxs("div",{className:"text-center px-6 max-w-md",children:[e.jsxs(E.div,{initial:{scale:.5,opacity:0},animate:{scale:i?[1,1.2,1]:1,opacity:1,rotate:i?0:[0,-5,5,-5,0]},transition:{scale:{duration:.5},rotate:{duration:.5,repeat:i?0:1/0,repeatDelay:1}},className:"relative inline-block mb-8",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-pink-500 to-rose-500 rounded-3xl flex items-center justify-center shadow-2xl shadow-pink-200",children:e.jsx(qe,{mode:"wait",children:i?e.jsx(E.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},children:e.jsx(Re,{className:"w-16 h-16 text-white",strokeWidth:3})},"check"):e.jsx(E.div,{animate:{scale:[1,1.05,1]},transition:{duration:1,repeat:1/0},children:e.jsx(Be,{className:"w-16 h-16 text-white"})},"gift")})}),e.jsx(E.div,{animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"},className:"absolute inset-0",children:[0,60,120,180,240,300].map((d,u)=>e.jsx(E.div,{animate:{scale:[1,1.3,1],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,delay:u*.2},style:{position:"absolute",top:"50%",left:"50%",transform:`rotate(${d}deg) translate(80px) rotate(-${d}deg)`},children:e.jsx(pe,{className:"w-5 h-5 text-pink-400"})},u))})]}),a&&e.jsxs(E.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-pink-600 font-medium mb-2",children:["Presente de ",a]}),e.jsx(qe,{mode:"wait",children:e.jsx(E.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"text-2xl font-bold text-gray-900 mb-4",children:i?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(rt,{className:"w-6 h-6 text-pink-500 fill-pink-500"}),"Presente Aberto!"]}):uo[l]},i?"complete":l)}),!i&&e.jsx("div",{className:"w-full h-3 bg-pink-100 rounded-full overflow-hidden mb-4",children:e.jsx(E.div,{initial:{width:0},animate:{width:`${r}%`},transition:{duration:.3},className:"h-full bg-gradient-to-r from-pink-500 to-rose-500 rounded-full"})}),i&&e.jsx(E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-gray-600",children:"Suas mem√≥rias est√£o prontas para serem exploradas"})]})})}):null}const ex=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`redeem_${Date.now()}_${Math.random().toString(16).slice(2)}`;function fr(){var ee,ne,ue;const{code:t}=Ct(),r=ve(),a=ke(B=>B.isAuthenticated),{state:s,setCode:l,validate:o,redeem:i,goToStep:n,reset:d}=Yu(),[u,m]=c.useState(!1),[p,f]=c.useState(0),[x,b]=c.useState(!1),[g,h]=c.useState(null),[k,v]=c.useState(!1),[y,N]=c.useState(!1),[_,A]=c.useState(null),G=ns({enabled:a&&s.step==="decision"}),O=id({enabled:a&&s.step==="decision"&&!!_,childId:_??void 0}),C=G.data??[],j=c.useMemo(()=>{const B=O.data;return B?B.bytesUsed>=B.bytesQuota:!1},[O.data]);c.useEffect(()=>{const B=Ju(),se=(t??B??"").trim();se&&!s.code&&l(se),t&&gr(t)},[l,s.code,t]),c.useEffect(()=>{t&&(k||s.code&&(v(!0),M()))},[t,k,s.code]),c.useEffect(()=>{if(!u||p>=95)return;const B=setInterval(()=>{f(se=>{const he=Math.random()*14+6;return Math.min(se+he,95)})},420);return()=>clearInterval(B)},[u,p]);const w=B=>{h(B),m(!0),f(10)},I=()=>{m(!1),f(0);const B=g;if(h(null),!!B){if(B.type==="navigate"){r(B.url);return}n(B.step)}},M=async()=>{if(gr(s.code),n("validation"),w({type:"step",step:a?"decision":"account"}),!await o()){m(!1),f(0);return}f(100)},V=()=>{gr(s.code);const B=co(s.code);r(`/login?redirectTo=${encodeURIComponent(B)}`)},J=()=>{gr(s.code);const B=co(s.code);r(`/register?redirectTo=${encodeURIComponent(B)}`)},ae=async B=>{if(y||s.isLoading||u)return;if(B.action==="EXISTING_CHILD"&&j){n("hard_stop");return}N(!0),n("confirmation"),w({type:"step",step:"decision"});const se=await i({action:B.action,child_id:B.childId,idempotency_key:ex()});if(!(se!=null&&se.success)){m(!1),f(0),N(!1);return}Xu(),b(!0),h({type:"navigate",url:se.redirect_url||"/jornada"}),f(100),N(!1)},L=s.step==="input"?"Insira o c√≥digo do seu voucher para abrir seu presente":"Complete o resgate para acessar suas mem√≥rias";return e.jsxs(e.Fragment,{children:[e.jsx(Wi,{isActive:x,duration:4e3,particleCount:80}),e.jsx(Zu,{isActive:u,progress:p,partnerName:((ee=s.validation)==null?void 0:ee.partner_name)??void 0,onComplete:I}),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-pink-50 via-white to-rose-50 flex items-center justify-center p-4",children:e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-pink-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(E.div,{initial:{scale:.8},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-pink-500 to-rose-500 rounded-2xl mb-4 shadow-lg shadow-pink-200",children:e.jsx(Be,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Resgatar Presente"}),e.jsx("p",{className:"text-gray-600 mt-2",children:L})]}),e.jsxs(qe,{mode:"wait",children:[s.step==="input"&&e.jsx(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:e.jsx(tx,{code:s.code,onCodeChange:B=>{l(B),gr(B)},onSubmit:M,isLoading:s.isLoading||u,error:s.error})},"input"),s.step==="account"&&s.validation&&e.jsx(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:e.jsx(rx,{validation:s.validation,onBack:()=>n("input"),onLogin:V,onRegister:J})},"account"),s.step==="decision"&&s.validation&&e.jsx(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:e.jsx(ax,{validation:s.validation,childrenList:C,isChildrenLoading:G.isLoading,selectedChildId:_,onSelectChild:A,isStorageLoading:O.isLoading,isStorageFull:j,onBack:()=>n("input"),onRedeemExisting:()=>ae({action:"EXISTING_CHILD",childId:_??void 0}),onRedeemNew:()=>ae({action:"NEW_CHILD"}),isSubmitting:y||s.isLoading||u})},"decision"),s.step==="hard_stop"&&e.jsx(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:e.jsx(sx,{onBack:()=>n("decision"),onUpsell:()=>r("/checkout")})},"hard_stop"),s.step==="error"&&e.jsx(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:e.jsx(ix,{error:s.error,onRetry:d})},"error"),s.step==="success"&&!u&&e.jsx(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:e.jsx(ox,{assetsCount:((ne=s.validation)==null?void 0:ne.assets_count)??0,partnerName:((ue=s.validation)==null?void 0:ue.partner_name)??"",onContinue:()=>r("/jornada")})},"success")]})]}),e.jsxs("p",{className:"text-center text-sm text-gray-500 mt-6",children:["N√£o tem um voucher?"," ",e.jsx("a",{href:"/",className:"text-pink-600 hover:text-pink-700 font-medium",children:"Conhe√ßa o Baby Book"})]})]})})]})}function tx({code:t,onCodeChange:r,onSubmit:a,isLoading:s,error:l}){const o=n=>(n.replace(/[^A-Z0-9]/gi,"").toUpperCase().match(/.{1,4}/g)||[]).join("-"),i=n=>{const d=o(n.target.value);d.length<=14&&r(d)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"voucher-code",className:"block text-sm font-medium text-gray-700 mb-2",children:"C√≥digo do Voucher"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"voucher-code",type:"text",value:t,onChange:i,placeholder:"BABY-XXXX-XXXX",className:"w-full px-4 py-4 border-2 border-gray-200 rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-center text-xl font-mono uppercase tracking-widest transition-all",disabled:s,onKeyDown:n=>n.key==="Enter"&&a(),autoFocus:!0}),e.jsx(pe,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-pink-300"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"O c√≥digo est√° no cart√£o-convite que voc√™ recebeu"})]}),l&&e.jsxs(E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 text-red-600 text-sm bg-red-50 p-3 rounded-xl",children:[e.jsx(Qa,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:l})]}),e.jsx("button",{onClick:a,disabled:s||!t.trim(),className:"w-full py-4 px-4 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 disabled:from-gray-300 disabled:to-gray-300 text-white font-semibold rounded-2xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-pink-200 disabled:shadow-none",children:s?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-5 h-5 animate-spin"}),"Validando..."]}):e.jsxs(e.Fragment,{children:["Abrir Presente",e.jsx(Be,{className:"w-5 h-5"})]})})]})}function rx({validation:t,onBack:r,onLogin:a,onRegister:s}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Qi,{validation:t}),e.jsx("div",{className:"rounded-2xl border border-gray-200 bg-gray-50 p-4",children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Para escolher ",e.jsx("strong",{children:"onde guardar"})," estas mem√≥rias, fa√ßa login ou crie sua conta. O c√≥digo do voucher j√° est√° seguro com voc√™."]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("button",{onClick:s,className:"w-full py-3 px-4 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white font-semibold rounded-2xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-pink-200",children:[e.jsx(Er,{className:"w-5 h-5"}),"Criar conta e continuar",e.jsx(Ie,{className:"w-5 h-5"})]}),e.jsxs("button",{onClick:a,className:"w-full py-3 px-4 border border-gray-200 text-gray-700 font-semibold rounded-2xl hover:bg-gray-50 transition-all flex items-center justify-center gap-2",children:[e.jsx(ft,{className:"w-5 h-5"}),"J√° tenho conta"]})]}),e.jsxs("button",{onClick:r,className:"w-full py-3 px-4 text-gray-600 font-semibold rounded-2xl hover:bg-gray-50 transition-all flex items-center justify-center gap-2",children:[e.jsx(Et,{className:"w-5 h-5"}),"Voltar"]})]})}function Qi({validation:t}){return e.jsxs(E.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(ia,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-green-800",children:"Voucher V√°lido!"}),t.partner_name&&e.jsxs("p",{className:"text-sm text-green-600",children:["Presente de ",e.jsx("strong",{children:t.partner_name})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-green-700",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(pe,{className:"w-4 h-4"}),t.assets_count," mem√≥ria(s)"]}),t.delivery_title&&e.jsxs("span",{children:["‚Ä¢ ",t.delivery_title]})]})]})}function ax({validation:t,childrenList:r,isChildrenLoading:a,selectedChildId:s,onSelectChild:l,isStorageLoading:o,isStorageFull:i,onBack:n,onRedeemExisting:d,onRedeemNew:u,isSubmitting:m}){const p=r.length>0,f=s??(p?r[0].id:null);c.useEffect(()=>{p&&(s||l(r[0].id))},[r,p,l,s]);const x=m||a||o||!p||p&&!f;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Qi,{validation:t}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Onde devemos guardar estas fotos?"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Recomendamos vincular a um beb√™ existente ‚Äî isso evita criar um Baby Book duplicado e ",e.jsx("strong",{children:"economiza o cr√©dito do fot√≥grafo"}),"."]})]}),i&&e.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-amber-200 bg-amber-50 p-4",children:[e.jsx(Ya,{className:"mt-0.5 h-5 w-5 text-amber-700"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-amber-900",children:"Seu espa√ßo est√° no limite"}),e.jsx("p",{className:"text-sm text-amber-800 mt-1",children:"Antes de importar as mem√≥rias, precisamos liberar armazenamento."})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Mt,{className:"h-5 w-5 text-pink-600"}),"Vincular a beb√™ existente (recomendado)"]}),a&&e.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4 animate-spin"}),"Carregando..."]})]}),p?e.jsxs("div",{className:"mt-3 space-y-2",children:[r.slice(0,4).map(b=>{const g=b.id===f;return e.jsxs("button",{type:"button",onClick:()=>l(b.id),className:`w-full flex items-center justify-between rounded-xl border px-3 py-3 text-left transition ${g?"border-pink-300 bg-pink-50":"border-gray-200 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:b.name}),g&&e.jsx("span",{className:"text-xs font-semibold text-pink-700",children:"Selecionado"})]},b.id)}),r.length>4&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Mostrando 4 de ",r.length,". (Vamos deixar essa lista linda j√° j√°.)"]})]}):e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Voc√™ ainda n√£o tem um beb√™ cadastrado. Sem problemas ‚Äî vamos criar um Baby Book novo."}),e.jsxs("button",{type:"button",disabled:x||i,onClick:d,className:"mt-4 w-full py-3 px-4 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 disabled:from-gray-300 disabled:to-gray-300 text-white font-semibold rounded-2xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-pink-200 disabled:shadow-none",children:["Guardar neste beb√™",e.jsx(Ie,{className:"w-5 h-5"})]})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Criar um novo Baby Book (segunda op√ß√£o)"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Use se estas fotos s√£o de outro beb√™. Caso contr√°rio, voc√™ pode acabar com dois Baby Books para a mesma crian√ßa."}),e.jsx("button",{type:"button",disabled:m||o,onClick:u,className:"mt-4 w-full py-3 px-4 border border-gray-200 text-gray-700 font-semibold rounded-2xl hover:bg-gray-50 disabled:opacity-60 transition-all flex items-center justify-center gap-2",children:"Criar novo Baby Book"})]})]}),e.jsxs("button",{onClick:n,className:"w-full py-3 px-4 text-gray-600 font-semibold rounded-2xl hover:bg-gray-50 transition-all flex items-center justify-center gap-2",children:[e.jsx(Et,{className:"w-5 h-5"}),"Voltar"]})]})}function sx({onBack:t,onUpsell:r}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-amber-100 rounded-2xl",children:e.jsx(Ya,{className:"w-10 h-10 text-amber-700"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Seu Baby Book est√° sem espa√ßo"}),e.jsx("p",{className:"text-gray-600",children:"Para importar este presente com seguran√ßa, precisamos liberar armazenamento. Assim voc√™ n√£o perde nada no meio do caminho."})]}),e.jsxs("button",{onClick:r,className:"w-full py-4 px-4 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white font-semibold rounded-2xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-pink-200",children:["Assinar para liberar espa√ßo",e.jsx(Ie,{className:"w-5 h-5"})]}),e.jsxs("button",{onClick:t,className:"w-full py-3 px-4 border border-gray-200 text-gray-700 font-semibold rounded-2xl hover:bg-gray-50 transition-all flex items-center justify-center gap-2",children:[e.jsx(Et,{className:"w-5 h-5"}),"Voltar"]})]})}function ox({assetsCount:t,partnerName:r,onContinue:a}){return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx(E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full shadow-lg shadow-green-200",children:e.jsx(ia,{className:"w-12 h-12 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Presente Importado!"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[t," mem√≥ria(s) ",r?`de ${r} `:"","foram adicionadas ao seu Baby Book."]})]}),e.jsxs("button",{onClick:a,className:"w-full py-4 px-4 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white font-semibold rounded-2xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-pink-200",children:["Ver Minhas Mem√≥rias",e.jsx(Ie,{className:"w-5 h-5"})]})]})}function ix({error:t,onRetry:r}){return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx(E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-24 h-24 bg-red-100 rounded-full",children:e.jsx(Qa,{className:"w-12 h-12 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Ops! Algo deu errado"}),e.jsx("p",{className:"text-gray-600 mt-2",children:t??"N√£o foi poss√≠vel processar seu voucher. Tente novamente."})]}),e.jsx("button",{onClick:r,className:"w-full py-4 px-4 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white font-semibold rounded-2xl transition-all shadow-lg shadow-pink-200",children:"Tentar Novamente"})]})}const nx=t=>be({queryKey:["my-vouchers"],enabled:(t==null?void 0:t.enabled)??!0,queryFn:async()=>await Qu()||[],staleTime:6e4}),lx=t=>{if(!t)return null;const r=er.find(s=>s.id===t);return r||(Zt(t)??null)},cx=async t=>lx(t),dx=t=>be({queryKey:["momentTemplate",t],queryFn:()=>cx(t),enabled:!!t}),mx=({mediaFiles:t,onAddMedia:r,onRemoveMedia:a,accept:s="image/*,video/*,audio/*",helperText:l="At√© 10 m√≠dias por momento",error:o=null})=>{const i=c.useId(),n=d=>{const u=Array.from(d.target.files||[]);r(u),d.target.value=""};return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--bb-color-ink)"},children:"M√≠dias"}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer hover:bg-opacity-5",style:{borderColor:"var(--bb-color-border)",backgroundColor:"var(--bb-color-bg)"},children:[e.jsx("input",{type:"file",multiple:!0,accept:s,onChange:n,className:"hidden",id:i}),e.jsxs("label",{htmlFor:i,className:"flex flex-col items-center justify-center cursor-pointer",children:[e.jsx(Ye,{className:"w-8 h-8 mb-2",style:{color:"var(--bb-color-ink-muted)"}}),e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--bb-color-ink)"},children:"Adicionar fotos, v√≠deos ou √°udios"}),e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--bb-color-ink-muted)"},children:l})]})]}),o&&e.jsx("p",{className:"mt-2 text-sm font-medium text-red-600",role:"alert",children:o}),t.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold",style:{color:"var(--bb-color-ink)"},children:["M√≠dias adicionadas (",t.length,")"]}),t.map((d,u)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{backgroundColor:"var(--bb-color-bg)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(Gn,{className:"w-5 h-5 flex-shrink-0",style:{color:"var(--bb-color-ink-muted)"}}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium truncate",style:{color:"var(--bb-color-ink)"},children:d.name}),e.jsxs("p",{className:"text-xs",style:{color:"var(--bb-color-ink-muted)"},children:[(d.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>a(u),className:"p-1 rounded-full transition-colors hover:bg-black/5 dark:hover:bg-white/10",children:e.jsx(De,{className:"w-4 h-4 text-red-600"})})]},u))]})]})},Wr=[{name:"Preto Cl√°ssico",hex:"#1A1A1A",css:"#1A1A1A"},{name:"Azul Cobalto",hex:"#0047AB",css:"#0047AB"},{name:"Rosa Beb√™",hex:"#E75480",css:"#E75480"}],ux=Wr[0],Ft=["Prefira luz natural (janela) e evite flash direto.","Use fundo liso e neutro (folha branca/mesa clara).","Garanta nitidez: segure firme e toque para focar.","Centralize a m√£o/p√© e n√£o corte dedos ou calcanhar.","Evite brilhos fortes/reflexos na pele (seque levemente)."],xo=[{key:"prep",label:"Preparando imagem"},{key:"ai",label:"Removendo fundo (IA)"},{key:"stamp",label:"Aplicando efeito carimbo"},{key:"final",label:"Finalizando"}];function xx(t,r){const a=(t||"").toLowerCase();return a.includes("baixando")||a.includes("ia")||a.includes("removendo fundo")||a.includes("model")||a.includes("processando")?"ai":a.includes("carimbo")||a.includes("tinta")||a.includes("efeito")?"stamp":a.includes("final")||r>=90?"final":r>=80?"stamp":r>=10?"ai":"prep"}function bx(t,r){const a=(t||"").toLowerCase();return a.includes("baixando modelos")||a.includes("baixando ia")?"download":r==="ai"?"ai":r==="stamp"?"stamp":r==="final"?"final":"prep"}function bo({type:t="hand",placeholderUrl:r,onSuccess:a,onError:s}){const[l,o]=c.useState("Pronto para come√ßar"),[i,n]=c.useState(0),[d,u]=c.useState(!1),[m,p]=c.useState(null),[f,x]=c.useState(null),[b,g]=c.useState(!1),[h,k]=c.useState(null),[v,y]=c.useState(ux),[N,_]=c.useState(!1),[A,G]=c.useState(0),[O,C]=c.useState(null),j=c.useRef(null),w=c.useRef(null),I=c.useRef({onSuccess:a,onError:s}),M=c.useRef(0);c.useEffect(()=>{I.current={onSuccess:a,onError:s}},[a,s]);const V=t==="hand"?"M√£ozinha":"Pezinho";c.useEffect(()=>(j.current=new Worker(new URL("/assets/stamp.worker-Cv5bX9CM.js",import.meta.url),{type:"module"}),j.current.onmessage=te=>{const{type:xe,value:S,status:$,file:oe,message:Q,jobId:de}=te.data;if(!(typeof de=="number"&&de!==M.current))if(xe==="progress")n(S),o($);else if(xe==="complete"){u(!1),n(100),o("Carimbo gerado com sucesso!"),k(oe);const q=URL.createObjectURL(oe);p(q)}else xe==="error"&&(u(!1),x(Q||"Ocorreu um erro ao processar a imagem."),I.current.onError&&I.current.onError(Q))},j.current.onerror=te=>{console.error("[StampGenerator] Worker Error:",te),u(!1),x("Erro cr√≠tico ao carregar o processador de imagem.")},j.current.postMessage({type:"preload"}),()=>{var te;(te=j.current)==null||te.terminate()}),[]),c.useEffect(()=>{if(!d)return;const te=window.setInterval(()=>{G(xe=>(xe+1)%Ft.length)},3500);return()=>window.clearInterval(te)},[d]);const J=(te,xe=v)=>{var $;if(!te.type.startsWith("image/")){x("Por favor, selecione apenas arquivos de imagem.");return}x(null),u(!0),n(0),G(0),p(null),k(null),M.current+=1;const S=M.current;($=j.current)==null||$.postMessage({type:"process",jobId:S,file:te,colorHex:xe.hex})},ae=te=>{var S;const xe=(S=te.target.files)==null?void 0:S[0];xe&&(C(xe),J(xe))},L=te=>{var S;te.preventDefault(),g(!1);const xe=(S=te.dataTransfer.files)==null?void 0:S[0];xe&&(C(xe),J(xe))},ee=te=>{y(te),O&&J(O,te)},ne=()=>{p(null),o("Pronto para come√ßar"),n(0),x(null),k(null),C(null)},ue=xx(l,i),B=xo.findIndex(te=>te.key===ue),se=bx(l,ue),he=d&&(l.toLowerCase().includes("baixando")||l.toLowerCase().includes("model")),ye=se==="download"?"Baixando modelos de IA‚Ä¶":se==="ai"?"Removendo fundo com IA‚Ä¶":se==="stamp"?"Gerando efeito carimbo‚Ä¶":se==="final"?"Finalizando exporta√ß√£o‚Ä¶":"Preparando‚Ä¶",H={prep:{ring:"conic-gradient(from -90deg, rgba(148,163,184,0.35) 0 100%)",glow:"radial-gradient(circle at 40% 25%, rgba(148,163,184,0.25), transparent 55%)"},download:{ring:`conic-gradient(from -90deg,
          rgba(56,189,248,0.95) 0% ${Math.max(1,i)}%,
          rgba(168,85,247,0.75) ${Math.max(1,i)}% ${Math.min(100,Math.max(1,i+12))}%,
          rgba(148,163,184,0.22) ${Math.min(100,Math.max(1,i+12))}% 100%)`,glow:"radial-gradient(circle at 30% 20%, rgba(56,189,248,0.35), transparent 55%), radial-gradient(circle at 70% 80%, rgba(168,85,247,0.35), transparent 55%)"},ai:{ring:`conic-gradient(from -90deg,
          rgba(168,85,247,0.95) 0% ${Math.max(1,i)}%,
          rgba(56,189,248,0.75) ${Math.max(1,i)}% ${Math.min(100,Math.max(1,i+12))}%,
          rgba(148,163,184,0.22) ${Math.min(100,Math.max(1,i+12))}% 100%)`,glow:"radial-gradient(circle at 30% 20%, rgba(168,85,247,0.38), transparent 55%), radial-gradient(circle at 70% 80%, rgba(56,189,248,0.32), transparent 55%)"},stamp:{ring:`conic-gradient(from -90deg,
          rgba(242,153,93,0.95) 0% ${Math.max(1,i)}%,
          rgba(168,85,247,0.70) ${Math.max(1,i)}% ${Math.min(100,Math.max(1,i+12))}%,
          rgba(148,163,184,0.22) ${Math.min(100,Math.max(1,i+12))}% 100%)`,glow:"radial-gradient(circle at 30% 20%, rgba(168,85,247,0.32), transparent 55%), radial-gradient(circle at 70% 80%, rgba(242,153,93,0.35), transparent 55%)"},final:{ring:`conic-gradient(from -90deg,
          rgba(34,197,94,0.95) 0% ${Math.max(1,i)}%,
          rgba(56,189,248,0.50) ${Math.max(1,i)}% ${Math.min(100,Math.max(1,i+12))}%,
          rgba(148,163,184,0.22) ${Math.min(100,Math.max(1,i+12))}% 100%)`,glow:"radial-gradient(circle at 30% 20%, rgba(34,197,94,0.30), transparent 55%), radial-gradient(circle at 70% 80%, rgba(56,189,248,0.22), transparent 55%)"}},we=se==="download"?oa:se==="ai"?Hn:se==="final"?$e:pe;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full flex-1 overflow-hidden rounded-3xl border shadow-sm transition-all hover:shadow-md",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:e.jsxs(qe,{mode:"wait",children:[!d&&!m&&!f&&e.jsxs(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center p-6 text-center transition-colors h-full min-h-[340px]",style:{backgroundColor:b?"var(--bb-color-bg)":"transparent"},onDragOver:te=>{te.preventDefault(),g(!0)},onDragLeave:()=>g(!1),onDrop:L,children:[e.jsxs("div",{className:"mb-6 flex flex-col items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",style:{color:"var(--bb-color-ink-muted)"},children:"Escolha a Tinta"}),e.jsx("div",{className:"flex items-center gap-2 p-1.5 rounded-full border shadow-sm",style:{backgroundColor:"var(--bb-color-bg)",borderColor:"var(--bb-color-border)"},children:Wr.map(te=>e.jsx("button",{onClick:xe=>{xe.stopPropagation(),y(te)},className:`w-6 h-6 rounded-full border-2 transition-all ${v.name===te.name?"scale-125 shadow-md border-white ring-2":"border-transparent hover:scale-110"}`,style:{backgroundColor:te.hex,boxShadow:v.name===te.name?"0 0 0 2px var(--bb-color-border)":"none"},title:te.name},te.name))})]}),r?e.jsx("div",{className:"mb-6 relative w-28 h-28 opacity-30 grayscale transition-all duration-300 group-hover:grayscale-0 group-hover:opacity-60",children:e.jsx("img",{src:r,alt:`Placeholder ${V}`,className:"w-full h-full object-contain"})}):e.jsx("div",{className:"mb-6 rounded-2xl p-5 text-[#F2995D]",style:{backgroundColor:"var(--bb-color-bg)"},children:e.jsx(gt,{className:"h-10 w-10"})}),e.jsx("h3",{className:"mb-2 text-lg font-bold",style:{color:"var(--bb-color-ink)"},children:V}),e.jsx("div",{className:"mb-2",children:e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[10px] font-bold uppercase tracking-[0.25em]",style:{borderColor:"rgba(242,153,93,0.35)",background:"linear-gradient(135deg, rgba(242,153,93,0.18), rgba(168,85,247,0.14))",color:"var(--bb-color-ink)",boxShadow:"0 0 0 1px rgba(242,153,93,0.08) inset"},title:"Gerado por IA",children:[e.jsx(pe,{className:"h-3 w-3","aria-hidden":!0}),"IA"]})}),e.jsx("p",{className:"mb-6 text-xs font-medium max-w-[200px]",style:{color:"var(--bb-color-ink-muted)"},children:"Arraste uma foto aqui ou clique para selecionar"}),e.jsxs("details",{className:"mb-6 w-full max-w-[320px] rounded-2xl border px-4 py-3 text-left",style:{backgroundColor:"var(--bb-color-bg)",borderColor:"var(--bb-color-border)"},children:[e.jsx("summary",{className:"cursor-pointer select-none text-xs font-bold",style:{color:"var(--bb-color-ink)"},children:"Dicas para melhor resultado"}),e.jsxs("ul",{className:"mt-2 list-disc space-y-1 pl-5 text-[11px] leading-relaxed",style:{color:"var(--bb-color-ink-muted)"},children:[e.jsx("li",{children:Ft[0]}),e.jsx("li",{children:Ft[1]}),e.jsx("li",{children:Ft[2]}),e.jsx("li",{children:Ft[3]}),e.jsx("li",{children:Ft[4]})]})]}),e.jsxs("button",{type:"button",onClick:()=>{var te;return(te=w.current)==null?void 0:te.click()},className:"group flex items-center gap-2 rounded-full px-6 py-3 text-sm font-bold shadow-lg transition-all hover:scale-105 active:scale-95",style:{backgroundColor:"var(--bb-color-ink)",color:"var(--bb-color-surface)"},children:[e.jsx(Tr,{className:"h-4 w-4"}),e.jsx("span",{children:"Escolher Foto"})]}),e.jsx("input",{ref:w,type:"file",accept:"image/*",className:"hidden",onChange:ae})]},"idle"),d&&e.jsxs(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative flex flex-col items-center justify-center p-8 text-center min-h-[340px]","aria-live":"polite",children:[e.jsxs("div",{className:"relative mb-6 h-28 w-28",children:[e.jsx(E.div,{"aria-hidden":!0,className:"absolute -inset-3 rounded-full blur-2xl",animate:{opacity:[.35,.55,.35]},transition:{duration:2.8,repeat:1/0,ease:"easeInOut"},style:{background:H[se].glow}}),e.jsx("div",{className:"absolute inset-0 rounded-full p-[3px]",style:{background:H[se].ring},children:e.jsxs("div",{className:"relative h-full w-full overflow-hidden rounded-full",style:{backgroundColor:"var(--bb-color-surface)",boxShadow:"0 0 0 1px rgba(255,255,255,0.06) inset, 0 10px 30px rgba(0,0,0,0.22)"},children:[e.jsx(E.div,{"aria-hidden":!0,className:"absolute -inset-10",animate:{x:["-30%","30%"]},transition:{duration:1.8,repeat:1/0,ease:"easeInOut"},style:{background:"linear-gradient(120deg, transparent 35%, rgba(255,255,255,0.18) 50%, transparent 65%)",transform:"rotate(12deg)",opacity:.28}}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx(E.div,{animate:{y:[0,-3,0]},transition:{duration:2.2,repeat:1/0,ease:"easeInOut"},children:e.jsx(we,{className:"h-8 w-8 "+(se==="download"?"animate-pulse":""),style:{color:"var(--bb-color-ink)"},"aria-hidden":!0})}),e.jsxs("span",{className:"mt-1 text-[10px] font-mono",style:{color:"var(--bb-color-ink-muted)"},children:[Math.round(i),"%"]})]})]})})]}),e.jsx("div",{className:"w-full max-w-[200px] space-y-2",children:e.jsxs("div",{className:"flex justify-center flex-col items-center gap-1",style:{color:"var(--bb-color-ink)"},children:[e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider animate-pulse",children:l}),e.jsx("span",{className:"text-[10px] font-mono max-w-[180px] truncate",style:{color:"var(--bb-color-ink-muted)"},children:ye})]})}),he?e.jsx("p",{className:"mt-4 max-w-[260px] text-[11px] leading-relaxed",style:{color:"var(--bb-color-ink-muted)"},children:"Primeira vez pode demorar um pouco mais (baixando modelos da IA). Nas pr√≥ximas, fica bem mais r√°pido."}):null,e.jsxs("div",{className:"mt-4 w-full max-w-[300px] rounded-2xl border px-4 py-3 text-left",style:{backgroundColor:"var(--bb-color-bg)",borderColor:"var(--bb-color-border)"},children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider",style:{color:"var(--bb-color-ink-muted)"},children:"Etapas"}),e.jsx("ul",{className:"mt-2 space-y-1",children:xo.map((te,xe)=>{const S=xe<B?"done":xe===B?"active":"idle";return e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{"aria-hidden":!0,className:"h-2 w-2 rounded-full "+(S==="done"?"bg-green-500":S==="active"?"bg-[var(--bb-color-accent)]":"bg-gray-300 dark:bg-border"),style:{backgroundColor:S==="idle"?"var(--bb-color-border)":void 0}}),e.jsx("span",{className:"text-[11px]",style:{fontWeight:S==="active"?600:400,color:S==="active"?"var(--bb-color-ink)":"var(--bb-color-ink-muted)"},children:te.label})]},te.key)})}),e.jsxs("p",{className:"mt-3 text-[11px] leading-relaxed",style:{color:"var(--bb-color-ink-muted)"},children:["Enquanto isso: ",Ft[A]]})]})]},"processing"),f&&e.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center p-8 text-center min-h-[340px]",children:[e.jsx("div",{className:"mb-4 rounded-full bg-red-50 p-4 text-red-500 ring-8 ring-red-50/50",children:e.jsx(pt,{className:"h-8 w-8"})}),e.jsx("h3",{className:"mb-2 text-lg font-bold text-gray-800",children:"Ops, algo deu errado!"}),e.jsx("p",{className:"mb-6 text-sm text-gray-500 max-w-[240px] leading-relaxed",children:f}),e.jsxs("button",{type:"button",onClick:ne,className:"flex items-center gap-2 rounded-xl bg-gray-100 px-5 py-2.5 text-sm font-bold text-gray-700 transition hover:bg-gray-200 active:scale-95",children:[e.jsx(Bs,{className:"h-4 w-4"}),"Tentar Novamente"]})]},"error"),m&&e.jsxs(E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col p-5 h-full min-h-[340px]",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 px-3 py-1 rounded-full",children:[e.jsx($e,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:"Sucesso"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 p-1 rounded-lg border",style:{backgroundColor:"var(--bb-color-bg)",borderColor:"var(--bb-color-border)"},children:[Wr.slice(0,3).map(te=>e.jsx("button",{onClick:()=>ee(te),className:`w-5 h-5 rounded-full border-2 transition-all ${v.name===te.name?"scale-110 shadow-sm border-white ring-1 ring-gray-300":"border-transparent hover:scale-105"}`,style:{backgroundColor:te.hex},title:te.name},te.name)),e.jsx("button",{onClick:()=>{},className:"w-5 h-5 flex items-center justify-center rounded-full border hover:text-gray-600",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},children:e.jsx(Wn,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"relative flex-1 w-full rounded-2xl bg-white p-4 border border-gray-200 group overflow-hidden shadow-sm",children:[e.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:"radial-gradient(#999 0.5px, transparent 0.5px)",backgroundSize:"8px 8px"}}),e.jsxs(E.div,{layoutId:`stamp-${V}`,className:"relative w-full h-full flex items-center justify-center cursor-zoom-in",onClick:()=>_(!0),children:[e.jsx(E.img,{initial:{opacity:.5,scale:.9},animate:{opacity:1,scale:1},src:m,alt:`${V} Preview`,className:"max-h-full max-w-full object-contain drop-shadow-xl",style:{filter:"contrast(1.1)"}},v.hex),e.jsx("div",{className:"absolute bottom-2 right-2 bg-white/80 backdrop-blur-sm p-1.5 rounded-lg shadow-sm opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Sr,{className:"w-4 h-4 text-gray-600"})})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:ne,className:"flex items-center justify-center gap-2 rounded-xl border py-3 text-xs font-bold transition hover:opacity-80",style:{borderColor:"var(--bb-color-border)",backgroundColor:"var(--bb-color-surface)",color:"var(--bb-color-ink)"},children:[e.jsx(Bs,{className:"h-3.5 w-3.5"}),"Refazer"]}),e.jsxs("button",{type:"button",onClick:()=>h&&a(h),className:"flex items-center justify-center gap-2 rounded-xl py-3 text-xs font-bold shadow-lg transition hover:scale-[1.02] active:scale-95",style:{backgroundColor:"var(--bb-color-ink)",color:"var(--bb-color-surface)"},children:[e.jsx(Qn,{className:"h-3.5 w-3.5"}),"Confirmar"]})]})]},"success")]})}),e.jsx(ni,{open:N,onOpenChange:_,children:e.jsxs(si,{children:[e.jsx(es,{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200"}),e.jsx(ts,{className:"fixed left-1/2 top-1/2 z-50 -translate-x-1/2 -translate-y-1/2 w-full max-w-3xl max-h-[90vh] outline-none animate-in zoom-in-95 duration-200",children:e.jsxs("div",{className:"relative rounded-2xl shadow-2xl overflow-hidden p-2",style:{backgroundColor:"var(--bb-color-surface)"},children:[e.jsx("button",{onClick:()=>_(!1),className:"absolute top-4 right-4 z-10 p-2 bg-white/50 backdrop-blur-md rounded-full shadow-sm hover:bg-white text-gray-700 transition-all",children:e.jsx(De,{className:"w-5 h-5"})}),e.jsxs("div",{className:"w-full h-[60vh] md:h-[70vh] bg-white rounded-xl flex items-center justify-center relative border border-gray-200 shadow-inner",children:[e.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:"radial-gradient(#999 0.5px, transparent 0.5px)",backgroundSize:"10px 10px"}}),m&&e.jsx("img",{src:m,className:"max-w-full max-h-full object-contain p-8 drop-shadow-2xl",alt:"Zoom"})]}),e.jsxs("div",{className:"p-4 flex flex-col items-center gap-4",style:{backgroundColor:"var(--bb-color-surface)"},children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--bb-color-ink-muted)"},children:"Escolha a cor da tinta"}),e.jsx("div",{className:"flex gap-3",children:Wr.map(te=>e.jsx("button",{onClick:()=>ee(te),className:`w-10 h-10 rounded-full border-4 transition-all ${v.name===te.name?"scale-110 shadow-md border-white ring-2 ring-[#2A2A2A]":"border-transparent hover:scale-105 hover:shadow-sm"}`,style:{backgroundColor:te.hex},title:te.name},te.name))})]})]})})]})})]})}const ra=t=>t.type.startsWith("image/")?"photo":t.type.startsWith("video/")?"video":"audio",Ba=t=>{let r=0,a=0,s=0;for(const l of t){const o=ra(l);o==="photo"?r+=1:o==="video"?a+=1:s+=1}return{photos:r,videos:a,audios:s}},px=t=>(t??[]).some(r=>r.toLowerCase().includes("opcional")),hx=t=>{if(typeof document>"u")return Promise.resolve(null);const r=ra(t);return r!=="video"&&r!=="audio"?Promise.resolve(null):new Promise(a=>{const s=document.createElement(r==="video"?"video":"audio");s.preload="metadata";const l=URL.createObjectURL(t),o=()=>{var n;URL.revokeObjectURL(l),s.removeAttribute("src");try{(n=s.load)==null||n.call(s)}catch{}},i=n=>{o(),a(n)};s.onloadedmetadata=()=>{const n=Number.isFinite(s.duration)?s.duration:null;i(n)},s.onerror=()=>i(null),s.src=l})},gx=(t,r)=>t?t.videoOrAudio&&(r==="video"||r==="audio")?typeof t.videoOrAudio.maxSeconds=="number"?t.videoOrAudio.maxSeconds:null:r==="video"&&t.video?typeof t.video.maxSeconds=="number"?t.video.maxSeconds:null:r==="audio"&&t.audio&&typeof t.audio.maxSeconds=="number"?t.audio.maxSeconds:null:null,rr=(t,r)=>t?typeof t.required=="boolean"?t.required:!px(r):!1,fx=t=>{if(!t)return"image/*,video/*,audio/*";const r=!!t.photos,a=!!t.video||!!t.videoOrAudio,s=!!t.audio||!!t.videoOrAudio,l=[];return r&&l.push("image/*"),a&&l.push("video/*"),s&&l.push("audio/*"),l.length>0?l.join(","):"image/*,video/*,audio/*"},vx=(t,r,a)=>{const s=Ba(r);if(!t)return a("b2c.moments.form.media.helper.generic",{count:s.photos+s.videos+s.audios});const l=[];if(t.photos){const o=t.photos.min??0,i=t.photos.max??0,n=o>0?o===i?String(o):`${o}‚Äì${i}`:null;l.push(a("b2c.moments.form.media.helper.photos",{current:s.photos,max:i,suggestionSuffix:n?a("b2c.moments.form.media.helper.photosSuggestionSuffix",{suggestion:n}):""}))}if(t.videoOrAudio){const o=t.videoOrAudio.max??1,i=rr(t.videoOrAudio,t.notes),n=t.videoOrAudio.maxSeconds?a("b2c.moments.form.media.helper.secondsSuffix",{seconds:t.videoOrAudio.maxSeconds}):"",d=s.videos+s.audios;l.push(a("b2c.moments.form.media.helper.videoOrAudio",{current:d,max:o,secondsSuffix:n,requiredSuffix:i?a("b2c.moments.form.media.helper.requiredSuffix"):""}))}else{if(t.video){const o=t.video.max??1,i=rr(t.video,t.notes),n=t.video.maxSeconds?a("b2c.moments.form.media.helper.secondsSuffix",{seconds:t.video.maxSeconds}):"";l.push(a("b2c.moments.form.media.helper.video",{current:s.videos,max:o,secondsSuffix:n,requiredSuffix:i?a("b2c.moments.form.media.helper.requiredSuffix"):""}))}if(t.audio){const o=t.audio.max??1,i=rr(t.audio,t.notes);l.push(a("b2c.moments.form.media.helper.audio",{current:s.audios,max:o,requiredSuffix:i?a("b2c.moments.form.media.helper.requiredSuffix"):""}))}}return l.join(" ¬∑ ")},po=t=>t==null?!0:Array.isArray(t)?t.length===0:typeof t=="string"?t.trim().length===0:!1,yx=t=>t.split(",").map(r=>r.trim()).filter(Boolean),Yi=({childId:t,template:r,audience:a="b2c",onSuccess:s})=>{var X;const l=ve(),{t:o}=ce(),[i,n]=c.useState(""),[d,u]=c.useState(null),[m,p]=c.useState(""),[f,x]=c.useState(new Date().toISOString().split("T")[0]),[b,g]=c.useState(null),[h,k]=c.useState([]),[v,y]=c.useState(null),[N,_]=c.useState(null),[A,G]=c.useState(null),[O,C]=c.useState({}),[j,w]=c.useState({}),[I,M]=c.useState(!1),[V,J]=c.useState(!1),[ae,L]=c.useState(!1),{mutateAsync:ee,isPending:ne}=ki(),ue=c.useMemo(()=>r!=null&&r.media?a==="b2b"&&r.mediaB2B?r.mediaB2B:r.media:null,[a,r]),B=c.useMemo(()=>fx(ue),[ue]),se=c.useMemo(()=>vx(ue,h,o),[ue,h,o]);c.useEffect(()=>{if(r){n(r.title),u(null),g(null);const P={...r.defaults??{}};for(const U of r.fields??[])P[U.key]===void 0&&(U.type==="tags"?P[U.key]=[]:P[U.key]="");C(P),w({})}},[r]);const he=T=>{var U;if(typeof document>"u")return;const P=document.getElementById(T);if(P)try{P.scrollIntoView({behavior:"smooth",block:"center"}),(U=P.focus)==null||U.call(P)}catch{}},ye=i.trim().length>0,H=f.trim().length>0,we=c.useMemo(()=>{const T=(r==null?void 0:r.fields)??[];if(!T.length)return[];const P=[];for(const U of T){if(!U.required)continue;const ie=O[U.key];if(U.type==="number"){const ge=typeof ie=="number"?ie:Number(ie);Number.isFinite(ge)||P.push({key:U.key,label:U.label});continue}if(U.type==="tags"){(!Array.isArray(ie)||ie.length===0)&&P.push({key:U.key,label:U.label});continue}po(ie)&&P.push({key:U.key,label:U.label})}return P},[O,r==null?void 0:r.fields]),te=()=>{const T=(r==null?void 0:r.fields)??[];if(T.length===0)return w({}),!0;const P={};for(const U of T){if(!U.required){P[U.key]=null;continue}const ie=O[U.key];if(U.type==="number"){const ge=typeof ie=="number"?ie:Number(ie);if(!Number.isFinite(ge)){P[U.key]=o("b2c.moments.form.errors.requiredField");continue}}else if(U.type==="tags"){if(!Array.isArray(ie)||ie.length===0){P[U.key]=o("b2c.moments.form.errors.requiredField");continue}}else if(po(ie)){P[U.key]=o("b2c.moments.form.errors.requiredField");continue}P[U.key]=null}return w(P),Object.values(P).every(U=>!U)},xe=(T,P)=>{C(U=>({...U,[T]:P})),w(U=>({...U,[T]:null}))},S=c.useCallback(T=>{const P=ue;if(!P)return null;const{photos:U,videos:ie,audios:ge}=Ba(T);if(P.photos){const Me=P.photos.min??0,ze=P.photos.max??0;if(U>ze)return o("b2c.moments.form.media.errors.maxPhotosExceeded",{max:ze});if(a==="b2b"&&Me>0&&U<Me)return o("b2c.moments.form.media.errors.minPhotosRequired",{min:Me})}if(P.videoOrAudio){const Me=P.videoOrAudio.max??1,ze=rr(P.videoOrAudio,P.notes),at=ie+ge;if(at>Me)return o("b2c.moments.form.media.errors.maxVideoOrAudioExceeded",{max:Me});if(Me===1&&ie>0&&ge>0)return o("b2c.moments.form.media.errors.chooseOnlyOneVideoOrAudio");if(ze&&at<1)return o("b2c.moments.form.media.errors.videoOrAudioRequired")}else{if(P.video){const Me=P.video.max??1,ze=rr(P.video,P.notes);if(ie>Me)return o("b2c.moments.form.media.errors.maxVideosExceeded",{max:Me});if(ze&&ie<1)return o("b2c.moments.form.media.errors.videoRequired")}if(P.audio){const Me=P.audio.max??1,ze=rr(P.audio,P.notes);if(ge>Me)return o("b2c.moments.form.media.errors.maxAudiosExceeded",{max:Me});if(ze&&ge<1)return o("b2c.moments.form.media.errors.audioRequired")}}return null},[a,ue,o]),$=c.useMemo(()=>S(h),[h,S]),oe=!ne&&N===null&&ye&&H&&we.length===0&&!$,Q=c.useMemo(()=>{var T;return ne?null:N!==null?o("b2c.moments.form.saving"):$||(ye?H?we.length>0?o("b2c.moments.form.validation.missingField",{field:((T=we[0])==null?void 0:T.label)??""}):null:o("b2c.moments.form.validation.missingDate"):o("b2c.moments.form.validation.missingTitle"))},[$,H,ne,ye,N,we,o]),de=async T=>{const P=ue,U=[];let ie=null;for(const ge of T){const Me=ra(ge),ze=gx(P,Me);if(!ze){U.push(ge);continue}const at=await hx(ge);if(at===null){U.push(ge);continue}if(at>ze+.25){ie=o("b2c.moments.form.media.errors.maxDurationExceeded",{maxSeconds:ze,fileName:ge.name,duration:Math.ceil(at)});continue}U.push(ge)}k(ge=>{var ur,Gt,Ht,xr;if(!P){const _e=[...ge,...U];return _e.length>10?(y(o("b2c.moments.form.media.errors.maxItemsGeneric")),ge):(y(ie),_e)}const Me=!!P.photos,ze=!!P.video||!!P.videoOrAudio,at=!!P.audio||!!P.videoOrAudio,cr=((ur=P.photos)==null?void 0:ur.max)??0,dr=((Gt=P.video)==null?void 0:Gt.max)??0,mr=((Ht=P.audio)==null?void 0:Ht.max)??0,Kt=((xr=P.videoOrAudio)==null?void 0:xr.max)??0;let kt=[...ge],st=null;for(const _e of U){const Rt=ra(_e),Wt=kt.findIndex(vt=>vt.name===_e.name&&vt.name.startsWith("carimbo_"));if(Wt!==-1){const vt=[...kt];vt[Wt]=_e,kt=vt;continue}if(Rt==="photo"&&!Me){st=o("b2c.moments.form.media.errors.photosNotAllowed");continue}if(Rt==="video"&&!ze){st=o("b2c.moments.form.media.errors.videosNotAllowed");continue}if(Rt==="audio"&&!at){st=o("b2c.moments.form.media.errors.audiosNotAllowed");continue}const br=[...kt,_e],{photos:ma,videos:Qt,audios:Yt}=Ba(br);if(Me&&cr>0&&ma>cr){st=o("b2c.moments.form.media.errors.maxPhotos",{max:cr});continue}if(P.videoOrAudio){const vt=Qt+Yt;if(Kt>0&&vt>Kt){st=o("b2c.moments.form.media.errors.maxVideoOrAudio",{max:Kt});continue}if(Kt===1&&Qt>0&&Yt>0){st=o("b2c.moments.form.media.errors.chooseOnlyOneVideoOrAudio");continue}}else{if(ze&&dr>0&&Qt>dr){st=o("b2c.moments.form.media.errors.maxVideos",{max:dr});continue}if(at&&mr>0&&Yt>mr){st=o("b2c.moments.form.media.errors.maxAudios",{max:mr});continue}}kt=br}return y(S(kt)??ie??st),kt})},q=T=>{k(P=>{const U=P.filter((ie,ge)=>ge!==T);return y(S(U)),U})},me=async()=>{try{y(null);let T=null;h.length&&(_(0),G(o("b2c.moments.form.saving")),T=await Cs({childId:t,files:h,scope:"moment",onProgress:({fileName:P,overallPct:U})=>{G(P),_(U)}})),await ee({childId:t,title:i,summary:m||void 0,occurredAt:f,templateKey:(r==null?void 0:r.templateKey)??(r==null?void 0:r.id),payload:(()=>{var ie;const P={};return!!((ie=r==null?void 0:r.fields)!=null&&ie.length)&&(P.fields={...(r==null?void 0:r.defaults)??{},...O}),T!=null&&T.length&&(P.media=T),Object.keys(P).length?P:void 0})()}),s?s():l("/jornada")}catch(T){const P=T instanceof Error?T.message:"Falha ao salvar momento.";y(P),he("moment-media")}finally{_(null),G(null)}},F=async T=>{T.preventDefault(),M(!0);let P=!0;if(i.trim()||(u(o("b2c.moments.form.errors.requiredField")),P=!1),f.trim()||(g(o("b2c.moments.form.errors.requiredField")),P=!1),!P){he(i.trim()?"moment-date":"moment-title");return}if(!te()){const ie=we[0];ie&&he(`moment-field-${ie.key}`);return}const U=$??S(h);if(U){y(U),he("moment-media");return}if(!h.length&&!ae){J(!0);return}await me()};return e.jsxs(e.Fragment,{children:[e.jsx(Fr,{open:V,onOpenChange:J,children:e.jsxs(fs,{children:[e.jsxs(vs,{children:[e.jsx(js,{style:{color:"var(--bb-color-ink)"},children:o("b2c.moments.common.noMediaNudge.title")}),e.jsx(ks,{style:{color:"var(--bb-color-ink-muted)"},children:o("b2c.moments.common.noMediaNudge.description")})]}),e.jsxs(ys,{children:[e.jsx(Pe,{type:"button",variant:"secondary",onClick:()=>{J(!1),he("moment-media")},children:o("b2c.moments.common.noMediaNudge.addNow")}),e.jsx(Pe,{type:"button",onClick:()=>{L(!0),J(!1),me()},children:o("b2c.moments.common.noMediaNudge.saveAnyway")})]})]})}),e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsx("div",{className:"rounded-[2rem] p-6 shadow-sm border border-[var(--bb-color-border)]",style:{backgroundColor:"var(--bb-color-surface)"},children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(it,{id:"moment-title",label:o("b2c.moments.form.fields.titleLabel"),placeholder:o("b2c.moments.form.fields.titlePlaceholder"),value:i,onChange:T=>{n(T.target.value),u(null)},icon:Yn,error:d||(I&&!ye?"Obrigat√≥rio":void 0),required:!0}),e.jsx(it,{id:"moment-date",type:"date",label:o("b2c.moments.form.fields.dateLabel"),value:f,onChange:T=>{x(T.target.value),g(null)},icon:Oe,error:b||(I&&!H?"Obrigat√≥rio":void 0),required:!0})]})}),(X=r==null?void 0:r.fields)!=null&&X.length?e.jsxs("div",{className:"rounded-[2rem] p-6 shadow-sm border border-[var(--bb-color-border)]",style:{backgroundColor:"var(--bb-color-surface)"},children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-[var(--bb-color-ink)] flex items-center gap-2",children:[e.jsx(Jn,{className:"w-5 h-5 opacity-50"}),o("b2c.moments.form.sections.details")]}),e.jsx("p",{className:"mt-1 text-sm text-[var(--bb-color-ink-muted)]",children:r.prompt})]}),e.jsx("div",{className:"space-y-5",children:r.fields.filter(T=>r.id!=="marcas-crescimento"||T.key!=="limb").map(T=>{const P=O[T.key],U=j[T.key];return T.type==="select"?e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-[var(--bb-color-ink)]",children:[T.label,T.required?" *":""]}),e.jsxs("select",{id:`moment-field-${T.key}`,value:typeof P=="string"?P:"",onChange:ie=>xe(T.key,ie.target.value),className:D("w-full py-3 px-4 rounded-xl border-2 transition-all outline-none appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%20stroke%3D%22%236b7280%22%3E%3Cpath%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.25rem_1.25rem] bg-no-repeat bg-[right_1rem_center]","focus:ring-2 focus:ring-[var(--bb-color-accent)]/20 focus:border-[var(--bb-color-accent)]"),disabled:T.readOnly,style:{backgroundColor:"var(--bb-color-surface)",borderColor:U?"var(--bb-color-danger)":"var(--bb-color-border)",color:"var(--bb-color-ink)"},children:[e.jsx("option",{value:"",children:o("common.select")}),(T.options??[]).map(ie=>e.jsx("option",{value:ie.value,children:ie.label},ie.value))]}),U&&e.jsx("p",{className:"mt-1 text-sm font-medium text-[var(--bb-color-danger)]",children:U})]},T.key):T.type==="textarea"||T.type==="richtext"?e.jsx(it,{id:`moment-field-${T.key}`,label:T.label,multiline:!0,rows:4,placeholder:T.placeholder,value:typeof P=="string"?P:"",onChange:ie=>xe(T.key,ie.target.value),readOnly:T.readOnly,error:U||void 0,required:T.required},T.key):T.type==="number"?e.jsx(it,{id:`moment-field-${T.key}`,type:"number",label:T.label,placeholder:T.placeholder,value:typeof P=="number"?String(P):P,onChange:ie=>{const ge=ie.target.value;xe(T.key,ge===""?"":Number(ge))},readOnly:T.readOnly,min:T.min,max:T.max,error:U||void 0,required:T.required},T.key):e.jsx(it,{id:`moment-field-${T.key}`,type:T.type==="date"?"date":T.type==="datetime"?"datetime-local":"text",label:T.label,placeholder:T.placeholder||(T.type==="tags"?o("b2c.moments.form.fields.tagsPlaceholder"):void 0),value:Array.isArray(P)?P.join(", "):P,onChange:ie=>T.type==="tags"?xe(T.key,yx(ie.target.value)):xe(T.key,ie.target.value),readOnly:T.readOnly,error:U||void 0,required:T.required,helperText:T.helperText},T.key)})})]}):null,e.jsx("div",{className:"rounded-[2rem] p-6 shadow-sm border border-[var(--bb-color-border)]",style:{backgroundColor:"var(--bb-color-surface)"},children:e.jsx(it,{label:o("b2c.moments.form.fields.summaryLabel"),multiline:!0,rows:3,placeholder:o("b2c.moments.form.fields.summaryPlaceholder"),value:m,onChange:T=>p(T.target.value),icon:ir})}),e.jsx("div",{className:"rounded-[2rem] p-6 shadow-sm border border-[var(--bb-color-border)]",style:{backgroundColor:"var(--bb-color-surface)"},children:(r==null?void 0:r.id)==="marcas-crescimento"?e.jsxs("div",{className:"space-y-6",id:"moment-media",children:[e.jsxs("div",{className:"rounded-2xl border p-4",style:{backgroundColor:"var(--bb-color-bg)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--bb-color-ink)]",children:o("b2c.moments.form.stamps.guide.title")}),e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[10px] font-bold uppercase tracking-[0.25em]",style:{borderColor:"rgba(242,153,93,0.35)",background:"linear-gradient(135deg, rgba(242,153,93,0.18), rgba(168,85,247,0.14))",color:"var(--bb-color-ink)",boxShadow:"0 0 0 1px rgba(242,153,93,0.08) inset"},title:"Gerado por IA",children:[e.jsx(pe,{className:"h-3 w-3","aria-hidden":!0}),"IA"]})]}),e.jsx("p",{className:"mt-1 text-xs text-[var(--bb-color-ink-muted)]",children:o("b2c.moments.form.stamps.guide.description")}),e.jsxs("details",{className:"mt-3",children:[e.jsx("summary",{className:"cursor-pointer select-none text-xs font-semibold text-[var(--bb-color-ink)]",children:o("b2c.moments.form.stamps.guide.cta")}),e.jsxs("ul",{className:"mt-2 list-disc space-y-1 pl-5 text-xs text-[var(--bb-color-ink-muted)]",children:[e.jsx("li",{children:o("b2c.moments.form.stamps.guide.bullets.1")}),e.jsx("li",{children:o("b2c.moments.form.stamps.guide.bullets.2")}),e.jsx("li",{children:o("b2c.moments.form.stamps.guide.bullets.3")}),e.jsx("li",{children:o("b2c.moments.form.stamps.guide.bullets.4")}),e.jsx("li",{children:o("b2c.moments.form.stamps.guide.bullets.5")})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx(bo,{type:"hand",placeholderUrl:"/placeholders/hand_stamp.png",onSuccess:T=>{const P=new File([T],"carimbo_mao.png",{type:T.type});de([P])}}),e.jsx(bo,{type:"foot",placeholderUrl:"/placeholders/foot_stamp.png",onSuccess:T=>{const P=new File([T],"carimbo_pe.png",{type:T.type});de([P])}})]}),h.length===0&&e.jsx("p",{className:"text-center text-xs text-[var(--bb-color-ink-muted)]",children:o("b2c.moments.form.stamps.emptyHint")}),h.length>0&&e.jsxs("div",{className:"mt-4 rounded-2xl border p-4",style:{backgroundColor:"var(--bb-color-bg)",borderColor:"var(--bb-color-border)"},children:[e.jsx("p",{className:"mb-3 text-sm font-bold text-[var(--bb-color-ink)]",children:o("b2c.moments.form.stamps.readyTitle")}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:h.map((T,P)=>e.jsxs("div",{className:"flex items-center justify-between rounded-xl border p-3 shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg text-xs",style:{backgroundColor:"var(--bb-color-ink)",color:"var(--bb-color-surface)"},children:T.name.includes("mao")?"‚úã":"üë£"}),e.jsx("span",{className:"text-sm font-medium text-[var(--bb-color-ink)]",children:T.name.includes("mao")?o("b2c.moments.form.stamps.handLabel"):o("b2c.moments.form.stamps.footLabel")})]}),e.jsx("button",{type:"button",onClick:()=>q(P),className:"group rounded-lg p-2 transition-colors","aria-label":o("common.delete"),children:e.jsx(De,{className:"h-4 w-4 text-[var(--bb-color-ink-muted)] group-hover:text-[var(--bb-color-danger)]"})})]},P))})]})]}):e.jsxs("div",{id:"moment-media",children:[h.length===0&&!$?e.jsxs("div",{className:"mb-3 rounded-2xl border p-4",style:{backgroundColor:"var(--bb-color-bg)",borderColor:"var(--bb-color-border)"},children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--bb-color-ink)]",children:o("b2c.moments.form.media.optionalHint.title")}),e.jsx("p",{className:"mt-1 text-xs text-[var(--bb-color-ink-muted)]",children:o("b2c.moments.form.media.optionalHint.description")})]}):null,e.jsx(mx,{mediaFiles:h,onAddMedia:de,onRemoveMedia:q,accept:B,helperText:se,error:v??$})]})}),N!==null?e.jsxs("div",{className:"rounded-xl border p-3",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},"aria-live":"polite",children:[e.jsxs("p",{className:"text-xs text-[var(--bb-color-ink-muted)]",children:[o("b2c.moments.form.saving"),A?` ‚Äî ${A}`:""]}),e.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full",style:{backgroundColor:"var(--bb-color-border)"},children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${N}%`,backgroundColor:"var(--bb-color-ink)",transition:"width 160ms ease"}})})]}):null,e.jsxs("div",{className:"flex gap-4 pt-4 pb-20",children:[e.jsx(Pe,{type:"submit",disabled:!oe,className:"flex-1",title:!oe&&Q?Q:void 0,children:o(ne?"b2c.moments.form.saving":"b2c.moments.form.save")}),e.jsx(Pe,{type:"button",variant:"secondary",onClick:()=>l("/jornada"),className:"flex-1",disabled:ne,children:o("common.cancel")})]}),!oe&&Q?e.jsx("p",{className:"text-center text-xs text-[var(--bb-color-ink-muted)]",role:I?"alert":"status",children:Q}):null]})]})},jx=()=>{const t=ve(),{t:r}=ce(),{template_id:a}=Ct(),{selectedChild:s}=Xe(),l=ke(p=>p.isAuthenticated),{data:o,isLoading:i}=dx(a||""),n=nx({enabled:l}),d=()=>{if(typeof window<"u"&&window.history.length>1){t(-1);return}t("/jornada")},u=(n.data??[]).some(p=>{var f;return!!((f=p.voucher)!=null&&f.redeemed_at)}),m=o!=null&&o.mediaB2B&&u?"b2b":"b2c";return s?i?e.jsxs("div",{className:"mx-auto max-w-2xl animate-pulse py-6",children:[e.jsx("div",{className:"mb-6 h-12 w-2/3 rounded-2xl border",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"}}),e.jsx("div",{className:"h-96 rounded-2xl border",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"}})]}):o?e.jsxs(E.div,{className:"mx-auto max-w-2xl py-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"mb-8 flex items-start sm:items-center gap-4 flex-col sm:flex-row",children:[e.jsxs("button",{onClick:d,className:"flex items-center gap-2 p-2 rounded-lg transition-colors hover:bg-[var(--bb-color-bg)]",style:{color:"var(--bb-color-ink)"},children:[e.jsx(Ne,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold text-sm",children:"Voltar"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("h1",{className:"text-2xl font-bold",children:(o==null?void 0:o.title)||r("b2c.moments.common.newMoment")}),(o==null?void 0:o.id)==="marcas-crescimento"?e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-3 py-1 text-[11px] font-bold uppercase tracking-[0.25em]",style:{borderColor:"rgba(242,153,93,0.35)",background:"linear-gradient(135deg, rgba(242,153,93,0.18), rgba(168,85,247,0.14))",color:"var(--bb-color-ink)",boxShadow:"0 0 0 1px rgba(242,153,93,0.08) inset"},title:"Este momento inclui gera√ß√£o por IA",children:[e.jsx(pe,{className:"h-4 w-4","aria-hidden":!0}),"IA"]}):null]}),(o==null?void 0:o.prompt)&&e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--bb-color-ink-muted)"},children:o.prompt}),(o==null?void 0:o.id)==="marcas-crescimento"?e.jsx("p",{className:"mt-1 text-xs",style:{color:"var(--bb-color-ink-muted)"},children:"Gere um carimbo (m√£o/p√©) a partir da sua foto ‚Äî a IA remove o fundo e aplica o efeito de tinta."}):null]})]}),e.jsx("div",{className:"rounded-2xl border p-6 mb-8",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:e.jsx(Yi,{childId:s.id,template:o,audience:m})})]}):e.jsxs("div",{className:"mx-auto max-w-2xl py-10 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:r("b2c.moments.draft.missingTemplateTitle")}),e.jsx("p",{className:"mt-3 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:r("b2c.moments.draft.missingTemplateDescription",{templateId:a})}),e.jsxs("div",{className:"mt-6 flex flex-wrap justify-center gap-3",children:[e.jsx("button",{onClick:d,className:"rounded-2xl border px-4 py-2 text-sm font-semibold transition hover:opacity-90",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)",backgroundColor:"transparent"},children:r("b2c.moments.draft.backToJourney")}),e.jsx("button",{onClick:()=>t("/jornada/moment/avulso"),className:"rounded-2xl px-4 py-2 text-sm font-semibold transition hover:opacity-90",style:{backgroundColor:"var(--bb-color-accent)",color:"var(--bb-color-surface)"},children:r("b2c.moments.draft.useFreeMoment")})]})]}):e.jsxs("div",{className:"mx-auto max-w-2xl py-6 text-center",children:[e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:r("b2c.moments.draft.selectChildFirst")}),e.jsx("button",{onClick:()=>t("/perfil-usuario"),className:"mt-4 rounded-2xl px-4 py-2 text-sm font-semibold transition hover:opacity-90",style:{backgroundColor:"var(--bb-color-accent)",color:"var(--bb-color-surface)"},children:r("b2c.moments.draft.goToProfile")})]})},kx=()=>{const t=ve(),{selectedChild:r}=Xe(),{t:a}=ce(),s=()=>{if(typeof window<"u"&&window.history.length>1){t(-1);return}t("/jornada")};return r?e.jsxs("div",{className:"mx-auto max-w-2xl px-4 py-6",children:[e.jsxs("div",{className:"mb-8 flex items-center gap-4",children:[e.jsx("button",{onClick:s,className:"rounded-full p-2 transition",style:{color:"var(--bb-color-ink)"},"aria-label":a("common.back"),children:e.jsx(Ne,{className:"h-5 w-5","aria-hidden":!0})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a("b2c.moments.common.newMoment")}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:a("b2c.moments.free.description")})]})]}),e.jsx("div",{className:"rounded-2xl border p-6",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:e.jsx(Yi,{childId:r.id})})]}):e.jsxs("div",{className:"mx-auto max-w-2xl px-4 py-6",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsx("button",{onClick:s,className:"rounded-full p-2 transition",style:{color:"var(--bb-color-ink)"},"aria-label":a("common.back"),children:e.jsx(Ne,{className:"h-5 w-5","aria-hidden":!0})}),e.jsx("h1",{className:"text-lg font-semibold",style:{color:"var(--bb-color-ink)"},children:a("b2c.moments.common.newMoment")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:a("b2c.moments.draft.selectChildFirst")}),e.jsx("button",{onClick:()=>t("/perfil-usuario"),className:"mt-4 rounded-2xl px-4 py-2 text-sm font-semibold transition hover:opacity-90",style:{backgroundColor:"var(--bb-color-accent)",color:"var(--bb-color-surface)"},children:a("b2c.moments.draft.goToProfile")})]})]})},ho={draft:{label:"partner.status.draft.label",shortLabel:"partner.status.draft.shortLabel",hint:"partner.status.draft.hint"},pending_upload:{label:"partner.status.pending_upload.label",shortLabel:"partner.status.pending_upload.shortLabel",hint:"partner.status.pending_upload.hint"},processing:{label:"partner.status.processing.label",shortLabel:"partner.status.processing.shortLabel",hint:"partner.status.processing.hint"},ready:{label:"partner.status.ready.label",shortLabel:"partner.status.ready.shortLabel",hint:"partner.status.ready.hint"},delivered:{label:"partner.status.delivered.label",shortLabel:"partner.status.delivered.shortLabel",hint:"partner.status.delivered.hint"},failed:{label:"partner.status.failed.label",shortLabel:"partner.status.failed.shortLabel",hint:"partner.status.failed.hint"},archived:{label:"partner.status.archived.label",shortLabel:"partner.status.archived.shortLabel",hint:"partner.status.archived.hint"}};function As(t){return ho[t]??ho.draft}function Oa(t){if(!t)return"draft";switch(t){case"completed":return"delivered";case"pending":return"processing";case"failed":return"failed";case"draft":case"pending_upload":case"processing":case"ready":case"delivered":case"archived":return t;default:return"draft"}}function Ds(t){return!!(t.is_archived??t.archived_at)||t.status==="archived"}function Es(t){return Ds(t)?"archived":Oa(t.status)}const wx={narrow:"max-w-3xl",default:"max-w-5xl",wide:"max-w-6xl"};function Ke({children:t,size:r="default",variant:a="transparent",className:s}){return e.jsx("div",{className:D("w-full mx-auto px-4 py-6 sm:py-8",wx[r],a==="card"&&"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-[2.5rem] shadow-lg border border-white/50 dark:border-gray-700/50 p-6 sm:p-10",s),children:t})}const Nx={blue:{bg:"hover:bg-blue-50/50 dark:hover:bg-blue-900/10",text:"text-blue-600 dark:text-blue-400",ring:"hover:ring-blue-100 dark:hover:ring-blue-900/30",iconBg:"bg-blue-100 dark:bg-blue-900/30"},green:{bg:"hover:bg-emerald-50/50 dark:hover:bg-emerald-900/10",text:"text-emerald-600 dark:text-emerald-400",ring:"hover:ring-emerald-100 dark:hover:ring-emerald-900/30",iconBg:"bg-emerald-100 dark:bg-emerald-900/30"},purple:{bg:"hover:bg-purple-50/50 dark:hover:bg-purple-900/10",text:"text-purple-600 dark:text-purple-400",ring:"hover:ring-purple-100 dark:hover:ring-purple-900/30",iconBg:"bg-purple-100 dark:bg-purple-900/30"},pink:{bg:"hover:bg-pink-50/50 dark:hover:bg-pink-900/10",text:"text-pink-600 dark:text-pink-400",ring:"hover:ring-pink-100 dark:hover:ring-pink-900/30",iconBg:"bg-pink-100 dark:bg-pink-900/30"},yellow:{bg:"hover:bg-amber-50/50 dark:hover:bg-amber-900/10",text:"text-amber-600 dark:text-amber-400",ring:"hover:ring-amber-100 dark:hover:ring-amber-900/30",iconBg:"bg-amber-100 dark:bg-amber-900/30"},gray:{bg:"hover:bg-gray-50/50 dark:hover:bg-gray-800/10",text:"text-gray-600 dark:text-gray-400",ring:"hover:ring-gray-200 dark:hover:ring-gray-700",iconBg:"bg-gray-100 dark:bg-gray-700"}};function Vr({icon:t,label:r,value:a,color:s="gray",to:l,description:o,className:i}){const n=Nx[s],d=D("relative overflow-hidden group p-5 rounded-[2.5rem]","bg-white dark:bg-gray-800","border border-gray-100 dark:border-gray-700/50","shadow-sm hover:shadow-xl hover:shadow-gray-200/50 dark:hover:shadow-none transition-all duration-500",n.bg,"hover:ring-1",n.ring,"animate-in fade-in-0 slide-in-from-bottom-2 duration-500",i),u=e.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:D("w-12 h-12 rounded-2xl flex items-center justify-center transition-transform duration-500 group-hover:scale-110 group-hover:rotate-3",n.iconBg,n.text),children:e.jsx(t,{className:"w-6 h-6"})}),l&&e.jsx("div",{className:D("w-8 h-8 rounded-full flex items-center justify-center opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 bg-white/80 dark:bg-gray-700/80 backdrop-blur shadow-sm",n.text),children:e.jsx(Te,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mt-auto",children:[e.jsx("p",{className:"text-4xl font-bold text-gray-900 dark:text-white tabular-nums tracking-tighter mb-1",children:a.toLocaleString("pt-BR")}),e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 dark:text-gray-500 leading-tight",children:r}),o&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700/50",children:e.jsx("p",{className:"text-xs font-medium text-gray-400 dark:text-gray-500",children:o})})]}),e.jsx("div",{className:D("absolute -top-10 -right-10 w-32 h-32 blur-3xl rounded-full opacity-0 group-hover:opacity-20 transition-opacity duration-700 pointer-events-none",n.text.replace("text-","bg-"))})]});return l?e.jsx(W,{to:l,className:D(d,"block cursor-pointer active:scale-[0.98]"),children:u}):e.jsx("div",{className:d,children:u})}function Cx(t){switch(t){case"warning":return{icon:"text-yellow-500",title:"text-gray-900 dark:text-white",description:"text-gray-600 dark:text-gray-400",border:"border-gray-200 dark:border-gray-700"};case"danger":return{icon:"text-red-500",title:"text-gray-900 dark:text-white",description:"text-gray-600 dark:text-gray-400",border:"border-red-200/60 dark:border-red-900/40"};case"neutral":default:return{icon:"text-gray-400 dark:text-gray-500",title:"text-gray-900 dark:text-white",description:"text-gray-600 dark:text-gray-400",border:"border-gray-200 dark:border-gray-700"}}}function Ji({action:t}){const r=t.icon,a="inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl text-sm font-medium bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-sm hover:shadow-md hover:shadow-pink-500/20 hover:-translate-y-0.5 active:scale-[0.98] transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-pink-500/40 focus-visible:ring-offset-2";return"to"in t&&typeof t.to=="string"?e.jsxs(W,{to:t.to,className:a,children:[r?e.jsx(r,{className:"w-4 h-4"}):null,t.label]}):e.jsxs("button",{type:"button",onClick:t.onClick,disabled:t.disabled,className:D(a,t.disabled?"opacity-60 cursor-not-allowed":null),children:[r?e.jsx(r,{className:"w-4 h-4"}):null,t.label]})}function Xi({action:t}){const r=t.icon,a="inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl text-sm font-medium border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:border-pink-300 dark:hover:border-pink-700 hover:text-pink-600 dark:hover:text-pink-400 hover:bg-pink-50/50 dark:hover:bg-pink-950/20 active:scale-[0.98] transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-pink-500/40 focus-visible:ring-offset-2";return"to"in t&&typeof t.to=="string"?e.jsxs(W,{to:t.to,className:a,children:[r?e.jsx(r,{className:"w-4 h-4"}):null,t.label]}):e.jsxs("button",{type:"button",onClick:t.onClick,disabled:t.disabled,className:D(a,t.disabled?"opacity-60 cursor-not-allowed":null),children:[r?e.jsx(r,{className:"w-4 h-4"}):null,t.label]})}function Sx({variant:t,tone:r,icon:a,title:s,description:l,actions:o,children:i}){const n=Cx(r),d=r==="danger"?"bg-red-50 dark:bg-red-900/20 ring-1 ring-red-100 dark:ring-red-900/40":r==="warning"?"bg-amber-50 dark:bg-amber-900/20 ring-1 ring-amber-100 dark:ring-amber-900/40":"bg-pink-50 dark:bg-pink-900/20 ring-1 ring-pink-100 dark:ring-pink-900/40",u=r==="danger"?"text-red-500 dark:text-red-400":r==="warning"?"text-amber-500 dark:text-amber-400":"text-pink-500 dark:text-pink-400",m=t==="page"?"bg-white/40 dark:bg-zinc-900/40 backdrop-blur-xl rounded-[2.5rem] border border-white/20 dark:border-white/5 shadow-[0_8px_30px_rgb(0,0,0,0.04)] p-12":"",p=t==="page"?"max-w-md mx-auto text-center":"text-center",f=t==="page"?"":"py-12";return e.jsx(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:D(m,n.border),children:e.jsxs("div",{className:D(p,f),children:[a?e.jsx("div",{className:D("w-16 h-16 mx-auto mb-5 rounded-full flex items-center justify-center transition-transform duration-300 hover:scale-105",d),children:e.jsx(a,{className:D("w-8 h-8",u)})}):null,e.jsx("h2",{className:"text-2xl font-serif font-bold text-gray-900 dark:text-white mb-3",children:s}),l?e.jsx("p",{className:"text-base text-gray-500 dark:text-gray-400 mb-8 leading-relaxed max-w-sm mx-auto",children:l}):null,i?e.jsx("div",{className:"mb-5",children:i}):null,o!=null&&o.primary||o!=null&&o.secondary?e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-center gap-3",children:[o.secondary?e.jsx(Xi,{action:o.secondary}):null,o.primary?e.jsx(Ji,{action:o.primary}):null]}):null]})})}function Ut({variant:t="page",size:r="default",title:a="Ops! Algo deu errado",description:s,errorDetails:l,onRetry:o,primaryAction:i,secondaryAction:n,skeleton:d,autoReloadInDev:u=!0}){const p="babybook_reload_attempts";c.useEffect(()=>{},[!1]);const x=()=>{sessionStorage.removeItem(p),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(h=>{h.forEach(k=>k.unregister())}),"caches"in window&&caches.keys().then(h=>{h.forEach(k=>caches.delete(k))}),window.location.reload()},g=e.jsx("div",{role:"alert","aria-live":"assertive",className:D(t==="page"?"py-12":"py-8"),children:e.jsxs("div",{className:D("bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 text-center max-w-md mx-auto",t==="page"?"border border-gray-200 dark:border-gray-700":""),children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:a}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:s??"Ocorreu um erro inesperado. Tente novamente ou recarregue a p√°gina."}),!1,e.jsxs("div",{className:"flex gap-3 justify-center",children:[n?e.jsx(Xi,{action:n}):e.jsx("button",{onClick:o??x,className:"px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Tentar novamente"}),i?e.jsx(Ji,{action:i}):e.jsx("button",{onClick:x,className:"px-4 py-2 rounded-lg bg-pink-500 text-white hover:bg-pink-600 transition-colors",children:"Recarregar p√°gina"})]})]})});return t==="page"?e.jsx(Ke,{size:r,children:g}):g}function _x({variant:t="page",size:r="default",tone:a="neutral",icon:s,title:l,description:o,primaryAction:i,secondaryAction:n}){const d=e.jsx(Sx,{variant:t,tone:a,icon:s,title:l,description:o,actions:i||n?{primary:i,secondary:n}:void 0});return t==="page"?e.jsx(Ke,{size:r,children:d}):d}const go="@babybook/partner-onboarding-dismissed",Jt=[{id:"profile",titleKey:"partner.onboarding.steps.profile.title",descriptionKey:"partner.onboarding.steps.profile.description",icon:ft,to:"/partner/settings",check:t=>t.hasCompletedProfile},{id:"credits",titleKey:"partner.onboarding.steps.credits.title",descriptionKey:"partner.onboarding.steps.credits.description",icon:tt,to:"/partner/credits",check:t=>t.hasCredits},{id:"delivery",titleKey:"partner.onboarding.steps.delivery.title",descriptionKey:"partner.onboarding.steps.delivery.description",icon:Pt,to:"/partner/deliveries/new",check:t=>t.hasDeliveries},{id:"stats",titleKey:"partner.onboarding.steps.stats.title",descriptionKey:"partner.onboarding.steps.stats.description",icon:Ga,to:"/partner",check:t=>t.hasFiveDeliveries}];function Ax({stats:t}){const{t:r}=ce(),[a,s]=c.useState(!1),[l,o]=c.useState(!1);c.useEffect(()=>{localStorage.getItem(go)==="true"&&s(!0),o(!0)},[]);const i=()=>{s(!0),localStorage.setItem(go,"true")},n=Jt.filter(m=>m.check(t)).length,d=n/Jt.length*100,u=n===Jt.length;return!l||a||u?null:e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-950/30 dark:to-rose-950/30 rounded-2xl border border-pink-100 dark:border-pink-900/50 p-6 mb-6 animate-in fade-in-0 slide-in-from-top-2 duration-500",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-rose-500 rounded-xl flex items-center justify-center shadow-sm",children:e.jsx(pe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r("partner.onboarding.title")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("partner.onboarding.subtitle")})]})]}),e.jsx("button",{onClick:i,className:"p-1.5 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 rounded-lg hover:bg-white/50 dark:hover:bg-gray-800/50 transition-colors",title:"Dispensar guia de primeiros passos","aria-label":"Dispensar",children:e.jsx(De,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1.5",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:n===0?r("partner.onboarding.progress.start"):n===Jt.length-1?r("partner.onboarding.progress.almost"):r("partner.onboarding.progress.continue")}),e.jsx("span",{className:"font-medium text-pink-600 dark:text-pink-400",children:r("partner.onboarding.progress.etapas",{current:n,total:Jt.length})})]}),e.jsx("div",{className:"h-2 bg-white dark:bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-rose-500 transition-all duration-500",style:{width:`${d}%`}})})]}),e.jsx("div",{className:"space-y-2",children:Jt.map(m=>{const p=m.check(t),f=m.icon;return e.jsxs(W,{to:m.to,className:`flex items-center gap-3 p-3 rounded-xl transition-all ${p?"bg-green-50 dark:bg-green-900/20 border border-green-100 dark:border-green-800/50":"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 hover:border-pink-200 dark:hover:border-pink-800 hover:shadow-sm"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${p?"bg-green-500 text-white":"bg-pink-100 dark:bg-pink-900/50 text-pink-600 dark:text-pink-400"}`,children:p?e.jsx($e,{className:"w-4 h-4"}):e.jsx(f,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm font-medium ${p?"text-green-700 dark:text-green-300 line-through":"text-gray-900 dark:text-white"}`,children:r(m.titleKey)}),e.jsx("p",{className:`text-xs ${p?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:r(m.descriptionKey)})]}),!p&&e.jsx(Te,{className:"w-4 h-4 text-gray-400 dark:text-gray-500 flex-shrink-0"})]},m.id)})})]})}function Kr({icon:t,label:r,value:a,subValue:s,color:l}){const o={pink:"bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400",green:"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",blue:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",purple:"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400"};return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[e.jsx("div",{className:D("w-10 h-10 rounded-lg flex items-center justify-center",o[l]),children:e.jsx(t,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a}),s&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:s})]})]})}function Dx({totalDeliveries:t,totalVouchers:r,redeemedVouchers:a,isLoading:s,deliveries:l}){const o=c.useMemo(()=>{const n=r>0?Math.round(a/r*100):0,d=l.reduce((g,h)=>g+(h.assets_count||0),0),u=l.length>0?Math.round(d/l.length):0,m=new Date,p=new Date(m.getFullYear(),m.getMonth()-2,1),f={};for(let g=0;g<3;g++){const k=new Date(m.getFullYear(),m.getMonth()-g,1).toLocaleDateString("pt-BR",{month:"short"});f[k]=0}l.forEach(g=>{const h=new Date(g.created_at);if(h>=p){const k=h.toLocaleDateString("pt-BR",{month:"short"});f[k]!==void 0&&f[k]++}});const x=l.filter(g=>g.redeemed_at).sort((g,h)=>new Date(h.redeemed_at).getTime()-new Date(g.redeemed_at).getTime())[0],b=x?`${x.client_name||"Cliente"} - ${new Date(x.redeemed_at).toLocaleDateString("pt-BR")}`:"Nenhum resgate ainda";return{conversionRate:n,avgPhotos:u,monthlyDeliveries:Object.entries(f).reverse(),lastRedemptionText:b}},[r,a,l]);if(t<5)return null;if(s)return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(z,{className:"w-8 h-8 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(z,{className:"h-4 w-48 rounded"}),e.jsx(z,{className:"h-3 w-64 rounded"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:Array.from({length:4}).map((n,d)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl border border-transparent",children:[e.jsx(z,{className:"w-10 h-10 rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(z,{className:"h-3 w-28 rounded"}),e.jsx(z,{className:"h-5 w-36 rounded"})]})]},d))}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl space-y-3",children:[e.jsx(z,{className:"h-4 w-40 rounded mb-3"}),e.jsx("div",{className:"flex items-end gap-2 h-20",children:Array.from({length:3}).map((n,d)=>e.jsx(z,{className:"flex-1 h-full rounded-t-lg",style:{height:`${30+d*20}%`}},d))})]})]});const i=Math.max(...o.monthlyDeliveries.map(([,n])=>n),1);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-[1.5rem] border border-gray-200 dark:border-gray-700 p-6 mb-6 animate-in fade-in-0 slide-in-from-bottom-2 duration-500 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-pink-500 to-purple-500 rounded-lg flex items-center justify-center",children:e.jsx(pe,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Estat√≠sticas Detalhadas"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"M√©tricas avan√ßadas do seu est√∫dio"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[e.jsx(Kr,{icon:Ko,label:"Taxa de Convers√£o",value:`${o.conversionRate}%`,subValue:"Vouchers resgatados / gerados",color:"green"}),e.jsx(Kr,{icon:gt,label:"M√©dia de Fotos",value:`${o.avgPhotos} fotos`,subValue:"Por entrega",color:"blue"}),e.jsx(Kr,{icon:Be,label:"√öltimo Resgate",value:o.lastRedemptionText.split(" - ")[0],subValue:o.lastRedemptionText.includes(" - ")?o.lastRedemptionText.split(" - ")[1]:void 0,color:"purple"}),e.jsx(Kr,{icon:Xn,label:"Total de Entregas",value:t,subValue:"Desde o in√≠cio",color:"pink"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ga,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Entregas por M√™s"})]}),e.jsx("div",{className:"flex items-end justify-between gap-2 h-20",children:o.monthlyDeliveries.map(([n,d])=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full bg-gradient-to-t from-pink-500 to-rose-400 rounded-t-md transition-all duration-500",style:{height:`${Math.max(d/i*100,d>0?15:5)}%`,minHeight:d>0?"12px":"4px"}}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:n}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:d})]},n))})]})]})}function Ps(t,r){return new Date(t).toLocaleDateString(r,{day:"2-digit",month:"short",year:"numeric"})}const fo={draft:{icon:sr,className:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",labelKey:"partner.status.draft.label",shortLabelKey:"partner.status.draft.shortLabel"},pending_upload:{icon:sr,className:"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-700 dark:text-yellow-300",labelKey:"partner.status.pending_upload.label",shortLabelKey:"partner.status.pending_upload.shortLabel"},processing:{icon:fe,className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300",labelKey:"partner.status.processing.label",shortLabelKey:"partner.status.processing.shortLabel"},ready:{icon:$e,className:"bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300",labelKey:"partner.status.ready.label",shortLabelKey:"partner.status.ready.shortLabel"},delivered:{icon:Be,className:"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300",labelKey:"partner.status.delivered.label",shortLabelKey:"partner.status.delivered.shortLabel"},failed:{icon:De,className:"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300",labelKey:"partner.status.failed.label",shortLabelKey:"partner.status.failed.shortLabel"},archived:{icon:Pt,className:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400",labelKey:"partner.status.archived.label",shortLabelKey:"partner.status.archived.shortLabel"}};function Ms({status:t}){const{t:r}=ce(),a=fo[t]||fo.draft,s=a.icon,l=As(t);return e.jsxs("span",{title:r(l.hint),"aria-label":`${r(a.labelKey)}. ${r(l.hint)}`,className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${a.className}`,children:[e.jsx(s,{className:`w-3 h-3 ${t==="processing"?"animate-spin":""}`}),e.jsx("span",{className:"sm:hidden",children:r(a.shortLabelKey)}),e.jsx("span",{className:"hidden sm:inline",children:r(a.labelKey)})]})}const Ex={reserved:{icon:sr,label:"Cr√©dito reservado",shortLabel:"Reservado",title:"Cr√©dito reservado e em processamento. Ser√° consumido ou devolvido quando o cliente resgatar.",pillClassName:"bg-amber-100 dark:bg-amber-900/40 text-amber-800 dark:text-amber-200",subtleClassName:"text-amber-800 dark:text-amber-200"},not_required:{icon:Be,label:"Sem custo",shortLabel:"Sem custo",title:"Esta entrega n√£o requer voucher para existir. S√≥ haver√° cobran√ßa se o cliente criar um novo Baby Book.",pillClassName:"bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-200",subtleClassName:"text-blue-800 dark:text-blue-200"},consumed:{icon:$e,label:"Cr√©dito usado",shortLabel:"Usado",title:"Cr√©dito utilizado com sucesso.",pillClassName:"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-800 dark:text-emerald-200",subtleClassName:"text-emerald-800 dark:text-emerald-200"},refunded:{icon:Ja,label:"Cr√©dito devolvido",shortLabel:"Devolvido",title:"Cr√©dito devolvido automaticamente (ex.: cliente vinculou a um Baby Book existente).",pillClassName:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",subtleClassName:"text-gray-600 dark:text-gray-300"}};function Px(t){return Ex[t]}function Ts({status:t,variant:r="pill"}){if(!t)return null;const a=Px(t),s=a.icon,o=r==="subtle"?`inline-flex items-center gap-1.5 text-[11px] font-medium ${a.subtleClassName}`:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[11px] font-semibold tracking-wide ${a.pillClassName}`;return e.jsxs("span",{title:a.title,"aria-label":`${a.label}. ${a.title}`,className:o,children:[e.jsx(s,{className:"w-3 h-3 opacity-80"}),e.jsx("span",{className:"sm:hidden",children:a.shortLabel}),e.jsx("span",{className:"hidden sm:inline",children:a.label})]})}const Mx="N√£o informado",Rs="N√£o gerado";function Zi({delivery:t,onArchive:r,isArchiving:a,variant:s="default"}){const{t:l}=ce(),{language:o}=St(),i=Ds(t),n=Es(t),d=!!t.voucher_code;return e.jsxs(E.div,{variants:{hidden:{opacity:0,y:15},visible:{opacity:1,y:0}},className:`rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-zinc-900 overflow-hidden shadow-sm hover:shadow-md active:scale-[0.98] transition-all duration-300 ${i?"opacity-70":""}`,children:[e.jsxs(W,{to:`/partner/deliveries/${t.id}`,className:"block p-4",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-11 h-11 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Ge,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white text-base leading-tight line-clamp-2",children:t.title||t.client_name||"Sem t√≠tulo"}),t.client_name&&t.title&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate mt-0.5",children:t.client_name})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ms,{status:n})})]})})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:Ps(t.created_at,o)}),t.voucher_code?e.jsx("span",{className:"font-mono text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2.5 py-1 rounded-md",children:t.voucher_code}):e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 italic",title:n==="ready"?"Entrega pronta. Gere o voucher nos detalhes.":"O voucher aparece ap√≥s a entrega ficar pronta.",children:Rs})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 px-4 py-3 border-t border-gray-100 dark:border-gray-700/50 bg-gray-50/50 dark:bg-gray-800/50",children:[e.jsx(Ts,{status:t.credit_status,variant:d?"subtle":"pill"}),e.jsxs("div",{className:"flex items-center gap-2",children:[s==="default"&&e.jsx(Tx,{isArchived:i,isArchiving:a,onArchive:r}),e.jsxs(W,{to:`/partner/deliveries/${t.id}`,className:"inline-flex items-center gap-1.5 px-3 py-2 rounded-lg bg-pink-500 hover:bg-pink-600 text-white text-sm font-medium transition-colors",onClick:u=>u.stopPropagation(),children:[l("partner.deliveries.actions.open"),e.jsx(Te,{className:"w-4 h-4"})]})]})]})]})}function Tx({isArchived:t,isArchiving:r,onArchive:a}){const[s,l]=c.useState(!1),{t:o}=ce(),i=u=>{u.preventDefault(),u.stopPropagation(),t?a(!1):l(!0)},n=u=>{u.preventDefault(),u.stopPropagation(),l(!1),a(!0)},d=u=>{u.preventDefault(),u.stopPropagation(),l(!1)};return s?e.jsxs("span",{className:"inline-flex items-center gap-1 bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg px-2 py-1",children:[e.jsx("button",{type:"button",onClick:n,className:"p-1 text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/50 rounded transition-colors",title:o("common.confirm"),"aria-label":o("common.confirm"),children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:d,className:"p-1 text-red-500 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded transition-colors",title:o("common.cancel"),"aria-label":o("common.cancel"),children:e.jsx(De,{className:"w-5 h-5"})})]}):e.jsx("button",{type:"button",onClick:i,disabled:r,className:"p-2.5 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 hover:text-gray-700 dark:hover:text-gray-200 transition-colors disabled:opacity-50",title:o(t?"partner.deliveries.archive.unarchive":"partner.deliveries.archive.action"),"aria-label":o(t?"partner.deliveries.archive.unarchive":"partner.deliveries.archive.action"),children:r?e.jsx(fe,{className:"w-5 h-5 animate-spin"}):t?e.jsx(Ja,{className:"w-5 h-5"}):e.jsx(Ka,{className:"w-5 h-5"})})}const Is="grid-cols-[2.5fr,1fr,1.2fr,0.8fr,auto]";function en({delivery:t,isSelected:r,onPreview:a,onArchive:s,isArchiving:l,variant:o="default"}){const{t:i}=ce(),{language:n}=St(),d=Ds(t),u=Es(t);t.voucher_code;const m=p=>{const f=p.target;f!=null&&f.closest("a,button,input,select,textarea,[role='button']")||a()};return e.jsxs(E.div,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},onClick:m,className:`
        group
        grid ${Is} items-center gap-4 px-6 py-4
        cursor-pointer
        bg-white dark:bg-transparent
        hover:bg-gray-50 dark:hover:bg-gray-700/30
        active:scale-[0.99]
        transition-all duration-300
        ${d?"opacity-70 grayscale":""}
        ${r?"bg-pink-50/60 dark:bg-pink-900/10 ring-1 ring-inset ring-pink-100 dark:ring-pink-900/30":""}
      `,children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-50 dark:bg-gray-800 rounded-xl flex items-center justify-center flex-shrink-0 border border-gray-100 dark:border-gray-700",children:e.jsx(Ge,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx(W,{to:`/partner/deliveries/${t.id}`,className:"font-bold text-gray-900 dark:text-white truncate hover:text-pink-600 dark:hover:text-pink-400 transition-colors",children:t.title||"Sem t√≠tulo"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(ft,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:t.client_name||Mx})]})]})]}),e.jsx("div",{children:e.jsx(Ms,{status:u})}),e.jsxs("div",{className:"flex flex-col items-start gap-1",children:[t.voucher_code?e.jsx("span",{className:"font-mono text-xs font-bold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded border border-gray-200 dark:border-gray-700 select-all",children:t.voucher_code}):e.jsx("span",{className:"text-xs text-gray-400 italic",children:Rs}),e.jsx(Ts,{status:t.credit_status,variant:"subtle"})]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:Ps(t.created_at,n)}),e.jsxs("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-opacity",children:[o==="default"&&e.jsx(e.Fragment,{children:e.jsx(Rx,{isArchived:d,isArchiving:l,onArchive:s})}),e.jsx(W,{to:`/partner/deliveries/${t.id}`,className:"p-2 rounded-lg text-gray-400 hover:text-pink-600 dark:hover:text-pink-400 hover:bg-pink-50 dark:hover:bg-pink-900/20 transition-colors ml-1",title:i("partner.deliveries.actions.open"),children:e.jsx(Te,{className:"w-4 h-4"})})]})]})}function Rx({isArchived:t,isArchiving:r,onArchive:a}){const[s,l]=c.useState(!1),{t:o}=ce(),i=u=>{u.preventDefault(),u.stopPropagation(),t?a(!1):l(!0)},n=u=>{u.preventDefault(),u.stopPropagation(),l(!1),a(!0)},d=u=>{u.preventDefault(),u.stopPropagation(),l(!1)};return s?e.jsxs("span",{className:"flex items-center gap-1 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/50 rounded-lg p-0.5 animate-in fade-in zoom-in duration-200",children:[e.jsx("button",{type:"button",onClick:n,className:"p-1.5 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-md transition-colors",title:o("common.confirm"),children:e.jsx($e,{className:"w-3.5 h-3.5"})}),e.jsx("button",{type:"button",onClick:d,className:"p-1.5 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:o("common.cancel"),children:e.jsx(De,{className:"w-3.5 h-3.5"})})]}):e.jsx("button",{type:"button",onClick:i,disabled:r,title:o(t?"partner.deliveries.archive.unarchive":"partner.deliveries.archive.action"),className:"p-2 rounded-lg text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors disabled:opacity-50",children:r?e.jsx(fe,{className:"w-4 h-4 animate-spin"}):t?e.jsx(Ja,{className:"w-4 h-4"}):e.jsx(Ka,{className:"w-4 h-4"})})}function Z({className:t}){return e.jsx("div",{className:D("animate-pulse rounded-md bg-gray-200 dark:bg-gray-700",t)})}function vo(){return e.jsx(Ke,{children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsxs("div",{className:"hidden md:block",children:[e.jsx(Z,{className:"h-7 w-40"}),e.jsx(Z,{className:"h-4 w-64 mt-2"})]}),e.jsx("div",{className:"rounded-2xl p-6 bg-gradient-to-r from-gray-200 to-gray-100 dark:from-gray-800 dark:to-gray-700 h-40"}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:Array.from({length:4}).map((t,r)=>e.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx(Z,{className:"h-10 w-10 rounded-lg mb-3"}),e.jsx(Z,{className:"h-7 w-16"}),e.jsx(Z,{className:"h-4 w-24 mt-2"}),e.jsx(Z,{className:"h-3 w-28 mt-2"})]},r))}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsx(Z,{className:"h-5 w-40"}),e.jsx(Z,{className:"h-4 w-16"})]}),e.jsx("div",{className:"p-4 space-y-3",children:Array.from({length:3}).map((t,r)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Z,{className:"h-10 w-10 rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Z,{className:"h-4 w-44"}),e.jsx(Z,{className:"h-3 w-64 mt-2"})]}),e.jsx(Z,{className:"h-6 w-24 rounded-full hidden sm:block"})]},r))})]})]})})}function Ix(t){const r=new Date().getHours();return r>=5&&r<12?"Bom dia":r>=12&&r<18?"Boa tarde":"Boa noite"}function Lx(t,r){const{hasLowCredits:a,hasReadyDeliveries:s,hasPendingUpload:l,deliveriesCount:o,redeemedCount:i}=t;return l?{icon:sr,text:r("partner.dashboard.tips.pendingUpload"),color:"text-amber-600 dark:text-amber-400"}:s?{icon:Be,text:r("partner.dashboard.tips.readyDeliveries"),color:"text-emerald-600 dark:text-emerald-400"}:a?{icon:tt,text:r("partner.dashboard.tips.lowCredits"),color:"text-pink-600 dark:text-pink-400"}:i>0&&o>=5?{icon:Ko,text:r("partner.dashboard.tips.growth",{count:i}),color:"text-purple-600 dark:text-purple-400"}:o===0?{icon:pe,text:r("partner.dashboard.tips.firstDelivery"),color:"text-pink-600 dark:text-pink-400"}:null}function Fx(){const t=ve(),{t:r}=ce(),{data:a,isLoading:s,isError:l,error:o,refetch:i}=be({queryKey:["partner","profile"],queryFn:na}),{data:n,isLoading:d,isError:u,error:m,refetch:p}=be({queryKey:["partner","stats"],queryFn:xs}),{data:f,isLoading:x,isError:b,error:g,refetch:h}=be({queryKey:["partner","deliveries","recent"],queryFn:()=>Gr({limit:5,include_archived:!1,sort:"newest"})}),{data:k,isLoading:v,isError:y,error:N,refetch:_}=be({queryKey:["partner","deliveries","needs_action"],queryFn:()=>Gr({view:"needs_action",limit:20,include_archived:!1}),staleTime:15e3}),A=((n==null?void 0:n.total_deliveries)??0)>=5,{data:G,isLoading:O,isError:C,error:j,refetch:w}=be({queryKey:["partner","deliveries","insights","last_90"],enabled:A,queryFn:()=>Gr({created:"last_90",limit:200,include_archived:!1,sort:"newest"})}),I=s||d||x||v;Tt(c.useMemo(()=>({title:"",actions:null}),[]));const M=()=>{i(),p(),h(),_(),w()},V=l||u||b||y||C,J=o instanceof Error&&o.message||m instanceof Error&&m.message||g instanceof Error&&g.message||N instanceof Error&&N.message||j instanceof Error&&j.message||null,ae=(f==null?void 0:f.deliveries)??[],L=(n==null?void 0:n.voucher_balance)??0,ee=(n==null?void 0:n.reserved_credits)??0,ne=L<=2,B=((k==null?void 0:k.deliveries)??[]).find(H=>Oa(H.status)==="pending_upload")??ae.find(H=>Oa(H.status)==="pending_upload"),se=(n==null?void 0:n.ready_deliveries)??0,he=c.useMemo(()=>V?null:Lx({hasLowCredits:ne,hasReadyDeliveries:se>0,hasPendingUpload:!!B,deliveriesCount:(n==null?void 0:n.total_deliveries)??0,redeemedCount:(n==null?void 0:n.redeemed_vouchers)??0},r),[V,ne,se,B,n==null?void 0:n.total_deliveries,n==null?void 0:n.redeemed_vouchers,r]),ye=c.useMemo(()=>({hasCompletedProfile:!!(a!=null&&a.studio_name),hasCredits:L>0||ee>0,hasDeliveries:ae.length>0,hasFiveDeliveries:((n==null?void 0:n.total_deliveries)??0)>=5}),[a==null?void 0:a.studio_name,L,ee,ae.length,n==null?void 0:n.total_deliveries]);return I?e.jsx(vo,{}):V?e.jsx(Ut,{variant:"page",errorDetails:J,onRetry:M,skeleton:e.jsx(vo,{}),secondaryAction:{label:r("partner.dashboard.viewAllDeliveries"),to:"/partner/deliveries",icon:Pt}}):e.jsxs(Ke,{children:[e.jsxs("div",{"data-tour":"dashboard-header",className:"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-8 pt-4 sm:pt-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-gray-500 dark:text-gray-400 font-medium text-sm",children:[e.jsx("span",{children:Ix()}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-600"}),e.jsx("span",{className:"truncate max-w-[200px]",children:(a==null?void 0:a.studio_name)||(a==null?void 0:a.name)||r("common.name")})]}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-serif font-bold text-gray-900 dark:text-white tracking-tight",children:"Dashboard"}),he&&e.jsxs("div",{className:`flex items-center gap-2 mt-3 ${he.color} animate-in fade-in slide-in-from-left-2 duration-500`,children:[e.jsx(he.icon,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("p",{className:"text-sm font-medium",children:he.text})]})]}),e.jsxs(W,{to:"/partner/deliveries/new",className:"group relative inline-flex items-center justify-center gap-2 px-6 py-3.5 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-2xl font-bold shadow-lg shadow-gray-900/10 dark:shadow-white/10 overflow-hidden transition-transform active:scale-95",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-500 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"}),e.jsx("span",{children:r("partner.deliveries.newDelivery")})]})]})]}),e.jsx(Ax,{stats:ye}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{"data-tour":"credits-card",className:"lg:col-span-2 relative overflow-hidden rounded-[2.5rem] bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white p-8 shadow-2xl shadow-gray-200/50 dark:shadow-none isolate group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-pink-500/20 rounded-full blur-[80px] -mr-20 -mt-20 pointer-events-none group-hover:bg-pink-500/30 transition-colors duration-700"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-blue-500/20 rounded-full blur-[60px] -ml-20 -mb-20 pointer-events-none group-hover:bg-blue-500/30 transition-colors duration-700"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between h-full gap-8",children:[e.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 opacity-80",children:[e.jsx("div",{className:"p-2 bg-white/10 rounded-xl backdrop-blur-md",children:e.jsx(tt,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"font-medium tracking-wide text-sm uppercase",children:"BabyBook Business"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-400 uppercase tracking-widest",children:"Saldo Dispon√≠vel"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-6xl sm:text-7xl font-bold tracking-tighter",children:L}),e.jsx("span",{className:"text-xl text-gray-400 font-medium",children:"cr√©ditos"})]})]})]}),e.jsxs("div",{className:"mt-8 flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(ir,{className:"w-4 h-4"}),e.jsxs("span",{children:[e.jsxs("strong",{className:"text-white",children:[ee," cr√©ditos"]})," ","reservados em rascunhos"]})]})]}),e.jsxs("div",{className:"flex flex-col justify-end gap-3 min-w-[200px]",children:[e.jsxs(W,{to:"/partner/credits",className:"flex items-center justify-between px-5 py-4 bg-white text-gray-900 rounded-2xl font-bold hover:bg-gray-50 active:scale-95 transition-all shadow-lg",children:[e.jsx("span",{children:"Comprar Cr√©ditos"}),e.jsx(Ie,{className:"w-5 h-5"})]}),e.jsxs(W,{to:"/partner/credits/extract",className:"flex items-center justify-between px-5 py-4 bg-white/10 text-white rounded-2xl font-semibold hover:bg-white/15 backdrop-blur-md active:scale-95 transition-all",children:[e.jsx("span",{children:"Extrato e Uso"}),e.jsx(Te,{className:"w-5 h-5 opacity-60"})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1 rounded-[2.5rem] p-8 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl border border-white/50 dark:border-gray-700/50 shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-black/20 flex flex-col justify-center relative overflow-hidden",children:B?e.jsxs(W,{to:`/partner/deliveries/${B.id}/upload`,className:"flex flex-col h-full justify-between group",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300",children:e.jsx(sr,{className:"w-7 h-7"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white leading-tight",children:"Continuar Entrega"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm leading-relaxed",children:"Voc√™ tem uma entrega pendente de upload. Finalize agora para liberar."})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-2 text-amber-600 dark:text-amber-400 font-bold group-hover:translate-x-1 transition-transform",children:[e.jsx("span",{children:"Retomar Upload"}),e.jsx(Ie,{className:"w-4 h-4"})]})]}):se>0?e.jsxs(W,{to:"/partner/deliveries?status=ready",className:"flex flex-col h-full justify-between group",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300",children:e.jsx(Be,{className:"w-7 h-7"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white leading-tight",children:"Liberar Entregas"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm leading-relaxed",children:["Voc√™ tem ",e.jsxs("strong",{children:[se," entregas"]})," prontas. Gere os links ou vouchers agora."]})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-2 text-emerald-600 dark:text-emerald-400 font-bold group-hover:translate-x-1 transition-transform",children:[e.jsx("span",{children:"Ver Prontas"}),e.jsx(Ie,{className:"w-4 h-4"})]})]}):e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400 flex items-center justify-center mb-4",children:e.jsx(pe,{className:"w-7 h-7"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white leading-tight",children:"Tudo em dia!"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm leading-relaxed",children:"Voc√™ n√£o tem a√ß√µes pendentes urgentes. Que tal criar uma nova entrega?"})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(W,{to:"/partner/deliveries/new",className:"inline-flex items-center gap-2 text-pink-600 dark:text-pink-400 font-bold hover:translate-x-1 transition-transform",children:[e.jsx("span",{children:"Nova Entrega"}),e.jsx(Ie,{className:"w-4 h-4"})]})})]})})]}),e.jsxs("div",{"data-tour":"stats-grid",className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[e.jsx(Vr,{icon:Pt,label:r("partner.dashboard.stats.totalDeliveries"),value:(n==null?void 0:n.total_deliveries)||0,color:"blue",to:"/partner/deliveries",description:r("partner.dashboard.viewAllDeliveries")}),e.jsx(Vr,{icon:$e,label:r("partner.deliveries.status.ready"),value:se,color:"green",to:"/partner/deliveries?status=ready",description:se>0?"Link/voucher ‚Üí":r("common.none")}),e.jsx(Vr,{icon:Bt,label:r("partner.dashboard.stats.pendingDeliveries"),value:(n==null?void 0:n.pending_vouchers)||0,color:"purple",to:"/partner/deliveries?voucher=with&redeemed=not_redeemed",description:"Aguardando resgate"}),e.jsx(Vr,{icon:Be,label:r("partner.dashboard.stats.completedDeliveries"),value:(n==null?void 0:n.delivered_deliveries)||0,color:"pink",to:"/partner/deliveries?status=delivered",description:r("partner.deliveries.status.delivered")})]}),e.jsx(Dx,{totalDeliveries:(n==null?void 0:n.total_deliveries)||0,totalVouchers:(n==null?void 0:n.total_vouchers)||0,redeemedVouchers:(n==null?void 0:n.redeemed_vouchers)||0,deliveries:(G==null?void 0:G.deliveries)??ae,isLoading:A&&O}),e.jsxs("div",{"data-tour":"recent-deliveries",className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-[2.5rem] shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-black/20 border border-white/50 dark:border-gray-700/50 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 sm:p-8 border-b border-gray-100 dark:border-gray-700/50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r("partner.dashboard.recentDeliveries")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Suas √∫ltimas atividades"})]}),e.jsxs(W,{to:"/partner/deliveries",className:"group flex items-center gap-2 px-4 py-2 rounded-xl bg-gray-50 dark:bg-gray-900 text-gray-600 dark:text-gray-300 hover:bg-pink-50 hover:text-pink-600 dark:hover:bg-pink-900/20 dark:hover:text-pink-400 transition-colors font-medium text-sm",children:[e.jsx("span",{children:r("common.all")}),e.jsx(Te,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"})]})]}),ae.length===0?e.jsxs("div",{className:"p-12 sm:p-16 text-center flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-3xl bg-pink-50 dark:bg-pink-900/20 flex items-center justify-center mb-6 rotate-3",children:e.jsx(pe,{className:"w-8 h-8 text-pink-500 dark:text-pink-400"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:r("partner.dashboard.startFirstDelivery")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 max-w-sm mx-auto leading-relaxed",children:r("partner.deliveries.list.emptyDescription")}),e.jsxs(W,{to:"/partner/deliveries/new",className:"inline-flex items-center gap-2 px-8 py-3 bg-pink-500 text-white rounded-xl hover:bg-pink-600 active:scale-[0.98] transition-all font-bold shadow-lg shadow-pink-500/20",children:[e.jsx(Ye,{className:"w-5 h-5"}),r("partner.deliveries.newDelivery")]})]}):e.jsxs(e.Fragment,{children:[e.jsx(E.div,{initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.1}}},className:"lg:hidden grid gap-4 p-4",children:ae.map(H=>e.jsx(Zi,{delivery:H,onArchive:()=>{},isArchiving:!1,variant:"dashboard"},H.id))}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("div",{className:"flex flex-col min-w-[700px]",children:[e.jsxs("div",{className:`grid ${Is} items-center gap-4 px-6 py-4 bg-gray-50/50 dark:bg-gray-900/30 text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400 border-b border-gray-100 dark:border-gray-800/50`,children:[e.jsx("div",{children:"Entrega / Cliente"}),e.jsx("div",{children:"Status"}),e.jsx("div",{children:"Voucher"}),e.jsx("div",{children:"Criado em"}),e.jsx("div",{className:"text-right",children:"A√ß√µes"})]}),e.jsx(E.div,{initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.05}}},className:"divide-y divide-gray-50 dark:divide-zinc-800/50",children:ae.map(H=>e.jsx(en,{delivery:H,isSelected:!1,onPreview:()=>t(`/partner/deliveries/${H.id}`),onArchive:()=>{},isArchiving:!1,variant:"dashboard"},H.id))})]})})]})]}),e.jsx(Bi,{steps:Gm,tourKey:Km})]})}function yo(){return e.jsx(Ke,{children:e.jsxs("div",{className:"pb-60 lg:pb-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(Z,{className:"h-8 w-48 mb-2"}),e.jsx(Z,{className:"h-6 w-96 max-w-full"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx("div",{className:"relative overflow-hidden rounded-2xl p-6 border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-950",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(Z,{className:"h-5 w-32"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"h-10 w-24"}),e.jsx(Z,{className:"h-4 w-40"})]})]}),e.jsx("div",{className:"hidden md:block h-24 w-px bg-gray-200 dark:bg-gray-800"}),e.jsxs("div",{className:"md:pl-6 space-y-2",children:[e.jsx(Z,{className:"h-4 w-24"}),e.jsx(Z,{className:"h-8 w-16"}),e.jsx(Z,{className:"h-3 w-32"})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Z,{className:"h-7 w-48 mb-4"}),e.jsx("div",{className:"grid gap-4",children:Array.from({length:3}).map((t,r)=>e.jsx("div",{className:"w-full rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-5",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-6 w-32"}),r===1&&e.jsx(Z,{className:"h-5 w-24 rounded-full"})]}),e.jsx(Z,{className:"h-4 w-24"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Z,{className:"h-3 w-40"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx(Z,{className:"h-7 w-28"}),e.jsx(Z,{className:"h-4 w-20"})]})]})]}),e.jsx(Z,{className:"w-6 h-6 rounded-full"})]})},r))})]}),e.jsxs("div",{className:"p-6 rounded-xl border border-gray-100 dark:border-gray-800 space-y-4",children:[e.jsx(Z,{className:"h-6 w-48"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"h-4 w-full"}),e.jsx(Z,{className:"h-4 w-3/4"}),e.jsx(Z,{className:"h-4 w-5/6"})]})]})]}),e.jsx("div",{className:"hidden lg:block lg:col-span-1 sticky top-24",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 space-y-6",children:[e.jsx(Z,{className:"h-6 w-32"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{className:"h-10 flex-1 rounded-lg"}),e.jsx(Z,{className:"h-10 flex-1 rounded-lg"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(Z,{className:"h-4 w-16"}),e.jsx(Z,{className:"h-4 w-24"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(Z,{className:"h-4 w-20"}),e.jsx(Z,{className:"h-4 w-8"})]}),e.jsx(Z,{className:"h-px w-full my-2"}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx(Z,{className:"h-5 w-12"}),e.jsx(Z,{className:"h-8 w-24"})]})]}),e.jsx(Z,{className:"h-14 w-full rounded-xl"})]})})]})]})})}function tn(t,r){return new Intl.NumberFormat(r,{style:"currency",currency:"BRL"}).format(t/100)}const qx=1400,jo=3;function rn(t){return typeof t.pix_price_cents=="number"?t.pix_price_cents:Math.max(0,t.price_cents-t.voucher_count*qx)}function Bx(t,r){return Math.round(t/r)}function Ox(t,r){return Math.round(t/Math.max(1,r))}function $x(){const{t}=ce(),{language:r}=St(),a=c.useCallback(N=>tn(N,r),[r]),[s,l]=c.useState(null),[o,i]=c.useState("pix"),[n,d]=c.useState(null);Tt(c.useMemo(()=>({title:t("partner.credits.title")}),[t]));const{data:u}=be({queryKey:["partner","profile"],queryFn:na}),{data:m}=be({queryKey:["partner","stats"],queryFn:xs}),{data:p,isLoading:f,isError:x,refetch:b}=be({queryKey:["partner","credit-packages"],queryFn:Rd}),g=Se({mutationFn:N=>Id(N.packageId,N.method),onSuccess:N=>{window.location.href=N.checkout_url},onError:N=>{d(N instanceof Error?N.message:"Erro ao processar compra")}}),h=()=>{s&&(d(null),g.mutate({packageId:s,method:o}))},k=s?p==null?void 0:p.find(N=>N.id===s):void 0,v=k?{pix:rn(k),card:k.price_cents}:null,y=v?o==="pix"?v.pix:v.card:0;return x?e.jsx(Ut,{title:"N√£o foi poss√≠vel carregar os pacotes",onRetry:b,skeleton:e.jsx(yo,{})}):f?e.jsx(yo,{}):e.jsx(Ke,{children:e.jsxs("div",{className:"pb-60 lg:pb-12",children:[e.jsxs("div",{className:"mb-10 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:t("partner.credits.purchase.buyCredits")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-2xl",children:t("partner.credits.subtitle")})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(zx,{available:(m==null?void 0:m.voucher_balance)??(u==null?void 0:u.voucher_balance)??0,reserved:(m==null?void 0:m.reserved_credits)??0}),n&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-300 animate-in fade-in slide-in-from-top-2",children:[e.jsx(pt,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{children:n})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Zn,{className:"w-5 h-5 text-yellow-500"}),t("partner.credits.purchase.selectPackage")]}),e.jsx("div",{className:"grid gap-4",children:p==null?void 0:p.map(N=>e.jsx(Vx,{package:N,paymentMethod:o,onPaymentMethodChange:i,selected:s===N.id,onSelect:()=>l(N.id)},N.id))})]}),e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-[1.5rem] border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-900 dark:text-white mb-6",children:[e.jsx("div",{className:"p-2 rounded-xl bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",children:e.jsx(ir,{className:"w-5 h-5"})}),t("partner.credits.purchase.howItWorks")]}),e.jsxs("ul",{className:"space-y-4 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 mt-2 rounded-full bg-blue-500 flex-shrink-0"}),e.jsx("span",{dangerouslySetInnerHTML:{__html:t("partner.credits.purchase.info.reserved").replace("RESERVED",'<strong class="text-gray-900 dark:text-white font-medium">RESERVED</strong>')}})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 mt-2 rounded-full bg-blue-500 flex-shrink-0"}),e.jsx("span",{dangerouslySetInnerHTML:{__html:t("partner.credits.purchase.info.consumed").replace("CONSUMED",'<strong class="text-gray-900 dark:text-white font-medium">CONSUMED</strong>').replace("REFUNDED",'<strong class="text-gray-900 dark:text-white font-medium">REFUNDED</strong>')}})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 mt-2 rounded-full bg-blue-500 flex-shrink-0"}),t("partner.credits.purchase.info.unique")]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 mt-2 rounded-full bg-blue-500 flex-shrink-0"}),t("partner.credits.purchase.info.expiration")]})]})]})]}),e.jsx("div",{className:"hidden lg:block lg:col-span-1 sticky top-24",children:e.jsx(Ux,{selectedPkg:k,paymentMethod:o,setPaymentMethod:i,totalCents:y,totals:v,onPurchase:h,isProcessing:g.isPending,formatCurrency:a})})]}),e.jsx("div",{className:"lg:hidden fixed bottom-24 left-4 right-4 z-40 p-4 bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl border border-gray-200 dark:border-gray-800 rounded-2xl shadow-2xl animate-in slide-in-from-bottom-4 duration-500",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:k?a(y):"R$ --"}),k&&v&&o==="pix"&&e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:t("partner.credits.purchase.savingsVsCard",{value:a(v.card-v.pix)})})]}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>i("pix"),className:`p-2 rounded-md transition-all ${o==="pix"?"bg-white dark:bg-gray-700 shadow-sm text-pink-600 dark:text-pink-400":"text-gray-400"}`,children:e.jsx(Xa,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>i("card"),className:`p-2 rounded-md transition-all ${o==="card"?"bg-white dark:bg-gray-700 shadow-sm text-pink-600 dark:text-pink-400":"text-gray-400"}`,children:e.jsx(tt,{className:"w-5 h-5"})})]})]}),e.jsx("button",{onClick:h,disabled:!s||g.isPending,className:`w-full flex items-center justify-center gap-2 py-3.5 rounded-2xl font-semibold text-white shadow-lg transition-all active:scale-[0.98] ${s?"bg-gradient-to-r from-pink-600 to-rose-600 hover:from-pink-500 hover:to-rose-500 shadow-pink-500/25":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed"}`,children:g.isPending?e.jsx(fe,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[t("partner.credits.purchase.buyCredits"),e.jsx(Ie,{className:"w-5 h-5"})]})})]})})]})})}function zx({available:t,reserved:r}){const{t:a}=ce();return e.jsxs("div",{className:"relative overflow-hidden bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-[2.5rem] p-8 shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-black/20 border border-white/50 dark:border-gray-700/50",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-pink-500/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-blue-500/10 rounded-full blur-3xl -ml-12 -mb-12 pointer-events-none"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-gray-500 dark:text-gray-400",children:[e.jsx(el,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium uppercase tracking-wider",children:a("partner.credits.title")})]}),e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-4xl font-bold text-gray-900 dark:text-white tracking-tight",children:t}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:a("partner.credits.ready",{count:t})})]}),t<=2&&e.jsx("div",{className:"mb-2 px-3 py-1 bg-pink-500/10 border border-pink-500/20 rounded-full",children:e.jsx("p",{className:"text-xs font-semibold text-pink-600 dark:text-pink-400",children:"Saldo acabando"})})]})]}),e.jsx("div",{className:"h-px w-full bg-gray-200 dark:bg-gray-800 md:hidden"}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"md:border-l md:border-gray-200 dark:md:border-gray-800 md:pl-6",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-gray-500 dark:text-gray-400 mb-1",children:[e.jsx("span",{className:"text-xs font-medium uppercase",children:a("partner.credits.reserved")}),e.jsx(ir,{className:"w-3.5 h-3.5"})]}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a("partner.credits.waitingRedemption")})]}),e.jsx("div",{className:"hidden md:flex flex-col justify-center items-end md:border-l md:border-gray-200 dark:md:border-gray-800 md:pl-6",children:e.jsxs(W,{to:"/partner/credits/extract",className:"group flex flex-col items-end",children:[e.jsxs("span",{className:"text-xs font-semibold text-pink-600 dark:text-pink-400 group-hover:text-pink-700 dark:group-hover:text-pink-300 flex items-center gap-1 transition-colors",children:["Ver extrato ",e.jsx(Ie,{className:"w-3 h-3 group-hover:translate-x-0.5 transition-transform"})]}),e.jsx("span",{className:"text-[10px] text-gray-400 mt-1",children:"Hist√≥rico completo"})]})})]}),e.jsx("div",{className:"md:hidden mt-2 pt-4 border-t border-gray-100 dark:border-gray-800 flex justify-center",children:e.jsxs(W,{to:"/partner/credits/extract",className:"text-sm font-medium text-pink-600 dark:text-pink-400 flex items-center gap-1",children:["Ver extrato completo ",e.jsx(Ie,{className:"w-4 h-4"})]})})]})]})}function Ux({selectedPkg:t,paymentMethod:r,setPaymentMethod:a,totalCents:s,totals:l,onPurchase:o,isProcessing:i,formatCurrency:n}){const{t:d}=ce();return e.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-[2.5rem] shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-black/20 border border-white/50 dark:border-gray-700/50 p-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:d("partner.credits.purchase.orderSummary")}),e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900/50 p-1.5 rounded-2xl mb-6 flex",children:[e.jsxs("button",{onClick:()=>a("pix"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-sm font-semibold transition-all ${r==="pix"?"bg-white dark:bg-gray-800 text-pink-600 dark:text-pink-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.jsx(Xa,{className:"w-4 h-4"}),"PIX"]}),e.jsxs("button",{onClick:()=>a("card"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-sm font-semibold transition-all ${r==="card"?"bg-white dark:bg-gray-800 text-pink-600 dark:text-pink-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.jsx(tt,{className:"w-4 h-4"}),"Cart√£o"]})]}),e.jsxs("div",{className:"mb-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pacote"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t?t.name:"--"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Qtd. Vouchers"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t?t.voucher_count:"--"})]}),e.jsx("div",{className:"h-px bg-gray-100 dark:bg-gray-700 my-3"}),e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Total"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?n(s):"R$ --"})]}),t&&l&&e.jsx("div",{className:"text-right",children:r==="pix"?e.jsxs("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium flex items-center justify-end gap-1",children:[e.jsx(Ea,{className:"w-3 h-3"}),"Economia de ",n(l.card-l.pix)]}):e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["At√© ",jo,"x de"," ",n(Bx(l.card,jo))]})})]}),e.jsx("button",{onClick:o,disabled:!t||i,className:`w-full flex items-center justify-center gap-2 py-4 rounded-2xl font-semibold text-white shadow-lg transition-all active:scale-[0.95] ${t?"bg-gradient-to-r from-pink-600 to-rose-600 hover:from-pink-500 hover:to-rose-500 shadow-pink-500/25":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed"}`,children:i?e.jsx(fe,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[d("partner.credits.purchase.continue"),e.jsx(Ie,{className:"w-5 h-5"})]})}),e.jsxs("p",{className:"text-xs text-center text-gray-400 mt-4 flex items-center justify-center gap-1",children:[e.jsx(Ea,{className:"w-3 h-3"}),d("partner.credits.purchase.secureCheckout")]})]})}function Vx({package:t,paymentMethod:r,selected:a,onSelect:s}){const{t:l}=ce(),{language:o}=St(),i=c.useCallback(x=>tn(x,o),[o]),n=rn(t),d=t.price_cents,u=r==="pix"?n:d,m=Ox(u,t.voucher_count),p=()=>{s()},f=x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),p())};return e.jsxs("div",{role:"button",tabIndex:0,onClick:p,onKeyDown:f,className:`relative w-full rounded-2xl border transition-all duration-300 cursor-pointer outline-none group ${a?"border-pink-500 bg-pink-50/30 dark:bg-pink-900/10 shadow-lg shadow-pink-500/10 ring-1 ring-pink-500":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-pink-300 dark:hover:border-pink-700 hover:shadow-md"}`,children:[t.is_popular&&e.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-gradient-to-r from-pink-500 to-rose-500 text-white text-[10px] uppercase font-bold px-3 py-1 rounded-full shadow-sm flex items-center gap-1",children:[e.jsx(tl,{className:"w-3 h-3 fill-current"}),l("partner.credits.purchase.mostPopular")]}),e.jsxs("div",{className:"p-5 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsx("h3",{className:`font-bold text-gray-900 dark:text-white ${a?"text-lg":"text-base"}`,children:t.name}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["‚Ä¢ ",t.voucher_count," vouchers"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-3",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white tracking-tight",children:i(u)}),e.jsxs("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:[i(m)," / voucher"]})]}),t.savings_percent>0&&e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 font-medium mt-1",children:l("partner.credits.purchase.volumeDiscount",{value:t.savings_percent})})]}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${a?"border-pink-500 bg-pink-500":"border-gray-300 dark:border-gray-600 group-hover:border-pink-400"}`,children:a&&e.jsx(Re,{className:"w-3.5 h-3.5 text-white"})})]})]})}function Kx(t){return t.type.startsWith("video/")}function Gx(t,r){return`${t.replace(/\.[^.]+$/,"")}.${r}`}function an(t){const{deliveryId:r,onUploadComplete:a,onAllComplete:s,maxConcurrent:l=3,compressionOptions:o}=t,i=Ae(),[n,d]=c.useState(new Map),u=c.useRef(0),m=c.useRef([]),p=c.useRef(n),f=c.useRef(()=>{});c.useEffect(()=>{p.current=n},[n]);const x=c.useCallback((j,w)=>{d(I=>{const M=new Map(I),V=M.get(j);return V&&M.set(j,{...V,...w}),M})},[]),b=c.useCallback(async j=>{try{x(j.id,{status:"compressing",progress:0});let w=j.file,I=j.file.name,M=j.file.type;if(Kd(j.file))try{w=await Vd(j.file,o),M=w.type??j.file.type}catch(J){console.warn("Image compression failed, using original:",J),w=j.file}if(Kx(j.file))try{if(Ns()){const J=Ki();if(await J.initialize()){const L=await J.transcodeVideo(j.file,{resolution:"720p",format:"mp4",quality:"medium",onProgress:(ee,ne)=>{const ue=Math.max(0,Math.min(100,ee));x(j.id,{status:"compressing",progress:Math.round(ue*.7)})}});w=L.blob,M=L.blob.type||"video/mp4",I=Gx(j.file.name,"mp4")}}}catch(J){console.warn("Video processing failed, using original:",J),w=j.file,I=j.file.name,M=j.file.type}x(j.id,{status:"uploading",progress:5});const V=await Bd(r,{filename:I,content_type:M,size_bytes:w.size});await Od(V.upload_url,w,M,J=>{x(j.id,{progress:5+Math.round(J*.9)})}),await $d(r,{upload_id:V.upload_id,key:V.key,filename:I,content_type:M,size_bytes:w.size}),x(j.id,{status:"complete",progress:100}),a==null||a(V.upload_id,j.file.name),i.invalidateQueries({queryKey:["delivery",r]})}catch(w){const I=w instanceof Error?w.message:"Upload failed";x(j.id,{status:"error",error:I})}finally{u.current--,f.current()}},[r,o,a,i,x]),g=c.useCallback(()=>{for(;u.current<l&&m.current.length>0;){const j=m.current.shift();u.current++,b(j)}if(u.current===0&&m.current.length===0){const j=p.current;Array.from(j.values()).every(I=>I.status==="complete"||I.status==="error")&&j.size>0&&(s==null||s())}},[l,b,s]);c.useEffect(()=>{f.current=g},[g]);const h=c.useCallback(j=>{const I=Array.from(j).map(M=>({id:`${Date.now()}-${Math.random().toString(36).slice(2)}`,file:M,status:"compressing",progress:0}));d(M=>{const V=new Map(M);for(const J of I)V.set(J.id,J);return V}),m.current.push(...I),g()},[g]),k=c.useCallback(j=>{const w=n.get(j);w&&w.status==="error"&&(x(j,{status:"compressing",progress:0,error:void 0}),m.current.push(w),g())},[n,x,g]),v=c.useCallback(()=>{const j=Array.from(n.values()).filter(w=>w.status==="error");for(const w of j)x(w.id,{status:"compressing",progress:0,error:void 0}),m.current.push(w);g()},[n,x,g]),y=c.useCallback(j=>{d(w=>{const I=new Map(w);return I.delete(j),I}),m.current=m.current.filter(w=>w.id!==j)},[]),N=c.useCallback(()=>{d(new Map),m.current=[],u.current=0},[]),_=Array.from(n.values()),A=_.some(j=>j.status==="compressing"||j.status==="uploading"),G=_.some(j=>j.status==="error"),O=_.filter(j=>j.status==="complete").length,C=_.length>0?Math.round(_.reduce((j,w)=>j+w.progress,0)/_.length):0;return{uploads:_,addFiles:h,retryUpload:k,retryAllErrors:v,removeUpload:y,clearUploads:N,isUploading:A,hasErrors:G,completedCount:O,totalCount:_.length,totalProgress:C}}function Vt({to:t,label:r="Voltar",className:a}){const s=ve(),l=D("inline-flex items-center gap-2 text-sm font-bold text-gray-600 dark:text-gray-400","hover:text-pink-600 dark:hover:text-pink-400","hover:bg-pink-50 dark:hover:bg-pink-900/20","transition-all duration-200 mb-4","focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-500 focus-visible:ring-offset-2","dark:focus-visible:ring-offset-gray-900","rounded-xl px-4 py-2 -ml-4",a);return t?e.jsxs(W,{to:t,"aria-label":r,className:l,children:[e.jsx(Et,{className:"w-4 h-4"}),e.jsx("span",{children:r})]}):e.jsxs("button",{type:"button",onClick:()=>s(-1),"aria-label":r,className:l,children:[e.jsx(Et,{className:"w-4 h-4"}),e.jsx("span",{children:r})]})}function Hx({steps:t,currentStep:r,className:a}){const s=t.findIndex(i=>i.id===r),l=s===-1?0:s,o=l/(t.length-1)*100;return e.jsx("div",{className:D("px-4",a),children:e.jsxs("div",{className:"relative flex items-center justify-between max-w-xs mx-auto",children:[e.jsx("div",{className:"absolute left-0 right-0 top-1/2 -translate-y-1/2 h-1 bg-gray-100 dark:bg-gray-700/50 rounded-full"}),e.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-1 bg-gradient-to-r from-pink-500 to-rose-500 rounded-full transition-all duration-500 ease-out",style:{width:`${Math.min(Math.max(o,0),100)}%`}}),t.map((i,n)=>{const d=n<l,u=n===l,m=i.icon;return e.jsxs("div",{className:"relative z-10 group",children:[e.jsx("div",{className:D("w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 ease-out border-4",d?"bg-gradient-to-br from-pink-500 to-rose-600 text-white border-white dark:border-gray-800 shadow-lg shadow-pink-500/30 scale-100":u?"bg-white dark:bg-gray-800 text-pink-600 dark:text-pink-400 border-pink-100 dark:border-pink-900 ring-2 ring-pink-500 ring-offset-2 ring-offset-white dark:ring-offset-gray-900 scale-110":"bg-white dark:bg-gray-800 text-gray-300 dark:text-gray-600 border-gray-100 dark:border-gray-700"),children:d?e.jsx(Re,{className:"w-5 h-5"}):m?e.jsx(m,{className:"w-4 h-4"}):e.jsx("span",{className:"text-sm font-bold",children:n+1})}),e.jsx("span",{className:D("absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] font-bold uppercase tracking-wider whitespace-nowrap transition-all duration-300 pointer-events-none",u?"text-pink-600 dark:text-pink-400 translate-y-0 opacity-100":"text-gray-400 dark:text-gray-500 translate-y-1 opacity-0 sm:opacity-70"),children:i.title})]},i.id)})]})})}function Wx(){return e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-6",children:[e.jsx(z,{className:"w-20 h-20 rounded-full"}),e.jsx(z,{className:"h-8 w-64 rounded"}),e.jsx(z,{className:"h-4 w-80 rounded"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-3xl p-6 text-left border border-gray-100 dark:border-gray-700",children:[e.jsx(z,{className:"h-4 w-20 mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-6",children:[e.jsxs("div",{children:[e.jsx(z,{className:"h-3 w-16 mb-2"}),e.jsx(z,{className:"h-6 w-40 rounded"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"h-3 w-16 mb-2"}),e.jsx(z,{className:"h-6 w-24 rounded-full"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"h-3 w-16 mb-2"}),e.jsx(z,{className:"h-5 w-32 rounded"})]})]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsx(z,{className:"h-14 w-full rounded-xl"}),e.jsx(z,{className:"h-14 w-full rounded-xl"})]})]})}function Qx(t,r=0){if(!+t)return"0 Bytes";const a=1024,s=r<0?0:r,l=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(t)/Math.log(a));return`${parseFloat((t/Math.pow(a,o)).toFixed(s))} ${l[o]}`}const Yx=[{id:"client",title:"Cliente"},{id:"upload",title:"Upload"},{id:"review",title:"Revis√£o"}];function Jx(){ve();const t=Ae(),[r,a]=c.useState("client"),[s,l]=c.useState(null),[o,i]=c.useState(null);Tt(c.useMemo(()=>({title:"",backTo:"/partner/deliveries",backLabel:"Voltar"}),[]));const[n,d]=c.useState(""),[u,m]=c.useState(""),[p,f]=c.useState(""),[x,b]=c.useState(""),[g,h]=c.useState(""),[k,v]=c.useState(""),[y,N]=c.useState("new"),[_,A]=c.useState(""),[G,O]=c.useState(null),[C,j]=c.useState(!1),w=c.useRef(0),I=c.useCallback(L=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L),[]),M=c.useCallback(async L=>{var ue;const ee=L.trim().toLowerCase();if(!ee||!I(ee)){O(null),j(!1);return}const ne=++w.current;j(!0),O(null);try{const B=await Md(ee);if(ne!==w.current)return;const se=(B.children||[]).map(he=>({id:he.id,name:he.name,hasAccess:!!he.has_access}));if(O({hasAccount:!!B.has_access,children:se,message:B.message}),B.has_access){const he=se.filter(ye=>ye.hasAccess);he.length>0?(N("existing"),A(((ue=he[0])==null?void 0:ue.id)??"")):(N("new"),A(""))}else N("new"),A("")}catch{if(ne!==w.current)return;O({hasAccount:!1,children:[],message:"Novo cliente (verifica√ß√£o falhou ou timeout)"}),N("new")}finally{ne===w.current&&j(!1)}},[I]);c.useEffect(()=>{const L=setTimeout(()=>{u.trim()&&M(u)},600);return()=>clearTimeout(L)},[u,M]);const V=Se({mutationFn:L=>Fd(L),onSuccess:L=>{l(L.id),a("upload"),t.invalidateQueries({queryKey:["partner","deliveries"]})},onError:L=>i(L instanceof Error?L.message:"Erro ao criar entrega")}),J=()=>{var ue;const L=u.trim().toLowerCase();if(!I(L)){i("E-mail inv√°lido");return}const ee=y==="existing"&&((ue=G==null?void 0:G.children.find(B=>B.id===_))!=null&&ue.hasAccess)?"EXISTING_CHILD":"NEW_CHILD",ne=`Ensaio - ${p.trim()||n.trim()||L}`;V.mutate({target_email:L,client_name:n.trim()||void 0,child_name:p.trim()||void 0,intended_import_action:ee,target_child_id:ee==="EXISTING_CHILD"?_:void 0,title:x.trim()||ne,description:g.trim()||void 0,event_date:k||void 0})},ae=()=>{a("review")};return e.jsx("div",{className:"min-h-screen bg-[radial-gradient(ellipse_at_top_left,_var(--tw-gradient-stops))] from-gray-50 via-white to-pink-50/20 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 pb-20",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 pt-8",children:[e.jsx("div",{className:"animate-in fade-in slide-in-from-top-2",children:e.jsx(Vt,{to:"/partner/deliveries"})}),e.jsxs("div",{className:"mb-10 text-center animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Nova Entrega"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[r==="client"&&"Comece identificando o cliente e os detalhes do ensaio.",r==="upload"&&"Adicione as fotos do ensaio para esta entrega.",r==="review"&&"Tudo pronto! Confira os detalhes da entrega."]})]}),e.jsx("div",{className:"mb-10",children:e.jsx(Hx,{steps:Yx,currentStep:r})}),e.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-[2.5rem] shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-black/20 border border-white/50 dark:border-gray-700/50 p-6 sm:p-10 relative overflow-hidden transition-all duration-500",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-pink-500/5 to-purple-500/5 rounded-full blur-3xl -mr-20 -mt-20 pointer-events-none"}),o&&e.jsxs("div",{className:"mb-8 p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-300 rounded-2xl flex items-center gap-3 animate-in fade-in slide-in-from-top-2",children:[e.jsx(pt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:o}),e.jsx("button",{onClick:()=>i(null),className:"ml-auto p-1 hover:bg-red-100 dark:hover:bg-red-900/40 rounded-full",children:e.jsx(De,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative z-10 min-h-[400px]",children:[r==="client"&&e.jsx(Xx,{clientName:n,setClientName:d,clientEmail:u,setClientEmail:m,childName:p,setChildName:f,title:x,setTitle:b,description:g,setDescription:h,eventDate:k,setEventDate:v,accessStatus:G,isCheckingAccess:C,deliveryTargetMode:y,setDeliveryTargetMode:N,selectedChildId:_,setSelectedChildId:A,onNext:J,isLoading:V.isPending}),r==="upload"&&s&&e.jsx(Zx,{deliveryId:s,onNext:()=>a("review"),onSkip:ae}),r==="review"&&s&&e.jsx(eb,{deliveryId:s})]})]})]})})}function Xx({clientName:t,setClientName:r,clientEmail:a,setClientEmail:s,childName:l,setChildName:o,title:i,setTitle:n,description:d,setDescription:u,eventDate:m,setEventDate:p,accessStatus:f,isCheckingAccess:x,deliveryTargetMode:b,setDeliveryTargetMode:g,selectedChildId:h,setSelectedChildId:k,onNext:v,isLoading:y}){return e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-pink-50 dark:bg-pink-900/20 text-pink-600 dark:text-pink-400 flex items-center justify-center",children:e.jsx(Er,{className:"w-5 h-5"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Identifica√ß√£o"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 ml-1",children:"E-mail do Respons√°vel"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",value:a,onChange:N=>s(N.target.value),placeholder:"ex: cliente@email.com",className:"w-full pl-4 pr-10 py-3 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-2xl focus:ring-2 focus:ring-pink-500 transition-all"}),x&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(fe,{className:"w-4 h-4 animate-spin text-pink-500"})})]}),f&&e.jsxs("div",{className:D("text-xs font-medium px-3 py-2 rounded-xl mt-2 flex items-center gap-2",f.hasAccount?"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-400":"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400"),children:[f.hasAccount?e.jsx($e,{className:"w-3 h-3"}):e.jsx(pe,{className:"w-3 h-3"}),f.hasAccount?"Conta encontrada!":"Novo cliente"]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 ml-1",children:"Nome (opcional)"}),e.jsx("input",{type:"text",value:t,onChange:N=>r(N.target.value),placeholder:"Nome do respons√°vel",className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-2xl focus:ring-2 focus:ring-pink-500 transition-all"})]})]})]}),e.jsx("div",{className:"h-px bg-gray-100 dark:bg-gray-700/50"}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 flex items-center justify-center",children:e.jsx(Be,{className:"w-5 h-5"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Detalhes da Entrega"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 ml-1",children:"T√≠tulo"}),e.jsx("input",{type:"text",value:i,onChange:N=>n(N.target.value),placeholder:"Ex: Ensaio de Natal",className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-2xl focus:ring-2 focus:ring-pink-500 transition-all"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 ml-1",children:"Nome da Crian√ßa"}),e.jsx("input",{type:"text",value:l,onChange:N=>o(N.target.value),placeholder:"Nome da crian√ßa",className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-2xl focus:ring-2 focus:ring-pink-500 transition-all"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 ml-1",children:"Mensagem (opcional)"}),e.jsx("textarea",{value:d,onChange:N=>u(N.target.value),placeholder:"Uma mensagem carinhosa para a fam√≠lia...",rows:3,className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-2xl focus:ring-2 focus:ring-pink-500 transition-all resize-none"})]})]}),e.jsx("div",{className:"pt-6 flex justify-end",children:e.jsx("button",{onClick:v,disabled:y||!a,className:"flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-pink-500 to-rose-600 text-white font-bold rounded-2xl shadow-lg shadow-pink-500/25 hover:shadow-pink-500/40 hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:y?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-5 h-5 animate-spin"}),"Criando..."]}):e.jsxs(e.Fragment,{children:["Continuar para Upload",e.jsx(Te,{className:"w-5 h-5"})]})})})]})}function Zx({deliveryId:t,onNext:r,onSkip:a}){const{uploads:s,addFiles:l,removeUpload:o,retryUpload:i,isUploading:n,completedCount:d,hasErrors:u}=an({deliveryId:t}),m=c.useRef(null),p=b=>{var g;(g=b.target.files)!=null&&g.length&&l(b.target.files),m.current&&(m.current.value="")},f=b=>{var g;b.preventDefault(),b.stopPropagation(),(g=b.dataTransfer.files)!=null&&g.length&&l(b.dataTransfer.files)},x=b=>{b.preventDefault(),b.stopPropagation()};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Upload de Arquivos"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Adicione fotos e v√≠deos para esta entrega. Eles ser√£o processados automaticamente."})]}),e.jsxs("div",{className:D("relative border-2 border-dashed rounded-[2rem] p-10 text-center transition-all duration-300",n?"border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50":"border-pink-200 dark:border-pink-900/50 bg-pink-50/30 dark:bg-pink-900/10 hover:border-pink-300 dark:hover:border-pink-800 hover:bg-pink-50 dark:hover:bg-pink-900/20"),onDrop:f,onDragOver:x,children:[e.jsx("input",{type:"file",ref:m,multiple:!0,accept:"image/*,video/*",onChange:p,className:"hidden"}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white dark:bg-gray-800 shadow-sm flex items-center justify-center",children:e.jsx(zo,{className:"w-8 h-8 text-pink-500"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg",children:"Arraste e solte arquivos aqui"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",e.jsx("button",{onClick:()=>{var b;return(b=m.current)==null?void 0:b.click()},className:"text-pink-600 font-bold hover:underline",children:"clique para selecionar"})]})]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Suporta JPG, PNG, WEBP e MP4"})]})]}),s.length>0&&e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 dark:text-white flex items-center gap-2",children:["Arquivos (",d,"/",s.length,")",n&&e.jsx(fe,{className:"w-3 h-3 animate-spin"})]}),e.jsx("div",{className:"grid gap-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:s.map(b=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-900/50 border border-gray-100 dark:border-gray-700 rounded-xl",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-white dark:bg-gray-800 flex items-center justify-center flex-shrink-0 text-gray-400",children:b.file.type.startsWith("video")?e.jsx(Dt,{className:"w-5 h-5"}):e.jsx(Ge,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",title:b.file.name,children:b.file.name}),e.jsx("span",{className:"text-xs text-gray-500",children:Qx(b.file.size)})]}),e.jsx("div",{className:"h-1.5 w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:D("h-full rounded-full transition-all duration-300",b.status==="error"?"bg-red-500":b.status==="complete"?"bg-emerald-500":"bg-pink-500"),style:{width:`${b.progress}%`}})}),b.error&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:b.error})]}),b.status==="error"?e.jsx("button",{onClick:()=>i(b.id),className:"p-2 text-gray-500 hover:text-gray-900",children:e.jsx("span",{className:"text-xs underline",children:"Reenviar"})}):b.status==="complete"?e.jsx("div",{className:"p-2 text-emerald-500",children:e.jsx($e,{className:"w-5 h-5"})}):e.jsx("div",{className:"p-2 text-gray-400",children:e.jsxs("span",{className:"text-xs font-mono",children:[b.progress,"%"]})}),e.jsx("button",{onClick:()=>o(b.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(ar,{className:"w-4 h-4"})})]},b.id))})]}),e.jsxs("div",{className:"pt-6 flex justify-between items-center border-t border-gray-100 dark:border-gray-700/50 mt-6",children:[e.jsx("button",{onClick:a,disabled:n&&d===0,className:"px-6 py-3 text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white font-medium transition-colors",children:"Pular este passo"}),e.jsx("button",{onClick:r,disabled:n||s.length>0&&d===0&&!u,className:"flex items-center gap-2 px-8 py-3 bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold rounded-xl shadow-lg hover:scale-105 active:scale-95 transition-all disabled:opacity-50 disabled:scale-100",children:n?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:["Revisar e Finalizar",e.jsx(Te,{className:"w-4 h-4"})]})})]})]})}function eb({deliveryId:t}){const r=ve(),{data:a,isLoading:s}=be({queryKey:["partner","delivery",t],queryFn:()=>la(t),enabled:!!t});return(s||!a)&&(s||!a)?e.jsx(Wx,{}):e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-6",children:[e.jsx("div",{className:"w-20 h-20 bg-emerald-100 dark:bg-emerald-900/30 rounded-full flex items-center justify-center mb-2 animate-bounce-subtle",children:e.jsx(pe,{className:"w-10 h-10 text-emerald-600 dark:text-emerald-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Entrega Criada com Sucesso!"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 max-w-md",children:["A entrega ",e.jsxs("strong",{children:['"',a.title,'"']})," foi gerada. Voc√™ pode gerar o voucher agora ou adicionar mais fotos depois."]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-3xl p-6 text-left border border-gray-100 dark:border-gray-700",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-gray-400 mb-4",children:"Resumo"}),e.jsxs("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-6",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500",children:"Cliente"}),e.jsx("dd",{className:"font-medium text-gray-900 dark:text-white text-lg",children:a.client_name||"N√£o informado"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500",children:"Status"}),e.jsx("dd",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-bold",children:a.status})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500",children:"Arquivos"}),e.jsxs("dd",{className:"font-medium text-gray-900 dark:text-white",children:[a.assets?a.assets.length:0," itens enviados"]})]})]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>r("/partner/deliveries"),className:"px-6 py-4 rounded-xl border border-gray-200 dark:border-gray-700 font-bold text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"Voltar para Lista"}),e.jsx("button",{onClick:()=>r(`/partner/deliveries/${t}`),className:"px-6 py-4 rounded-xl bg-pink-500 hover:bg-pink-600 text-white font-bold shadow-lg shadow-pink-500/25 transition-all",children:"Ver Detalhes & Voucher"})]})]})}function tb({data:t,onCopy:r}){const a=c.useRef(null),[s,l]=c.useState(!1),[o,i]=c.useState(!1),n=t.mode??"voucher",d=c.useMemo(()=>{try{if(!t.redeem_url)return null;const h=new URL(t.redeem_url,window.location.origin);return h.pathname=h.pathname.replace(/^\/voucher\/redeem\//,"/resgate/"),h.pathname=h.pathname.replace(/^\/resgatar\//,"/resgate/"),h.toString()}catch{return t.redeem_url??null}},[t.redeem_url]),u=c.useMemo(()=>n==="direct_import"?t.import_url??null:d,[t.import_url,n,d]),m=c.useCallback(h=>{const k=window.open(h,"_blank","noopener,noreferrer");k&&(k.opener=null)},[]),p=c.useCallback(async()=>{if(t.voucher_code)try{await navigator.clipboard.writeText(t.voucher_code),l(!0),r==null||r(),setTimeout(()=>l(!1),2e3)}catch(h){console.error("Failed to copy:",h)}},[t.voucher_code,r]),f=c.useCallback(async()=>{if(u)try{await navigator.clipboard.writeText(u),l(!0),setTimeout(()=>l(!1),2e3)}catch(h){console.error("Failed to copy:",h)}},[u]),x=c.useCallback(async()=>{if(a.current){i(!0);try{const h=(await us(async()=>{const{default:N}=await import("./html2canvas-CBrSDip1.js");return{default:N}},[])).default,k=await h(a.current,{backgroundColor:"#ffffff",scale:2,logging:!1,useCORS:!0}),v=document.createElement("a"),y=t.voucher_code??"entrega";v.download=`${n==="direct_import"?"entrega":"voucher"}-${y}.png`,v.href=k.toDataURL("image/png"),v.click()}catch(h){console.error("Failed to download:",h)}finally{i(!1)}}},[t.voucher_code,n]),b=c.useCallback(()=>{const h=u??"";if(!h)return;const k=encodeURIComponent(`Presente especial para voc√™!

${t.beneficiary_name?`Ol√° ${t.beneficiary_name}! `:""}Voc√™ recebeu um presente no Baby Book ‚Äî um √°lbum digital para guardar as mem√≥rias mais preciosas.

${n==="voucher"&&t.voucher_code?`C√≥digo de resgate: ${t.voucher_code}
`:""}Link: ${h}

${n==="voucher"?`Se abrir uma tela de login, tudo bem: o c√≥digo fica salvo e voc√™ continua o resgate depois de entrar/criar conta.

`:`Se abrir uma tela de login, entre na sua conta e finalize a importa√ß√£o.

`}${t.message?`Mensagem do fot√≥grafo: "${t.message}"

`:""}Com carinho, ${t.studio_name||"seu fot√≥grafo"}`);m(`https://wa.me/?text=${k}`)},[t,n,m,u]),g=c.useCallback(()=>{const h=u??"";if(!h)return;const k=encodeURIComponent("üéÅ Presente especial: seu Baby Book est√° pronto!"),v=encodeURIComponent(`Ol√°${t.beneficiary_name?` ${t.beneficiary_name}`:""}!

Voc√™ recebeu um presente muito especial no Baby Book.

${n==="voucher"&&t.voucher_code?`üîë Seu c√≥digo de resgate: ${t.voucher_code}

`:""}üì± Para acessar, clique no link: ${h}

${n==="voucher"?`Se o link abrir uma tela de login, n√£o se preocupe: o c√≥digo fica salvo e voc√™ continua depois de entrar/criar conta.

`:`Se o link abrir uma tela de login, entre na sua conta e finalize a importa√ß√£o.

`}${t.message?`Mensagem do fot√≥grafo:
"${t.message}"

`:""}üì∑ ${t.assets_count} fotos est√£o esperando por voc√™!

Com carinho,
${t.studio_name||"Seu fot√≥grafo"}`);window.location.href=`mailto:?subject=${k}&body=${v}`},[t,n,u]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{ref:a,className:"bg-gradient-to-br from-pink-50 to-rose-100 rounded-[2.5rem] p-8 border border-pink-200 shadow-sm",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-gradient-to-br from-pink-500 to-rose-500 rounded-xl mb-3",children:e.jsx(rt,{className:"w-6 h-6 text-white"})}),e.jsx("p",{className:"text-pink-600 text-sm font-medium",children:"Baby Book"}),t.studio_name&&e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Presente de ",t.studio_name]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mt-2",children:t.beneficiary_name||"Para voc√™!"})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm",children:u?e.jsx(To,{value:u,size:160,level:"M",includeMargin:!1,fgColor:"#1f2937"}):e.jsx("div",{className:"w-[160px] h-[160px] flex items-center justify-center text-sm text-gray-500",children:"Link indispon√≠vel"})})}),n==="voucher"&&t.voucher_code&&e.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 shadow-sm",children:[e.jsx("p",{className:"text-center text-gray-600 text-sm mb-2",children:"Seu c√≥digo de resgate:"}),e.jsx("p",{className:"text-center text-2xl font-mono font-bold text-pink-600 tracking-wider",children:t.voucher_code})]}),e.jsxs("p",{className:"text-center text-gray-600 text-sm",children:["üì∑ ",t.assets_count," fotos est√£o esperando por voc√™!"]}),t.message&&e.jsx("div",{className:"mt-4 p-3 bg-white/50 rounded-xl",children:e.jsxs("p",{className:"text-center text-gray-700 text-sm italic",children:["‚Äú",t.message,"‚Äù"]})}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-pink-200",children:[e.jsx("p",{className:"text-center text-xs text-gray-500",children:"Escaneie o QR Code ou acesse:"}),e.jsx("p",{className:"text-center text-xs text-pink-600 font-medium mt-1 break-all",children:u??""})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[n==="voucher"&&t.voucher_code?e.jsx("button",{onClick:p,className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:s?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4 text-green-500"}),"Copiado!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Go,{className:"w-4 h-4"}),"Copiar C√≥digo"]})}):e.jsx("div",{className:"flex-1"}),e.jsxs("button",{onClick:f,disabled:!u,className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(Ha,{className:"w-4 h-4"}),"Copiar Link"]})]}),e.jsx("button",{onClick:x,disabled:o,className:"w-full inline-flex items-center justify-center gap-2 px-4 py-3 bg-pink-500 text-white font-medium rounded-xl hover:bg-pink-600 transition-colors disabled:opacity-50",children:o?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-5 h-5 animate-spin"}),"Gerando imagem..."]}):e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"w-5 h-5"}),"Baixar Cart√£o (PNG)"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:b,className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-3 bg-green-500 text-white font-medium rounded-xl hover:bg-green-600 transition-colors",children:[e.jsx(Mr,{className:"w-5 h-5"}),"WhatsApp"]}),e.jsxs("button",{onClick:g,className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-3 bg-blue-500 text-white font-medium rounded-xl hover:bg-blue-600 transition-colors",children:[e.jsx(zt,{className:"w-5 h-5"}),"E-mail"]})]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"üí° Dica: Baixe o cart√£o e envie pelo WhatsApp ou imprima para entregar pessoalmente!"})]})}function ko(){return e.jsxs(Ke,{children:[e.jsx("div",{className:"hidden md:flex items-center gap-2 mb-4",children:e.jsx(z,{className:"w-24 h-6 rounded-md"})}),e.jsxs("div",{className:"md:hidden mb-4 space-y-1",children:[e.jsx(z,{className:"w-3/4 h-5 rounded"}),e.jsx(z,{className:"w-1/2 h-4 rounded"})]}),e.jsxs("div",{className:"hidden md:block mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(z,{className:"h-8 w-64 rounded-lg"}),e.jsx(z,{className:"h-6 w-20 rounded-full"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(z,{className:"h-4 w-32 rounded"}),e.jsx(z,{className:"h-4 w-40 rounded"})]})]}),e.jsx("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-[1.5rem] border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"h-4 w-24 rounded"}),e.jsx(z,{className:"h-5 w-48 rounded"}),e.jsx(z,{className:"h-4 w-64 rounded"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(z,{className:"h-10 w-28 rounded-xl"})})]})}),e.jsxs("div",{className:"mb-6 flex gap-4",children:[e.jsx(z,{className:"h-5 w-40 rounded"}),e.jsx(z,{className:"h-5 w-64 rounded"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-[1.5rem] border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx(z,{className:"h-6 w-32 rounded"}),e.jsx(z,{className:"h-8 w-24 rounded-lg"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 p-4",children:Array.from({length:3}).map((t,r)=>e.jsx("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/20 p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx(z,{className:"w-10 h-10 rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"space-y-1.5 flex-1",children:[e.jsx(z,{className:"h-4 w-3/4 rounded"}),e.jsx(z,{className:"h-3 w-1/2 rounded"})]})]}),e.jsx(z,{className:"w-8 h-8 rounded-lg"})]})},r))})]})]})}function ka(t,r){return new Date(t).toLocaleDateString(r,{day:"2-digit",month:"long",year:"numeric"})}function wo(t,r){return new Date(t).toLocaleString(r,{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function rb(t){return{__html:t.replace(/<bold>/g,'<strong class="font-medium text-gray-900 dark:text-white">').replace(/<\/bold>/g,"</strong>")}}function ab({status:t}){const{t:r}=ce(),a=As(t),s=t==="ready"?"bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300":t==="delivered"?"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300":t==="failed"?"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300":t==="processing"?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":t==="pending_upload"?"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-700 dark:text-yellow-300":t==="archived"?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300";return e.jsx("span",{title:r(a.hint),"aria-label":`${r(a.label)}. ${r(a.hint)}`,className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${s}`,children:r(a.label)})}async function sb(t){try{return await navigator.clipboard.writeText(t),!0}catch{try{const r=document.createElement("textarea");return r.value=t,r.style.position="fixed",r.style.opacity="0",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),!0}catch{return!1}}}function ob(t){if(t===0)return"0 B";const r=1024,a=["B","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(r));return`${parseFloat((t/Math.pow(r,s)).toFixed(1))} ${a[s]}`}function ib(){var _;const{t}=ce(),{language:r}=St(),{deliveryId:a}=Ct(),s=ht(),l=ve(),o=Ae(),i=c.useRef(!1),[n,d]=c.useState(!1),[u,m]=c.useState(null),[p,f]=c.useState(null);c.useEffect(()=>{i.current=!1},[a]),c.useEffect(()=>{if(!p)return;const A=setTimeout(()=>f(null),2600);return()=>clearTimeout(A)},[p]);const{data:x,isLoading:b,error:g}=be({queryKey:["delivery",a],queryFn:()=>la(a),enabled:!!a}),h=!!(x!=null&&x.voucher_code),k=!!(x&&x.assets_count>0&&!h);c.useEffect(()=>{if(i.current||b||g||!x)return;const A=new URLSearchParams(s.search);if(!(A.get("openVoucher")==="1"))return;A.delete("openVoucher");const O=A.toString();if(l({pathname:s.pathname,search:O?`?${O}`:""},{replace:!0}),i.current=!0,h||k){d(!0);return}f(t("partner.voucher.clipboardWarning"))},[i,k,x,g,h,b,s.pathname,s.search,l,t]),Tt(c.useMemo(()=>{if(!a||g)return null;const A=x&&(x.title||x.client_name)||t("partner.details.title"),G=!!(x!=null&&x.voucher_code),O=!!(x&&x.assets_count>0&&!G),C=w=>{switch(w){case"ready":return"success";case"delivered":return"purple";case"processing":return"info";case"pending_upload":return"warning";default:return"neutral"}},j=O?e.jsx(bs,{label:t("partner.voucher.generate"),tone:"primary",onClick:()=>d(!0),icon:e.jsx(Bt,{className:"w-4 h-4"})}):null;return{title:A,backTo:"/partner/deliveries",backLabel:t("partner.details.backToDeliveries"),badge:x!=null&&x.status?{text:t(As(x.status).label),tone:C(x.status)}:void 0,actions:j}},[x,a,g,t]));const v=Se({mutationFn:({key:A})=>Ud(a,A),onSuccess:()=>{o.invalidateQueries({queryKey:["delivery",a]})}}),y=Se({mutationFn:A=>zd(a,A),onSuccess:A=>{m(A),o.invalidateQueries({queryKey:["delivery",a]}),o.invalidateQueries({queryKey:["partner","stats"]})}});if(b)return e.jsx(ko,{});if(g||!x)return e.jsx(Ut,{title:t("partner.upload.notFound"),primaryAction:{label:t("partner.details.backToDeliveries"),to:"/partner/deliveries"},skeleton:e.jsx(ko,{})});const N=!h;return e.jsxs(e.Fragment,{children:[e.jsxs(Ke,{children:[e.jsx("div",{className:"mb-0",children:e.jsx(Vt,{to:"/partner/deliveries",label:t("partner.details.backToDeliveries")})}),e.jsx("div",{className:"md:hidden mb-4",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[x.client_name?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:x.client_name})," ‚Ä¢ "]}):null,t("partner.details.created")," ",ka(x.created_at,r)]})}),e.jsxs("div",{className:"hidden md:block mb-10 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:x.title||x.client_name||t("partner.details.title")}),e.jsx(ab,{status:x.status})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-gray-500 dark:text-gray-400",children:[x.client_name&&e.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:x.client_name})]}),e.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[e.jsx(Oe,{className:"w-4 h-4"}),ka(x.created_at,r)]})]})]}),p&&e.jsxs("div",{className:"mb-4 rounded-lg bg-emerald-50 dark:bg-emerald-900/20 px-4 py-2.5 text-sm text-emerald-700 dark:text-emerald-300 flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),p]}),e.jsx("div",{className:"mb-6 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-[2.5rem] border border-white/50 dark:border-gray-700/50 p-8 shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-black/20",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t("partner.voucher.label")}),h?e.jsx("span",{className:"inline-flex items-center rounded-full bg-emerald-100 dark:bg-emerald-900/30 px-2 py-0.5 text-[11px] font-medium text-emerald-700 dark:text-emerald-300",children:t("partner.voucher.ready")}):e.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 dark:bg-gray-700 px-2 py-0.5 text-[11px] font-medium text-gray-600 dark:text-gray-300",children:Rs})]}),h?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mt-1 text-lg font-mono font-semibold text-gray-900 dark:text-white",children:x.voucher_code}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:x.redeemed_at?t("partner.voucher.redeemedAt",{date:wo(x.redeemed_at,r)}):t("partner.voucher.notRedeemed")})]}):e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:x.assets_count>0?t("partner.voucher.explanation"):t("partner.voucher.explanationNoFiles")})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-3 w-full sm:w-auto mt-4 sm:mt-0",children:h?e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>d(!0),className:"flex-1 sm:flex-none inline-flex items-center justify-center gap-2 px-6 py-3 rounded-2xl bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg shadow-pink-500/25 hover:shadow-pink-500/40 hover:-translate-y-0.5 transition-all font-semibold",children:[e.jsx(Xa,{className:"w-5 h-5"}),t("partner.voucher.openCard")]}),e.jsxs("button",{type:"button",onClick:async()=>{if(!x.voucher_code)return;const A=await sb(x.voucher_code);f(t(A?"partner.voucher.copied":"partner.voucher.copyFailed"))},className:"flex-1 sm:flex-none inline-flex items-center justify-center gap-2 px-5 py-3 rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/40 transition-all font-medium",children:[e.jsx(Go,{className:"w-4 h-4"}),t("partner.voucher.copy")]})]}):k?e.jsxs("button",{type:"button",onClick:()=>d(!0),className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-3 rounded-2xl bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg shadow-pink-500/25 hover:shadow-pink-500/40 hover:-translate-y-0.5 transition-all font-bold text-base",children:[e.jsx(Bt,{className:"w-5 h-5"}),t("partner.voucher.generate")]}):N?e.jsxs(W,{to:`/partner/deliveries/${a}/upload`,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-3 rounded-2xl bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg shadow-pink-500/25 hover:shadow-pink-500/40 hover:-translate-y-0.5 transition-all font-bold text-base",children:[e.jsx(Ye,{className:"w-5 h-5"}),t("partner.details.sendFiles")]}):e.jsxs("button",{type:"button",disabled:!0,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-5 py-3 rounded-2xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/60 text-gray-400 dark:text-gray-500 font-medium cursor-not-allowed",title:"Entrega finalizada",children:[e.jsx(Bt,{className:"w-5 h-5"}),t("partner.voucher.unavailable")]})})]})}),(x.description||x.event_date)&&e.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 text-sm",children:[x.event_date&&e.jsxs("div",{className:"inline-flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:[t("partner.details.event"),":"," ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:ka(x.event_date,r)})]})]}),x.description&&e.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:[e.jsxs("span",{className:"text-gray-400",children:[t("partner.details.description"),":"]})," ",x.description]})]}),e.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-[2.5rem] border border-white/50 dark:border-gray-700/50 shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-black/20 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t("partner.details.files")," (",x.assets_count,")"]}),h?e.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full text-xs font-semibold text-gray-500 dark:text-gray-400",children:t("partner.details.finalizedAdd")}):e.jsxs(W,{to:`/partner/deliveries/${a}/upload`,className:"inline-flex items-center gap-2 px-4 py-2 text-sm text-pink-600 dark:text-pink-400 bg-pink-50 dark:bg-pink-900/20 hover:bg-pink-100 dark:hover:bg-pink-900/40 rounded-xl font-semibold transition-colors",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-pink-200 dark:bg-pink-800 flex items-center justify-center",children:e.jsx(Ye,{className:"w-3 h-3 text-pink-700 dark:text-pink-300"})}),t("partner.details.add")]})]}),x.assets.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Ge,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:t("partner.details.noFiles")}),e.jsxs(W,{to:`/partner/deliveries/${a}/upload`,className:"inline-flex items-center gap-2 px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors",children:[e.jsx(Ye,{className:"w-4 h-4"}),t("partner.details.sendFiles")]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 p-4",children:x.assets.map(A=>e.jsx("div",{className:"group relative rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4 hover:shadow-lg hover:-translate-y-1 transition-all duration-300",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 flex items-center justify-center flex-shrink-0",children:e.jsx(Ge,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",title:A.filename,children:A.filename}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[ob(A.size_bytes)," ‚Ä¢"," ",wo(A.uploaded_at,r)]})]})]}),h?null:e.jsx(nb,{disabled:v.isPending,onConfirm:()=>v.mutate({key:A.key})})]})},A.key))})]}),h&&e.jsx("p",{className:"text-center text-xs text-gray-400 dark:text-gray-500 mt-4",children:"Esta entrega foi finalizada. Para adicionar mais fotos, √© necess√°rio gerar um novo voucher."})]}),n&&e.jsx(lb,{delivery:x,voucherCard:u,isGenerating:y.isPending,error:(_=y.error)==null?void 0:_.message,onGenerate:A=>y.mutate(A),onClose:()=>{d(!1),!x.voucher_code&&u&&o.invalidateQueries({queryKey:["delivery",a]})}})]})}function nb({disabled:t,onConfirm:r}){const{t:a}=ce(),[s,l]=c.useState(!1);return s?e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-lg border border-yellow-200 dark:border-yellow-800 bg-yellow-50 dark:bg-yellow-900/20 px-2 py-1",children:[e.jsx("span",{className:"text-[11px] text-yellow-800 dark:text-yellow-200 hidden sm:inline",children:a("partner.details.removeConfirm")}),e.jsx("button",{type:"button",disabled:t,onClick:o=>{o.preventDefault(),o.stopPropagation(),l(!1),r()},className:"p-1 rounded hover:bg-green-100 dark:hover:bg-green-900/30 text-green-700 dark:text-green-300 disabled:opacity-50",title:a("common.confirm"),"aria-label":a("common.confirm"),children:e.jsx(Re,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:o=>{o.preventDefault(),o.stopPropagation(),l(!1)},className:"p-1 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-red-700 dark:text-red-200",title:a("common.cancel"),"aria-label":a("common.cancel"),children:e.jsx(ar,{className:"w-4 h-4"})})]}):e.jsx("button",{type:"button",disabled:t,onClick:o=>{o.preventDefault(),o.stopPropagation(),l(!0)},className:"p-2 rounded-lg text-gray-400 dark:text-gray-500 hover:text-red-700 dark:hover:text-red-200 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors disabled:opacity-50",title:a("partner.details.removeFile"),"aria-label":a("partner.details.removeFile"),children:e.jsx(ar,{className:"w-4 h-4"})})}function lb({delivery:t,voucherCard:r,isGenerating:a,error:s,onGenerate:l,onClose:o}){const{t:i}=ce(),[n,d]=c.useState(t.client_name||""),[u,m]=c.useState(""),p=t.credit_status==="not_required",f=!!t.voucher_code,x=!f&&!r,b=r||(f?{mode:"voucher",voucher_code:t.voucher_code,redeem_url:`${window.location.origin}/resgate/${t.voucher_code}`,qr_data:`${window.location.origin}/resgate/${t.voucher_code}`,studio_name:"",studio_logo_url:null,beneficiary_name:t.client_name,message:"",assets_count:t.assets_count,expires_at:null}:null);return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-6",children:x?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:i(p?"partner.voucher.modal.titleImport":"partner.voucher.modal.titleVoucher")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",dangerouslySetInnerHTML:rb(i(p?"partner.voucher.modal.descImport":"partner.voucher.modal.descVoucher"))}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:i("partner.voucher.modal.beneficiary")}),e.jsx("input",{type:"text",value:n,onChange:g=>d(g.target.value),placeholder:i("partner.voucher.modal.beneficiaryPlaceholder"),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 placeholder:text-gray-400 dark:placeholder:text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:i("partner.voucher.modal.message")}),e.jsx("textarea",{value:u,onChange:g=>m(g.target.value),rows:3,placeholder:i("partner.voucher.modal.messagePlaceholder"),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 resize-none placeholder:text-gray-400 dark:placeholder:text-gray-500"})]})]}),s&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300 text-sm",children:s}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:o,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:i("partner.voucher.modal.cancel")}),e.jsx("button",{onClick:()=>l({beneficiary_name:n||void 0,message:u||void 0}),disabled:a,className:"flex-1 px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 disabled:opacity-50 inline-flex items-center justify-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4 animate-spin"}),i("partner.voucher.modal.finalize")]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"w-4 h-4"}),i(p?"partner.voucher.modal.generateLink":"partner.voucher.modal.generateBtn")]})})]})]}):b?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:i("partner.voucher.modal.titleCard")}),e.jsx(tb,{data:b}),e.jsx("button",{onClick:o,className:"w-full mt-6 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:i("common.close")})]}):null})})})}function cb(t){let r=0;return t.voucher!=="all"&&r++,t.redeemed!=="all"&&r++,t.credit!=="all"&&r++,t.view!=="all"&&r++,t.createdPeriod!=="all"&&r++,t.redeemedPeriod!=="all"&&r++,t.sort!=="newest"&&r++,r}const db={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},mb={hidden:{opacity:0,y:10},show:{opacity:1,y:0}};function qt({icon:t,title:r,children:a}){return e.jsxs(E.div,{variants:mb,className:"space-y-3 pb-5 border-b border-gray-100 dark:border-gray-800 last:border-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-center gap-2.5 text-sm font-semibold text-gray-800 dark:text-gray-100",children:[e.jsx("span",{className:"p-1.5 rounded-lg bg-pink-50 dark:bg-pink-900/30 text-pink-500 dark:text-pink-400",children:t}),r]}),a]})}function wa({value:t,onChange:r,options:a,className:s=""}){return e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:t,onChange:l=>r(l.target.value),className:`
          w-full appearance-none px-4 py-2.5 pr-10 
          bg-white dark:bg-gray-800/80 
          border border-gray-200 dark:border-gray-700/80 
          rounded-2xl 
          text-sm text-gray-900 dark:text-white
          focus:outline-none focus:ring-2 focus:ring-pink-500/50 focus:border-pink-500
          transition-all duration-200
          cursor-pointer
          hover:border-gray-300 dark:hover:border-gray-600
          ${s}
        `,children:a.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))}),e.jsx(wr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})}function vr({active:t,onClick:r,children:a}){return e.jsx("button",{type:"button",onClick:r,className:`
        px-3.5 py-2 rounded-xl text-sm font-medium
        transition-all duration-200 ease-out
        ${t?"bg-pink-500 text-white shadow-md shadow-pink-500/25":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}
      `,children:a})}function ub({isOpen:t,onClose:r,filters:a,onApply:s,onReset:l,presets:o,builtinPresets:i,selectedPresetId:n,onSelectPreset:d,onSavePreset:u,onUpdatePreset:m,onDeletePreset:p,isBuiltinSelected:f,hasUserPreset:x}){const[b,g]=c.useState(a),[h,k]=c.useState("filters"),[v,y]=c.useState(!1),[N,_]=c.useState("");c.useEffect(()=>{t&&g(a)},[t,a]);const A=c.useCallback(()=>{s(b),r()},[b,s,r]),G=c.useCallback(()=>{g({voucher:"all",redeemed:"all",credit:"all",view:"all",sort:"newest",createdPeriod:"all",createdFrom:"",createdTo:"",redeemedPeriod:"all",redeemedFrom:"",redeemedTo:""}),l()},[l]),O=c.useCallback(()=>{N.trim()&&(u(N.trim()),_(""),y(!1))},[N,u]),C=c.useCallback((w,I)=>{g(M=>({...M,[w]:I}))},[]),j=cb(b);return e.jsx(yt,{open:t,onOpenChange:w=>!w&&r(),children:e.jsxs(dt,{children:[e.jsx(mt,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-2xl bg-pink-50 dark:bg-pink-900/30",children:e.jsx(Pa,{className:"w-5 h-5 text-pink-500 dark:text-pink-400"})}),e.jsxs("div",{children:[e.jsx(xt,{children:"Filtros e Ordena√ß√£o"}),j>0&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[j," filtro",j!==1?"s":""," ativo",j!==1?"s":""]})]})]})}),e.jsxs("div",{className:"flex border-b border-gray-100 dark:border-gray-800 px-4",children:[e.jsx("button",{type:"button",onClick:()=>k("filters"),className:`
              flex-1 py-3 text-sm font-medium border-b-2 transition-colors
              ${h==="filters"?"border-pink-500 text-pink-500":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}
            `,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(Pa,{className:"w-4 h-4"}),"Filtros",j>0&&e.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-pink-100 dark:bg-pink-900/50 text-pink-600 dark:text-pink-400",children:j})]})}),e.jsx("button",{type:"button",onClick:()=>k("presets"),className:`
              flex-1 py-3 text-sm font-medium border-b-2 transition-colors
              ${h==="presets"?"border-pink-500 text-pink-500":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}
            `,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(xa,{className:"w-4 h-4"}),"Salvos",o.length>0&&e.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400",children:o.length})]})})]}),e.jsx(bt,{children:h==="filters"?e.jsxs(E.div,{variants:db,initial:"hidden",animate:"show",className:"space-y-5",children:[e.jsx(qt,{icon:e.jsx(rl,{className:"w-4 h-4"}),title:"Ordenar por",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"newest",label:"Mais recentes"},{value:"oldest",label:"Mais antigas"},{value:"status",label:"Status"},{value:"client",label:"Cliente"}].map(w=>e.jsx(vr,{active:b.sort===w.value,onClick:()=>C("sort",w.value),children:w.label},w.value))})}),e.jsx(qt,{icon:e.jsx(Ot,{className:"w-4 h-4"}),title:"Vis√£o r√°pida",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(vr,{active:b.view==="all",onClick:()=>C("view","all"),children:"Todas"}),e.jsx(vr,{active:b.view==="needs_action",onClick:()=>C("view","needs_action"),children:e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(pe,{className:"w-3.5 h-3.5"}),"Precisa de a√ß√£o"]})})]})}),e.jsx(qt,{icon:e.jsx(Bt,{className:"w-4 h-4"}),title:"Voucher",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"Todos"},{value:"with",label:"Com voucher"},{value:"without",label:"Sem voucher"}].map(w=>e.jsx(vr,{active:b.voucher===w.value,onClick:()=>C("voucher",w.value),children:w.label},w.value))})}),e.jsx(qt,{icon:e.jsx(Be,{className:"w-4 h-4"}),title:"Resgate",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"Todas"},{value:"redeemed",label:"Resgatadas"},{value:"not_redeemed",label:"N√£o resgatadas"}].map(w=>e.jsx(vr,{active:b.redeemed===w.value,onClick:()=>C("redeemed",w.value),children:w.label},w.value))})}),e.jsx(qt,{icon:e.jsx(tt,{className:"w-4 h-4"}),title:"Status do cr√©dito",children:e.jsx(wa,{value:b.credit,onChange:w=>C("credit",w),options:[{value:"all",label:"Todos"},{value:"reserved",label:"Reservado"},{value:"consumed",label:"Usado"},{value:"refunded",label:"Devolvido"},{value:"not_required",label:"Sem custo"},{value:"unknown",label:"Desconhecido"}]})}),e.jsxs(qt,{icon:e.jsx(Oe,{className:"w-4 h-4"}),title:"Data de cria√ß√£o",children:[e.jsx(wa,{value:b.createdPeriod,onChange:w=>{C("createdPeriod",w),w!=="custom"&&(C("createdFrom",""),C("createdTo",""))},options:[{value:"all",label:"Qualquer data"},{value:"last_7",label:"√öltimos 7 dias"},{value:"last_30",label:"√öltimos 30 dias"},{value:"last_90",label:"√öltimos 90 dias"},{value:"custom",label:"Per√≠odo personalizado"}]}),b.createdPeriod==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3 animate-slide-down",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"De"}),e.jsx("input",{type:"date",value:b.createdFrom,onChange:w=>C("createdFrom",w.target.value),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-2xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-pink-500/50 focus:border-pink-500"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"At√©"}),e.jsx("input",{type:"date",value:b.createdTo,onChange:w=>C("createdTo",w.target.value),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-2xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-pink-500/50 focus:border-pink-500"})]})]})]}),e.jsxs(qt,{icon:e.jsx(Oe,{className:"w-4 h-4"}),title:"Data de resgate",children:[e.jsx(wa,{value:b.redeemedPeriod,onChange:w=>{C("redeemedPeriod",w),w!=="custom"&&(C("redeemedFrom",""),C("redeemedTo","")),w!=="all"&&C("redeemed","redeemed")},options:[{value:"all",label:"Qualquer data"},{value:"last_7",label:"√öltimos 7 dias"},{value:"last_30",label:"√öltimos 30 dias"},{value:"last_90",label:"√öltimos 90 dias"},{value:"custom",label:"Per√≠odo personalizado"}]}),b.redeemedPeriod==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3 animate-slide-down",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"De"}),e.jsx("input",{type:"date",value:b.redeemedFrom,onChange:w=>C("redeemedFrom",w.target.value),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-2xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-pink-500/50 focus:border-pink-500"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"At√©"}),e.jsx("input",{type:"date",value:b.redeemedTo,onChange:w=>C("redeemedTo",w.target.value),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-2xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-pink-500/50 focus:border-pink-500"})]})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:"Sugest√µes"}),e.jsx("div",{className:"space-y-2",children:i.map(w=>e.jsxs("button",{type:"button",onClick:()=>d(w),className:`
                        w-full flex items-center gap-3 px-4 py-3 rounded-2xl
                        transition-all duration-200
                        ${n===w.id?"bg-pink-50 dark:bg-pink-900/30 border-2 border-pink-500":"bg-gray-50 dark:bg-gray-800/50 border-2 border-transparent hover:bg-gray-100 dark:hover:bg-gray-800"}
                      `,children:[e.jsx(pe,{className:`w-4 h-4 ${n===w.id?"text-pink-500":"text-gray-400"}`}),e.jsx("span",{className:`flex-1 text-left text-sm font-medium ${n===w.id?"text-pink-700 dark:text-pink-300":"text-gray-700 dark:text-gray-300"}`,children:w.name}),n===w.id&&e.jsx(Re,{className:"w-4 h-4 text-pink-500"})]},w.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20 border border-pink-100 dark:border-pink-800/50 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:e.jsx(xa,{className:"w-5 h-5 text-pink-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Salvar filtros atuais"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Guarde sua configura√ß√£o para usar novamente"}),v?e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx("input",{type:"text",value:N,onChange:w=>_(w.target.value),placeholder:"Nome do preset...",autoFocus:!0,className:"flex-1 px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-pink-500/50 focus:border-pink-500",onKeyDown:w=>{w.key==="Enter"&&O(),w.key==="Escape"&&y(!1)}}),e.jsx("button",{type:"button",onClick:O,disabled:!N.trim(),className:"px-3 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Re,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>{y(!1),_("")},className:"px-3 py-2 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:e.jsx(De,{className:"w-4 h-4"})})]}):e.jsxs("button",{type:"button",onClick:()=>y(!0),className:"mt-3 inline-flex items-center gap-2 px-4 py-2 bg-pink-500 hover:bg-pink-600 text-white text-sm font-medium rounded-lg transition-colors shadow-sm",children:[e.jsx(Zr,{className:"w-4 h-4"}),"Salvar como preset"]})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:"Meus filtros salvos"}),o.length===0?e.jsxs("div",{className:"text-center py-6 px-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 border border-dashed border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Nenhum preset salvo ainda"}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Use o bot√£o acima para salvar sua configura√ß√£o"})]}):e.jsx("div",{className:"space-y-2",children:o.map(w=>e.jsxs("div",{className:`
                          flex items-center gap-3 px-4 py-3 rounded-2xl
                          transition-all duration-200
                          ${n===w.id?"bg-pink-50 dark:bg-pink-900/30 border-2 border-pink-500":"bg-gray-50 dark:bg-gray-800/50 border-2 border-transparent"}
                        `,children:[e.jsxs("button",{type:"button",onClick:()=>d(w),className:"flex-1 flex items-center gap-3 text-left",children:[e.jsx(xa,{className:`w-4 h-4 ${n===w.id?"text-pink-500":"text-gray-400"}`}),e.jsx("span",{className:`text-sm font-medium ${n===w.id?"text-pink-700 dark:text-pink-300":"text-gray-700 dark:text-gray-300"}`,children:w.name})]}),n===w.id&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",disabled:!x||f,onClick:I=>{I.stopPropagation(),m()},className:`p-1.5 rounded-lg transition-colors ${!x||f?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-pink-500 hover:bg-pink-50 dark:hover:bg-pink-900/30"}`,title:f?"Presets padr√£o n√£o podem ser atualizados":"Atualizar preset",children:e.jsx(Zr,{className:"w-3.5 h-3.5"})}),e.jsx("button",{type:"button",disabled:!x||f,onClick:I=>{I.stopPropagation(),p()},className:`p-1.5 rounded-lg transition-colors ${!x||f?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30"}`,title:f?"Presets padr√£o n√£o podem ser exclu√≠dos":"Excluir preset",children:e.jsx(ar,{className:"w-3.5 h-3.5"})})]})]},w.id))})]})," "]})]})}),e.jsxs(ut,{className:"flex-row items-center justify-between",children:[e.jsxs("button",{type:"button",onClick:G,className:"flex items-center gap-2 px-4 py-2.5 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:[e.jsx(al,{className:"w-4 h-4"}),"Limpar"]}),e.jsxs("button",{type:"button",onClick:A,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-pink-500 to-pink-600 text-white rounded-xl font-medium shadow-lg shadow-pink-500/25 hover:shadow-xl hover:shadow-pink-500/30 hover:from-pink-600 hover:to-pink-700 transition-all duration-200",children:[e.jsx(Re,{className:"w-4 h-4"}),"Aplicar filtros"]})]})]})})}function xb(){return e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsx("div",{className:"grid gap-3 lg:hidden",children:Array.from({length:4}).map((t,r)=>e.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(z,{className:"w-11 h-11 rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx(z,{className:"h-4 w-3/4 rounded"}),e.jsx(z,{className:"h-5 w-16 rounded-full"})]}),e.jsx(z,{className:"h-3 w-1/3 rounded"})]})]}),e.jsxs("div",{className:"flex justify-between gap-3 pt-1",children:[e.jsx(z,{className:"h-3 w-24 rounded"}),e.jsx(z,{className:"h-5 w-20 rounded"})]})]},r))}),e.jsx("div",{className:"hidden lg:block",children:e.jsx("div",{className:"overflow-hidden animate-pulse",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/30",children:e.jsx("tr",{children:["Entrega","Cliente","Status","Criada em","Voucher / Cr√©dito","A√ß√µes"].map((t,r)=>e.jsx("th",{className:`px-4 py-3 text-left font-medium text-gray-400 dark:text-gray-500 ${r===5?"text-right":""}`,children:t},r))})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:Array.from({length:6}).map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3.5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"w-8 h-8 rounded-lg"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(z,{className:"h-4 w-32 rounded"}),r%2===0&&e.jsx(z,{className:"h-3 w-20 rounded"})]})]})}),e.jsx("td",{className:"px-4 py-3.5",children:e.jsx(z,{className:"h-4 w-24 rounded"})}),e.jsx("td",{className:"px-4 py-3.5",children:e.jsx(z,{className:"h-6 w-20 rounded-full"})}),e.jsx("td",{className:"px-4 py-3.5",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(z,{className:"h-3.5 w-16 rounded"}),e.jsx(z,{className:"h-3 w-12 rounded"})]})}),e.jsx("td",{className:"px-4 py-3.5",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(z,{className:"h-3.5 w-24 rounded"}),r%3===0&&e.jsx(z,{className:"h-5 w-16 rounded-full"})]})}),e.jsx("td",{className:"px-4 py-3.5 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(z,{className:"w-8 h-8 rounded-lg"}),e.jsx(z,{className:"w-8 h-8 rounded-lg"})]})})]},r))})]})})})]})}function bb({isOpen:t,onClose:r,deliveryId:a}){var u;const{t:s}=ce(),{language:l}=St(),{data:o,isLoading:i,isError:n}=be({queryKey:["partner","delivery",a],queryFn:()=>la(a),enabled:!!a&&t}),d=o?Es(o):"draft";return e.jsx(yt,{open:t,onOpenChange:m=>!m&&r(),direction:"right",children:e.jsx(dt,{className:"sm:max-w-md w-full",children:i?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center gap-4",children:[e.jsx(fe,{className:"w-8 h-8 animate-spin text-pink-500"}),e.jsx("p",{className:"text-gray-500",children:"Carregando detalhes..."})]}):n||!o?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6 text-center",children:[e.jsx("p",{className:"text-red-500 font-medium mb-2",children:"Erro ao carregar"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"N√£o foi poss√≠vel buscar os dados da entrega."}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm font-medium",children:"Fechar"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(mt,{children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(xt,{className:"text-xl",children:o.title||"Sem t√≠tulo"}),e.jsx(Ir,{className:"flex items-center gap-2",children:e.jsxs("span",{children:["ID: ",o.id.slice(0,8)]})})]}),e.jsx("div",{className:"flex flex-col items-end gap-2",children:e.jsx(Ms,{status:d})})]}),e.jsxs(bt,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Data do Evento"}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[e.jsx(Oe,{className:"w-4 h-4 text-pink-500"}),e.jsx("span",{className:"font-medium",children:o.event_date?Ps(o.event_date,l):"N√£o informada"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[e.jsx(ft,{className:"w-4 h-4 text-pink-500"}),e.jsx("span",{className:"font-medium truncate block max-w-[120px]",title:o.client_name||"",children:o.client_name||"N/A"})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Bt,{className:"w-4 h-4 text-purple-500"}),"Voucher & Cr√©ditos"]}),e.jsx(Ts,{status:o.credit_status,variant:"pill"})]}),o.voucher_code?e.jsxs("div",{className:"mt-3 p-3 bg-white dark:bg-gray-800 rounded-xl border border-dashed border-gray-200 dark:border-gray-600 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"C√ìDIGO DO VOUCHER"}),e.jsx("p",{className:"text-2xl font-mono font-bold text-gray-900 dark:text-white tracking-widest select-all",children:o.voucher_code})]}):e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Voucher ainda n√£o gerado. Complete o upload para liberar."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-rose-500"}),"Arquivos",e.jsxs("span",{className:"ml-auto text-xs font-normal text-gray-500",children:[((u=o.assets)==null?void 0:u.length)||0," itens"]})]}),o.assets&&o.assets.length>0?e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.assets.slice(0,6).map(m=>e.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden relative",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:m.content_type.startsWith("video")?e.jsx(Za,{className:"w-6 h-6"}):e.jsx(Ge,{className:"w-6 h-6"})})},m.upload_id)),o.assets.length>6&&e.jsxs("div",{className:"aspect-square bg-gray-50 dark:bg-gray-800 rounded-lg flex items-center justify-center text-xs font-bold text-gray-500",children:["+",o.assets.length-6]})]}):e.jsx("div",{className:"p-4 rounded-xl border border-dashed border-gray-200 dark:border-gray-700 text-center text-gray-400 text-sm",children:"Nenhum arquivo enviado"})]})]}),e.jsxs(ut,{className:"grid grid-cols-2 gap-3",children:[e.jsxs(W,{to:`/partner/deliveries/${o.id}`,className:"flex items-center justify-center gap-2 px-4 py-3 bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold rounded-xl",children:[e.jsx(Ho,{className:"w-4 h-4"}),"Abrir Completo"]}),d==="draft"?e.jsxs(W,{to:`/partner/deliveries/${o.id}/upload`,className:"flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white font-bold rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(Wa,{className:"w-4 h-4"}),"Editar / Upload"]}):e.jsx("button",{onClick:r,className:"flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white font-bold rounded-xl",children:"Fechar"})]})]})})})}const sn="@babybook/partner-deliveries-filter-presets",pb=[{id:"builtin:needs_action",name:"Precisa de a√ß√£o",created_at:"2025-01-01T00:00:00.000Z",updated_at:"2025-01-01T00:00:00.000Z",filters:{status:"all",q:"",includeArchived:!1,sort:"status",voucher:"all",redeemed:"all",view:"needs_action"}},{id:"builtin:without_voucher",name:"Sem voucher",created_at:"2025-01-01T00:00:00.000Z",updated_at:"2025-01-01T00:00:00.000Z",filters:{status:"all",q:"",includeArchived:!1,sort:"newest",voucher:"without",redeemed:"all"}}];function hb(){try{const t=localStorage.getItem(sn);if(!t)return[];const r=JSON.parse(t);return Array.isArray(r)?r.map(a=>a).filter(a=>!!(a!=null&&a.id)&&!!(a!=null&&a.name)&&!!(a!=null&&a.filters)):[]}catch{return[]}}function gb(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`preset_${Date.now()}`}function Xt({label:t,count:r,active:a,onClick:s}){return e.jsxs("button",{onClick:s,className:D("flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 flex-shrink-0",a?"bg-gray-900 text-white dark:bg-white dark:text-gray-900 shadow-md transform scale-105":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 border border-gray-100 dark:border-gray-700"),children:[e.jsx("span",{children:t}),r>0&&e.jsx("span",{className:D("px-1.5 py-0.5 rounded-full text-[10px] font-bold tabular-nums",a?"bg-white/20 text-white dark:bg-black/10 dark:text-gray-900":"bg-gray-100 dark:bg-gray-700 text-gray-500"),children:r})]})}function fb({label:t,onClear:r}){return e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-pink-50 text-pink-700 dark:bg-pink-900/20 dark:text-pink-300 border border-pink-100 dark:border-pink-900/30 animate-in fade-in zoom-in duration-200",children:[e.jsx("span",{children:t}),e.jsx("button",{onClick:r,className:"hover:bg-pink-100 dark:hover:bg-pink-900/40 rounded-full p-0.5 transition-colors",children:e.jsx(De,{className:"w-3 h-3"})})]})}function vb(){var Qt,Yt,vt,Fs,qs;const{t}=ce(),r=Ae(),[a,s]=Lo();Tt(c.useMemo(()=>({title:t("partner.deliveries.list.title"),actions:e.jsx(bs,{to:"/partner/deliveries/new",label:t("partner.deliveries.newDelivery"),tone:"primary",icon:e.jsx(Ye,{className:"w-4 h-4"})})}),[t]));const l=a.get("status")||"all",o=a.get("q")||"",i=a.get("archived")==="1"||l==="archived",n=a.get("sort")||"newest",d=a.get("voucher")||"all",u=a.get("redeemed")||"all",m=a.get("credit")||"all",p=a.get("view")||"all",f=a.get("created")||"all",x=a.get("created_from")||"",b=a.get("created_to")||"",g=a.get("redeemed_period")||"all",h=a.get("redeemed_from")||"",k=a.get("redeemed_to")||"",[v,y]=c.useState(o),[N,_]=c.useState(o),[A,G]=c.useState(i),[O,C]=c.useState(n),[j,w]=c.useState(l),[I,M]=c.useState(!1),[V,J]=c.useState(d),[ae,L]=c.useState(u),[ee,ne]=c.useState(m),[ue,B]=c.useState(p),[se,he]=c.useState(f),[ye,H]=c.useState(x),[we,te]=c.useState(b),[xe,S]=c.useState(g),[$,oe]=c.useState(h),[Q,de]=c.useState(k),[q,me]=c.useState(()=>hb()),[F,X]=c.useState(""),[T,P]=c.useState(null);c.useEffect(()=>{try{localStorage.setItem(sn,JSON.stringify(q))}catch{}},[q]),c.useEffect(()=>{const Y=setTimeout(()=>_(v),300);return()=>clearTimeout(Y)},[v]);const U=c.useRef("");c.useEffect(()=>{const Y=a.toString();Y!==U.current&&(U.current=Y,w(a.get("status")||"all"),y(a.get("q")||""),_(a.get("q")||""),G(a.get("archived")==="1"),C(a.get("sort")||"newest"),J(a.get("voucher")||"all"),L(a.get("redeemed")||"all"),ne(a.get("credit")||"all"),B(a.get("view")||"all"),he(a.get("created")||"all"),H(a.get("created_from")||""),te(a.get("created_to")||""),S(a.get("redeemed_period")||"all"),oe(a.get("redeemed_from")||""),de(a.get("redeemed_to")||""))},[a]),c.useEffect(()=>{const Y=new URLSearchParams;j!=="all"&&Y.set("status",j),N&&Y.set("q",N),A&&Y.set("archived","1"),O!=="newest"&&Y.set("sort",O),V!=="all"&&Y.set("voucher",V),ae!=="all"&&Y.set("redeemed",ae),ee!=="all"&&Y.set("credit",ee),ue!=="all"&&Y.set("view",ue),se!=="all"&&Y.set("created",se),ye&&Y.set("created_from",ye),we&&Y.set("created_to",we),xe!=="all"&&Y.set("redeemed_period",xe),$&&Y.set("redeemed_from",$),Q&&Y.set("redeemed_to",Q),Y.toString()!==a.toString()&&s(Y,{replace:!0})},[j,N,A,O,V,ae,ee,ue,se,ye,we,xe,$,Q,a,s]);const ie=c.useMemo(()=>({voucher:V,redeemed:ae,credit:ee,view:ue,sort:O,createdPeriod:se,createdFrom:ye,createdTo:we,redeemedPeriod:xe,redeemedFrom:$,redeemedTo:Q}),[V,ae,ee,ue,O,se,ye,we,xe,$,Q]),ge=Y=>{J(Y.voucher),L(Y.redeemed),ne(Y.credit),B(Y.view),C(Y.sort),he(Y.createdPeriod),H(Y.createdFrom),te(Y.createdTo),S(Y.redeemedPeriod),oe(Y.redeemedFrom),de(Y.redeemedTo),X("")},Me={status:j,q:v.trim(),includeArchived:A,sort:O,voucher:V,redeemed:ae,credit:ee,view:ue,createdPeriod:se,createdFrom:ye,createdTo:we,redeemedPeriod:xe,redeemedFrom:$,redeemedTo:Q},ze=Y=>{X(Y.id),w(Y.filters.status),G(Y.filters.includeArchived),y(Y.filters.q),_(Y.filters.q),ge({...ie,voucher:Y.filters.voucher,redeemed:Y.filters.redeemed,credit:Y.filters.credit??"all",view:Y.filters.view??"all",sort:Y.filters.sort,createdPeriod:Y.filters.createdPeriod??"all",createdFrom:Y.filters.createdFrom??"",createdTo:Y.filters.createdTo??"",redeemedPeriod:Y.filters.redeemedPeriod??"all",redeemedFrom:Y.filters.redeemedFrom??"",redeemedTo:Y.filters.redeemedTo??""})},at=Y=>{const Ue={id:gb(),name:Y,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),filters:Me};me(pr=>[...pr,Ue]),X(Ue.id)},cr=()=>{F&&me(Y=>Y.map(Ue=>Ue.id===F?{...Ue,updated_at:new Date().toISOString(),filters:Me}:Ue))},dr=()=>{F&&(me(Y=>Y.filter(Ue=>Ue.id!==F)),X(""))},mr=()=>{w("all"),G(!1),y(""),_(""),J("all"),L("all"),ne("all"),B("all"),he("all"),S("all"),C("newest"),X("")},Kt=20,{isLoading:kt,isError:st,fetchNextPage:ur,hasNextPage:Gt,isFetchingNextPage:Ht,items:xr,aggregations:_e}=yb({statusFilter:j,includeArchived:A,q:N,sort:O,voucherFilter:V,redeemedFilter:ae,creditFilter:ee,viewFilter:ue,createdPeriod:se,createdFrom:ye,createdTo:we,redeemedPeriod:xe,redeemedFrom:$,redeemedTo:Q,PAGE_SIZE:Kt}),Rt=c.useRef(null);c.useEffect(()=>{const Y=new IntersectionObserver(Ue=>{Ue[0].isIntersecting&&Gt&&!Ht&&ur()},{threshold:.1,rootMargin:"100px"});return Rt.current&&Y.observe(Rt.current),()=>Y.disconnect()},[Gt,Ht,ur]);const Wt=Se({mutationFn:({id:Y,archive:Ue})=>qd(Y,Ue),onSuccess:()=>r.invalidateQueries({queryKey:["partner","deliveries"]})}),br=(Y,Ue)=>{Wt.mutate({id:Y.id,archive:Ue}),At.success(Ue?"Entrega arquivada":"Entrega desarquivada")},ma=j!=="all"||v||ue!=="all";return e.jsx(Ke,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:t("partner.deliveries.list.title")}),e.jsx("p",{className:"text-base text-gray-500 dark:text-gray-400 mt-2",children:"Gerencie suas entregas, status e vouchers."})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx($o,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),e.jsx("input",{type:"text",value:v,onChange:Y=>y(Y.target.value),placeholder:"Buscar por cliente ou t√≠tulo...",className:"w-full pl-12 pr-4 py-4 bg-white dark:bg-gray-800 border-none rounded-[2.5rem] shadow-sm text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-pink-500/50 transition-all text-base"}),e.jsx("button",{onClick:()=>M(!0),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full text-gray-500 transition-colors",children:e.jsx(Pa,{className:"w-5 h-5"})})]}),e.jsxs(W,{to:"/partner/deliveries/new",className:"flex-shrink-0 hidden sm:inline-flex group relative items-center justify-center gap-2 px-6 py-4 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-2xl font-bold shadow-lg shadow-gray-900/10 dark:shadow-white/10 overflow-hidden transition-transform active:scale-95",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-500 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"}),e.jsx("span",{children:"Nova Entrega"})]})]}),e.jsx(W,{to:"/partner/deliveries/new",className:"flex-shrink-0 sm:hidden flex items-center justify-center w-14 h-14 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-[1.5rem] shadow-lg hover:scale-105 active:scale-95 transition-all",children:e.jsx(Ye,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 no-scrollbar mask-gradient-x",children:[e.jsx(Xt,{label:"Todas",count:(_e==null?void 0:_e.total)??0,active:j==="all"&&!A,onClick:()=>{w("all"),G(!1)}}),e.jsx(Xt,{label:"Rascunho",count:((Qt=_e==null?void 0:_e.by_status)==null?void 0:Qt.draft)??0,active:j==="draft",onClick:()=>w("draft")}),e.jsx(Xt,{label:"Processando",count:((Yt=_e==null?void 0:_e.by_status)==null?void 0:Yt.processing)??0,active:j==="processing",onClick:()=>w("processing")}),e.jsx(Xt,{label:"Prontas",count:((vt=_e==null?void 0:_e.by_status)==null?void 0:vt.ready)??0,active:j==="ready",onClick:()=>w("ready")}),e.jsx(Xt,{label:"Entregues",count:((Fs=_e==null?void 0:_e.by_status)==null?void 0:Fs.delivered)??0,active:j==="delivered",onClick:()=>w("delivered")}),e.jsx(Xt,{label:"Arquivadas",count:((qs=_e==null?void 0:_e.by_status)==null?void 0:qs.archived)??0,active:A,onClick:()=>{G(!0),w("all")}})]}),ma&&e.jsx("div",{className:"flex flex-wrap gap-2 animate-in fade-in slide-in-from-top-2",children:ue==="needs_action"&&e.jsx(fb,{label:"Precisa de aten√ß√£o",onClear:()=>B("all")})})]}),e.jsx(ub,{isOpen:I,onClose:()=>M(!1),filters:ie,onApply:ge,onReset:mr,presets:q,builtinPresets:pb,selectedPresetId:F,onSelectPreset:ze,onSavePreset:at,onUpdatePreset:cr,onDeletePreset:dr,isBuiltinSelected:F.startsWith("builtin:"),hasUserPreset:!!(F&&!F.startsWith("builtin:"))}),e.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-[2.5rem] shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-black/20 border border-white/50 dark:border-gray-700/50 overflow-hidden min-h-[400px]",children:kt?e.jsx("div",{className:"p-8",children:e.jsx(xb,{})}):st?e.jsx(Ut,{onRetry:()=>{},title:"Erro ao carregar entregas"}):xr.length===0?e.jsxs("div",{className:"p-12 flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-50 dark:bg-gray-700/50 rounded-full flex items-center justify-center mb-6",children:e.jsx(Pt,{className:"w-10 h-10 text-gray-300 dark:text-gray-500"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Nenhuma entrega encontrada"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-sm mx-auto mb-8",children:"Tente ajustar os filtros ou crie uma nova entrega para come√ßar."}),e.jsx(W,{to:"/partner/deliveries/new",className:"px-6 py-3 bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold rounded-2xl hover:scale-105 transition-transform",children:"Criar Nova Entrega"})]}):e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:`hidden md:grid ${Is} items-center gap-4 px-6 py-4 bg-gray-50/50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700 text-xs font-bold text-gray-400 uppercase tracking-wider`,children:[e.jsx("div",{children:"Entrega / Cliente"}),e.jsx("div",{children:"Status"}),e.jsx("div",{children:"Voucher"}),e.jsx("div",{children:"Criado em"}),e.jsx("div",{className:"text-right",children:"A√ß√µes"})]}),e.jsx("div",{children:xr.map((Y,Ue)=>e.jsxs(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:Ue*.05},className:"group border-b border-gray-50 dark:border-gray-700/50 last:border-0 hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[e.jsx("div",{className:"md:hidden p-4",children:e.jsx(Zi,{delivery:Y,onArchive:pr=>br(Y,pr),isArchiving:Wt.isPending})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(en,{delivery:Y,isSelected:T===Y.id,onPreview:()=>P(Y.id),onArchive:pr=>br(Y,pr),isArchiving:Wt.isPending})})]},Y.id))}),e.jsx("div",{ref:Rt,className:"py-8 text-center text-gray-400",children:Ht?e.jsx("div",{className:"flex justify-center",children:e.jsx(fe,{className:"w-6 h-6 animate-spin text-pink-500"})}):Gt?e.jsx("span",{className:"text-xs",children:"Carregando mais..."}):null})]})}),e.jsx(bb,{isOpen:!!T,onClose:()=>P(null),deliveryId:T})]})})}function yb(t){var n,d;const r={...t,status_filter:t.statusFilter==="all"?void 0:t.statusFilter,limit:t.PAGE_SIZE,offset:t.pageParam},{data:a,...s}=hn({queryKey:["partner","deliveries","list",t],initialPageParam:0,queryFn:({pageParam:u})=>Gr({...r,offset:u}),getNextPageParam:(u,m)=>{const p=m.reduce((f,x)=>{var b;return f+(((b=x.deliveries)==null?void 0:b.length)||0)},0);return p<(u.total||0)?p:void 0}}),l=c.useMemo(()=>(a==null?void 0:a.pages.flatMap(u=>u.deliveries||[]))||[],[a]),o=((n=a==null?void 0:a.pages[0])==null?void 0:n.total)||0,i=(d=a==null?void 0:a.pages[0])==null?void 0:d.aggregations;return{data:a,items:l,total:o,aggregations:i,...s}}function jb(){const t=ve(),r=wi(),a=Ae(),s=ke(h=>h.login),l="/pro.html",[o,i]=c.useState(""),[n,d]=c.useState(""),[u,m]=c.useState(!1),[p,f]=c.useState(!1),[x,b]=c.useState(null),g=async h=>{if(h.preventDefault(),b(null),!o.trim()){b("Informe seu e-mail");return}if(!n){b("Informe sua senha");return}try{await r.mutateAsync({email:o.trim(),password:n,rememberMe:p}),a.removeQueries({queryKey:["user-profile"]});const k=await re.get("/me",{schema:as});s(k);const v=new URLSearchParams(window.location.search),y=ea(v.get("redirectTo"),"/partner");t(y)}catch(k){k instanceof Error?k.message.includes("photographer")?b("Sua conta n√£o √© uma conta de parceiro. Entre em contato com o suporte."):b(k.message||"Email ou senha inv√°lidos"):b("Email ou senha inv√°lidos")}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-pink-50 via-white to-rose-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-900 flex flex-col",children:[e.jsx("header",{className:"p-4",children:e.jsx("a",{href:l,rel:"noreferrer",children:e.jsx(or,{variant:"b2b",size:"md"})})}),e.jsx("main",{className:"flex-1 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-sm",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Portal do Parceiro"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"Entre para gerenciar suas entregas"})]}),x&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-300",children:[e.jsx(pt,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:x})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx(it,{label:"E-mail",type:"email",value:o,onChange:h=>i(h.target.value),placeholder:"seu@email.com",autoComplete:"email",rules:[_r.email],validateDelay:300}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:u?"text":"password",value:n,onChange:h=>d(h.target.value),placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-colors pr-12 placeholder:text-gray-400 dark:placeholder:text-gray-500",autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400","aria-label":u?"Ocultar senha":"Mostrar senha",children:u?e.jsx(Cr,{className:"w-5 h-5"}):e.jsx(Ot,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("button",{type:"button",onClick:()=>f(!p),"aria-pressed":p,"aria-label":p?"Desativar lembrar de mim":"Ativar lembrar de mim",className:`
                    flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all
                    ${p?"bg-pink-100 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}
                  `,children:[e.jsx("span",{children:"Lembrar de mim"}),e.jsx("div",{className:`
                    relative w-8 h-4 rounded-full transition-colors
                    ${p?"bg-pink-500":"bg-gray-300 dark:bg-gray-500"}
                  `,children:e.jsx("div",{className:`
                      absolute top-0.5 w-3 h-3 bg-white rounded-full shadow transition-transform
                      ${p?"translate-x-4":"translate-x-0.5"}
                    `})})]}),e.jsx(W,{to:"/forgot-password",className:"text-pink-600 hover:text-pink-700 font-medium",children:"Esqueci minha senha"})]}),e.jsx("button",{type:"submit",disabled:r.isPending,className:"w-full py-3 px-4 bg-pink-500 text-white font-medium rounded-xl hover:bg-pink-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r.isPending?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-5 h-5 animate-spin"}),"Entrando..."]}):"Entrar"})]}),e.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Ainda n√£o tem conta?"," ",e.jsx(W,{to:"/pro/register",className:"text-pink-600 dark:text-pink-400 hover:text-pink-700 dark:hover:text-pink-300 font-medium",children:"Cadastre-se gr√°tis"})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("a",{href:l,className:"inline-flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 hover:text-pink-600 dark:hover:text-pink-400 hover:bg-pink-50 dark:hover:bg-pink-900/20 transition-all duration-200 rounded-lg px-3 py-1.5",rel:"noreferrer",children:"‚Üê Voltar para Baby Book Pro"})})]})})]})}const No=[{id:1,title:"Dados Pessoais",icon:ft},{id:2,title:"Contato",icon:zt},{id:3,title:"Seguran√ßa",icon:Nt}];function kb(){const t="/pro.html",r=ve(),[a,s]=c.useState(1),[l,o]=c.useState("forward"),[i,n]=c.useState(""),[d,u]=c.useState(""),[m,p]=c.useState(""),[f,x]=c.useState(""),[b,g]=c.useState(""),[h,k]=c.useState(""),[v,y]=c.useState(!1),[N,_]=c.useState(!1),[A,G]=c.useState(!1),[O,C]=c.useState(null),j=Se({mutationFn:B=>Ed(B),onSuccess:()=>{r("/pro/login?registered=1")},onError:B=>{B instanceof Error?C(B.message):C("Erro ao criar conta. Tente novamente.")}}),w=B=>{switch(C(null),B){case 1:if(!i.trim())return C("Informe seu nome"),!1;break;case 2:if(!d.trim())return C("Informe seu e-mail"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.trim()))return C("Informe um e-mail v√°lido"),!1;break;case 3:if(!m)return C("Crie uma senha"),!1;if(m.length<8)return C("A senha deve ter pelo menos 8 caracteres"),!1;if(m!==f)return C("As senhas n√£o conferem"),!1;if(!A)return C("Voc√™ precisa aceitar os termos de uso"),!1;break}return!0},I=()=>{w(a)&&(o("forward"),s(B=>Math.min(B+1,3)))},M=()=>{C(null),o("back"),s(B=>Math.max(B-1,1))},V=B=>{B.preventDefault(),w(3)&&j.mutate({name:i.trim(),email:d.trim(),password:m,studio_name:b.trim()||void 0,phone:h.trim()||void 0})},J=B=>{const se=B.replace(/\D/g,"").slice(0,11);return se.length<=2?se:se.length<=7?`(${se.slice(0,2)}) ${se.slice(2)}`:`(${se.slice(0,2)}) ${se.slice(2,7)}-${se.slice(7)}`},ae=()=>e.jsx("div",{className:"mb-10 px-4",children:e.jsxs("div",{className:"relative flex items-center justify-between max-w-xs mx-auto",children:[e.jsx("div",{className:"absolute left-0 right-0 top-1/2 -translate-y-1/2 h-1 bg-gray-100 dark:bg-gray-700/50 rounded-full"}),e.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-1 bg-gradient-to-r from-pink-500 to-rose-500 rounded-full transition-all duration-500 ease-out",style:{width:`${(a-1)/(No.length-1)*100}%`}}),No.map(B=>{const se=B.icon,he=a>B.id,ye=a===B.id;return e.jsxs("div",{className:"relative z-10 group",children:[e.jsx("div",{className:D("w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 ease-out border-4",he?"bg-gradient-to-br from-pink-500 to-rose-600 text-white border-white dark:border-gray-800 shadow-lg shadow-pink-500/30 scale-100":ye?"bg-white dark:bg-gray-800 text-pink-600 dark:text-pink-400 border-pink-100 dark:border-pink-900 ring-2 ring-pink-500 ring-offset-2 ring-offset-white dark:ring-offset-gray-900 scale-110":"bg-white dark:bg-gray-800 text-gray-300 dark:text-gray-600 border-gray-100 dark:border-gray-700"),children:he?e.jsx(Re,{className:"w-5 h-5"}):e.jsx(se,{className:"w-4 h-4"})}),e.jsx("span",{className:D("absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] font-bold uppercase tracking-wider whitespace-nowrap transition-all duration-300",ye?"text-pink-600 dark:text-pink-400 translate-y-0 opacity-100":"text-gray-400 dark:text-gray-500 translate-y-1 opacity-0 sm:opacity-70"),children:B.title})]},B.id)})]})}),L=()=>e.jsxs("div",{className:"space-y-5 animate-in fade-in slide-in-from-right-8 duration-300",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1.5",children:["Seu Nome ",e.jsx("span",{className:"text-pink-500",children:"*"})]}),e.jsx("div",{className:"relative group",children:e.jsx("input",{id:"name",type:"text",value:i,onChange:B=>n(B.target.value),placeholder:"Como voc√™ gostaria de ser chamado",className:"w-full pl-4 pr-4 py-3.5 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all placeholder:text-gray-400 dark:placeholder:text-gray-500 group-hover:bg-white dark:group-hover:bg-gray-800",autoComplete:"name",autoFocus:!0})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"studioName",className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1.5",children:["Nome do Est√∫dio"," ",e.jsx("span",{className:"text-gray-400 dark:text-gray-500 font-normal text-xs ml-1",children:"(opcional)"})]}),e.jsx("div",{className:"relative group",children:e.jsx("input",{id:"studioName",type:"text",value:b,onChange:B=>g(B.target.value),placeholder:"Ex: Studio Encanto Fotografia",className:"w-full pl-4 pr-4 py-3.5 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all placeholder:text-gray-400 dark:placeholder:text-gray-500 group-hover:bg-white dark:group-hover:bg-gray-800"})}),e.jsxs("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1.5",children:[e.jsx(pe,{className:"w-3 h-3 text-amber-500"}),"Este nome aparecer√° para seus clientes no app"]})]})]}),ee=()=>e.jsxs("div",{className:"space-y-5 animate-in fade-in slide-in-from-right-8 duration-300",children:[e.jsx(it,{label:"E-mail *",type:"email",value:d,onChange:B=>u(B.target.value),placeholder:"seu@email.com",autoComplete:"email",autoFocus:!0,rules:[_r.email],validateDelay:300,helperText:"Usaremos este e-mail para login e comunica√ß√µes",className:"w-full pl-4 pr-4 py-3.5 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all placeholder:text-gray-400 dark:placeholder:text-gray-500 hover:bg-white dark:hover:bg-gray-800"}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1.5",children:["WhatsApp"," ",e.jsx("span",{className:"text-gray-400 dark:text-gray-500 font-normal text-xs ml-1",children:"(opcional)"})]}),e.jsx("div",{className:"relative group",children:e.jsx("input",{id:"phone",type:"tel",value:h,onChange:B=>k(J(B.target.value)),placeholder:"(11) 99999-9999",className:"w-full pl-4 pr-4 py-3.5 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all placeholder:text-gray-400 dark:placeholder:text-gray-500 group-hover:bg-white dark:group-hover:bg-gray-800",autoComplete:"tel"})}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Para suporte priorit√°rio e notifica√ß√µes r√°pidas"})]})]}),ne=()=>e.jsxs("div",{className:"space-y-5 animate-in fade-in slide-in-from-right-8 duration-300",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1.5",children:["Senha ",e.jsx("span",{className:"text-pink-500",children:"*"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{id:"password",type:v?"text":"password",value:m,onChange:B=>p(B.target.value),placeholder:"M√≠nimo 8 caracteres",className:"w-full pl-4 pr-12 py-3.5 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all placeholder:text-gray-400 dark:placeholder:text-gray-500 group-hover:bg-white dark:group-hover:bg-gray-800",autoComplete:"new-password",autoFocus:!0}),e.jsx("button",{type:"button",onClick:()=>y(!v),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 transition-colors p-1",children:v?e.jsx(Cr,{className:"w-5 h-5"}):e.jsx(Ot,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"mt-2 h-1 w-full bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden flex gap-1",children:[1,2,3,4].map(B=>e.jsx("div",{className:D("h-full flex-1 rounded-full transition-all duration-500",m.length>=B*3?m.length>=12?"bg-emerald-500":m.length>=8?"bg-amber-500":"bg-rose-500":"bg-transparent")},B))})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"confirmPassword",className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1.5",children:["Confirmar Senha ",e.jsx("span",{className:"text-pink-500",children:"*"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{id:"confirmPassword",type:N?"text":"password",value:f,onChange:B=>x(B.target.value),placeholder:"Repita a senha",className:"w-full pl-4 pr-12 py-3.5 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all placeholder:text-gray-400 dark:placeholder:text-gray-500 group-hover:bg-white dark:group-hover:bg-gray-800",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>_(!N),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 transition-colors p-1",children:N?e.jsx(Cr,{className:"w-5 h-5"}):e.jsx(Ot,{className:"w-5 h-5"})})]}),f&&e.jsx("p",{className:D("mt-2 text-xs font-medium flex items-center gap-1.5 animate-in fade-in slide-in-from-left-2",m===f?"text-emerald-600":"text-rose-500"),children:m===f?e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"w-3.5 h-3.5"})," Senhas conferem"]}):e.jsxs(e.Fragment,{children:[e.jsx(pt,{className:"w-3.5 h-3.5"})," Senhas n√£o conferem"]})})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50/50 dark:bg-gray-800/50 rounded-2xl border border-gray-100 dark:border-gray-700/50 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("div",{className:"relative flex items-center h-5",children:e.jsx("input",{id:"terms",type:"checkbox",checked:A,onChange:B=>G(B.target.checked),className:"w-5 h-5 rounded-md border-gray-300 dark:border-gray-600 text-pink-600 focus:ring-pink-500 dark:bg-gray-700 cursor-pointer"})}),e.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-600 dark:text-gray-400 cursor-pointer select-none",children:["Li e aceito os"," ",e.jsx(W,{to:"/termos",target:"_blank",rel:"noopener noreferrer",className:"font-bold text-gray-900 dark:text-white hover:text-pink-600 dark:hover:text-pink-400 transition-colors underline decoration-gray-300 dark:decoration-gray-600 underline-offset-2",children:"Termos de Uso"})," ","e a"," ",e.jsx(W,{to:"/privacidade",target:"_blank",rel:"noopener noreferrer",className:"font-bold text-gray-900 dark:text-white hover:text-pink-600 dark:hover:text-pink-400 transition-colors underline decoration-gray-300 dark:decoration-gray-600 underline-offset-2",children:"Pol√≠tica de Privacidade"}),"."]})]})})]}),ue=()=>{switch(a){case 1:return L();case 2:return ee();case 3:return ne();default:return null}};return e.jsxs("div",{className:"min-h-screen bg-[radial-gradient(ellipse_at_top_left,_var(--tw-gradient-stops))] from-gray-50 via-white to-pink-50/20 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-gradient-to-br from-pink-200/20 to-purple-200/20 dark:from-pink-900/10 dark:to-purple-900/10 rounded-full blur-[100px] -mr-40 -mt-40"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-gradient-to-tr from-blue-200/20 to-emerald-200/20 dark:from-blue-900/10 dark:to-emerald-900/10 rounded-full blur-[100px] -ml-40 -mb-40"})]}),e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs(W,{to:t,className:"inline-flex items-center gap-3 group",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500 to-rose-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-pink-500/20 group-hover:scale-110 group-hover:-rotate-3 transition-transform duration-300",children:e.jsx(rt,{className:"w-6 h-6 fill-current"})}),e.jsxs("span",{className:"text-2xl font-bold text-gray-900 dark:text-white tracking-tight",children:["BabyBook ",e.jsx("span",{className:"text-pink-600 dark:text-pink-400",children:"Pro"})]})]}),e.jsx("h2",{className:"mt-6 text-3xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Crie sua conta parceira"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Comece a encantar seus clientes hoje mesmo."})]}),e.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl py-8 px-6 shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-black/20 rounded-[2rem] border border-white/50 dark:border-gray-700/50 sm:px-10 relative",children:[ae(),O&&e.jsxs("div",{className:"mb-6 p-4 bg-rose-50 dark:bg-rose-900/20 border border-rose-100 dark:border-rose-900/30 rounded-2xl flex items-center gap-3 text-rose-700 dark:text-rose-300 animate-in fade-in slide-in-from-top-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-rose-100 dark:bg-rose-900/50 flex items-center justify-center flex-shrink-0",children:e.jsx(pt,{className:"w-4 h-4"})}),e.jsx("p",{className:"text-sm font-medium",children:O})]}),e.jsxs("form",{onSubmit:V,className:"relative min-h-[280px] flex flex-col justify-between",children:[e.jsx("div",{className:"flex-1",children:ue()}),e.jsxs("div",{className:"mt-8 flex items-center gap-3 pt-6 border-t border-gray-100 dark:border-gray-700/50",children:[a>1?e.jsxs("button",{type:"button",onClick:M,className:"flex-1 py-3.5 px-4 bg-gray-100 dark:bg-gray-700/50 text-gray-700 dark:text-gray-300 text-sm font-bold rounded-2xl hover:bg-gray-200 dark:hover:bg-gray-700 transition-all active:scale-[0.98] flex items-center justify-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4"}),"Voltar"]}):e.jsx(W,{to:"/pro/login",className:"flex-1 py-3.5 px-4 bg-transparent text-gray-500 dark:text-gray-400 text-sm font-bold rounded-2xl hover:text-gray-900 dark:hover:text-white transition-colors flex items-center justify-center",children:"Ja tenho conta"}),a<3?e.jsxs("button",{type:"button",onClick:I,className:"flex-[2] py-3.5 px-4 bg-gray-900 dark:bg-white text-white dark:text-gray-900 text-sm font-bold rounded-2xl hover:bg-gray-800 dark:hover:bg-gray-100 transition-all active:scale-[0.98] shadow-lg shadow-gray-900/20 dark:shadow-white/10 flex items-center justify-center gap-2 group",children:["Continuar",e.jsx(Te,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"})]}):e.jsx("button",{type:"submit",disabled:j.isPending,className:"flex-[2] py-3.5 px-4 bg-gradient-to-r from-pink-500 to-rose-600 text-white text-sm font-bold rounded-2xl hover:from-pink-600 hover:to-rose-700 transition-all active:scale-[0.98] shadow-lg shadow-pink-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:j.isPending?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4 animate-spin"}),"Criando conta..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4"}),"Finalizar Cadastro"]})})]})]})]}),a===1&&e.jsxs("div",{className:"mt-8 text-center animate-in fade-in slide-in-from-bottom-4 duration-700 delay-100",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-4",children:"Benef√≠cios exclusivos"}),e.jsxs("div",{className:"flex justify-center gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-br from-emerald-100 to-teal-100 dark:from-emerald-900/30 dark:to-teal-900/30 text-emerald-600 dark:text-emerald-400 flex items-center justify-center mb-1",children:e.jsx(Be,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-[10px] font-medium text-gray-600 dark:text-gray-400 max-w-[80px] leading-tight",children:"1 cr√©dito gr√°tis"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center mb-1",children:e.jsx(sl,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-[10px] font-medium text-gray-600 dark:text-gray-400 max-w-[80px] leading-tight",children:"Portal completo"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-br from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30 text-amber-600 dark:text-amber-400 flex items-center justify-center mb-1",children:e.jsx(pe,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-[10px] font-medium text-gray-600 dark:text-gray-400 max-w-[80px] leading-tight",children:"Suporte VIP"})]})]})]})]})]})}function wb({children:t,isLoading:r=!1,isSuccess:a=!1,loadingText:s="Processando...",successText:l="Conclu√≠do!",successDuration:o=2e3,onSuccessEnd:i,variant:n="primary",size:d="md",icon:u,className:m,disabled:p,...f}){const[x,b]=c.useState("idle"),[g,h]=c.useState(!1);c.useEffect(()=>{if(r)b("loading"),h(!1);else if(a){b("success"),h(!0);const y=setTimeout(()=>{b("idle"),h(!1),i==null||i()},o);return()=>clearTimeout(y)}else b("idle")},[r,a,o,i]);const k={primary:D("bg-pink-500 text-white hover:bg-pink-600",x==="success"&&"bg-green-500 hover:bg-green-500"),secondary:D("bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700",x==="success"&&"bg-green-50 dark:bg-green-900/30 border-green-500 text-green-700 dark:text-green-300"),ghost:D("text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",x==="success"&&"text-green-600 dark:text-green-400")},v={sm:"px-3 py-1.5 text-sm gap-1.5",md:"px-4 py-2.5 text-sm gap-2",lg:"px-6 py-3 text-base gap-2"};return e.jsx("button",{className:D("inline-flex items-center justify-center font-medium rounded-xl transition-all","disabled:opacity-50 disabled:cursor-not-allowed","focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900",k[n],v[d],x==="success"&&"animate-in zoom-in-95 duration-200",m),disabled:p||x==="loading",...f,children:x==="loading"?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:D("animate-spin",d==="sm"?"w-3.5 h-3.5":d==="lg"?"w-5 h-5":"w-4 h-4")}),e.jsx("span",{children:s})]}):x==="success"&&g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 animate-ping rounded-full bg-white/30"}),e.jsx(Re,{className:D(d==="sm"?"w-3.5 h-3.5":d==="lg"?"w-5 h-5":"w-4 h-4")})]}),e.jsx("span",{children:l})]}):e.jsxs(e.Fragment,{children:[u,t]})})}function Nb({variant:t="full",className:r=""}){const{language:a,setLanguage:s,languages:l}=St(),[o,i]=c.useState(!1),n=c.useRef(null),d=l.find(m=>m.code===a)??l[0];c.useEffect(()=>{function m(p){n.current&&!n.current.contains(p.target)&&i(!1)}return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),c.useEffect(()=>{function m(p){p.key==="Escape"&&i(!1)}return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[]);const u=m=>{s(m.code),i(!1)};return t==="compact"?e.jsxs("div",{className:`relative ${r}`,ref:n,children:[e.jsxs("button",{type:"button",onClick:()=>i(!o),className:"flex items-center gap-1.5 px-2 py-1.5 text-sm rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors","aria-label":"Selecionar idioma","aria-expanded":o,"aria-haspopup":"listbox",children:[e.jsx(sa,{className:"w-4 h-4 text-slate-500 dark:text-slate-400"}),e.jsx("span",{className:"text-base",children:d.flag})]}),o&&e.jsx("div",{className:"absolute right-0 top-full mt-1 py-1 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg z-50 min-w-[140px]",role:"listbox","aria-label":"Idiomas dispon√≠veis",children:l.map(m=>e.jsxs("button",{type:"button",role:"option","aria-selected":m.code===a,onClick:()=>u(m),className:`w-full flex items-center gap-2 px-3 py-2 text-sm text-left hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors ${m.code===a?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-slate-700 dark:text-slate-300"}`,children:[e.jsx("span",{className:"text-base",children:m.flag}),e.jsx("span",{children:m.name})]},m.code))})]}):e.jsx("div",{className:`p-1.5 rounded-2xl bg-gray-100 dark:bg-gray-900/40 border border-gray-200 dark:border-gray-800 flex gap-2 ${r}`,children:l.map(m=>{const p=a===m.code;return e.jsxs("button",{type:"button",onClick:()=>u(m),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl text-xs font-semibold transition-all duration-300 ${p?"bg-white dark:bg-gray-800 text-pink-600 dark:text-pink-400 shadow-sm ring-1 ring-black/5 dark:ring-white/10":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-gray-800/50"}`,children:[e.jsx("span",{className:"text-sm",children:m.flag}),e.jsx("span",{children:m.name})]},m.code)})})}function Cb({className:t=""}){const{theme:r,setTheme:a}=Lr(),{t:s}=ce(),l=[{value:"light",label:s("partner.settings.preferences.themeLight"),icon:aa},{value:"dark",label:s("partner.settings.preferences.themeDark"),icon:Ua},{value:"system",label:s("partner.settings.preferences.themeSystem"),icon:Va}],o=i=>{a(i)};return e.jsx("div",{className:`p-1.5 rounded-2xl bg-gray-100 dark:bg-gray-900/40 border border-gray-200 dark:border-gray-800 flex gap-2 ${t}`,children:l.map(i=>{const n=i.icon,d=r===i.value;return e.jsxs("button",{type:"button",onClick:()=>o(i.value),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl text-xs font-semibold transition-all duration-300 ${d?"bg-white dark:bg-gray-800 text-pink-600 dark:text-pink-400 shadow-sm ring-1 ring-black/5 dark:ring-white/10":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-gray-800/50"}`,children:[e.jsx(n,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:i.label})]},i.value)})})}function Co(){return e.jsxs(Ke,{children:[e.jsxs("div",{className:"hidden md:block mb-8",children:[e.jsx(Z,{className:"h-4 w-16 mb-2"}),e.jsx(Z,{className:"h-8 w-48 mb-2"}),e.jsx(Z,{className:"h-5 w-32"})]}),e.jsx("div",{className:"md:hidden mb-4",children:e.jsx(Z,{className:"h-4 w-32"})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx(Z,{className:"h-6 w-32 mb-4"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(Z,{className:"w-24 h-24 rounded-xl"}),e.jsxs("div",{children:[e.jsx(Z,{className:"h-10 w-32 mb-2"}),e.jsx(Z,{className:"h-3 w-48"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx(Z,{className:"h-6 w-40 mb-4"}),e.jsx("div",{className:"space-y-4",children:Array.from({length:4}).map((t,r)=>e.jsxs("div",{children:[e.jsx(Z,{className:"h-4 w-24 mb-1"}),e.jsx(Z,{className:"h-12 w-full rounded-xl"})]},r))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx(Z,{className:"h-6 w-48 mb-4"}),e.jsx("div",{className:"space-y-4",children:Array.from({length:2}).map((t,r)=>e.jsxs("div",{children:[e.jsx(Z,{className:"h-4 w-32 mb-2"}),e.jsx(Z,{className:"h-10 w-full rounded-xl"})]},r))})]})]})}function Sb(){const{t}=ce(),r=Ae(),a=c.useRef(null),s=c.useRef(null);Tt(c.useMemo(()=>({title:t("partner.settings.title"),backTo:"/partner",backLabel:t("common.back")}),[t]));const[l,o]=c.useState(""),[i,n]=c.useState(""),[d,u]=c.useState(""),[m,p]=c.useState(null),[f,x]=c.useState(null),{data:b,isLoading:g,isError:h,refetch:k}=be({queryKey:["partner","profile"],queryFn:na});c.useEffect(()=>{b&&(o(b.name||""),n(b.studio_name||""),u(b.phone||""),p(b.logo_url))},[b]),c.useEffect(()=>()=>{s.current&&(URL.revokeObjectURL(s.current),s.current=null)},[]);const v=b?l!==(b.name||"")||i!==(b.studio_name||"")||d!==(b.phone||"")||f!==null:!1;Wd(v,t("errors.validation"));const[y,N]=c.useState(!1),_=Se({mutationFn:j=>Pd(j),onSuccess:()=>{r.invalidateQueries({queryKey:["partner","profile"]}),N(!0),At.success(t("common.success"))},onError:j=>{At.error(j instanceof Error?j.message:t("errors.generic"))}}),A=j=>{if(j.preventDefault(),!l.trim()){At.error(t("common.required"));return}_.mutate({name:l.trim(),studio_name:i.trim()||null,phone:d.trim()||null,logo_url:m})},G=j=>{var I;const w=(I=j.target.files)==null?void 0:I[0];if(w){if(!w.type.startsWith("image/")){At.error(t("errors.validation"));return}if(w.size>2*1024*1024){At.error(t("errors.validation"));return}x(w),s.current&&(URL.revokeObjectURL(s.current),s.current=null);const M=URL.createObjectURL(w);s.current=M,p(M)}},O=()=>{x(null),p(null),s.current&&(URL.revokeObjectURL(s.current),s.current=null),a.current&&(a.current.value="")},C=j=>{const w=j.replace(/\D/g,"").slice(0,11);return w.length<=2?w:w.length<=7?`(${w.slice(0,2)}) ${w.slice(2)}`:`(${w.slice(0,2)}) ${w.slice(2,7)}-${w.slice(7)}`};return h?e.jsx(Ut,{title:t("errors.generic"),onRetry:k,skeleton:e.jsx(Co,{})}):g?e.jsx(Co,{}):e.jsxs(Ke,{children:[e.jsxs("div",{className:"hidden md:block mb-10 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsx(Vt,{label:t("common.back")}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:t("partner.settings.profile.title")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t("partner.settings.title")})]}),e.jsx("div",{className:"md:hidden mb-4",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("partner.settings.title")})}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-[2.5rem] p-8 border border-white/50 dark:border-gray-700/50 mb-6 shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-black/20",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:t("partner.settings.profile.logo")}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"relative",children:m?e.jsxs("div",{className:"w-24 h-24 rounded-xl overflow-hidden border-2 border-gray-200 dark:border-gray-600",children:[e.jsx("img",{src:m,alt:"Logo",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:O,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600","aria-label":t("partner.settings.profile.removeLogo"),title:t("partner.settings.profile.removeLogo"),children:e.jsx(De,{className:"w-3 h-3"})})]}):e.jsx("div",{className:"w-24 h-24 rounded-xl bg-gray-100 dark:bg-gray-700 border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center",children:e.jsx(gt,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})})}),e.jsxs("div",{children:[e.jsx("input",{ref:a,type:"file",accept:"image/*",onChange:G,className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>{var j;return(j=a.current)==null?void 0:j.click()},className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(Tr,{className:"w-4 h-4"}),t("partner.settings.profile.uploadLogo")]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"JPG ou PNG at√© 2MB. Recomendado: 200x200 pixels"})]})]})]}),e.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-[2.5rem] p-8 border border-white/50 dark:border-gray-700/50 mb-6 shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-black/20",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:t("partner.settings.profile.title")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[t("partner.settings.profile.contactName")," *"]}),e.jsx("input",{id:"name",type:"text",value:l,onChange:j=>o(j.target.value),placeholder:t("partner.settings.profile.contactName"),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-colors placeholder:text-gray-400 dark:placeholder:text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"studioName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t("partner.settings.profile.companyName")}),e.jsx("input",{id:"studioName",type:"text",value:i,onChange:j=>n(j.target.value),placeholder:t("partner.settings.profile.companyName"),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-colors placeholder:text-gray-400 dark:placeholder:text-gray-500"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t("partner.settings.profile.companyName")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t("common.phone")}),e.jsx("input",{id:"phone",type:"tel",value:d,onChange:j=>u(C(j.target.value)),placeholder:"(11) 99999-9999",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-colors placeholder:text-gray-400 dark:placeholder:text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t("common.email")}),e.jsx("input",{type:"email",value:(b==null?void 0:b.email)||"",disabled:!0,className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-2xl bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t("common.email")})]})]})]}),e.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-[2.5rem] p-8 border border-white/50 dark:border-gray-700/50 mb-6 shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-black/20",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(sa,{className:"w-5 h-5 text-gray-500"}),t("partner.settings.preferences.title")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t("partner.settings.preferences.language")}),e.jsx(Nb,{})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t("partner.settings.preferences.theme")}),e.jsx(Cb,{})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-[1.5rem] p-8 border border-gray-200 dark:border-gray-700 mb-6 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:t("partner.settings.title")}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("common.status")}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white capitalize",children:(b==null?void 0:b.status)==="approved"?`‚úì ${t("partner.deliveries.status.delivered")}`:(b==null?void 0:b.status)==="pending"?`‚è≥ ${t("partner.deliveries.status.pending")}`:b==null?void 0:b.status})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("partner.credits.balance")}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[(b==null?void 0:b.voucher_balance)||0," ",t("partner.credits.title").toLowerCase()]})]})]})]}),e.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-[2.5rem] p-8 border border-white/50 dark:border-gray-700/50 mb-6 shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-black/20",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("partner.settings.security.title")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:t("partner.settings.security.logoutAllDesc")}),e.jsxs("button",{type:"button",onClick:async()=>{if(window.confirm(t("partner.settings.security.logoutAllConfirm")))try{await re.post("/auth/logout/all"),window.location.href="/pro/login"}catch{At.error(t("errors.generic"))}},className:"inline-flex items-center gap-2 px-4 py-2 border border-red-200 dark:border-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors text-sm font-medium",children:[e.jsx(kr,{className:"w-4 h-4"}),t("partner.settings.security.logoutAll")]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(wb,{type:"submit",isLoading:_.isPending,isSuccess:y,loadingText:t("common.loading"),successText:t("common.success"),onSuccessEnd:()=>N(!1),icon:e.jsx(Zr,{className:"w-5 h-5"}),size:"lg",children:t("common.save")})})]})]})}function So(){return e.jsxs(Ke,{size:"narrow",children:[e.jsx("div",{className:"hidden md:flex items-center gap-2 mb-4",children:e.jsx(Z,{className:"w-24 h-6 rounded-md"})}),e.jsx("div",{className:"md:hidden mb-4 space-y-1",children:e.jsx(Z,{className:"w-32 h-4"})}),e.jsxs("div",{className:"hidden md:block mb-6",children:[e.jsx(Z,{className:"h-8 w-48 mb-2"}),e.jsx(Z,{className:"h-5 w-64"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{className:"w-10 h-10 rounded-lg"}),e.jsxs("div",{children:[e.jsx(Z,{className:"h-4 w-32 mb-1"}),e.jsx(Z,{className:"h-7 w-12"})]})]})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700 p-8 text-center",children:[e.jsx(Z,{className:"w-12 h-12 rounded-full mx-auto mb-4"}),e.jsx(Z,{className:"h-6 w-48 mx-auto mb-2"}),e.jsx(Z,{className:"h-4 w-32 mx-auto"})]})]})}function _b(){const{t}=ce(),{deliveryId:r}=Ct(),a=ve(),s=c.useRef(null);Tt(c.useMemo(()=>({title:t("partner.upload.title"),backTo:r?`/partner/deliveries/${r}`:"/partner/deliveries",backLabel:t("partner.upload.backToDelivery")}),[r,t]));const{data:l,isLoading:o,error:i}=be({queryKey:["delivery",r],queryFn:()=>la(r),enabled:!!r}),{uploads:n,addFiles:d,retryUpload:u,removeUpload:m,isUploading:p,completedCount:f,totalCount:x,totalProgress:b}=an({deliveryId:r,onAllComplete:()=>{}}),g=y=>{y.target.files&&y.target.files.length>0&&(d(y.target.files),y.target.value="")},h=y=>{y.preventDefault(),y.dataTransfer.files.length>0&&d(y.dataTransfer.files)},k=y=>{y.preventDefault()},v=()=>{var y;return(y=s.current)==null?void 0:y.click()};return o?e.jsx(So,{}):i||!l?e.jsx(Ut,{size:"narrow",title:t("partner.upload.notFound"),primaryAction:{label:t("partner.upload.backToDeliveries"),to:"/partner/deliveries"},skeleton:e.jsx(So,{})}):l.voucher_code?e.jsx(_x,{size:"narrow",tone:"warning",icon:pt,title:t("partner.upload.finalizedTitle"),description:t("partner.upload.finalizedDescription"),primaryAction:{label:t("partner.upload.viewDelivery"),to:r?`/partner/deliveries/${r}`:"/partner/deliveries"}}):e.jsxs(Ke,{size:"narrow",children:[e.jsx("div",{className:"mb-4",children:e.jsx(Vt,{to:`/partner/deliveries/${r}`,label:t("partner.upload.backToDelivery")})}),e.jsxs("div",{className:"hidden md:block mb-6",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:t("partner.upload.title")}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:[t("partner.upload.deliveryLabel"),": ",l.title||l.client_name||t("common.noTitle")]})]}),e.jsx("div",{className:"md:hidden mb-4",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t("partner.upload.deliveryLabel"),":"," ",e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:l.title||l.client_name||t("common.noTitle")})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-[1.5rem] p-4 border border-gray-200 dark:border-gray-700 mb-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-pink-100 dark:bg-pink-900/50 rounded-lg flex items-center justify-center",children:e.jsx(Ge,{className:"w-5 h-5 text-pink-600 dark:text-pink-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("partner.upload.stats.photosInDelivery")}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:l.assets_count})]})]}),f>0&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("partner.upload.stats.uploadedNow")}),e.jsxs("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:["+",f]})]})]})}),e.jsxs("div",{onDrop:h,onDragOver:k,role:"button",tabIndex:0,"aria-label":t("partner.upload.zone.ariaLabel"),className:"bg-white dark:bg-gray-800 rounded-[1.5rem] border-2 border-dashed border-gray-300 dark:border-gray-600 p-8 text-center hover:border-pink-400 dark:hover:border-pink-500 transition-colors cursor-pointer group",onClick:v,onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&(y.preventDefault(),v())},children:[e.jsx("input",{ref:s,type:"file",multiple:!0,accept:"image/*",onChange:g,className:"hidden"}),e.jsx(Tr,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:t("partner.upload.zone.dragDrop")}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:t("partner.upload.zone.formats")})]}),n.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t("partner.upload.list.title")," (",f,"/",x,")"]}),p&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(fe,{className:"w-4 h-4 animate-spin"}),b,"%"]})]}),e.jsx("div",{className:"space-y-2",children:n.map(y=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded flex items-center justify-center",children:e.jsx(Ge,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:y.file.name}),y.status==="error"?e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:y.error}):e.jsx("div",{className:"mt-1 h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${y.status==="complete"?"bg-green-500":"bg-pink-500"}`,style:{width:`${y.progress}%`}})})]}),y.status==="complete"&&e.jsx($e,{className:"w-5 h-5 text-green-500"}),y.status==="error"&&e.jsx("button",{onClick:()=>u(y.id),className:"p-1 text-gray-400 dark:text-gray-500 hover:text-pink-600 dark:hover:text-pink-400","aria-label":t("partner.upload.list.retry"),title:t("partner.upload.list.retry"),children:e.jsx(Bo,{className:"w-4 h-4"})}),(y.status==="compressing"||y.status==="uploading")&&e.jsx(fe,{className:"w-4 h-4 animate-spin text-pink-500"}),e.jsx("button",{onClick:()=>m(y.id),className:"p-1 text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400","aria-label":t("partner.upload.list.remove"),title:t("partner.upload.list.remove"),children:e.jsx(De,{className:"w-4 h-4"})})]},y.id))})]}),e.jsxs("div",{className:"mt-8 flex gap-4",children:[e.jsx("button",{onClick:()=>a(`/partner/deliveries/${r}`),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-2xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:t("partner.upload.list.cancel")}),e.jsx("button",{onClick:()=>a(`/partner/deliveries/${r}`),disabled:p,className:"flex-1 px-4 py-3 bg-pink-500 text-white rounded-2xl hover:bg-pink-600 transition-colors disabled:opacity-50 font-medium",children:t(p?"partner.upload.list.wait":"partner.upload.list.finish")})]})]})}function _o(){return e.jsxs(Ke,{size:"narrow",children:[e.jsxs("div",{className:"hidden md:block mb-6",children:[e.jsx(Vt,{label:"Voltar"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(z,{className:"h-8 w-48 mb-2 rounded-lg"}),e.jsx(z,{className:"h-4 w-64 rounded"})]}),e.jsx(z,{className:"h-10 w-48 rounded-lg"})]})]}),e.jsx("div",{className:"md:hidden mb-4",children:e.jsx(z,{className:"h-4 w-32 rounded"})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:Array.from({length:5}).map((t,r)=>e.jsxs("div",{className:"flex items-start gap-4 p-4",children:[e.jsx(z,{className:"w-10 h-10 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx(z,{className:"h-4 w-3/4 rounded"}),e.jsx(z,{className:"h-3 w-16 rounded"})]}),e.jsx(z,{className:"h-3 w-full rounded mb-1"}),e.jsx(z,{className:"h-3 w-5/6 rounded"})]})]},r))})}),e.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:e.jsx(z,{className:"h-4 w-full rounded"})})]})}const Ab={voucher_redeemed:Be,credits_added:tt,delivery_ready:Pt,system:Ze},Db={voucher_redeemed:"bg-purple-100 dark:bg-purple-900/50 text-purple-600 dark:text-purple-400",credits_added:"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400",delivery_ready:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400",system:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"};function Eb(){const{data:t=[],isLoading:r,isError:a,refetch:s}=be({queryKey:["partner","notifications"],queryFn:Ei,staleTime:6e4}),l=Ae(),[o,i]=c.useState(!1),n=t.filter(m=>m.unread).length,d=c.useCallback(m=>{l.setQueryData(["partner","notifications"],p=>(p==null?void 0:p.map(f=>f.id===m?{...f,unread:!1}:f))??[])},[l]),u=c.useCallback(async()=>{i(!0),await new Promise(m=>setTimeout(m,500)),l.setQueryData(["partner","notifications"],m=>(m==null?void 0:m.map(p=>({...p,unread:!1})))??[]),i(!1)},[l]);return Tt(c.useMemo(()=>({title:"Notifica√ß√µes",backTo:"/partner",backLabel:"Voltar",actions:n>0?e.jsx(bs,{label:"Marcar todas como lidas",tone:"neutral",onClick:u,disabled:o,icon:o?e.jsx(fe,{className:"w-4 h-4 animate-spin"}):e.jsx(Yr,{className:"w-4 h-4"})}):null}),[u,o,n])),r?e.jsx(_o,{}):a?e.jsx(Ut,{title:"N√£o foi poss√≠vel carregar as notifica√ß√µes",onRetry:s,skeleton:e.jsx(_o,{})}):e.jsxs(Ke,{size:"narrow",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"hidden md:block mb-4",children:e.jsx(Vt,{to:"/partner",label:"Voltar"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Notifica√ß√µes"}),e.jsx("p",{className:"text-base text-gray-500 dark:text-gray-400 mt-2",children:n>0?`${n} n√£o lida${n>1?"s":""}`:"Todas as notifica√ß√µes lidas"})]}),n>0&&e.jsxs("button",{onClick:u,disabled:o,className:"inline-flex items-center gap-2 px-4 py-2 text-sm text-pink-600 dark:text-pink-400 hover:text-pink-700 dark:hover:text-pink-300 font-medium disabled:opacity-50 transition-colors bg-pink-50 dark:bg-pink-900/20 rounded-xl",children:[o?e.jsx(fe,{className:"w-4 h-4 animate-spin"}):e.jsx(Yr,{className:"w-4 h-4"}),"Marcar todas como lidas"]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-[2rem] border border-gray-100 dark:border-gray-700 overflow-hidden shadow-sm",children:t.length===0?e.jsxs("div",{className:"p-16 text-center flex flex-col items-center",children:[e.jsxs("div",{className:"relative w-24 h-24 mb-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-100 to-purple-100 dark:from-pink-900/30 dark:to-purple-900/30 rounded-full animate-pulse"}),e.jsx("div",{className:"absolute inset-2 bg-white dark:bg-gray-800 rounded-full flex items-center justify-center border border-gray-50 dark:border-gray-700",children:e.jsx(Ze,{className:"w-10 h-10 text-gray-300 dark:text-gray-600"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-pink-400 rounded-full animate-bounce",style:{animationDelay:"0s"}}),e.jsx("div",{className:"absolute top-2 -left-2 w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),e.jsx("div",{className:"absolute -bottom-1 right-2 w-2.5 h-2.5 bg-pink-300 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Tudo em dia! üéâ"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-sm mx-auto leading-relaxed",children:"Voc√™ n√£o tem notifica√ß√µes no momento. Quando houver novidades sobre cr√©ditos, entregas ou vouchers, elas aparecer√£o aqui."})]}):e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:t.map(m=>{const p=Ab[m.type],f=Db[m.type],x=e.jsxs("div",{className:D("flex items-start gap-5 p-6 transition-all duration-200",m.unread?"bg-pink-50/40 dark:bg-pink-900/10 hover:bg-pink-50/80 dark:hover:bg-pink-900/20":"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/30",m.link&&"group cursor-pointer"),children:[e.jsx("div",{className:D("w-12 h-12 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-sm transition-transform group-hover:scale-105",f),children:e.jsx(p,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex-1 min-w-0 pt-1",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:D("text-base",m.unread?"font-bold text-gray-900 dark:text-white":"font-semibold text-gray-700 dark:text-gray-300"),children:m.title}),m.unread&&e.jsx("span",{className:"w-2.5 h-2.5 bg-pink-500 rounded-full animate-pulse"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed",children:m.description})]}),e.jsx("span",{className:"text-xs font-medium text-gray-400 dark:text-gray-500 flex-shrink-0 whitespace-nowrap bg-gray-50 dark:bg-gray-900 px-2 py-1 rounded-lg",children:m.time})]})}),m.unread&&e.jsx("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),d(m.id)},className:"p-2 -mr-2 text-gray-400 dark:text-gray-500 hover:text-pink-500 hover:bg-pink-50 dark:hover:bg-pink-900/20 rounded-xl transition-all flex-shrink-0",title:"Marcar como lida","aria-label":"Marcar como lida",children:e.jsx(Re,{className:"w-5 h-5"})})]});return m.link?e.jsx(W,{to:m.link,onClick:()=>d(m.id),children:x},m.id):e.jsx("div",{children:x},m.id)})})}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-full text-xs font-medium border border-blue-100 dark:border-blue-800/50",children:[e.jsx(ir,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Notifica√ß√µes antigas s√£o removidas automaticamente ap√≥s 30 dias."})]})})]})}function Pb(){return e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700 animate-in fade-in slide-in-from-bottom-2 duration-700",children:Array.from({length:6}).map((t,r)=>e.jsxs("div",{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(z,{className:"w-12 h-12 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"h-4 w-32 md:w-48 rounded"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-3 h-3 rounded-full"}),e.jsx(z,{className:"h-3 w-24 rounded"})]})]})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsx(z,{className:"h-5 w-16 ml-auto rounded"}),e.jsx(z,{className:"h-3 w-20 ml-auto rounded"})]})]},r))})}function Mb(){const{t}=ce(),{language:r}=St(),{data:a,isLoading:s}=be({queryKey:["partner","credits","history"],queryFn:()=>Ld()}),l=o=>{try{return new Intl.DateTimeFormat(r,{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"}).format(new Date(o))}catch{return o}};return e.jsx(Ke,{children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx(Vt,{to:"/partner/credits",label:t("partner.credits.backToCredits","Voltar para Cr√©ditos")}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-4",children:"Extrato de Uso"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Acompanhe o hist√≥rico de adi√ß√£o e consumo dos seus cr√©ditos."})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-[2rem] border border-gray-100 dark:border-gray-700 shadow-sm overflow-hidden",children:s?e.jsx(Pb,{}):a!=null&&a.items&&a.items.length>0?e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:a.items.map(o=>e.jsxs("div",{className:"p-6 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${o.amount>0?"bg-green-100 text-green-600 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-600 dark:bg-red-900/20 dark:text-red-400"}`,children:o.amount>0?e.jsx(ol,{className:"w-6 h-6"}):e.jsx(il,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:o.description}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx(sr,{className:"w-3 h-3"}),e.jsx("span",{children:l(o.created_at)})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-lg font-bold ${o.amount>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[o.amount>0?"+":"",o.amount]}),e.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wider font-bold mt-1",children:["Saldo: ",o.balance_after]})]})]},o.id))}):e.jsx("div",{className:"p-12 text-center text-gray-500 dark:text-gray-400",children:"Nenhuma movimenta√ß√£o encontrada."})})]})})}function Tb(){const t=ve(),[r,a]=c.useState("welcome"),[s,l]=c.useState(""),[o,i]=c.useState(""),[n,d]=c.useState(!1),[u,m]=c.useState(""),p=Oc(),f=()=>{const g=["welcome","name","birthday","complete"],h=g.indexOf(r);h<g.length-1&&a(g[h+1])},x=()=>{const g=["welcome","name","birthday","complete"],h=g.indexOf(r);h>0&&a(g[h-1])},b=async()=>{try{await p.mutateAsync({name:s,birthday:n?u:o||void 0}),a("complete"),setTimeout(()=>t("/jornada"),2e3)}catch(g){console.error("Failed to create child:",g)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-pink-50 via-white to-rose-50 flex items-center justify-center p-4",children:e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-lg",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-pink-100",children:[e.jsxs(qe,{mode:"wait",children:[r==="welcome"&&e.jsx(Rb,{onNext:f},"welcome"),r==="name"&&e.jsx(Ib,{babyName:s,onNameChange:l,onNext:f,onBack:x},"name"),r==="birthday"&&e.jsx(Lb,{birthday:o,onBirthdayChange:i,isExpecting:n,onExpectingChange:d,dueDate:u,onDueDateChange:m,onComplete:b,onBack:x,isLoading:p.isPending},"birthday"),r==="complete"&&e.jsx(Fb,{babyName:s},"complete")]}),r!=="welcome"&&r!=="complete"&&e.jsx("div",{className:"flex justify-center gap-2 mt-8",children:["name","birthday"].map(g=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${r===g?"bg-pink-500":"bg-gray-200"}`},g))})]})})})}function Rb({onNext:t}){return e.jsxs(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"text-center space-y-6",children:[e.jsx(E.div,{initial:{scale:.8},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.2},className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-pink-500 to-rose-500 rounded-3xl shadow-lg shadow-pink-200",children:e.jsx(rt,{className:"w-12 h-12 text-white"})}),e.jsxs("div",{children:[e.jsx(E.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-3xl font-bold text-gray-900",children:"Bem-vinda ao Baby Book!"}),e.jsx(E.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-gray-600 mt-3",children:"Vamos configurar o √°lbum do seu beb√™. S√£o apenas 2 perguntinhas r√°pidas!"})]}),e.jsxs(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"flex justify-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(pe,{className:"w-4 h-4 text-pink-400"}),"R√°pido"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Mt,{className:"w-4 h-4 text-pink-400"}),"Personalizado"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Oe,{className:"w-4 h-4 text-pink-400"}),"Organizado"]})]}),e.jsxs(E.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},onClick:t,className:"w-full py-4 px-4 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white font-semibold rounded-2xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-pink-200",children:["Vamos Come√ßar!",e.jsx(Ie,{className:"w-5 h-5"})]})]})}function Ib({babyName:t,onNameChange:r,onNext:a,onBack:s}){return e.jsxs(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-pink-100 rounded-2xl mb-4",children:e.jsx(Mt,{className:"w-8 h-8 text-pink-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Qual o nome do beb√™?"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Esse ser√° o protagonista do seu Baby Book"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:t,onChange:l=>r(l.target.value),placeholder:"Nome do beb√™",className:"w-full px-4 py-4 border-2 border-gray-200 rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-center text-xl transition-all",autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Pode ser apelido carinhoso tamb√©m üíï"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:s,className:"flex-1 py-3 px-4 border border-gray-200 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all flex items-center justify-center gap-2",children:[e.jsx(Et,{className:"w-5 h-5"}),"Voltar"]}),e.jsxs("button",{onClick:a,disabled:!t.trim(),className:"flex-1 py-3 px-4 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 disabled:from-gray-300 disabled:to-gray-300 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-pink-200 disabled:shadow-none",children:["Pr√≥ximo",e.jsx(Ie,{className:"w-5 h-5"})]})]})]})}function Lb({birthday:t,onBirthdayChange:r,isExpecting:a,onExpectingChange:s,dueDate:l,onDueDateChange:o,onComplete:i,onBack:n,isLoading:d}){const u=a?!!l:!!t;return e.jsxs(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-pink-100 rounded-2xl mb-4",children:e.jsx(Oe,{className:"w-8 h-8 text-pink-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a?"Quando √© a data prevista?":"Quando o beb√™ nasceu?"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Isso nos ajuda a organizar a timeline de momentos"})]}),e.jsxs("div",{className:"flex rounded-2xl border border-gray-200 overflow-hidden p-1 bg-gray-50",children:[e.jsx("button",{onClick:()=>s(!1),className:`flex-1 py-3 text-sm font-medium rounded-xl transition-all ${a?"text-gray-600 hover:text-gray-900":"bg-white text-pink-600 shadow-sm"}`,children:"J√° Nasceu"}),e.jsx("button",{onClick:()=>s(!0),className:`flex-1 py-3 text-sm font-medium rounded-xl transition-all ${a?"bg-white text-pink-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Ainda √© Gesta√ß√£o"})]}),e.jsxs("div",{children:[a?e.jsx("input",{type:"date",value:l,onChange:m=>o(m.target.value),className:"w-full px-4 py-4 border-2 border-gray-200 rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-center text-lg transition-all"}):e.jsx("input",{type:"date",value:t,onChange:m=>r(m.target.value),max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-4 border-2 border-gray-200 rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-center text-lg transition-all"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:a?"A data prevista do parto":"Voc√™ pode ajustar depois se precisar"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:n,disabled:d,className:"flex-1 py-3 px-4 border border-gray-200 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all flex items-center justify-center gap-2",children:[e.jsx(Et,{className:"w-5 h-5"}),"Voltar"]}),e.jsx("button",{onClick:i,disabled:!u||d,className:"flex-1 py-3 px-4 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 disabled:from-gray-300 disabled:to-gray-300 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-pink-200 disabled:shadow-none",children:d?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-5 h-5 animate-spin"}),"Criando..."]}):e.jsxs(e.Fragment,{children:["Criar Baby Book",e.jsx(rt,{className:"w-5 h-5"})]})})]})]})}function Fb({babyName:t}){return e.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-6",children:[e.jsx(E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full shadow-lg shadow-green-200",children:e.jsx(pe,{className:"w-12 h-12 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tudo Pronto!"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["O Baby Book de ",e.jsx("strong",{children:t})," foi criado com carinho."]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Preparando sua Jornada..."}),e.jsx(fe,{className:"w-6 h-6 animate-spin mx-auto text-pink-500"})]})}function qb({onClose:t,initialType:r}){const a=ve(),{selectedChild:s}=Xe(),{mutateAsync:l,isPending:o}=ki(),{t:i,i18n:n}=ce(),[d,u]=c.useState(r?"media":"type"),[m,p]=c.useState(r||null),[f,x]=c.useState(""),[b,g]=c.useState(""),[h,k]=c.useState(new Date().toISOString().split("T")[0]),[v,y]=c.useState([]),[N,_]=c.useState([]),[A,G]=c.useState(!1),[O,C]=c.useState(!1),[j,w]=c.useState(null),[I,M]=c.useState(0),V=c.useRef(null),J=c.useRef([]),[ae,L]=c.useState(!1),ee=c.useRef(null),ne=["type","media","details","preview","success"],ue=ne.indexOf(d),B=F=>{p(F),u("media")},se=F=>{const X=Array.from(F.target.files||[]);if(X.length===0)return;const T=X.map(P=>URL.createObjectURL(P));y(P=>[...P,...X]),_(P=>[...P,...T])},he=F=>{URL.revokeObjectURL(N[F]),y(X=>X.filter((T,P)=>P!==F)),_(X=>X.filter((T,P)=>P!==F))},ye=async()=>{try{const F=await navigator.mediaDevices.getUserMedia({audio:!0}),X=new MediaRecorder(F);V.current=X,J.current=[],X.ondataavailable=U=>{U.data.size>0&&J.current.push(U.data)},X.onstop=()=>{const U=new Blob(J.current,{type:"audio/webm"});w(U),F.getTracks().forEach(ie=>ie.stop())},X.start(),C(!0);const T=Date.now(),P=setInterval(()=>{M(Math.floor((Date.now()-T)/1e3))},1e3);X.addEventListener("stop",()=>{clearInterval(P)})}catch(F){console.error("Failed to start recording:",F),alert(i("b2c.moments.wizard.errors.microphonePermission"))}},H=()=>{V.current&&O&&(V.current.stop(),C(!1))},we=()=>{const F=ue+1;F<ne.length&&u(ne[F])},te=()=>{const F=ue-1;F>=0&&u(ne[F])},xe=async()=>{if(s)try{await l({childId:s.id,title:f||i("b2c.moments.common.newMoment"),summary:b,occurredAt:h,payload:v.length?{media:v.map(F=>({id:F.name,type:F.type.startsWith("video")?"video":F.type.startsWith("audio")?"audio":"image",url:URL.createObjectURL(F)}))}:void 0}),u("success"),L(!0)}catch(F){console.error("Failed to create moment:",F),alert(i("b2c.moments.wizard.errors.createFailed"))}},S=async()=>{if(!s)return;if(!(v.length>0||j!==null)&&m!=="text"){G(!0);return}await xe()},$=()=>{N.forEach(F=>URL.revokeObjectURL(F)),a("/jornada")},oe=()=>{N.forEach(F=>URL.revokeObjectURL(F)),t?t():a(-1)},Q=c.useCallback(()=>{switch(d){case"type":return m!==null;case"media":return!0;case"details":return f.trim().length>0;case"preview":return!0;default:return!0}},[d,m,f]),de=c.useMemo(()=>o||Q()?null:d==="media"?m==="text"?null:i(m==="audio"?"b2c.moments.wizard.validation.missingAudio":"b2c.moments.wizard.validation.missingMedia"):d==="details"?i("b2c.moments.wizard.validation.missingTitle"):null,[Q,o,m,d,i]),q=d==="media"&&m!=="text"&&v.length===0&&j===null,me=[{type:"photo",icon:gt,label:i("b2c.moments.wizard.types.photo.label"),description:i("b2c.moments.wizard.types.photo.description"),color:"from-pink-400 to-rose-500"},{type:"video",icon:Za,label:i("b2c.moments.wizard.types.video.label"),description:i("b2c.moments.wizard.types.video.description"),color:"from-purple-400 to-indigo-500"},{type:"audio",icon:Ma,label:i("b2c.moments.wizard.types.audio.label"),description:i("b2c.moments.wizard.types.audio.description"),color:"from-amber-400 to-orange-500"},{type:"text",icon:Dt,label:i("b2c.moments.wizard.types.text.label"),description:i("b2c.moments.wizard.types.text.description"),color:"from-teal-400 to-emerald-500"}];return e.jsxs(e.Fragment,{children:[e.jsx(Wi,{isActive:ae,duration:3e3}),e.jsx(Fr,{open:A,onOpenChange:G,children:e.jsxs(qr,{style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsxs(Br,{children:[e.jsx(Or,{style:{color:"var(--bb-color-ink)"},children:i("b2c.moments.common.noMediaNudge.title")}),e.jsx(ca,{style:{color:"var(--bb-color-ink-muted)"},children:i("b2c.moments.common.noMediaNudge.description")})]}),e.jsxs(gs,{children:[e.jsx(ct,{type:"button",variant:"outline",onClick:()=>{G(!1),u("media")},children:i("b2c.moments.common.noMediaNudge.addNow")}),e.jsx(ct,{type:"button",onClick:()=>{G(!1),xe()},children:i("b2c.moments.common.noMediaNudge.saveAnyway")})]})]})}),e.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:"var(--bb-color-bg)",color:"var(--bb-color-ink)"},children:[e.jsxs("div",{className:"flex items-center justify-between border-b p-4",style:{borderColor:"var(--bb-color-border)"},children:[e.jsx("button",{onClick:d==="type"?oe:te,className:"rounded-full p-2 transition-colors",style:{color:"var(--bb-color-ink)"},"aria-label":i("common.back"),children:e.jsx(Ne,{className:"h-5 w-5","aria-hidden":!0})}),e.jsx("div",{className:"flex gap-1.5",children:ne.slice(0,-1).map((F,X)=>e.jsx("div",{className:D("h-1.5 rounded-full transition-all",X<ue||X===ue?"w-6 bg-primary":"w-1.5 bg-[var(--bb-color-border)]")},F))}),e.jsx("div",{className:"w-9"})," "]}),e.jsx("div",{className:"flex-1 overflow-auto p-4",children:e.jsxs(qe,{mode:"wait",children:[d==="type"&&e.jsxs(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"max-w-md mx-auto",children:[e.jsx("h1",{className:"mb-2 text-center text-2xl font-serif font-bold text-[var(--bb-color-ink)]",children:i("b2c.moments.common.newMoment")}),e.jsx("p",{className:"mb-8 text-center text-[var(--bb-color-ink-muted)]",children:i("b2c.moments.wizard.stepType.subtitle")}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:me.map(F=>e.jsxs(E.button,{onClick:()=>B(F.type),className:D("p-6 rounded-2xl text-left transition-all","bg-gradient-to-br hover:scale-[1.02] active:scale-[0.98]",F.color),whileTap:{scale:.98},children:[e.jsx(F.icon,{className:"w-8 h-8 text-white mb-3"}),e.jsx("h3",{className:"font-semibold text-white text-lg",children:F.label}),e.jsx("p",{className:"text-white/80 text-sm mt-1",children:F.description})]},F.type))})]},"type"),d==="media"&&e.jsxs(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"max-w-md mx-auto",children:[e.jsxs("h2",{className:"mb-2 text-center text-xl font-serif font-bold text-[var(--bb-color-ink)]",children:[m==="photo"&&i("b2c.moments.wizard.stepMedia.title.photo"),m==="video"&&i("b2c.moments.wizard.stepMedia.title.video"),m==="audio"&&i("b2c.moments.wizard.stepMedia.title.audio"),m==="text"&&i("b2c.moments.wizard.stepMedia.title.text")]}),m!=="text"&&(m==="audio"&&!j&&!O||(m==="photo"||m==="video")&&v.length===0)?e.jsxs("div",{className:"mb-4 rounded-2xl border p-4",style:{backgroundColor:"var(--bb-color-bg)",borderColor:"var(--bb-color-border)"},children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--bb-color-ink)]",children:i("b2c.moments.wizard.stepMedia.optionalHint.title")}),e.jsx("p",{className:"mt-1 text-xs text-[var(--bb-color-ink-muted)]",children:i("b2c.moments.wizard.stepMedia.optionalHint.description")}),e.jsxs("div",{className:"mt-3 flex flex-col gap-2 sm:flex-row",children:[e.jsx(ct,{type:"button",variant:"softOutline",size:"sm",onClick:()=>{var F;if(m==="audio"){ye();return}(F=ee.current)==null||F.click()},children:i("b2c.moments.wizard.stepMedia.optionalHint.addNow")}),e.jsx(ct,{type:"button",variant:"softGhost",size:"sm",onClick:we,children:i("b2c.moments.wizard.stepMedia.optionalHint.skipForNow")})]})]}):null,(m==="photo"||m==="video")&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{ref:ee,type:"file",accept:m==="photo"?"image/*":"video/*",multiple:m==="photo",onChange:se,className:"hidden"}),v.length===0?e.jsxs("button",{onClick:()=>{var F;return(F=ee.current)==null?void 0:F.click()},className:"flex aspect-square w-full flex-col items-center justify-center rounded-2xl border-2 border-dashed transition-colors hover:border-primary",style:{borderColor:"var(--bb-color-border)",backgroundColor:"transparent"},children:[e.jsx(Tr,{className:"mb-3 h-12 w-12 text-[var(--bb-color-ink-muted)]"}),e.jsx("p",{className:"font-medium",style:{color:"var(--bb-color-ink)"},children:i(m==="photo"?"b2c.moments.wizard.stepMedia.upload.tapToAddPhotos":"b2c.moments.wizard.stepMedia.upload.tapToAddVideo")}),e.jsx("p",{className:"mt-1 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:i("b2c.moments.wizard.stepMedia.upload.dragDrop")})]}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[N.map((F,X)=>e.jsxs("div",{className:"relative aspect-square",children:[m==="photo"?e.jsx("img",{src:F,alt:"",className:"w-full h-full object-cover rounded-lg"}):e.jsx("video",{src:F,className:"w-full h-full object-cover rounded-lg"}),e.jsx("button",{onClick:()=>he(X),className:"absolute -right-2 -top-2 flex h-6 w-6 items-center justify-center rounded-full text-white",style:{backgroundColor:"var(--bb-color-danger)"},"aria-label":i("common.delete"),children:e.jsx(De,{className:"w-4 h-4"})})]},X)),m==="photo"&&v.length<10&&e.jsx("button",{onClick:()=>{var F;return(F=ee.current)==null?void 0:F.click()},className:"flex aspect-square items-center justify-center rounded-lg border-2 border-dashed transition-colors hover:border-primary",style:{borderColor:"var(--bb-color-border)"},children:e.jsx(Ge,{className:"h-6 w-6 text-[var(--bb-color-ink-muted)]"})})]})})]}),m==="audio"&&e.jsx("div",{className:"space-y-6 text-center py-8",children:j?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-24 h-24 mx-auto rounded-full bg-green-500 flex items-center justify-center",children:e.jsx(Re,{className:"w-10 h-10 text-white"})}),e.jsx("p",{className:"text-[var(--bb-color-ink-muted)]",children:i("b2c.moments.wizard.stepMedia.audio.success")}),e.jsx("audio",{src:URL.createObjectURL(j),controls:!0,className:"mx-auto"}),e.jsx("button",{onClick:()=>{w(null),M(0)},className:"text-sm underline",style:{color:"var(--bb-color-ink-muted)"},children:i("b2c.moments.wizard.stepMedia.audio.recordAgain")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:D("w-32 h-32 mx-auto rounded-full flex items-center justify-center transition-all",O?"bg-red-500 animate-pulse":"bg-gradient-to-br from-amber-400 to-orange-500"),children:e.jsx(Ma,{className:"w-12 h-12 text-white"})}),O&&e.jsxs("p",{className:"text-2xl font-mono text-[var(--bb-color-ink)]",children:[Math.floor(I/60),":",(I%60).toString().padStart(2,"0")]}),e.jsx("button",{onClick:O?H:ye,className:D("px-8 py-3 rounded-full font-semibold text-white transition-colors",O?"bg-red-500 hover:bg-red-600":"bg-primary hover:bg-primary/90"),children:i(O?"b2c.moments.wizard.stepMedia.audio.stop":"b2c.moments.wizard.stepMedia.audio.start")})]})}),m==="text"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Dt,{className:"mx-auto mb-4 h-16 w-16 text-[var(--bb-color-border)]"}),e.jsx("p",{className:"text-[var(--bb-color-ink-muted)]",children:i("b2c.moments.wizard.stepMedia.textSkip")})]})]},"media"),d==="details"&&e.jsxs(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"max-w-md mx-auto space-y-6",children:[e.jsx("h2",{className:"mb-6 text-center text-xl font-serif font-bold text-[var(--bb-color-ink)]",children:i("b2c.moments.wizard.stepDetails.title")}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-[var(--bb-color-ink)]",children:i("b2c.moments.wizard.stepDetails.fields.titleLabel")}),e.jsx("input",{type:"text",value:f,onChange:F=>x(F.target.value),placeholder:i("b2c.moments.wizard.stepDetails.fields.titlePlaceholder"),className:"w-full rounded-xl border px-4 py-3 focus:ring-2 focus:ring-primary focus:border-transparent",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"}})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-[var(--bb-color-ink)]",children:[e.jsx(Oe,{className:"mr-1 inline h-4 w-4","aria-hidden":!0}),i("b2c.moments.wizard.stepDetails.fields.dateLabel")]}),e.jsx("input",{type:"date",value:h,onChange:F=>k(F.target.value),className:"w-full rounded-xl border px-4 py-3 focus:ring-2 focus:ring-primary focus:border-transparent",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-[var(--bb-color-ink)]",children:i("b2c.moments.wizard.stepDetails.fields.descriptionLabel")}),e.jsx("textarea",{value:b,onChange:F=>g(F.target.value),placeholder:i("b2c.moments.wizard.stepDetails.fields.descriptionPlaceholder"),rows:4,className:"w-full resize-none rounded-xl border px-4 py-3 focus:ring-2 focus:ring-primary focus:border-transparent",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"}})]})]},"details"),d==="preview"&&e.jsxs(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"max-w-md mx-auto",children:[e.jsx("h2",{className:"mb-6 text-center text-xl font-serif font-bold text-[var(--bb-color-ink)]",children:i("b2c.moments.wizard.stepPreview.title")}),e.jsxs("div",{className:"overflow-hidden rounded-2xl border bg-[var(--bb-color-surface)] border-[var(--bb-color-border)]",children:[N.length>0&&e.jsx("div",{className:"aspect-video bg-[var(--bb-color-bg)]",children:m==="video"?e.jsx("video",{src:N[0],controls:!0,className:"w-full h-full object-cover"}):e.jsx("img",{src:N[0],alt:"",className:"w-full h-full object-cover"})}),j&&e.jsx("div",{className:"p-4",style:{backgroundColor:"var(--bb-color-bg)"},children:e.jsx("audio",{src:URL.createObjectURL(j),controls:!0,className:"w-full"})}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("p",{className:"text-sm text-[var(--bb-color-ink-muted)]",children:new Date(h).toLocaleDateString(n.language,{day:"numeric",month:"long",year:"numeric"})}),!j&&N.length===0&&m!=="text"?e.jsx("div",{className:"inline-flex w-fit items-center rounded-full border px-3 py-1 text-xs",style:{borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},children:i("b2c.moments.wizard.stepPreview.noMediaBadge")}):null,e.jsx("h3",{className:"text-xl font-serif font-bold text-[var(--bb-color-ink)]",children:f||i("b2c.moments.wizard.stepPreview.untitled")}),b&&e.jsx("p",{className:"text-[var(--bb-color-ink-muted)]",children:b})]})]})]},"preview"),d==="success"&&e.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-md mx-auto text-center py-12",children:[e.jsx(E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-green-400 to-emerald-500 flex items-center justify-center",children:e.jsx(pe,{className:"w-12 h-12 text-white"})}),e.jsx("h2",{className:"mb-2 text-2xl font-serif font-bold text-[var(--bb-color-ink)]",children:i("b2c.moments.wizard.stepSuccess.title")}),e.jsx("p",{className:"mb-8 text-[var(--bb-color-ink-muted)]",children:i("b2c.moments.wizard.stepSuccess.subtitle")}),e.jsx("button",{onClick:$,className:"w-full py-4 bg-primary text-white rounded-xl font-semibold hover:bg-primary/90 transition-colors",children:i("b2c.moments.wizard.stepSuccess.cta")})]},"success")]})}),d!=="type"&&d!=="success"&&e.jsxs("div",{className:"border-t p-4",style:{borderColor:"var(--bb-color-border)"},children:[e.jsx("button",{onClick:d==="preview"?S:we,disabled:!Q()||o,className:D("w-full py-4 rounded-xl font-semibold flex items-center justify-center gap-2 transition-colors",Q()&&!o?"bg-primary text-white hover:bg-primary/90":"bg-[var(--bb-color-border)] text-[var(--bb-color-ink-muted)] cursor-not-allowed"),title:!Q()&&de?de:void 0,children:o?e.jsxs(e.Fragment,{children:[e.jsx(E.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),i("b2c.moments.wizard.saving")]}):d==="preview"?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-5 h-5"}),i("b2c.moments.wizard.saveMoment")]}):e.jsxs(e.Fragment,{children:[i(q?"b2c.moments.wizard.continueNoMedia":"b2c.moments.wizard.continue"),e.jsx(Te,{className:"w-5 h-5"})]})}),!Q()&&de?e.jsx("p",{className:"mt-2 text-center text-xs text-[var(--bb-color-ink-muted)]",role:"status",children:de}):null]})]})]})}const Bb=()=>e.jsx(qb,{});function Ob(){const{token:t}=Ct(),[r,a]=c.useState(null),[s,l]=c.useState(!0),[o,i]=c.useState(null),[n,d]=c.useState(0),[u,m]=c.useState(!1),[p,f]=c.useState(0),[x,b]=c.useState(!1);c.useEffect(()=>{t&&(async()=>{l(!0);try{await new Promise(_=>setTimeout(_,800)),a({id:"moment-123",token:t||"",title:"Primeiro Sorriso",description:"Hoje, aos 2 meses, o pequeno Miguel nos presenteou com seu primeiro sorriso de verdade! Foi logo de manh√£, quando a mam√£e estava trocando sua fralda. Um momento m√°gico que nunca vamos esquecer.",occurredAt:"2024-01-15",childName:"Miguel",childAge:"2 meses",media:[{id:"m1",kind:"photo",url:"https://images.unsplash.com/photo-1519689680058-324335c77eba?w=800"},{id:"m2",kind:"photo",url:"https://images.unsplash.com/photo-1555252333-9f8e92e65df9?w=800"}],partnerBranding:{name:"Studio Maria Fotografia"}}),f(Math.floor(Math.random()*50)+10)}catch{i("Momento n√£o encontrado ou link expirado")}finally{l(!1)}})()},[t]);const g=()=>{x||(f(N=>N+1),b(!0))},h=async()=>{const N=window.location.href,_=r?`Olha esse momento especial de ${r.childName}: ${r.title}`:"Momento especial compartilhado via Babybook";if(navigator.share)try{await navigator.share({title:(r==null?void 0:r.title)||"Momento Babybook",text:_,url:N})}catch{m(!0)}else m(!0)},k=()=>{navigator.clipboard.writeText(window.location.href),alert("Link copiado!"),m(!1)},v=N=>new Date(N).toLocaleDateString("pt-BR",{day:"numeric",month:"long",year:"numeric"});if(s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-pink-50 to-white flex items-center justify-center",children:e.jsx(E.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full"})});if(o||!r)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-pink-50 to-white flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(E.div,{initial:{scale:0},animate:{scale:1},className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(Mr,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h1",{className:"text-2xl font-serif font-bold text-gray-800 mb-2",children:"Momento n√£o encontrado"}),e.jsx("p",{className:"text-gray-500 mb-8 max-w-sm",children:"Este link pode ter expirado ou o momento foi removido pelo autor."}),e.jsx(W,{to:"/",className:"px-6 py-3 bg-primary text-white rounded-full font-semibold hover:bg-primary/90 transition-colors",children:"Criar meu Babybook"})]});const y=r.media[n];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-pink-50 to-white",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-pink-100",children:e.jsxs("div",{className:"max-w-lg mx-auto px-4 h-14 flex items-center justify-between",children:[e.jsxs(W,{to:"/",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-pink-400 to-rose-500 rounded-xl flex items-center justify-center",children:e.jsx(pe,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-serif font-bold text-gray-800",children:"Babybook"})]}),e.jsx(W,{to:"/register",className:"text-sm font-semibold text-primary hover:underline",children:"Criar meu di√°rio"})]})}),e.jsxs("main",{className:"pt-14 pb-24",children:[e.jsx("div",{className:"relative bg-black aspect-[4/5] max-h-[60vh]",children:r.media.length>0&&e.jsxs(e.Fragment,{children:[y.kind==="photo"&&e.jsx("img",{src:y.url,alt:r.title,className:"w-full h-full object-cover"}),y.kind==="video"&&e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("video",{src:y.url,controls:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-16 h-16 bg-white/80 rounded-full flex items-center justify-center",children:e.jsx(Jr,{className:"w-8 h-8 text-gray-800 ml-1"})})})]}),y.kind==="audio"&&e.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-purple-100 to-indigo-100 flex flex-col items-center justify-center p-8",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-400 to-indigo-500 rounded-full flex items-center justify-center mb-6",children:e.jsx(Aa,{className:"w-12 h-12 text-white"})}),e.jsx("audio",{src:y.url,controls:!0,className:"w-full max-w-xs"})]}),r.media.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>d(N=>N>0?N-1:r.media.length-1),className:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(Ne,{className:"w-6 h-6 text-gray-800"})}),e.jsx("button",{onClick:()=>d(N=>N<r.media.length-1?N+1:0),className:"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(Te,{className:"w-6 h-6 text-gray-800"})})]}),r.media.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-1.5",children:r.media.map((N,_)=>e.jsx("button",{onClick:()=>d(_),className:D("w-2 h-2 rounded-full transition-all",_===n?"w-4 bg-white":"bg-white/50")},_))})]})}),e.jsx("div",{className:"max-w-lg mx-auto px-4 -mt-6 relative z-10",children:e.jsxs(E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"bg-white rounded-3xl shadow-xl border border-pink-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-200 to-rose-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"üë∂"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-gray-800",children:r.childName}),r.childAge&&e.jsx("p",{className:"text-sm text-gray-500",children:r.childAge})]})]}),e.jsx("h1",{className:"text-2xl font-serif font-bold text-gray-800 mb-2",children:r.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-4",children:[e.jsx(Oe,{className:"w-4 h-4"}),v(r.occurredAt)]}),r.description&&e.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:r.description}),e.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-gray-100",children:[e.jsxs("button",{onClick:g,className:D("flex items-center gap-2 px-4 py-2 rounded-full transition-colors",x?"bg-pink-100 text-pink-600":"hover:bg-gray-100 text-gray-600"),children:[e.jsx(rt,{className:D("w-5 h-5",x&&"fill-current")}),e.jsx("span",{className:"text-sm font-medium",children:p})]}),e.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 rounded-full hover:bg-gray-100 text-gray-600 transition-colors",children:[e.jsx(Ha,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Compartilhar"})]})]}),u&&e.jsxs(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 p-4 bg-gray-50 rounded-xl space-y-2",children:[e.jsx("button",{onClick:k,className:"w-full py-3 bg-white border border-gray-200 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Copiar link"}),e.jsx("button",{onClick:()=>m(!1),className:"w-full py-2 text-sm text-gray-500",children:"Cancelar"})]}),r.partnerBranding&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Be,{className:"w-4 h-4 text-gray-500"})}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Fotografado por"," ",e.jsx("span",{className:"font-medium text-gray-700",children:r.partnerBranding.name})]})]})]})})]}),e.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-pink-100 p-4 safe-area-bottom",children:e.jsxs("div",{className:"max-w-lg mx-auto",children:[e.jsxs(W,{to:"/register",className:"flex items-center justify-center gap-2 w-full py-4 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-2xl font-semibold hover:from-pink-600 hover:to-rose-600 transition-colors",children:[e.jsx(pe,{className:"w-5 h-5"}),"Criar meu di√°rio de mem√≥rias",e.jsx(Ie,{className:"w-5 h-5"})]}),e.jsx("p",{className:"text-center text-xs text-gray-400 mt-2",children:"Preserve os momentos mais especiais do seu beb√™"})]})})]})}function $b(){const{t}=ce(),{options:r}=da(),{token:a}=Ct(),{data:s,isLoading:l}=Jc(a),{mutate:o,isPending:i}=Xc(),[n,d]=c.useState(""),[u,m]=c.useState(""),[p,f]=c.useState(""),[x,b]=c.useState(""),[g,h]=c.useState(null),[k,v]=c.useState(!1),[y,N]=c.useState(0),[_,A]=c.useState(null),[G,O]=c.useState(!1),C=i||k;c.useEffect(()=>{s!=null&&s.invited_email&&m(M=>M.trim().length>0?M:s.invited_email??"")},[s==null?void 0:s.invited_email]);const j=c.useMemo(()=>(s==null?void 0:s.child_name)||t("b2c.guestbook.invite.titleFallback"),[s==null?void 0:s.child_name,t]),w=async M=>{const V=URL.createObjectURL(M);try{return await new Promise((ae,L)=>{const ee=document.createElement("video");ee.preload="metadata",ee.src=V,ee.onloadedmetadata=()=>ae(ee.duration),ee.onerror=()=>L(new Error(t("b2c.guestbook.invite.errors.mediaFailed")))})}finally{URL.revokeObjectURL(V)}},I=async M=>{var V;if(M.preventDefault(),!!a){if(A(null),!n.trim()||!x.trim()||!p){A(t("b2c.guestbook.invite.errors.fillRequired"));return}try{let J;if(g&&(s!=null&&s.child_id)){if(g.type.startsWith("video/")){const L=await w(g);if(Number.isFinite(L)&&L>15){A(t("b2c.guestbook.invite.errors.videoTooLong",{duration:Math.ceil(L)}));return}}v(!0),N(0),J=(V=(await Cs({childId:s.child_id,files:[g],scope:"guestbook",onProgress:({overallPct:L})=>N(L)}))[0])==null?void 0:V.id}o({token:a,authorName:n.trim(),authorEmail:u.trim()||void 0,relationshipDegree:p,message:x.trim(),assetId:J},{onSuccess:()=>{O(!0),d(""),b(""),h(null),v(!1),N(0)},onError:ae=>{A(ae instanceof Error?ae.message:t("b2c.guestbook.invite.errors.sendFailed")),v(!1),N(0)},onSettled:()=>{v(!1),N(0)}})}catch(J){v(!1),N(0),A(J instanceof Error?J.message:t("b2c.guestbook.invite.errors.mediaFailed"))}}};return l?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-pink-50 to-white flex items-center justify-center",children:e.jsx(E.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-[var(--bb-color-accent)] border-t-transparent rounded-full"})}):!a||!s?e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-pink-50 to-white flex flex-col items-center justify-center p-6 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mb-6 shadow",children:e.jsx(Mr,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h1",{className:"text-2xl font-serif font-bold text-gray-800 mb-2",children:t("b2c.guestbook.invite.notFound.title")}),e.jsx("p",{className:"text-gray-500 mb-8 max-w-sm",children:t("b2c.guestbook.invite.notFound.description")}),e.jsx(W,{to:"/",className:"px-6 py-3 bg-[var(--bb-color-accent)] text-white rounded-full font-semibold hover:opacity-90 transition",children:t("b2c.guestbook.invite.notFound.cta")})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-pink-50 to-white",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-pink-100",children:e.jsxs("div",{className:"max-w-lg mx-auto px-4 h-14 flex items-center justify-between",children:[e.jsxs(W,{to:"/",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-pink-400 to-rose-500 rounded-xl flex items-center justify-center",children:e.jsx(pe,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-serif font-bold text-gray-800",children:"Babybook"})]}),e.jsx(W,{to:"/register",className:"text-sm font-semibold text-[var(--bb-color-accent)] hover:underline",children:t("b2c.guestbook.invite.actions.createMyDiary")})]})}),e.jsx("main",{className:"max-w-lg mx-auto p-4 pt-6 pb-24",children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-pink-100",children:[e.jsx("h1",{className:"text-2xl font-serif font-bold text-gray-900",children:t("b2c.guestbook.invite.title",{childName:j})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:t("b2c.guestbook.invite.description")}),G?e.jsxs("div",{className:"mt-6 rounded-2xl border border-emerald-200 bg-emerald-50 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-700 font-semibold",children:[e.jsx(Ea,{className:"w-5 h-5"}),t("b2c.guestbook.invite.sentTitle")]}),e.jsx("p",{className:"mt-2 text-sm text-emerald-700",children:t("b2c.guestbook.invite.sentDescription")})]}):e.jsxs("form",{onSubmit:I,className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t("b2c.guestbook.invite.labels.name")}),e.jsx("input",{type:"text",required:!0,value:n,onChange:M=>d(M.target.value),className:"w-full px-3 py-2 border rounded-xl",placeholder:t("b2c.guestbook.invite.placeholders.name")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t("b2c.guestbook.invite.labels.email")}),e.jsx("input",{type:"email",value:u,onChange:M=>m(M.target.value),className:"w-full px-3 py-2 border rounded-xl",placeholder:t("b2c.guestbook.invite.placeholders.email")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t("b2c.guestbook.invite.labels.relationship")}),e.jsxs("select",{required:!0,value:p,onChange:M=>f(M.target.value||""),className:"w-full px-3 py-2 border rounded-xl",children:[e.jsx("option",{value:"",disabled:!0,children:t("b2c.guestbook.invite.placeholders.relationship")}),r.map(M=>e.jsx("option",{value:M.value,children:M.label},M.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t("b2c.guestbook.invite.labels.message")}),e.jsx("textarea",{required:!0,value:x,onChange:M=>b(M.target.value),className:"w-full px-3 py-2 border rounded-xl",rows:5,placeholder:t("b2c.guestbook.invite.placeholders.message")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t("b2c.guestbook.invite.labels.media")}),e.jsx("input",{type:"file",accept:"image/*,video/*",onChange:M=>{var V;return h(((V=M.target.files)==null?void 0:V[0])??null)},className:"w-full px-3 py-2 border rounded-xl"}),e.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:[t("b2c.guestbook.invite.hints.videoLimit"),k?` ${t("b2c.guestbook.invite.hints.uploading",{pct:y})}`:""]})]}),_&&e.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:_}),e.jsxs("button",{type:"submit",disabled:C,className:"w-full inline-flex items-center justify-center gap-2 rounded-2xl bg-[var(--bb-color-accent)] text-white px-6 py-3 font-bold shadow-sm transition hover:opacity-90 disabled:opacity-50",children:[e.jsx(Tr,{className:"w-4 h-4"}),t(C?"b2c.guestbook.invite.actions.submitting":"b2c.guestbook.invite.actions.submit")]}),e.jsx("div",{className:"mb-8 flex justify-center",children:e.jsxs(W,{to:"/register",className:"inline-flex items-center gap-2 text-sm font-semibold text-[var(--bb-color-accent)] hover:underline",children:[t("b2c.guestbook.invite.actions.wantToCreate"),e.jsx(Ie,{className:"w-4 h-4"})]})})]})]})})]})}function zb(){var G,O;const{deliveryId:t}=Ct(),r=ve(),[a]=Lo(),{t:s}=ce(),l=()=>{if(typeof window<"u"&&window.history.length>1){r(-1);return}r("/jornada")},o=c.useMemo(()=>{const C=a.get("childId");return C&&C.trim()?C.trim():null},[a]),i=$c({enabled:!!t}),n=ns({enabled:!0}),d=zc(),u=c.useMemo(()=>{var j;return(((j=i.data)==null?void 0:j.items)??[]).find(w=>w.deliveryId===t)??null},[(G=i.data)==null?void 0:G.items,t]),m=c.useMemo(()=>n.data??[],[n.data]),[p,f]=c.useState(m.length?"existing":"new"),[x,b]=c.useState(((O=m[0])==null?void 0:O.id)??""),[g,h]=c.useState(""),[k,v]=c.useState(null),y=i.isLoading||n.isLoading,N=!!u&&!d.isPending&&(p==="new"||!!x),_=c.useMemo(()=>!u||d.isPending?null:p==="existing"&&!x?s("b2c.importDelivery.errors.selectChildRequired"):null,[u,d.isPending,p,x,s]);c.useEffect(()=>{if(n.isSuccess){if(!m.length){f("new"),b("");return}if(o&&m.some(C=>C.id===o)){f("existing"),b(o);return}f(C=>C==="new"?"existing":C),b(C=>{var j;return C||((j=m[0])==null?void 0:j.id)||""})}},[o,m,n.isSuccess]);const A=async()=>{var C;if(t){v(null);try{if(p==="existing"){if(!x){v(s("b2c.importDelivery.errors.selectChildRequired"));return}const w=await d.mutateAsync({deliveryId:t,action:{type:"EXISTING_CHILD",childId:x}});r(`/jornada/moment/${w.momentId}`);return}const j=await d.mutateAsync({deliveryId:t,action:{type:"NEW_CHILD",childName:g.trim()?g.trim():void 0}});r(`/jornada/moment/${j.momentId}`)}catch(j){if(j instanceof _t&&j.code==="delivery.email_mismatch"){const w=typeof((C=j.details)==null?void 0:C.target_email_masked)=="string"?j.details.target_email_masked:null;v(w?s("b2c.importDelivery.errors.emailMismatchMasked",{email:w}):s("b2c.importDelivery.errors.emailMismatch"));return}v(j instanceof Error?j.message:s("b2c.importDelivery.errors.generic"))}}};return t?e.jsxs("div",{className:"mx-auto max-w-2xl px-4 py-6",children:[e.jsx("div",{className:"mb-6 flex items-center gap-4",children:e.jsx("button",{onClick:l,className:"rounded-full p-2 transition",style:{color:"var(--bb-color-ink)"},"aria-label":s("common.back"),children:e.jsx(Ne,{className:"h-5 w-5","aria-hidden":!0})})}),e.jsxs("div",{className:"rounded-2xl border p-6 shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl",style:{backgroundColor:"var(--bb-color-bg)",border:"1px solid var(--bb-color-border)"},children:e.jsx(nl,{className:"h-6 w-6",style:{color:"var(--bb-color-accent)"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl font-semibold",style:{color:"var(--bb-color-ink)"},children:s("b2c.importDelivery.title")}),e.jsx("p",{className:"mt-1 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:s("b2c.importDelivery.subtitle")})]})]}),y&&e.jsxs("div",{className:"mt-6 flex items-center gap-2 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:[e.jsx(fe,{className:"h-4 w-4 animate-spin"}),s("common.loading")]}),!y&&!u&&e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink)"},children:s("b2c.importDelivery.notFound")}),e.jsx("p",{className:"mt-2 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:s("b2c.importDelivery.notFoundTip")})]}),!y&&u&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"rounded-xl border p-4",style:{backgroundColor:"var(--bb-color-bg)",borderColor:"var(--bb-color-border)"},children:[e.jsx("div",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:s("b2c.importDelivery.deliveryLabel")}),e.jsx("div",{className:"font-medium",style:{color:"var(--bb-color-ink)"},children:u.title}),e.jsxs("div",{className:"mt-1 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:[u.partnerName?`${s("b2c.importDelivery.fromPartner",{name:u.partnerName})} ‚Ä¢ `:"",s("b2c.importDelivery.assetsCount",{count:u.assetsCount})]}),u.targetEmailMasked&&e.jsx("div",{className:"mt-1 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:s("b2c.importDelivery.sentTo",{email:u.targetEmailMasked})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex cursor-pointer items-start gap-3 rounded-xl border p-3",style:{borderColor:"var(--bb-color-border)"},children:[e.jsx("input",{type:"radio",className:"mt-1",checked:p==="existing",onChange:()=>{f("existing"),v(null)},disabled:!m.length}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",style:{color:"var(--bb-color-ink)"},children:s("b2c.importDelivery.options.existing.title")}),e.jsx("div",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:s("b2c.importDelivery.options.existing.description")})]})]}),p==="existing"&&e.jsxs("div",{children:[e.jsx("select",{className:"mt-2 w-full rounded-xl border p-3",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},value:x,onChange:C=>{b(C.target.value),v(null)},disabled:!m.length,children:m.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))}),!m.length&&e.jsx("p",{className:"mt-2 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:s("b2c.importDelivery.noChildrenHint")})]}),e.jsxs("label",{className:"flex cursor-pointer items-start gap-3 rounded-xl border p-3",style:{borderColor:"var(--bb-color-border)"},children:[e.jsx("input",{type:"radio",className:"mt-1",checked:p==="new",onChange:()=>{f("new"),v(null)}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",style:{color:"var(--bb-color-ink)"},children:s("b2c.importDelivery.options.new.title")}),e.jsx("div",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:s("b2c.importDelivery.options.new.description")})]})]}),p==="new"&&e.jsx("div",{children:e.jsx("input",{className:"mt-2 w-full rounded-xl border p-3",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},placeholder:s("b2c.importDelivery.newChildPlaceholder"),value:g,onChange:C=>{h(C.target.value),v(null)}})})]}),k&&e.jsx("div",{className:"rounded-xl border p-3 text-sm",style:{borderColor:"var(--bb-color-danger)",backgroundColor:"var(--bb-color-danger-soft)",color:"var(--bb-color-danger)"},children:k}),e.jsx("button",{type:"button",className:"mt-2 inline-flex w-full items-center justify-center gap-2 rounded-xl px-4 py-3 text-sm font-semibold transition hover:opacity-90 disabled:opacity-60",style:{backgroundColor:"var(--bb-color-accent)",color:"var(--bb-color-surface)"},disabled:!N,title:!N&&_?_:void 0,onClick:()=>void A(),children:d.isPending?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"h-4 w-4 animate-spin"}),s("b2c.importDelivery.importing")]}):e.jsxs(e.Fragment,{children:[s("b2c.importDelivery.cta")," ",e.jsx(Ie,{className:"h-4 w-4"})]})}),!N&&_?e.jsx("p",{className:"text-xs",style:{color:"var(--bb-color-ink-muted)"},role:"status",children:_}):null]})]})]}):e.jsxs("div",{className:"mx-auto w-full max-w-2xl px-4 py-6",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsx("button",{onClick:l,className:"rounded-full p-2 transition",style:{color:"var(--bb-color-ink)"},"aria-label":s("common.back"),children:e.jsx(Ne,{className:"h-5 w-5","aria-hidden":!0})}),e.jsx("h1",{className:"text-lg font-semibold",style:{color:"var(--bb-color-ink)"},children:s("b2c.importDelivery.title")})]}),e.jsx("div",{className:"rounded-2xl border p-6",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)"},children:e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:s("b2c.importDelivery.invalidLink")})})]})}const Ub=()=>e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-2 rounded-xl",children:e.jsx(Ne,{className:"w-5 h-5",style:{color:"var(--bb-color-ink-muted)"}})}),e.jsx(R,{className:"h-8 w-48"})]}),e.jsx("div",{className:"rounded-2xl p-6 mb-6",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(R,{className:"w-24 h-24 rounded-2xl"}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(R,{className:"h-6 w-40"}),e.jsx(R,{className:"h-4 w-32"})]})]})}),e.jsxs("div",{className:"rounded-2xl p-6 mb-6",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(R,{className:"h-5 w-32"}),e.jsx(R,{className:"h-8 w-16 rounded-lg"})]}),e.jsx("div",{className:"space-y-4",children:[1,2].map(t=>e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl",style:{backgroundColor:"var(--bb-color-bg)"},children:[e.jsx(R,{className:"w-9 h-9 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(R,{className:"h-3 w-20"}),e.jsx(R,{className:"h-5 w-48"})]})]},t))})]}),e.jsxs("div",{className:"rounded-2xl p-6",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsx(R,{className:"h-5 w-24 mb-4"}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl mb-4",style:{backgroundColor:"var(--bb-color-bg)"},children:[e.jsx(R,{className:"w-9 h-9 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(R,{className:"h-5 w-40"}),e.jsx(R,{className:"h-4 w-60"})]})]}),e.jsx(R,{className:"h-24 w-full rounded-xl"})]}),e.jsxs("div",{className:"rounded-2xl p-6 mt-6",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsx(R,{className:"h-5 w-32 mb-4"}),e.jsx(R,{className:"h-5 w-16 mb-3"}),e.jsx(R,{className:"h-10 w-full rounded-2xl mb-6"}),e.jsx(R,{className:"h-5 w-16 mb-3"}),e.jsx(R,{className:"h-10 w-full rounded-2xl"})]}),e.jsx(R,{className:"mt-6 w-full h-14 rounded-2xl"})]}),Vb=()=>{var g,h;const{t}=ce(),{user:r,isLoading:a}=ke(k=>k),{theme:s,setTheme:l}=Lr(),{language:o,setLanguage:i,languages:n}=St();if(a)return e.jsx(Ub,{});const[d,u]=c.useState(!1),[m,p]=c.useState(!1),[f,x]=c.useState({name:(r==null?void 0:r.name)||"",email:(r==null?void 0:r.email)||""}),b=async()=>{p(!0),await new Promise(k=>setTimeout(k,1e3)),p(!1),u(!1)};return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(W,{to:"/jornada",className:"p-2 rounded-xl hover:bg-[var(--bb-color-bg)] transition-colors",style:{color:"var(--bb-color-ink-muted)"},children:e.jsx(Ne,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-2xl font-bold",children:t("b2c.myAccount.title")})]}),e.jsx("div",{className:"rounded-2xl p-6 mb-8",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 rounded-2xl flex items-center justify-center text-white text-3xl font-bold",style:{background:"linear-gradient(135deg, var(--bb-color-accent), var(--bb-color-accent-dark, var(--bb-color-accent)))"},children:((h=(g=r==null?void 0:r.name)==null?void 0:g[0])==null?void 0:h.toUpperCase())||"U"}),e.jsx("button",{type:"button",className:"absolute -bottom-2 -right-2 p-2 rounded-xl shadow-lg",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},children:e.jsx(gt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-lg",style:{color:"var(--bb-color-ink)"},children:(r==null?void 0:r.name)||t("b2c.myAccount.user")}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:r==null?void 0:r.email})]})]})}),e.jsxs("div",{className:"rounded-2xl p-6 mb-8",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.myAccount.personalData")}),d?e.jsxs(Pe,{variant:"primary",size:"sm",onClick:b,disabled:m,children:[m?e.jsx(fe,{className:"w-4 h-4 animate-spin"}):e.jsx(Zr,{className:"w-4 h-4"}),t(m?"b2c.myAccount.saving":"b2c.myAccount.save")]}):e.jsx(Pe,{variant:"secondary",size:"sm",onClick:()=>u(!0),children:t("b2c.myAccount.edit")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl",style:{backgroundColor:"var(--bb-color-bg)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:e.jsx(ft,{className:"w-5 h-5",style:{color:"var(--bb-color-ink-muted)"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.myAccount.fullName")}),d?e.jsx("input",{type:"text",value:f.name,onChange:k=>x({...f,name:k.target.value}),className:"w-full bg-transparent font-medium outline-none",style:{color:"var(--bb-color-ink)"}}):e.jsx("p",{className:"font-medium",style:{color:"var(--bb-color-ink)"},children:(r==null?void 0:r.name)||"‚Äî"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl",style:{backgroundColor:"var(--bb-color-bg)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:e.jsx(zt,{className:"w-5 h-5",style:{color:"var(--bb-color-ink-muted)"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.myAccount.email")}),e.jsx("p",{className:"font-medium",style:{color:"var(--bb-color-ink)"},children:(r==null?void 0:r.email)||"‚Äî"})]})]})]})]}),e.jsxs("div",{className:"rounded-2xl p-6",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider mb-4",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.myAccount.security")}),e.jsxs("button",{type:"button",className:"w-full flex items-center gap-4 p-4 rounded-xl transition-colors",style:{backgroundColor:"var(--bb-color-bg)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:e.jsx(Uo,{className:"w-5 h-5",style:{color:"var(--bb-color-ink-muted)"}})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium",style:{color:"var(--bb-color-ink)"},children:t("b2c.myAccount.changePassword")}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.myAccount.changePasswordDesc")})]})]}),e.jsxs("div",{className:"mt-4 p-4 rounded-xl border border-dashed",style:{borderColor:"var(--bb-color-border)"},children:[e.jsx("p",{className:"text-sm font-medium mb-1",style:{color:"var(--bb-color-ink)"},children:t("b2c.myAccount.signOutAll")}),e.jsx("p",{className:"text-xs mb-3",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.myAccount.signOutAllDesc")}),e.jsx("button",{type:"button",className:"w-full py-2.5 rounded-xl font-medium transition-colors border",style:{borderColor:"var(--bb-color-danger)",color:"var(--bb-color-danger)"},onClick:async()=>{if(window.confirm(t("b2c.myAccount.signOutAllConfirm")))try{await re.post("/auth/logout/all"),window.location.href="/login"}catch{alert(t("b2c.myAccount.signOutAllError"))}},children:t("b2c.myAccount.signOutAllBtn")})]})]}),e.jsxs("div",{className:"rounded-2xl p-6 mt-6",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider mb-4",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.myAccount.preferences")}),e.jsx("p",{className:"text-sm mb-3",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.myAccount.theme")}),e.jsx("div",{className:"flex gap-2 p-1.5 rounded-2xl",style:{backgroundColor:"var(--bb-color-bg)",border:"1px solid var(--bb-color-border)"},children:[{value:"light",icon:aa,label:t("b2c.myAccount.themeLight")},{value:"dark",icon:Ua,label:t("b2c.myAccount.themeDark")},{value:"system",icon:ll,label:t("b2c.myAccount.themeSystem")}].map(k=>e.jsxs("button",{onClick:()=>l(k.value),className:"flex-1 py-2.5 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 font-semibold text-xs",style:{backgroundColor:s===k.value?"var(--bb-color-surface)":"transparent",color:s===k.value?"var(--bb-color-accent)":"var(--bb-color-ink-muted)",boxShadow:s===k.value?"0 1px 2px rgba(0,0,0,0.05)":"none"},children:[e.jsx(k.icon,{className:"w-4 h-4"}),e.jsx("span",{children:k.label})]},k.value))}),e.jsx("p",{className:"text-sm mb-3 mt-6",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.myAccount.language")}),e.jsx("div",{className:"flex gap-2 p-1.5 rounded-2xl",style:{backgroundColor:"var(--bb-color-bg)",border:"1px solid var(--bb-color-border)"},children:n.map(k=>e.jsxs("button",{onClick:()=>i(k.code),className:"flex-1 py-2.5 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 font-semibold text-xs",style:{backgroundColor:o===k.code?"var(--bb-color-surface)":"transparent",color:o===k.code?"var(--bb-color-accent)":"var(--bb-color-ink-muted)",boxShadow:o===k.code?"0 1px 2px rgba(0,0,0,0.05)":"none"},children:[e.jsx("span",{className:"text-sm",children:k.flag}),e.jsx("span",{children:k.name.split(" ")[0]})]},k.code))})]}),e.jsxs("button",{className:"mt-8 w-full py-4 flex items-center justify-center gap-2 rounded-2xl font-medium transition-opacity hover:opacity-80",style:{color:"var(--bb-color-danger, #ef4444)"},children:[e.jsx(kr,{className:"w-5 h-5"}),t("b2c.myAccount.signOut")]})]})};function Kb(){return e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(R,{className:"w-9 h-9 rounded-xl"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(R,{className:"h-7 w-40 rounded-lg mb-2"}),e.jsx(R,{className:"h-4 w-24 rounded"})]}),e.jsx(R,{className:"h-9 w-36 rounded-lg"})]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:Array.from({length:5}).map((t,r)=>e.jsxs("div",{className:"flex items-start gap-4 p-4",style:{borderBottom:r<4?"1px solid var(--bb-color-border)":"none"},children:[e.jsx(R,{className:"w-10 h-10 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx(R,{className:"h-4 w-3/4 rounded"}),e.jsx(R,{className:"h-3 w-16 rounded"})]}),e.jsx(R,{className:"h-3 w-full rounded mb-1"}),e.jsx(R,{className:"h-3 w-5/6 rounded"})]})]},r))}),e.jsx("div",{className:"mt-6 p-4 rounded-2xl",style:{backgroundColor:"var(--bb-color-bg)",border:"1px solid var(--bb-color-border)"},children:e.jsx(R,{className:"h-4 w-full rounded"})})]})}const Gb={milestone:pe,health:Oe,guestbook:jt,memory:rt,photo:gt,gift:Be,system:Ze,redemption:Be,credits:tt},Hb=()=>{const{t}=ce(),[r,a]=c.useState("all"),[s,l]=c.useState(!1),{notifications:o,unreadCount:i,markAsRead:n,markAllAsRead:d,isLoading:u}=Di(),[m,p]=c.useState([{id:"milestones",title:t("b2c.notifications.labels.milestones"),description:t("b2c.notifications.labels.milestonesDesc"),icon:pe,enabled:!0},{id:"appointments",title:t("b2c.notifications.labels.appointments"),description:t("b2c.notifications.labels.appointmentsDesc"),icon:Oe,enabled:!0},{id:"guestbook",title:t("b2c.notifications.labels.guestbook"),description:t("b2c.notifications.labels.guestbookDesc"),icon:jt,enabled:!0},{id:"memories",title:t("b2c.notifications.labels.memories"),description:t("b2c.notifications.labels.memoriesDesc"),icon:rt,enabled:!0},{id:"updates",title:t("b2c.notifications.labels.updates"),description:t("b2c.notifications.labels.updatesDesc"),icon:Ze,enabled:!1}]),f=b=>{p(g=>g.map(h=>h.id===b?{...h,enabled:!h.enabled}:h))},x=async()=>{l(!0),await new Promise(b=>setTimeout(b,500)),d(),l(!1)};return u?e.jsx(Kb,{}):e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(W,{to:"/jornada",className:"p-2 rounded-xl hover:bg-[var(--bb-color-bg)] transition-colors",style:{color:"var(--bb-color-ink-muted)"},children:e.jsx(Ne,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold",children:t("b2c.notifications.title")}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:i>0?t("b2c.notifications.unread",{count:i}):t("b2c.notifications.allClear")})]})]}),e.jsxs("div",{className:"flex gap-1 p-1 rounded-xl mb-8",style:{backgroundColor:"var(--bb-color-bg)",border:"1px solid var(--bb-color-border)"},children:[e.jsxs("button",{type:"button",onClick:()=>a("all"),className:D("flex-1 flex items-center justify-center gap-2 py-2.5 px-4 rounded-lg text-sm font-medium transition-all",r==="all"?"bg-[var(--bb-color-surface)] shadow-sm":"hover:bg-[var(--bb-color-surface)]/50"),style:{color:r==="all"?"var(--bb-color-ink)":"var(--bb-color-ink-muted)"},children:[e.jsx(Ze,{className:"w-4 h-4"}),t("b2c.notifications.history"),i>0&&e.jsx("span",{className:"px-1.5 py-0.5 rounded-full text-xs font-bold text-white",style:{backgroundColor:"var(--bb-color-accent)"},children:i})]}),e.jsxs("button",{type:"button",onClick:()=>a("settings"),className:D("flex-1 flex items-center justify-center gap-2 py-2.5 px-4 rounded-lg text-sm font-medium transition-all",r==="settings"?"bg-[var(--bb-color-surface)] shadow-sm":"hover:bg-[var(--bb-color-surface)]/50"),style:{color:r==="settings"?"var(--bb-color-ink)":"var(--bb-color-ink-muted)"},children:[e.jsx(Dr,{className:"w-4 h-4"}),t("b2c.notifications.preferences")]})]}),r==="all"?e.jsxs(e.Fragment,{children:[o.length>0&&i>0&&e.jsx("div",{className:"flex items-center justify-end mb-4",children:e.jsxs(Pe,{variant:"secondary",size:"sm",onClick:x,disabled:s,children:[s?e.jsx(fe,{className:"w-4 h-4 animate-spin"}):e.jsx(Yr,{className:"w-4 h-4"}),t("b2c.notifications.markAllAsRead")]})}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:o.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-5",children:[e.jsx("div",{className:"absolute inset-0 rounded-full animate-pulse",style:{background:"linear-gradient(135deg, var(--bb-color-accent-light, rgba(0,0,0,0.05)), var(--bb-color-accent-light, rgba(0,0,0,0.1)))"}}),e.jsx("div",{className:"absolute inset-2 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--bb-color-surface)"},children:e.jsx(Ze,{className:"w-8 h-8",style:{color:"var(--bb-color-ink-muted)"}})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 rounded-full animate-bounce",style:{backgroundColor:"var(--bb-color-accent)"}}),e.jsx("div",{className:"absolute top-1 -left-1 w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"var(--bb-color-accent)",animationDelay:"0.2s"}})]}),e.jsx("h3",{className:"text-base font-semibold mb-2",style:{color:"var(--bb-color-ink)"},children:t("b2c.notifications.emptyTitle")}),e.jsx("p",{className:"text-sm max-w-xs mx-auto",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.notifications.emptyDescription")})]}):e.jsx("div",{className:"divide-y divide-[var(--bb-color-border)]",children:o.map(b=>{const g=Gb[b.type];return e.jsxs("div",{className:D("flex items-start gap-4 p-4 transition-colors",b.unread?"bg-[var(--bb-color-accent)]/5 hover:bg-[var(--bb-color-accent)]/10":"hover:bg-[var(--bb-color-bg)]",b.link&&"cursor-pointer"),onClick:()=>{b.unread&&n(b.id)},children:[e.jsx("div",{className:D("w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",b.unread?"bg-[var(--bb-color-accent)]/10 text-[var(--bb-color-accent)]":"bg-[var(--bb-color-bg)] text-[var(--bb-color-ink-muted)]"),children:e.jsx(g,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:D("text-sm",b.unread?"font-semibold text-[var(--bb-color-ink)]":"font-medium text-[var(--bb-color-ink-muted)]"),children:b.title}),b.unread&&e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"var(--bb-color-accent)"}})]}),e.jsx("span",{className:"text-xs flex-shrink-0",style:{color:"var(--bb-color-ink-muted)"},children:b.time})]}),e.jsx("p",{className:"text-sm mt-0.5",style:{color:"var(--bb-color-ink-muted)"},children:b.description})]}),b.unread&&e.jsx("button",{onClick:h=>{h.stopPropagation(),n(b.id)},className:"p-1.5 rounded-lg transition-colors flex-shrink-0 hover:bg-[var(--bb-color-bg)]",style:{color:"var(--bb-color-ink-muted)"},title:t("b2c.notifications.markAsRead"),children:e.jsx(Re,{className:"w-4 h-4"})})]},b.id)})})}),e.jsx("div",{className:"mt-6 p-4 rounded-2xl",style:{backgroundColor:"var(--bb-color-accent)/5",border:"1px solid var(--bb-color-border)"},children:e.jsxs("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:[e.jsx("strong",{children:t("b2c.notifications.tipTitle")})," ",t("b2c.notifications.tipDescription")]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mb-4 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.notifications.preferencesDescription")}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:m.map((b,g)=>{const h=b.icon;return e.jsxs("div",{className:"flex items-center gap-4 p-4",style:{borderBottom:g<m.length-1?"1px solid var(--bb-color-border)":"none"},children:[e.jsx("div",{className:"p-2.5 rounded-xl",style:{backgroundColor:"var(--bb-color-bg)",color:b.enabled?"var(--bb-color-accent)":"var(--bb-color-ink-muted)"},children:e.jsx(h,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",style:{color:"var(--bb-color-ink)"},children:b.title}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:b.description})]}),e.jsx("button",{type:"button",onClick:()=>f(b.id),className:"relative w-12 h-7 rounded-full transition-colors",style:{backgroundColor:b.enabled?"var(--bb-color-accent)":"var(--bb-color-border)"},children:e.jsx("span",{className:"absolute top-1 w-5 h-5 rounded-full bg-white shadow-sm transition-transform",style:{left:b.enabled?"calc(100% - 24px)":"4px"}})})]},b.id)})}),e.jsx("div",{className:"mt-8 p-4 rounded-2xl",style:{backgroundColor:"var(--bb-color-bg)",border:"1px solid var(--bb-color-border)"},children:e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.notifications.pushTip")})})]})]})},Ls=()=>e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-2 rounded-xl",children:e.jsx(Ne,{className:"w-5 h-5",style:{color:"var(--bb-color-ink-muted)"}})}),e.jsx(R,{className:"h-8 w-48"})]}),e.jsx(R,{className:"h-4 w-full max-w-xl mb-6"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>e.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx(R,{className:"w-9 h-9 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(R,{className:"h-5 w-40"}),e.jsx(R,{className:"h-4 w-full"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{className:"h-8 w-24 rounded-xl"}),e.jsx(R,{className:"h-8 w-24 rounded-xl"})]})]},t))})]}),Wb=()=>{const{t}=ce(),[r,a]=c.useState(!0);c.useEffect(()=>{const n=setTimeout(()=>a(!1),800);return()=>clearTimeout(n)},[]);const[s,l]=c.useState({album_visibility:"guardians",guestbook:"moderated",share_default:"guardians"}),o=c.useMemo(()=>[{id:"album_visibility",title:t("b2c.privacy.albumVisibility"),description:t("b2c.privacy.albumVisibilityDesc"),icon:Ot,value:s.album_visibility,options:[{value:"private",label:t("b2c.privacy.options.onlyMe")},{value:"guardians",label:t("b2c.privacy.options.guardians")},{value:"link",label:t("b2c.privacy.options.anyoneLink")}]},{id:"guestbook",title:t("b2c.privacy.guestbook"),description:t("b2c.privacy.guestbookDesc"),icon:jt,value:s.guestbook,options:[{value:"closed",label:t("b2c.privacy.options.disabled")},{value:"moderated",label:t("b2c.privacy.options.withApproval")},{value:"open",label:t("b2c.privacy.options.openToGuests")}]},{id:"share_default",title:t("b2c.privacy.shareDefault"),description:t("b2c.privacy.shareDefaultDesc"),icon:sa,value:s.share_default,options:[{value:"private",label:t("b2c.privacy.options.private")},{value:"guardians",label:t("b2c.privacy.options.guardiansSimple")}]}],[t,s]),i=(n,d)=>{l(u=>({...u,[n]:d}))};return r?e.jsx(Ls,{}):e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(W,{to:"/jornada",className:"p-2 rounded-xl hover:bg-[var(--bb-color-bg)] transition-colors",style:{color:"var(--bb-color-ink-muted)"},children:e.jsx(Ne,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-2xl font-serif font-bold",style:{color:"var(--bb-color-ink)"},children:t("b2c.privacy.title")})]}),e.jsx("p",{className:"mb-6 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.privacy.description")}),e.jsx("div",{className:"space-y-4",children:o.map(n=>{const d=n.icon;return e.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:"var(--bb-color-bg)",color:"var(--bb-color-accent)"},children:e.jsx(d,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",style:{color:"var(--bb-color-ink)"},children:n.title}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:n.description})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.options.map(u=>e.jsx("button",{type:"button",onClick:()=>i(n.id,u.value),className:"px-4 py-2 rounded-xl text-sm font-medium transition-all",style:{backgroundColor:n.value===u.value?"var(--bb-color-accent)":"var(--bb-color-bg)",color:n.value===u.value?"white":"var(--bb-color-ink)",border:n.value===u.value?"1px solid transparent":"1px solid var(--bb-color-border)"},children:u.label},u.value))})]},n.id)})}),e.jsxs("div",{className:"mt-6 p-4 rounded-2xl flex items-start gap-3",style:{backgroundColor:"var(--bb-color-accent-light, rgba(0,0,0,0.03))",border:"1px solid var(--bb-color-border)"},children:[e.jsx(Nt,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:"var(--bb-color-accent)"}}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.privacy.securityInfo")})]}),e.jsxs("div",{className:"mt-6 rounded-2xl overflow-hidden",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsxs("button",{type:"button",className:"w-full p-4 flex items-center gap-4 transition-colors hover:bg-[var(--bb-color-bg)]",style:{borderBottom:"1px solid var(--bb-color-border)"},children:[e.jsx("div",{className:"p-2.5 rounded-xl",style:{backgroundColor:"var(--bb-color-bg)",color:"var(--bb-color-accent)"},children:e.jsx(oa,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium",style:{color:"var(--bb-color-ink)"},children:t("b2c.privacy.exportData")}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.privacy.exportDataDesc")})]})]}),e.jsxs("button",{type:"button",className:"w-full p-4 flex items-center gap-4 transition-colors hover:bg-[var(--bb-color-bg)]",children:[e.jsx("div",{className:"p-2.5 rounded-xl",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",color:"var(--bb-color-danger, #ef4444)"},children:e.jsx(ar,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium",style:{color:"var(--bb-color-danger, #ef4444)"},children:t("b2c.privacy.deleteAccount")}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-danger, #ef4444)",opacity:.8},children:t("b2c.privacy.deleteAccountDesc")})]})]})]})]})},Qb=()=>{const{t}=ce(),[r,a]=c.useState(!0),[s,l]=c.useState(null);c.useEffect(()=>{const i=setTimeout(()=>a(!1),800);return()=>clearTimeout(i)},[]);const o=c.useMemo(()=>[{id:"1",question:t("b2c.help.questions.addChild"),answer:t("b2c.help.questions.addChildAnswer")},{id:"2",question:t("b2c.help.questions.shareFamily"),answer:t("b2c.help.questions.shareFamilyAnswer")},{id:"3",question:t("b2c.help.questions.security"),answer:t("b2c.help.questions.securityAnswer")},{id:"4",question:t("b2c.help.questions.guestbook"),answer:t("b2c.help.questions.guestbookAnswer")},{id:"5",question:t("b2c.help.questions.export"),answer:t("b2c.help.questions.exportAnswer")}],[t]);return r?e.jsx(Ls,{}):e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(W,{to:"/jornada",className:"p-2 rounded-xl hover:bg-[var(--bb-color-bg)] transition-colors",style:{color:"var(--bb-color-ink-muted)"},children:e.jsx(Ne,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-2xl font-serif font-bold",style:{color:"var(--bb-color-ink)"},children:t("b2c.help.title")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-8",children:[e.jsxs("a",{href:"mailto:suporte@babybook.app",className:"flex flex-col items-center gap-2 p-4 rounded-2xl transition-colors",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsx(zt,{className:"w-6 h-6",style:{color:"var(--bb-color-accent)"}}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--bb-color-ink)"},children:t("b2c.help.email")})]}),e.jsxs("button",{type:"button",className:"flex flex-col items-center gap-2 p-4 rounded-2xl transition-colors",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsx(Mr,{className:"w-6 h-6",style:{color:"var(--bb-color-accent)"}}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--bb-color-ink)"},children:t("b2c.help.chat")})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(cl,{className:"w-5 h-5",style:{color:"var(--bb-color-accent)"}}),e.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.help.faq")})]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:o.map((i,n)=>e.jsxs("div",{style:{borderBottom:n<o.length-1?"1px solid var(--bb-color-border)":"none"},children:[e.jsxs("button",{type:"button",onClick:()=>l(s===i.id?null:i.id),className:"w-full flex items-center gap-4 p-4 text-left",children:[e.jsx("span",{className:"flex-1 font-medium",style:{color:"var(--bb-color-ink)"},children:i.question}),e.jsx(wr,{className:"w-5 h-5 transition-transform",style:{color:"var(--bb-color-ink-muted)",transform:s===i.id?"rotate(180deg)":"rotate(0)"}})]}),s===i.id&&e.jsx("div",{className:"px-4 pb-4",style:{color:"var(--bb-color-ink-muted)"},children:e.jsx("p",{className:"text-sm leading-relaxed",children:i.answer})})]},i.id))})]}),e.jsxs("div",{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"var(--bb-color-accent-light, rgba(0,0,0,0.03))",border:"1px solid var(--bb-color-border)"},children:[e.jsx(rt,{className:"w-6 h-6 mx-auto mb-2",style:{color:"var(--bb-color-accent)"}}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.help.footer")})]})]})},Yb=()=>{const{t}=ce(),[r,a]=c.useState(!0);c.useEffect(()=>{const l=setTimeout(()=>a(!1),800);return()=>clearTimeout(l)},[]);const s=c.useMemo(()=>[{id:"terms",title:t("b2c.terms.termsOfUse"),description:t("b2c.terms.termsOfUseDesc"),icon:Dt,lastUpdated:t("b2c.terms.updatedAt",{date:"01/12/2024"}),url:"/termos-de-uso"},{id:"privacy",title:t("b2c.terms.privacyPolicy"),description:t("b2c.terms.privacyPolicyDesc"),icon:Pr,lastUpdated:t("b2c.terms.updatedAt",{date:"01/12/2024"}),url:"/politica-de-privacidade"}],[t]);return r?e.jsx(Ls,{}):e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(W,{to:"/jornada",className:"p-2 rounded-xl hover:bg-[var(--bb-color-bg)] transition-colors",style:{color:"var(--bb-color-ink-muted)"},children:e.jsx(Ne,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-2xl font-serif font-bold",style:{color:"var(--bb-color-ink)"},children:t("b2c.terms.title")})]}),e.jsx("div",{className:"space-y-4",children:s.map(l=>{const o=l.icon;return e.jsxs("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 p-4 rounded-2xl transition-all hover:shadow-sm",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"var(--bb-color-bg)",color:"var(--bb-color-accent)"},children:e.jsx(o,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",style:{color:"var(--bb-color-ink)"},children:l.title}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:l.description}),e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--bb-color-ink-muted)"},children:l.lastUpdated})]}),e.jsx(Ho,{className:"w-5 h-5",style:{color:"var(--bb-color-ink-muted)"}})]},l.id)})}),e.jsxs("div",{className:"mt-8 p-4 rounded-2xl text-center",style:{backgroundColor:"var(--bb-color-bg)",border:"1px solid var(--bb-color-border)"},children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--bb-color-ink)"},children:"Baby Book"}),e.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--bb-color-ink-muted)"},children:[t("b2c.terms.version")," 1.0.0"]}),e.jsxs("p",{className:"text-xs mt-2",style:{color:"var(--bb-color-ink-muted)"},children:["¬© 2024 Baby Book. ",t("b2c.terms.rightsReserved")]})]}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 dark:bg-zinc-900 dark:border-zinc-800 space-y-8",children:e.jsxs("p",{className:"text-sm text-center",style:{color:"var(--bb-color-ink-muted)"},children:[t("b2c.terms.questions")," ",e.jsx("a",{href:"mailto:legal@babybook.app",className:"font-medium underline",style:{color:"var(--bb-color-accent)"},children:t("b2c.terms.contact")})]})})]})},Jb=()=>e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-2 rounded-xl",children:e.jsx(Ne,{className:"w-5 h-5",style:{color:"var(--bb-color-ink-muted)"}})}),e.jsx(R,{className:"h-8 w-40"})]}),e.jsx(R,{className:"h-4 w-full max-w-lg mb-6"}),e.jsxs("div",{className:"rounded-2xl p-4 mb-6",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(R,{className:"w-5 h-5 rounded"}),e.jsx(R,{className:"h-5 w-32"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(R,{className:"h-11 w-full rounded-xl"})})]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[1,2,3].map(t=>e.jsxs("div",{className:"p-4 flex items-center gap-4",style:{borderBottom:t<3?"1px solid var(--bb-color-border)":"none"},children:[e.jsx(R,{className:"w-12 h-12 rounded-full"}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsx(R,{className:"h-5 w-32"}),e.jsx(R,{className:"h-4 w-48"})]}),e.jsx(R,{className:"h-6 w-20 rounded-full"})]},t))}),e.jsxs("div",{className:"mt-6 p-4 rounded-2xl",style:{backgroundColor:"var(--bb-color-bg)",border:"1px solid var(--bb-color-border)"},children:[e.jsx(R,{className:"h-4 w-full mb-2"}),e.jsx(R,{className:"h-4 w-3/4 mb-2"}),e.jsx(R,{className:"h-4 w-1/2"})]})]}),Xb=[{id:"1",name:"Maria Silva",email:"maria@example.com",role:"owner",status:"active"},{id:"2",name:"Jo√£o Silva",email:"joao@example.com",role:"guardian",status:"active"},{id:"3",name:"Av√≥ Rosa",email:"rosa@example.com",role:"viewer",status:"pending"}],Zb=()=>{const{t}=ce(),r=Ae(),[a,s]=c.useState(""),[l,o]=c.useState(Xb),{selectedChild:i}=Xe(),{data:n=[]}=cs(i==null?void 0:i.id),{data:d,isLoading:u,error:m}=be({queryKey:tr.family,queryFn:$i,retry:1,staleTime:3e4});c.useEffect(()=>{d!=null&&d.members&&o(d.members)},[d]);const p=Se({mutationFn:h=>Ym({email:h,role:"viewer"}),onSuccess:h=>{o(k=>[...k,{...h,status:"pending"}]),s(""),r.invalidateQueries({queryKey:tr.family})},onError:()=>{const h={id:Date.now().toString(),name:a.split("@")[0],email:a,role:"viewer",status:"pending"};o(k=>[...k,h]),s("")}}),f=Se({mutationFn:Jm,onSuccess:(h,k)=>{o(v=>v.filter(y=>y.id!==k)),r.invalidateQueries({queryKey:tr.family})},onError:(h,k)=>{o(v=>v.filter(y=>y.id!==k))}}),x=()=>{a&&p.mutate(a)},b=h=>{f.mutate(h)};if(u)return e.jsx(Jb,{});const g=h=>({owner:{label:t("b2c.family.roles.owner"),bg:"var(--bb-color-accent-light, rgba(0,0,0,0.05))",color:"var(--bb-color-accent)"},guardian:{label:t("b2c.family.roles.guardian"),bg:"var(--bb-color-accent)",color:"white"},viewer:{label:t("b2c.family.roles.viewer"),bg:"var(--bb-color-bg)",color:"var(--bb-color-ink-muted)"}})[h];return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(W,{to:"/jornada",className:"p-2 rounded-xl hover:bg-[var(--bb-color-bg)] transition-colors",style:{color:"var(--bb-color-ink-muted)"},children:e.jsx(Ne,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-2xl font-serif font-bold",style:{color:"var(--bb-color-ink)"},children:t("b2c.family.title")})]}),e.jsx("p",{className:"mb-6 text-sm",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.family.description")}),m&&e.jsx("div",{className:"mb-6 rounded-2xl p-3 text-sm",style:{backgroundColor:"var(--bb-color-bg)",border:"1px solid var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},children:"N√£o foi poss√≠vel carregar os membros agora. Exibindo dados locais."}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"mb-2 flex items-end justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em]",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.guestbook.tree.hud.label")}),e.jsx("h2",{className:"mt-1 font-serif text-xl",style:{color:"var(--bb-color-ink)"},children:t("b2c.guestbook.title")})]}),e.jsx("div",{className:"flex flex-col items-end gap-2",children:i&&e.jsxs("div",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:[t("b2c.guestbook.tree.common.child"),":"," ",e.jsx("span",{style:{color:"var(--bb-color-ink)"},children:i.name})]})})]}),i?e.jsx(Hi,{childName:i.name,entries:n,variant:"hud"}):e.jsx("div",{className:"rounded-2xl border p-4 text-sm",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink-muted)"},children:t("b2c.guestbook.tree.selectChild")})]}),e.jsxs("div",{className:"rounded-2xl p-4 mb-6",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Er,{className:"w-5 h-5",style:{color:"var(--bb-color-accent)"}}),e.jsx("h3",{className:"font-semibold",style:{color:"var(--bb-color-ink)"},children:t("b2c.family.inviteTitle")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",style:{color:"var(--bb-color-ink-muted)"}}),e.jsx("input",{type:"email",value:a,onChange:h=>s(h.target.value),placeholder:t("b2c.family.invitePlaceholder"),className:"w-full pl-10 pr-4 py-2.5 border rounded-xl focus:ring-2 focus:outline-none",style:{backgroundColor:"var(--bb-color-bg)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"}})]}),e.jsx("button",{onClick:x,className:"px-4 py-2.5 rounded-xl font-medium transition-colors",style:{backgroundColor:"var(--bb-color-accent)",color:"white"},children:t("b2c.family.inviteSend")})]})]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:l.map((h,k)=>{const v=g(h.role);return e.jsxs("div",{className:"p-4 flex items-center gap-4",style:{borderBottom:k<l.length-1?"1px solid var(--bb-color-border)":"none"},children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold",style:{background:"linear-gradient(135deg, var(--bb-color-accent), var(--bb-color-accent-dark, var(--bb-color-accent)))"},children:h.name[0].toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium truncate",style:{color:"var(--bb-color-ink)"},children:h.name}),h.role==="owner"&&e.jsx(Wo,{className:"w-4 h-4",style:{color:"var(--bb-color-accent)"}})]}),e.jsx("p",{className:"text-sm truncate",style:{color:"var(--bb-color-ink-muted)"},children:h.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium",style:{backgroundColor:v.bg,color:v.color},children:v.label}),h.status==="pending"&&e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium",style:{backgroundColor:"var(--bb-color-accent-light, rgba(0,0,0,0.05))",color:"var(--bb-color-accent)"},children:t("b2c.family.pending")})]}),h.role!=="owner"&&e.jsx("button",{onClick:()=>b(h.id),className:"p-2 rounded-full transition-colors hover:bg-[var(--bb-color-bg)]",style:{color:"var(--bb-color-ink-muted)"},title:t("b2c.family.removeMember"),children:e.jsx(De,{className:"w-4 h-4"})})]},h.id)})}),e.jsx("div",{className:"mt-6 p-4 rounded-2xl",style:{backgroundColor:"var(--bb-color-bg)",border:"1px solid var(--bb-color-border)"},children:e.jsxs("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:[e.jsx("strong",{children:t("b2c.family.aboutPermissions")}),e.jsx("br",{}),"‚Ä¢ ",e.jsx("strong",{children:t("b2c.family.roles.owner")})," ",t("b2c.family.roles.ownerDesc"),e.jsx("br",{}),"‚Ä¢ ",e.jsx("strong",{children:t("b2c.family.roles.guardian")})," ",t("b2c.family.roles.guardianDesc"),e.jsx("br",{}),"‚Ä¢ ",e.jsx("strong",{children:t("b2c.family.roles.viewer")})," ",t("b2c.family.roles.viewerDesc")]})})]})},on=()=>e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-2 rounded-xl",children:e.jsx(Ne,{className:"w-5 h-5",style:{color:"var(--bb-color-ink-muted)"}})}),e.jsx(R,{className:"h-8 w-40"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-2xl p-6",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(R,{className:"w-12 h-12 rounded-xl"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"h-6 w-48"}),e.jsx(R,{className:"h-4 w-32"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(R,{className:"h-10 w-full rounded-xl"}),e.jsx(R,{className:"h-10 w-full rounded-xl"})]})]}),e.jsxs("div",{className:"rounded-2xl p-6",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsx(R,{className:"h-6 w-32 mb-4"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(R,{className:"h-4 w-40"}),e.jsx(R,{className:"h-3 w-56"})]}),e.jsx(R,{className:"w-10 h-6 rounded-full"})]},t))})]})]})]}),ep=()=>{const{t}=ce(),{data:r,isLoading:a}=be({queryKey:tr.subscription,queryFn:Xm,retry:1,staleTime:3e4});if(a)return e.jsx(on,{});const s=(r==null?void 0:r.plan_display_name)??"Plano Fam√≠lia",l=r!=null&&r.price_cents?(r.price_cents/100).toFixed(2).replace(".",","):"29,90",o=(r==null?void 0:r.features)??[t("b2c.subscription.features.storage"),t("b2c.subscription.features.family"),t("b2c.subscription.features.backup"),t("b2c.subscription.features.capsule"),t("b2c.subscription.features.export"),t("b2c.subscription.features.support")];return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(W,{to:"/jornada",className:"p-2 rounded-xl hover:bg-[var(--bb-color-bg)] transition-colors",style:{color:"var(--bb-color-ink-muted)"},children:e.jsx(Ne,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-2xl font-serif font-bold",style:{color:"var(--bb-color-ink)"},children:t("b2c.subscription.title")})]}),e.jsxs("div",{className:"rounded-2xl p-6 mb-6",style:{backgroundColor:"var(--bb-color-accent-light, rgba(0,0,0,0.03))",border:"2px solid var(--bb-color-accent)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Wo,{className:"w-5 h-5",style:{color:"var(--bb-color-accent)"}}),e.jsx("span",{className:"text-sm font-semibold uppercase tracking-wide",style:{color:"var(--bb-color-accent)"},children:t("b2c.subscription.currentPlan")})]}),e.jsx("h3",{className:"text-2xl font-serif font-bold mb-1",style:{color:"var(--bb-color-ink)"},children:a?e.jsx(fe,{className:"w-5 h-5 animate-spin"}):s}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-4 h-4",style:{color:"var(--bb-color-ink-muted)"}}),e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--bb-color-ink)"},children:t("b2c.subscription.pricePerMonth",{price:l})})]}),e.jsx("span",{style:{color:"var(--bb-color-ink-muted)"},children:"‚Ä¢"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4",style:{color:"var(--bb-color-ink-muted)"}}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.subscription.renewalOn",{date:"15 de Fevereiro"})})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"px-4 py-2 rounded-xl font-medium border transition-colors hover:bg-[var(--bb-color-bg)]",style:{backgroundColor:"var(--bb-color-surface)",borderColor:"var(--bb-color-border)",color:"var(--bb-color-ink)"},children:t("b2c.subscription.changePlan")}),e.jsx("button",{className:"px-4 py-2 font-medium transition-opacity hover:opacity-80",style:{color:"var(--bb-color-danger, #ef4444)"},children:t("b2c.subscription.cancel")})]})]}),e.jsxs("div",{className:"rounded-2xl p-4 mb-6",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsx("h4",{className:"font-semibold mb-4",style:{color:"var(--bb-color-ink)"},children:t("b2c.subscription.included")}),e.jsx("ul",{className:"space-y-3",children:o.map((i,n)=>e.jsxs("li",{className:"flex items-center gap-3",style:{color:"var(--bb-color-ink-muted)"},children:[e.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"var(--bb-color-accent-light, rgba(0,0,0,0.05))"},children:e.jsx(Re,{className:"w-3.5 h-3.5",style:{color:"var(--bb-color-accent)"}})}),e.jsx("span",{className:"text-sm",children:i})]},n))})]}),e.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bb-color-bg)",border:"1px solid var(--bb-color-border)"},children:[e.jsx("h4",{className:"font-semibold mb-2",style:{color:"var(--bb-color-ink)"},children:t("b2c.subscription.paymentMethod")}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-8 rounded flex items-center justify-center",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:e.jsx(tt,{className:"w-5 h-5",style:{color:"var(--bb-color-ink-muted)"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--bb-color-ink)"},children:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 4242"}),e.jsx("p",{className:"text-xs",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.subscription.cardEnding",{expiry:"12/2025"})})]})]}),e.jsx("button",{className:"mt-3 text-sm font-medium transition-opacity hover:opacity-80",style:{color:"var(--bb-color-accent)"},children:t("b2c.subscription.updatePayment")})]})]})},tp=()=>{const{t}=ce(),{data:r,isLoading:a}=be({queryKey:tr.storage,queryFn:Zm,retry:1,staleTime:3e4});if(a)return e.jsx(on,{});const s=m=>(m/(1024*1024*1024)).toFixed(1),l=r?s(r.bytes_used):"2.3",o=r!=null&&r.is_unlimited?t("b2c.storage.unlimited"):r?s(r.bytes_quota)+" GB":t("b2c.storage.unlimited"),i=r&&!r.is_unlimited&&r.bytes_quota>0?Math.min(100,r.bytes_used/r.bytes_quota*100):23,n=(r==null?void 0:r.photos_count)??156,d=(r==null?void 0:r.videos_count)??12,u=(r==null?void 0:r.audios_count)??8;return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(W,{to:"/jornada",className:"p-2 rounded-xl hover:bg-[var(--bb-color-bg)] transition-colors",style:{color:"var(--bb-color-ink-muted)"},children:e.jsx(Ne,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-2xl font-serif font-bold",style:{color:"var(--bb-color-ink)"},children:t("b2c.storage.title")})]}),e.jsxs("div",{className:"rounded-2xl p-6 mb-6",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ya,{className:"w-5 h-5",style:{color:"var(--bb-color-accent)"}}),e.jsx("h3",{className:"font-semibold",style:{color:"var(--bb-color-ink)"},children:t("b2c.storage.usedSpace")})]}),e.jsxs("div",{className:"flex justify-between items-baseline mb-3",children:[e.jsxs("span",{className:"text-2xl font-bold",style:{color:"var(--bb-color-ink)"},children:[l," GB"]}),e.jsx("span",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.storage.usedOfTotal",{total:o})})]}),e.jsx("div",{className:"h-3 rounded-full overflow-hidden",style:{backgroundColor:"var(--bb-color-bg)"},children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{backgroundColor:"var(--bb-color-accent)",width:`${i}%`}})})]}),e.jsxs("div",{className:"rounded-2xl p-4 mb-6",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsx("h4",{className:"font-semibold mb-4",style:{color:"var(--bb-color-ink)"},children:t("b2c.storage.statsByType")}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{icon:Ge,value:n.toString(),label:t("b2c.storage.photos"),color:"var(--bb-color-accent)"},{icon:Za,value:d.toString(),label:t("b2c.storage.videos"),color:"var(--bb-color-accent)"},{icon:Ma,value:u.toString(),label:t("b2c.storage.audios"),color:"var(--bb-color-accent)"}].map((m,p)=>{const f=m.icon;return e.jsxs("div",{className:"text-center p-3 rounded-xl",style:{backgroundColor:"var(--bb-color-bg)"},children:[e.jsx(f,{className:"w-6 h-6 mx-auto mb-2",style:{color:m.color}}),e.jsx("p",{className:"text-2xl font-bold",style:{color:"var(--bb-color-ink)"},children:m.value}),e.jsx("p",{className:"text-xs",style:{color:"var(--bb-color-ink-muted)"},children:m.label})]},p)})})]}),e.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bb-color-surface)",border:"1px solid var(--bb-color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--bb-color-accent-light, rgba(0,0,0,0.05))"},children:e.jsx(Re,{className:"w-5 h-5",style:{color:"var(--bb-color-accent)"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",style:{color:"var(--bb-color-ink)"},children:t("b2c.storage.backupActive")}),e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},children:t("b2c.storage.lastBackup",{time:"2 horas"})})]})]}),e.jsxs("button",{className:"w-full py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition-opacity hover:opacity-90",style:{backgroundColor:"var(--bb-color-accent)",color:"white"},children:[e.jsx(qo,{className:"w-5 h-5"}),t("b2c.storage.backupNow")]})]}),e.jsx("div",{className:"mt-6 p-4 rounded-2xl",style:{backgroundColor:"var(--bb-color-bg)",border:"1px solid var(--bb-color-border)"},children:e.jsx("p",{className:"text-sm",style:{color:"var(--bb-color-ink-muted)"},dangerouslySetInnerHTML:{__html:t("b2c.storage.tip")}})})]})};function rp(){const t=ht();return c.useEffect(()=>{Lc(t.search)},[t.search]),null}function ap(){return e.jsx(lt,{to:"/jornada",replace:!0})}function sp(){const{id:t}=Ct();return e.jsx(lt,{to:t?`/jornada/moment/${t}`:"/jornada",replace:!0})}function op(){return e.jsx(lt,{to:"/jornada",replace:!0})}function ip(){const t=ht(),r="all".toLowerCase(),a=t.pathname.startsWith("/partner")||t.pathname.startsWith("/pro");return r==="partner"&&!a?e.jsx(lt,{to:"/partner",replace:!0}):r==="b2c"&&a?e.jsx(lt,{to:"/jornada",replace:!0}):null}function np(){return e.jsxs(vn,{future:{v7_relativeSplatPath:!0},children:[e.jsx(rp,{}),e.jsx(ip,{}),e.jsxs(yn,{children:[e.jsxs(le,{element:e.jsx(Ws,{children:e.jsx(_d,{})}),children:[e.jsx(le,{path:"/jornada",element:e.jsx(eu,{})}),e.jsx(le,{path:"/dashboard",element:e.jsx(lt,{to:"/jornada",replace:!0})}),e.jsx(le,{path:"/momentos",element:e.jsx(ap,{})}),e.jsx(le,{path:"/momentos/:id",element:e.jsx(sp,{})}),e.jsx(le,{path:"/capsula",element:e.jsx(su,{})}),e.jsx(le,{path:"/cofre",element:e.jsx(hu,{})}),e.jsx(le,{path:"/perfil-usuario",element:e.jsx(yu,{})}),e.jsx(le,{path:"/perfil",element:e.jsx(lt,{to:"/perfil-usuario",replace:!0})}),e.jsx(le,{path:"/jornada/moment/draft/:template_id",element:e.jsx(jx,{})}),e.jsx(le,{path:"/jornada/moment/:id",element:e.jsx(au,{})}),e.jsx(le,{path:"/jornada/moment/avulso",element:e.jsx(kx,{})}),e.jsx(le,{path:"/app/novo-momento",element:e.jsx(Bb,{})}),e.jsx(le,{path:"/jornada/capitulos/:chapterId",element:e.jsx(op,{})}),e.jsx(le,{path:"/saude",element:e.jsx(Eu,{})}),e.jsx(le,{path:"/visitas",element:e.jsx(Ku,{})}),e.jsx(le,{path:"/jornada/perfil-crianca",element:e.jsx(Gu,{})}),e.jsx(le,{path:"/jornada/importar-entrega/:deliveryId",element:e.jsx(zb,{})}),e.jsx(le,{path:"/jornada/minha-conta",element:e.jsx(Vb,{})}),e.jsx(le,{path:"/jornada/notificacoes",element:e.jsx(Hb,{})}),e.jsx(le,{path:"/jornada/privacidade",element:e.jsx(Wb,{})}),e.jsx(le,{path:"/jornada/familia",element:e.jsx(Zb,{})}),e.jsx(le,{path:"/jornada/assinatura",element:e.jsx(ep,{})}),e.jsx(le,{path:"/jornada/armazenamento",element:e.jsx(tp,{})}),e.jsx(le,{path:"/jornada/ajuda",element:e.jsx(Qb,{})}),e.jsx(le,{path:"/jornada/termos",element:e.jsx(Yb,{})})]}),e.jsx(le,{path:"/",element:e.jsx(lt,{to:"/jornada",replace:!0})}),e.jsx(le,{path:"/login",element:e.jsx(nm,{})}),e.jsx(le,{path:"/register",element:e.jsx(lm,{})}),e.jsx(le,{path:"/checkout",element:e.jsx(dm,{})}),e.jsx(le,{path:"/checkout/success",element:e.jsx(xm,{})}),e.jsx(le,{path:"/forgot-password",element:e.jsx(bm,{})}),e.jsx(le,{path:"/voucher/redeem/:code",element:e.jsx(fr,{})}),e.jsx(le,{path:"/resgatar",element:e.jsx(fr,{})}),e.jsx(le,{path:"/resgatar/:code",element:e.jsx(fr,{})}),e.jsx(le,{path:"/resgate",element:e.jsx(fr,{})}),e.jsx(le,{path:"/resgate/:code",element:e.jsx(fr,{})}),e.jsx(le,{path:"/share/:token",element:e.jsx(Ob,{})}),e.jsx(le,{path:"/guestbook/:token",element:e.jsx($b,{})}),e.jsx(le,{path:"/app/onboarding",element:e.jsx(Ws,{children:e.jsx(Tb,{})})}),e.jsx(le,{path:"/pro/login",element:e.jsx(jb,{})}),e.jsx(le,{path:"/pro/register",element:e.jsx(kb,{})}),e.jsxs(le,{element:e.jsx(am,{children:e.jsx(Zd,{})}),children:[e.jsx(le,{path:"/partner",element:e.jsx(Fx,{})}),e.jsx(le,{path:"/partner/credits",element:e.jsx($x,{})}),e.jsx(le,{path:"/partner/credits/extract",element:e.jsx(Mb,{})}),e.jsx(le,{path:"/partner/settings",element:e.jsx(Sb,{})}),e.jsx(le,{path:"/partner/notifications",element:e.jsx(Eb,{})}),e.jsx(le,{path:"/partner/deliveries",element:e.jsx(vb,{})}),e.jsx(le,{path:"/partner/deliveries/new",element:e.jsx(Jx,{})}),e.jsx(le,{path:"/partner/deliveries/:deliveryId",element:e.jsx(ib,{})}),e.jsx(le,{path:"/partner/deliveries/:deliveryId/upload",element:e.jsx(_b,{})})]}),e.jsx(le,{path:"*",element:e.jsx(lt,{to:"/jornada",replace:!0})})]})]})}class lp extends c.Component{constructor(a){super(a);He(this,"autoReloadTimeoutId",null);He(this,"performReload",()=>{"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(a=>{a.forEach(s=>s.unregister())}),"caches"in window&&caches.keys().then(a=>{a.forEach(s=>caches.delete(s))}),window.location.reload()});He(this,"handleReload",()=>{this.performReload()});He(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,isAutoReloading:!1})});this.state={hasError:!1,error:null,isAutoReloading:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,s){console.error("ErrorBoundary caught an error:",a,s)}componentWillUnmount(){this.autoReloadTimeoutId&&clearTimeout(this.autoReloadTimeoutId)}render(){return this.state.hasError?this.state.isAutoReloading?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-3 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("svg",{className:"w-5 h-5 animate-spin text-pink-500",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Atualizando..."})]})})}):this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Ops! Algo deu errado"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Ocorreu um erro inesperado. Por favor, tente novamente."}),!1,e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:this.handleRetry,className:"px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Tentar novamente"}),e.jsx("button",{onClick:this.handleReload,className:"px-4 py-2 rounded-lg bg-pink-500 text-white hover:bg-pink-600 transition-colors",children:"Recarregar p√°gina"})]})]})}):this.props.children}}function cp(){try{const t=Si(window.location.pathname),r=localStorage.getItem(t),a=r==="light"||r==="dark"||r==="system"?r:"system";let s=a;a==="system"&&(s=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),s==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}catch{}}cp();const dp=!1;function Ao(t){if(t instanceof TypeError)return!0;if(t&&typeof t=="object"&&"status"in t){const r=t.status;if(r>=400&&r<500)return!1;if(r>=500||r===0)return!0}return dp}function Do(t){const s=100*Math.pow(2,t),l=.75+Math.random()*.5;return Math.min(s*l,5e3)}const mp=new gn({defaultOptions:{queries:{staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:(t,r)=>t>=3?!1:Ao(r),retryDelay:Do},mutations:{retry:(t,r)=>t>=2?!1:Ao(r),retryDelay:Do}}}),up=({children:t})=>{const{data:r,isLoading:a,isError:s}=Ni(),l=ke(n=>n.login),o=ke(n=>n.logout),i=ke(n=>n.setLoading);return c.useEffect(()=>{i(a)},[a,i]),c.useEffect(()=>{r&&l(r)},[r,l]),c.useEffect(()=>{s&&o()},[s,o]),e.jsx(e.Fragment,{children:t})};async function xp(){bn.createRoot(document.getElementById("root")).render(e.jsxs(Qe.StrictMode,{children:[e.jsx(lp,{children:e.jsx(Kl,{children:e.jsx(fn,{client:mp,children:e.jsx(Cd,{children:e.jsx(up,{children:e.jsx(np,{})})})})})}),e.jsx(pn,{position:"top-right",expand:!1,richColors:!0,closeButton:!0,toastOptions:{classNames:{toast:"font-sans"}}})]}))}xp();

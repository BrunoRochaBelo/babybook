# Environment
ENV=local
INLINE_WORKER_ENABLED=true
RATE_LIMIT_ENABLED=false

# Database
POSTGRES_USER=babybook
POSTGRES_PASSWORD=change_me
POSTGRES_DB=babybook_dev
DATABASE_URL=postgresql+asyncpg://babybook:change_me@localhost:5432/babybook_dev

# Storage (MinIO)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_REGION=us-east-1
MINIO_ENDPOINT=http://localhost:9000
STORAGE_ENDPOINT_URL=http://localhost:9000
STORAGE_ACCESS_KEY=minioadmin
STORAGE_SECRET_KEY=minioadmin

# API
API_DEBUG=true
SECRET_KEY=dev-secret-key
SERVICE_API_TOKEN=service-token
BILLING_WEBHOOK_SECRET=billing-secret

# URLs/segurança (API)
# Em staging/prod: usar https e SESSION_COOKIE_SECURE=true.
FRONTEND_URL=http://localhost:5173
PUBLIC_BASE_URL=https://share.babybook.dev
UPLOAD_URL_BASE=https://uploads.dev.babybook
SESSION_COOKIE_SECURE=false

# Auth (dev/E2E)
# Permite fallback via header `X-BB-Session` quando cookies não são enviados.
# Recomendação: manter false em staging/prod.
ALLOW_HEADER_SESSION_AUTH=false

# Guardrail: se você realmente precisar ligar o fallback em staging/prod,
# exija um ACK explícito.
ALLOW_HEADER_SESSION_AUTH_ACK=false

# CORS/Host/Proxy hardening
# Listas devem estar em formato JSON.
CORS_ORIGINS=["http://localhost:5173"]
ALLOWED_HOSTS=["*"]
TRUSTED_PROXY_IPS=[]
API_BASE_URL=http://localhost:8000

# Workers
FFMPEG_PATH=/usr/bin/ffmpeg
FFPROBE_PATH=/usr/bin/ffprobe
WORKER_TMP_DIR=.tmp/workers
STORAGE_BUCKET_UPLOADS=babybook-uploads
STORAGE_BUCKET_DERIVATIVES=babybook-media
STORAGE_BUCKET_EXPORTS=babybook-exports
WORKER_API_BASE_URL=${API_BASE_URL}

# Web
VITE_API_BASE_URL=http://localhost:8000
VITE_UPLOAD_CHUNK_SIZE=5242880
VITE_ENABLE_MSW=false
VITE_MEDIA_BASE_URL=http://localhost:9000

# Dev/E2E: habilita fallback via header `X-BB-Session` no frontend.
# Recomendação: manter false em produção.
VITE_ALLOW_HEADER_SESSION_AUTH=false

# Guardrail (frontend): em build PROD, só liga `VITE_ALLOW_HEADER_SESSION_AUTH`
# se este ACK estiver true.
VITE_ALLOW_HEADER_SESSION_AUTH_ACK=false

# Edge
EDGE_PUBLIC_URL=http://localhost:8787

# Admin
ADMIN_DATABASE_URL=${DATABASE_URL}
